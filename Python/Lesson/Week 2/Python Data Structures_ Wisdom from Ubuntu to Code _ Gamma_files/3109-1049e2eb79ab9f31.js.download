"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3109],{5747:(e,t,i)=>{i.d(t,{D:()=>G});var n=i(6029),r=i(12326),a=i(26385),s=i(23293),l=i(29810),o=i(40452),d=i(49611),c=i(77364),u=i(26420),m=i(61204),h=i(16936),x=i(17496),g=i(40162),p=i(4192),j=i(38036),v=i(99492),f=i(48621),b=i(91106),w=i(19564),y=i(77650),S=i(55729),C=i(75178),I=i(68301),k=i(5061),E=i(95563),R=i(20751),A=i(22249),_=i(15342),T=i(92699),P=i(7554),z=i(82927),V=i(11403);let L={dark:{label:(0,n.jsx)(w.x6,{id:"+b0Wxk"})},light:{label:(0,n.jsx)(w.x6,{id:"kAFlqg"})},professional:{label:(0,n.jsx)(w.x6,{id:"wk3x7P"})},colorful:{label:(0,n.jsx)(w.x6,{id:"iqiUCj"})}},G=(0,S.memo)(e=>{let{title:t,description:i,closePanel:G,stackProps:M,currentTheme:D,showCreateButtons:W=!0,usePanelHeading:O=!1}=e,N=(0,k.fW)(),B=(0,_.jL)(),U=(0,_.GV)(P.yD),F=(0,_.GV)(P.r8),q=(0,S.useRef)(null),{currentWorkspace:H}=(0,z.ur)(),[J,K]=(0,S.useState)(""),X=(0,_.GV)(P.cE),$=(0,_.GV)((0,A.lp)("right")),Q=(0,R.S)($),Z=(0,S.useCallback)(()=>{B((0,P.U7)({activeView:"search"})),setTimeout(()=>{var e;null==(e=q.current)||e.focus()},200)},[B]),Y=(0,S.useCallback)(e=>{B((0,P.Ri)({searchQuery:e}))},[B]),ee=(0,V.lW)(Y,500),et=(0,S.useCallback)(e=>{K(e),ee(e)},[ee]),ei=(0,S.useCallback)(e=>{let t=[...F];F.includes(e)?t=t.filter(t=>t!==e):t.push(e),B((0,P.d2)({filterKeywords:t}))},[F,B]);(0,V.Vg)(()=>{"search"!==U&&(D&&D.workspaceId===(null==H?void 0:H.id)?B((0,P.U7)({activeView:"custom"})):B((0,P.U7)({activeView:"standard"})))},[B,D,U,H],[D]);let en=(0,S.useCallback)(()=>{(0,T._E)()},[]);(0,S.useEffect)(()=>()=>{B((0,P.mL)())},[B]);let er=(0,I.u)("themeImportAi"),ea={base:"column",sm:"column",md:"row",lg:"row"};return(0,n.jsxs)(a.B,{spacing:4,...M,children:[(0,n.jsxs)(a.B,{spacing:4,children:[(0,n.jsxs)(a.B,{spacing:4,children:[(0,n.jsxs)(a.B,{direction:Q?ea[Q]:ea.sm,width:"100%",paddingInlineEnd:G?8:void 0,children:[O?(0,n.jsx)(E.N,{children:t}):(0,n.jsx)(s.D,{size:"md",children:t}),(0,n.jsx)(l.h,{}),(0,n.jsxs)(o.s,{gap:2,children:[H&&W&&(0,n.jsx)(b.Tz,{label:(0,n.jsx)(w.x6,{id:"LPcaN9"}),placement:"top",children:(0,n.jsx)(d.$,{size:"sm",variant:"plain",shadow:"none",leftIcon:(0,n.jsx)(f.g,{icon:v.QLR}),onClick:en,"data-testid":"new-theme-button",children:(0,n.jsx)(w.x6,{id:"FiwgR9"})})}),er&&W&&(0,n.jsx)(b.Tz,{label:(0,n.jsx)(w.x6,{id:"OPW4Wb"}),placement:"top",children:(0,n.jsx)(d.$,{size:"sm",boxShadow:"none",variant:"plain",leftIcon:(0,n.jsx)(f.g,{icon:v.$MS}),onClick:T.yJ,children:(0,n.jsx)(w.x6,{id:"l3s5ri"})})})]}),G&&(0,n.jsx)(c.J,{position:"absolute",top:2,right:N?void 0:2,left:N?2:void 0,onClick:G})]}),i?(0,n.jsx)(u.a,{children:i}):(0,n.jsx)(n.Fragment,{})]}),X&&(0,n.jsxs)(m.e,{variant:"ghost",size:"sm",borderRadius:"full",w:"100%",children:[(0,n.jsx)(d.$,{borderRadius:"md",w:"50%",leftIcon:(0,n.jsx)(f.g,{icon:v.ffg,fixedWidth:!0}),"data-theme-picker-active-view-button":"custom",colorScheme:"custom"===U?void 0:"gray",bg:"custom"===U?"trueblue.50":"transparent",color:"custom"===U?"trueblue.500":"gray.600",onClick:()=>B((0,P.U7)({activeView:"custom"})),children:(0,n.jsx)(w.x6,{id:"8Tg/JR"})}),(0,n.jsx)(d.$,{borderRadius:"md",w:"50%",leftIcon:(0,n.jsx)(u.a,{w:3.5,children:(0,n.jsx)(C.T,{})}),"data-theme-picker-active-view-button":"standard",colorScheme:"standard"===U?void 0:"gray",bg:"standard"===U?"trueblue.50":"transparent",color:"standard"===U?"trueblue.500":"gray.600",onClick:()=>B((0,P.U7)({activeView:"standard"})),children:(0,n.jsx)(w.x6,{id:"TJBHlP"})}),(0,n.jsx)(h.K,{icon:(0,n.jsx)(r.Q,{}),isRound:!0,"data-theme-picker-active-view-button":"search","aria-label":y.Ru._({id:"A1taO8"}),variant:"ghost",colorScheme:"search"===U?void 0:"gray",bg:"search"===U?"trueblue.100":"gray.50",onClick:Z})]})]}),(0,n.jsx)(x.S,{in:"standard"===U,children:(0,n.jsxs)(a.B,{direction:"row",children:[(0,n.jsx)(g.B,{children:Object.entries(L).map(e=>{let[t,{label:i}]=e,r=F.includes(t);return(0,n.jsx)(p.vw,{size:"md",letterSpacing:"normal",cursor:"pointer",onClick:()=>{ei(t)},_hover:{bgColor:r?"trueblue.200":"blackAlpha.200"},colorScheme:r?"trueblue":"blackAlpha",children:i},t)})}),!X&&(0,n.jsx)(h.K,{icon:(0,n.jsx)(r.Q,{}),borderRadius:"md",variant:"ghost",size:"xs","data-theme-picker-active-view-button":"search","aria-label":y.Ru._({id:"A1taO8"}),colorScheme:"search"===U?void 0:"blackAlpha",bg:"search"===U?"trueblue.100":"blackAlpha.100",_hover:{bgColor:"search"===U?"trueblue.200":"blackAlpha.200"},onClick:Z})]})}),(0,n.jsx)(x.S,{in:"search"===U,children:(0,n.jsxs)(a.B,{direction:"row",children:[!X&&(0,n.jsx)(h.K,{variant:"ghost",icon:(0,n.jsx)(f.g,{icon:v.Wzs,fixedWidth:!0}),onClick:()=>B((0,P.U7)({activeView:"standard"})),"aria-label":y.Ru._({id:"iH8pgl"})}),(0,n.jsx)(j.p,{ref:q,w:"100%",mb:1,placeholder:y.Ru._({id:"L0fOnm"}),value:J,onChange:e=>{et(e.target.value)}})]})})]})});G.displayName="ThemePickerHeader"},6295:(e,t,i)=>{i.d(t,{Kj:()=>E,NV:()=>k,Zy:()=>A,cm:()=>R});var n=i(6029),r=i(26385),a=i(26420),s=i(48810),l=i(49611),o=i(99492),d=i(48621),c=i(19564),u=i(55729),m=i(83370),h=i(98841),x=i(26814),g=i(80219),p=i(99038),j=i(89528),v=i(84287),f=i(15342),b=i(95889),w=i(70557),y=i(3487),S=i(51022);let C={info:{bgColor:"trueblue.100",strongColor:"trueblue.500"},warning:{bgColor:"orange.100",strongColor:"orange.700"},error:{bgColor:"red.100",strongColor:"red.500"}},I=e=>{let{productBadgeLabel:t,title:i,subtitle:c,onClick:u,cta:m,status:h="warning"}=e,{bgColor:x,strongColor:g}=C[h];return(0,n.jsxs)(r.B,{borderRadius:"md",bg:x,px:{base:2,md:3},ps:4,py:2,direction:{base:"column",sm:"row"},alignItems:"center",justifyContent:"space-between",w:"100%",children:[(0,n.jsxs)(r.B,{direction:"row",alignItems:"center",gap:2,flex:"1",children:[t?(0,n.jsx)(j.zL,{product:t}):(0,n.jsx)(a.a,{color:g,display:{base:"none",sm:"block"},children:(0,n.jsx)(d.g,{icon:o.ijf})}),(0,n.jsxs)(s.E,{fontSize:{base:"xs",sm:"sm"},lineHeight:"1.3",flex:"1",children:[(0,n.jsx)(s.E,{color:g,as:"strong",children:i})," ",c]})]}),m&&u&&(0,n.jsx)(l.$,{onClick:u,variant:"outline",bg:"white",size:{base:"xs",sm:"sm"},p:3,children:m})]})},k=(0,u.memo)(()=>{let{hasEnoughCreditsToGenerateDeck:e,lowCreditStatus:t}=(0,x.B9)(),{openUpsellModal:i}=(0,v.I)();return e&&!t?null:t===g.y.LOW?(0,n.jsx)(I,{status:"warning",onClick:()=>i({segmentEvent:b.VV.GAMMA_UPSELL_CALLOUT_AI_CREDITS_GENERATE_V2}),title:(0,n.jsx)(c.x6,{id:"CTJW4r"}),subtitle:(0,n.jsx)(c.x6,{id:"XflhAn"}),cta:(0,n.jsx)(c.x6,{id:"y7e9aS"})}):(0,n.jsx)(I,{status:"error",onClick:()=>i({segmentEvent:b.VV.GAMMA_UPSELL_CALLOUT_AI_CREDITS_GENERATE_V2}),title:(0,n.jsx)(c.x6,{id:"caCGZW"}),subtitle:(0,n.jsx)(c.x6,{id:"XflhAn"}),cta:(0,n.jsx)(c.x6,{id:"y7e9aS"})})});k.displayName="NotEnoughCreditsUpsellWarning";let E=(0,u.memo)(()=>{let e=(0,f.GV)(m.J$),{maxTokens:t,canUpgrade:i}=(0,S.is)(),{openUpsellModal:r}=(0,v.I)();return!e||e<t?null:e>=t&&i?(0,n.jsx)(I,{status:"warning",productBadgeLabel:"pro",onClick:()=>r({segmentEvent:b.VV.GAMMA_UPSELL_CALLOUT_AI_GENERATE_MORE_TOKENS}),title:(0,n.jsx)(c.x6,{id:"265FwR"}),subtitle:(0,n.jsx)(c.x6,{id:"kaOsNu",values:{0:S.yI.toLocaleString()}}),cta:(0,n.jsx)(c.x6,{id:"kwkhPe"})}):(0,n.jsx)(I,{status:"warning",title:(0,n.jsx)(c.x6,{id:"mWVxkj"}),subtitle:(0,n.jsx)(c.x6,{id:"qTSTz6",values:{0:S.yI.toLocaleString()}})})});E.displayName="MaxTokensUpsellWarning";let R=(0,u.memo)(e=>{let{maxSlides:t,numSlides:i}=e;return!i||i<t?null:(0,n.jsx)(I,{status:"warning",title:(0,n.jsx)(c.x6,{id:"PbeHU2",values:{MAX_IMPORT_SLIDES:h.O}})})});R.displayName="MaxImportSlidesWarning";let A=(0,u.memo)(()=>{let e=(0,f.GV)(m.yR),[t]=(0,w.R7)("editorMode"),{maxCards:i,canUpgrade:r}=(0,y.Zq)(),{openUpsellModal:a}=(0,v.I)(),{product:s}=(0,v.I)();return!e||e<i||e===i&&"structured"===t?null:"freeform"===t&&e>=i&&r?(0,n.jsx)(I,{status:"warning",onClick:()=>a({segmentEvent:b.VV.GAMMA_UPSELL_CALLOUT_AI_GENERATE_LONGER}),title:(0,n.jsx)(c.x6,{id:"6/00Zu",values:{MAX_CARDS_PRO:y.t}}),cta:(0,n.jsx)(c.x6,{id:"kwkhPe"})}):"freeform"===t?null:r?(0,n.jsx)(I,{status:"warning",onClick:()=>a({segmentEvent:b.VV.GAMMA_UPSELL_CALLOUT_AI_GENERATE_LONGER}),title:(0,n.jsx)(c.x6,{id:"3wlruh",values:{maxCards:i}}),subtitle:s?(0,n.jsx)(c.x6,{id:"dBT3NQ",values:{PRO_PROPER_NOUN:p.Kc,MAX_CARDS_PRO:y.t}}):(0,n.jsx)(c.x6,{id:"t9ke0z",values:{MAX_CARDS_PRO:y.t}}),cta:(0,n.jsx)(c.x6,{id:"kwkhPe"})}):(0,n.jsx)(I,{status:"warning",title:(0,n.jsx)(c.x6,{id:"dHdJAv",values:{maxCards:i}}),subtitle:(0,n.jsx)(c.x6,{id:"yLG7qf"})})});A.displayName="CardCountUpsellWarning"},12910:(e,t,i)=>{i.d(t,{w:()=>o});var n=i(77650),r=i(15342),a=i(83370),s=i(51022);let l=(e,t)=>{switch(e){case"invalid-empty":return n.Ru._({id:"9IxKHJ"});case"invalid-long":return n.Ru._({id:"ZcJO3k",values:{maxTokens:t}})}},o=()=>{let{maxTokens:e}=(0,s.is)(),t=(0,r.GV)((0,a.$t)(e));return void 0===t?{canGenerate:!0,cantGenerateReason:void 0}:{canGenerate:!1,validationError:t,cantGenerateReason:l(t,e)}}},25683:(e,t,i)=>{i.d(t,{Q:()=>j});var n=i(6029),r=i(40452),a=i(49611),s=i(58959),l=i(48621),o=i(91106),d=i(19564),c=i(55729),u=i(90184),m=i(26814),h=i(37605),x=i(70557);let g=()=>{let[e]=(0,x.R7)("imageProvider");return"aiGenerated"===e?"generateV2WithImages":"generateV2"};var p=i(12910);let j=(0,c.memo)(e=>{let{onClick:t,arrowIcon:i,isBlocked:c=!1}=e,x=g(),{canGenerate:j,cantGenerateReason:v}=(0,p.w)(),{hasEnoughCreditsToGenerateDeck:f}=(0,m.B9)(),b=(0,m.tO)(t,"generateV2",h.VV.GAMMA_UPSELL_CALLOUT_AI_CREDITS_GENERATE_V2),w=!j||c,y=w&&!c;return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(o.Tz,{label:f?v:(0,n.jsx)(d.x6,{id:"mTJ1YV"}),isDisabled:!y,children:(0,n.jsx)(r.s,{flex:"1",alignItems:"stretch",alignSelf:"stretch",justifyContent:"stretch",flexDirection:"column",children:(0,n.jsx)(a.$,{variant:"solid",w:"100%",rightIcon:(0,n.jsxs)(s.z,{children:[(0,n.jsx)(u.G,{type:x}),(0,n.jsx)(l.g,{icon:i})]}),onClick:b,isDisabled:w,size:{base:"md",lg:"lg"},children:(0,n.jsx)(d.x6,{id:"xGVfLh"})})})})})});j.displayName="ContinueToThemePickerButton"},26535:(e,t,i)=>{i.d(t,{r:()=>j});var n=i(6029),r=i(83638),a=i(25223),s=i(83743),l=i(26420),o=i(26385),d=i(40452),c=i(49611),u=i(48810),m=i(91106),h=i(19564);i(55729);var x=i(87827),g=i(55023),p=i(70557);let j=e=>{let{columns:t={base:2,lg:4},labelText:i}=e,[l,o]=(0,p.R7)("textAmount"),d=(0,x.n)(g.dg);return(0,n.jsxs)(r.MJ,{children:[(0,n.jsx)(a.l,{fontSize:"sm",fontWeight:"semibold",children:null!=i?i:(0,n.jsx)(h.x6,{id:"pi+Tez"})}),(0,n.jsx)(s.r,{columns:t,spacing:2,children:Object.keys(d).map(e=>(0,n.jsx)(S,{textAmount:e,isSelected:l===e,onClick:()=>o(e)},e))})]})},v="24px",f={sm:{lines:3,columns:1},md:{lines:4,columns:1},lg:{lines:8,columns:2},xl:{lines:15,columns:3}},b=e=>{let{isSelected:t,delay:i,isLastLine:r=!1}=e;return(0,n.jsx)(l.a,{h:"2px",w:r?"60%":"100%",bg:t?"deepocean.600":"gray.300",borderRadius:"sm",transitionProperty:"transform, background-color",transitionDuration:"250ms",transitionTimingFunction:"ease",transitionDelay:t?"".concat(i,"ms"):"0ms"})},w=e=>{let{lineCount:t,startDelay:i,isSelected:r,isLastColumn:a=!1}=e;return(0,n.jsx)(o.B,{spacing:"2px",flex:1,justifyContent:"flex-start",h:"100%",children:Array.from({length:t}).map((e,s)=>(0,n.jsx)(b,{isSelected:r,delay:i+35*s,isLastLine:a&&s===t-1},s))})},y=e=>{let{textAmount:t,isSelected:i}=e,{lines:r,columns:a}=f[t];if(1===a)return(0,n.jsx)(o.B,{spacing:"2px",h:v,w:"100%",justify:"flex-start",align:"flex-start",children:Array.from({length:r}).map((e,t)=>(0,n.jsx)(b,{isSelected:i,delay:35*t,isLastLine:t===r-1},t))});let s=Math.ceil(r/a),l=r-(a-1)*s;return(0,n.jsx)(d.s,{h:v,w:"100%",justify:"flex-start",align:"flex-start",gap:"4px",children:Array.from({length:a}).map((e,t)=>{let r=t===a-1;return(0,n.jsx)(w,{lineCount:r?l:s,startDelay:t*s*35,isSelected:i,isLastColumn:r},t)})})},S=e=>{let{textAmount:t,isSelected:i=!1,onClick:r=()=>{}}=e,a=(0,g.dg)()[t];return(0,n.jsx)(m.Tz,{label:a.description(),placement:"top",children:(0,n.jsxs)(o.B,{as:c.$,h:"auto",textShadow:"none",variant:"plain",p:3,spacing:1,w:"100%",cursor:"pointer",textAlign:"center",transition:"all 300ms ease",border:"1px solid",bg:i?"trueblue.50":void 0,borderRadius:"md",boxShadow:"sm",borderColor:i?"sky.600":"gray.200",color:i?"trueblue.700":"gray.800",onClick:r,_hover:{bg:"trueblue.50",borderColor:"trueblue.400"},position:"relative",children:[(0,n.jsx)(o.B,{spacing:1,w:"80%",maxW:"100px",children:(0,n.jsx)(y,{textAmount:t,isSelected:i})}),(0,n.jsx)(u.E,{fontSize:"sm",fontWeight:"medium",children:a.label()})]})})}},28205:(e,t,i)=>{i.d(t,{g:()=>r});var n=i(68301);let r=(e,t)=>{let i=n.of.get("aiSearchMode");return"disabled"!==i&&"generate"===e&&("always"===i||"optional"===i&&t)?{search:!0,searchInGenerate:n.of.get("aiSearchInGenerate"),searchProvider:n.of.get("aiSearchProvider")}:{search:!1}}},41405:(e,t,i)=>{i.d(t,{e:()=>ei});var n=i(6029),r=i(40452),a=i(55729),s=i(15342),l=i(49023),o=i(7554),d=i(30034),c=i(29608),u=i(11403),m=i(26420),h=i(57405),x=i(49611),g=i(83004),p=i(55597),j=i(48621),v=i(87386),f=i(19564),b=i(18833),w=i(30361),y=i.n(w),S=i(9922),C=i.n(S),I=i(83370),k=i(82550),E=i(95889),R=i(40077),A=i(84646),_=i(5747),T=i(77387),P=i(80812),z=i(45143),V=i(60908),L=i(70557),G=i(61097),M=i(79459);let D=(0,b.P)(m.a),W=e=>{let{card:t,theme:i,...r}=e,s=(0,a.useMemo)(()=>{if(t)return(0,v.createDocWithCards)({},[t])},[t]);return(0,n.jsx)(D,{pointerEvents:"none",sx:{"*":{backdropFilter:"none !important",transitionProperty:"background-color, color, border-color, padding, margin, width, maxWidth, fontSize",transitionDuration:".15s",[".button .".concat(R.U6)]:{transitionProperty:"none"}},".doc-content-wrapper *[data-doc-background-element], .motion-present-mode-bg":{display:"none"},".card-wrapper,.card-body,.doc-content-wrapper":{padding:0,margin:0,minHeight:"auto"},"[data-card-body]":{"--card-color-transparent":"var(--card-color)","--card-background-color":"var(--card-color)","--card-width":"60rem"},".logo":{display:"none"}},...r,children:s&&i&&(0,n.jsx)(T.S,{content:s,initialContent:s,theme:i})})},O=(e,t,i)=>{let n=0,r=e=>{var a;return null==(a=e.content)?void 0:a.map(e=>{var a,s,l,o,d,c,u;let m={...e,attrs:{...e.attrs}};if("image"===e.type){let e=t.shift();e&&(m.attrs.src=e.imageUrl,m.attrs.tempUrl=e.imageUrl)}if("cardAccentLayoutItem"===e.type&&(null==(l=e.attrs)||null==(s=l.background)||null==(a=s.image)?void 0:a.src)){let e=null==i||null==(u=i.config)||null==(c=u.accentBackgrounds)?void 0:c[n];e&&(n++,m.attrs.background=e)}if("smartLayoutCell"===e.type&&(null==(d=e.attrs)||null==(o=d.image)?void 0:o.src)==="custom"){let e=t.shift();e&&(m.attrs.image.src=e.imageUrl,m.attrs.image.tempUrl=e.imageUrl)}return e.content&&(m.content=r(m)),m})};return Object.assign({},e,{content:r(e)})},N=e=>{e&&requestAnimationFrame(()=>{var t;return null==(t=document.querySelector('[data-theme-id="'.concat(e,'"]')))?void 0:t.scrollIntoView({behavior:"smooth"})})},B=e=>{let{images:t}=e,i=(0,s.jL)(),l=(0,s.GV)(o.ST),d=(0,s.GV)(o.kl),u=(0,E.st)(),m=(0,P.fL)(),[v,b]=(0,L.R7)("themeId"),w=(0,s.GV)(I.zQ),S=(0,a.useCallback)(e=>{b(e),null==u||u.track(E.VV.AI_DOC_CREATION_THEME_CLICKED,{themeId:e||"none",device:(0,c.ZI)(),generationType:w})},[u,b,w]),R=l.find(e=>v===e.id);(0,a.useEffect)(()=>{if(v||!(null==l?void 0:l.length))return;i((0,o.U7)({activeView:"standard"}));let e=y()(d),t=(null==m?void 0:m.defaultThemeId)||(null==e?void 0:e.id);t&&(b(t),N(t))},[i,v,d,l,b,null==m?void 0:m.defaultThemeId]);let T=(0,a.useMemo)(()=>O(C()((0,k.O)()),C()(t),R).content[0].content||[],[R,t]),D=(0,a.useCallback)(()=>{if(!l)return;let e=y()(l);e&&(b(e.id),(null==e?void 0:e.workspaceId)?i((0,o.U7)({activeView:"custom"})):i((0,o.U7)({activeView:"standard"})),N(null==e?void 0:e.id))},[i,b,l]),B=(0,z.h5)({base:0,"4xl":300})||0,U=(0,z.h5)({base:600,xl:250,"4xl":0})||0,F=(0,z.h5)({base:0,xl:1})||0,q=(0,z.h5)({base:.5,lg:.6,xl:.7,"2xl":.85,"3xl":1,"4xl":1.125});return(0,a.useEffect)(function(){l&&0!==l.length&&Promise.all(l.map(e=>{var t,i,n,r,a,s,l,o,d,c;(null==(n=e.config.accentBackgrounds)||null==(i=n[0])||null==(t=i.image)?void 0:t.src)&&(0,V.GV)(null==(o=e.config.accentBackgrounds)||null==(l=o[0].image)?void 0:l.src),(null==(s=e.config.accentBackgrounds)||null==(a=s[1])||null==(r=a.image)?void 0:r.src)&&(0,V.GV)(null==(c=e.config.accentBackgrounds)||null==(d=c[1].image)?void 0:d.src)}))},[l]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(M.a,{theme:R}),(0,n.jsxs)(r.s,{zIndex:1,py:0,px:6,"data-theme-desktop-root":!0,position:"relative",children:[(0,n.jsx)(g.mL,{styles:{html:{overflowX:"hidden",overflowY:"auto"}}}),(0,n.jsxs)(r.s,{direction:"column",pos:"relative",flex:1,h:"100%",transform:"scale(".concat(q,")"),justifyContent:"center",alignItems:"center",ms:[40,35,30,20,0],"data-id":"theme-picker-desktop-cards",children:[(0,n.jsx)(W,{pos:"absolute",theme:R,card:T[2],initial:{opacity:0},animate:{opacity:1,translateX:0,transition:{opacity:{duration:.5,delay:0,ease:"easeOut"},default:{duration:2,ease:"easeOut"}}},zIndex:1}),(0,n.jsx)(W,{pos:"absolute",theme:R,card:T[0],initial:{translateX:0,opacity:0},animate:{translateX:B,translateY:U,rotate:-F,opacity:1,transition:{default:{duration:2,delay:.5,ease:"easeOut"}}}}),(0,n.jsx)(W,{pos:"absolute",theme:R,card:T[1],initial:{translateX:0,opacity:0},transformOrigin:"center",animate:{translateX:-B,translateY:-U,rotate:F,opacity:1,transition:{default:{duration:2,delay:.5,ease:"easeOut"}}}})]}),(0,n.jsxs)(r.s,{w:"420px",p:6,direction:"column",justifyContent:"center",bg:"whiteAlpha.900",borderRadius:"lg",h:"calc(100vh - var(--chakra-sizes-20))",minH:"700px",mb:4,shadow:"md",pos:"relative",position:"sticky",mt:6,children:[(0,n.jsx)(_.D,{title:(0,n.jsx)(f.x6,{id:"cQGp8b"}),description:(0,n.jsxs)(h.T,{w:"100%",align:"center",justify:"center",children:[(0,n.jsx)(G.I,{w:"100%",children:(0,n.jsx)(f.x6,{id:"ziAjHi"})}),(0,n.jsx)(x.$,{w:"100%",leftIcon:(0,n.jsx)(j.g,{icon:p.tW,color:"var(--chakra-colors-trueblue-800)"}),size:"md",onClick:D,children:(0,n.jsx)(f.x6,{id:"B8w15Q"})})]}),stackProps:{pb:4},currentTheme:R,showCreateButtons:!1}),(0,n.jsx)(A.oz,{shouldScrollToCurrent:!0,currentTheme:R,setTheme:e=>{S(null==e?void 0:e.id)},flexProps:{overflowY:"auto",mx:-6,px:3},disableEditing:!0})]})]})]})};var U=i(26385),F=i(23293),q=i(48810),H=i(61204),J=i(58959),K=i(99492),X=i(74158),$=i(75178),Q=i(88586),Z=i(51932),Y=i(62452),ee=i(82927);let et=()=>{let e=(0,a.useRef)(!1),t=(0,s.GV)(o.WI),i=(0,s.GV)(o.kl),l=(0,E.st)(),d=(0,s.GV)(I.zQ),[u,h]=(0,L.R7)("themeId",{debounce:500}),[p,v]=(0,a.useState)(()=>t.find(e=>e.id===u)),b=(0,X.wA)(),{currentWorkspace:w}=(0,ee.ur)(),{data:S}=(0,Q.Vl$)({variables:{id:null==w?void 0:w.id},skip:!(null==w?void 0:w.id)}),C=null==S?void 0:S.workspace,k=(0,s.GV)(o.cE),R=(0,s.GV)(o.yD),A=p?(0,Y.Mw)(p):void 0;(0,a.useEffect)(()=>{if(u||!(null==i?void 0:i.length)||e.current)return;let n=y()(i),r=t.find(e=>e.id===(null==C?void 0:C.defaultThemeId))||n;if(r){var a;b((0,o.U7)({activeView:"standard"})),v(r),null==(a=document.querySelector('[data-theme-mobile-preview="'.concat(r.id,'"]')))||a.scrollIntoView(),e.current=!0}},[b,i,u,t,null==C?void 0:C.defaultThemeId]),(0,a.useEffect)(()=>{var t;!e.current&&u&&p&&(p.workspaceId?b((0,o.U7)({activeView:"custom"})):b((0,o.U7)({activeView:"standard"})),null==(t=document.querySelector('[data-theme-mobile-preview="'.concat(p.id,'"]')))||t.scrollIntoView(),e.current=!0)},[b,p,u]);let _=(0,a.useCallback)(e=>{let{scrollLeft:i,scrollWidth:n,clientWidth:r}=e.target,a=Math.round(i/(n-r)*(t.length-1)),s=t[a];s.id!==(null==p?void 0:p.id)&&v(s)},[t,null==p?void 0:p.id,v]),P=(0,a.useCallback)(()=>{(null==p?void 0:p.id)&&(h(p.id),null==l||l.track(E.VV.AI_DOC_CREATION_THEME_CLICKED,{themeId:p.id,device:(0,c.ZI)(),generationType:d}))},[l,d,null==p?void 0:p.id,h]);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(M.a,{theme:p}),(0,n.jsxs)(U.B,{spacing:0,h:"100%",w:"100vw",children:[(0,n.jsx)(g.mL,{styles:{html:{height:"100%"},body:{height:"100%"}}}),(0,n.jsxs)(U.B,{spacing:0,mx:"auto",zIndex:1,px:6,pt:20,sx:T.o,w:"100%",children:[(0,n.jsxs)(U.B,{align:"center",spacing:1,children:[(0,n.jsx)(F.D,{variant:"brand",letterSpacing:"-0.04em",fontWeight:"700",color:A?"#FFFFFF":"#0a1629",w:"100%",size:"2xl",transitionProperty:"common",transitionDuration:"normal",children:(0,n.jsx)(f.x6,{id:"cQGp8b"})}),(0,n.jsx)(q.E,{fontSize:"lg",color:A?"#FFFFFF":"#0a1629",letterSpacing:"-0.04em",transitionProperty:"common",transitionDuration:"normal",children:(0,n.jsx)(f.x6,{id:"950yV9"})})]}),k&&(0,n.jsxs)(H.e,{variant:"ghost",size:"sm",borderRadius:"full",w:"100%",pt:2,justifyContent:"center",children:[(0,n.jsx)(x.$,{borderRadius:"full",leftIcon:(0,n.jsx)(j.g,{icon:K.ffg,fixedWidth:!0}),"data-theme-picker-active-view-button":"custom",colorScheme:"custom"===R?void 0:"gray",bg:"custom"===R?"deepocean.100":"gray.50",onClick:()=>b((0,o.U7)({activeView:"custom"})),children:(0,n.jsx)(f.x6,{id:"8Tg/JR"})}),(0,n.jsx)(x.$,{borderRadius:"full",leftIcon:(0,n.jsx)(m.a,{w:3.5,children:(0,n.jsx)($.T,{})}),"data-theme-picker-active-view-button":"standard",colorScheme:"standard"===R?void 0:"gray",bg:"standard"===R?"deepocean.100":"gray.50",onClick:()=>b((0,o.U7)({activeView:"standard"})),children:(0,n.jsx)(f.x6,{id:"TJBHlP"})})]})]}),(0,n.jsx)(r.s,{zIndex:1,pos:"relative",overflow:"auto",py:8,sx:{"scroll-snap-type":"x mandatory"},onScroll:_,children:(0,n.jsx)(J.z,{flex:1,spacing:6,px:12,pt:1,children:t.map(e=>(0,n.jsx)(Z.s,{isSelected:e.id===(null==p?void 0:p.id),theme:e},e.id))})}),(0,n.jsx)(r.s,{px:6,py:4,mb:2,justify:"center",zIndex:9,w:"100%",children:(0,n.jsx)(G.I,{size:"lg",w:"100%",onClick:P,children:(0,n.jsx)(f.x6,{id:"ziAjHi"})})})]})]})},ei=(0,a.memo)(e=>{let{images:t=[]}=e;(0,l.t)();let i=(0,s.GV)(o.ST);return(0,u.En)()&&(null==i?void 0:i.length)?(0,n.jsxs)(r.s,{direction:"column",justifyContent:"flex-start",flex:1,w:"100vw",h:"100%",children:[(0,n.jsx)(d.s,{}),(0,c.Xb)()?(0,n.jsx)(et,{}):(0,n.jsx)(B,{images:t})]}):null});ei.displayName="ThemeStep"},50278:(e,t,i)=>{i.d(t,{A:()=>d});var n=i(6029),r=i(40452),a=i(24302),s=i(18833),l=i(55729);let o=(0,s.P)(r.s),d=(0,l.memo)(e=>{let{children:t}=e,i=(0,a.dU)("gray.700","white"),r=(0,a.dU)("white","gray.700"),s=(0,a.dU)("blackAlpha.200","whiteAlpha.200");return(0,n.jsx)(o,{bg:r,color:i,py:3,position:"fixed",zIndex:"10",initial:{opacity:0,bottom:-10},animate:{opacity:1,bottom:0},exit:{opacity:0,bottom:0},borderTop:"1px solid",borderColor:s,px:{base:3,md:4},direction:"column",align:"center",w:"100%",children:t})});d.displayName="StickyBottomBar"},51932:(e,t,i)=>{i.d(t,{s:()=>b});var n=i(6029),r=i(26420),a=i(40452),s=i(26385),l=i(48810),o=i(21938),d=i(55729),c=i(90221),u=i(62452),m=i(61385),h=i(62171),x=i(60908),g=i(58240),p=i(55670),j=i(95571),v=i(40077),f=i(95714);let b=(0,d.memo)(e=>{let{theme:t,isSelected:i=!1}=e,{contentStyles:d}=t.config,b=(0,h.fS)(t),w=(0,u.Mw)(t),y=(0,f.ZI)(t),S=(0,p.S)(t,!1),C=(0,h.FD)(b,w,x.p7),{inViewport:I,ref:k}=(0,g.v)({dimensions:{width:350,height:220}});return!1===I?(0,n.jsx)(r.a,{ref:k,"data-placeholder":!0,"data-theme-mobile-preview":t.id,w:"100%",children:(0,n.jsx)(a.s,{w:"calc(100vw - 5rem)",minH:"10em",sx:{"scroll-snap-align":"center"},color:"transparent",bg:"whiteAlpha.100",children:t.name})}):(0,n.jsx)(r.a,{css:y,sx:S,ref:k,w:"100%","data-theme-mobile-preview":t.id,children:(0,n.jsxs)(a.s,{flexDir:"column",w:"calc(100vw - 5rem)",sx:{"scroll-snap-align":"center"},borderRadius:"lg",shadow:i?"outline":"xl",overflow:"hidden",transitionProperty:"common",transitionDuration:"normal",transitionTimingFunction:"ease-out",pos:"relative",...C,children:[(0,n.jsx)(c.m,{theme:t}),(0,n.jsx)(r.a,{sx:{...j.CO,...d},borderRadius:"base",className:"".concat(m._P," ").concat(w?"is-dark":""),color:w?"white":"gray.800",flex:1,pointerEvents:"none",children:(0,n.jsxs)(s.B,{p:6,children:[(0,n.jsx)(l.E,{className:"block-title",noOfLines:1,wordBreak:"break-all",mt:"0 !important",mb:"var(--chakra-space-2) !important",children:(0,n.jsx)(l.E,{as:"span",className:(0,o.cx)("title",v.U6),fontSize:"1.8em !important",paddingBottom:"0 !important",children:t.name})}),(0,n.jsxs)(l.E,{fontSize:"sm",noOfLines:[4,6],className:"block block-paragraph",my:"0 !important",children:["Lorem ipsum dolor sit amet, consectetur adipiscing elit. Morbi dapibus iaculis sagittis."," ",(0,n.jsxs)(l.E,{as:"a",className:"link",children:[" ","Fusce pellentesque quam tortor,"]})," ","sit amet vulputate ligula sollicitudin nec. Etiam consectetur leo sed elit euismod, eget suscipit purus ullamcorper. Etiam id viverra purus. Nulla hendrerit sapien eget dui egestas posuere. Cras tristique condimentum tristique. Sed pellentesque felis sed justo ullamcorper molestie. Vestibulum et condimentum nibh, non pellentesque nisi."]})]})})]})})});b.displayName="ThemePreviewThumbnailMobile"},52090:(e,t,i)=>{i.d(t,{Ew:()=>M,Qd:()=>V,cG:()=>L,cZ:()=>D});var n=i(6029),r=i(74676),a=i(57405),s=i(78140),l=i(36999),o=i(49611),d=i(33787),c=i(12514),u=i(41283),m=i(85595),h=i(48810),x=i(58959),g=i(83638),p=i(25223),j=i(36218),v=i(51684),f=i(99492),b=i(55597),w=i(48621),y=i(19564),S=i(77650),C=i(55729),I=i(68301),k=i(87996),E=i(28630),R=i(66048),A=i(79807),_=i(40782),T=i(55023),P=i(70557),z=i(93885);let V={aiGenerated:{label:()=>S.Ru._({id:"O+LXs1"})},web:{label:()=>S.Ru._({id:"c8iFRc"})},auto:{label:()=>S.Ru._({id:"Dnn2XG"}),flag:"automatedImageProvider"},pictographic:{label:()=>S.Ru._({id:"Xo8Ctl"}),flag:"aiImageProviderPictographic"},unsplash:{label:()=>S.Ru._({id:"Oi5M1y"}),flag:"aiImageProviderUnsplash"},giphy:{label:()=>S.Ru._({id:"MK2yIS"}),flag:"aiImageProviderGiphy"},none:{label:()=>S.Ru._({id:"svexkX"}),badge:()=>(0,n.jsx)(r.E,{colorScheme:"green",children:(0,n.jsx)(y.x6,{id:"isRobC"})})},placeholder:{label:()=>S.Ru._({id:"UIgTRE"}),badge:()=>(0,n.jsx)(r.E,{colorScheme:"green",children:(0,n.jsx)(y.x6,{id:"isRobC"})})}},L=(0,C.memo)(()=>{var e;let[t]=(0,P.R7)("imageProvider"),i=_.u[t]||k.Rn,r=(null==(e=V[t])?void 0:e.label())||(null==i?void 0:i.label()),[s]=(0,P.R7)("imageLicense"),l=(0,A.h)(s),[o]=(0,P.R7)("imageStyle",{debounce:500}),[d]=(0,P.T7)();return(0,n.jsx)(z.X,{label:(0,n.jsx)(y.x6,{id:"an5hVd"}),colorScheme:"deepocean",icon:b.Cyq,values:[r,"web"===t&&l,"aiGenerated"===t&&d&&(0,E.pE)(d).label(),"aiGenerated"===t&&o],testId:"image-settings-group",children:(0,n.jsxs)(a.T,{spacing:4,children:[(0,n.jsx)(M,{}),(0,n.jsx)(D,{})]})})});L.displayName="ImageSettingsGroup";let G=(0,C.memo)(e=>{var t;let{provider:i,providerKey:r,setProvider:a}=e,g=(0,I.u)("automatedImageProvider");return(0,n.jsxs)(s.W,{isLazy:!0,matchWidth:!0,children:[(0,n.jsx)(l.I,{as:o.$,variant:"plain",w:"100%",textAlign:"start",justifyContent:"space-between",rightIcon:(0,n.jsx)(w.g,{icon:f.Jt$}),leftIcon:i.image?(0,n.jsx)(d._,{src:i.image.src,w:"1.5em",h:"1.5em",objectFit:"contain"}):i.icon?(0,n.jsx)(w.g,{icon:i.icon,fixedWidth:!0}):void 0,boxShadow:"sm",size:"sm",children:null===i?V.auto.label():(null==(t=V[r])?void 0:t.label())||i.label()}),(0,n.jsx)(c.Z,{children:(0,n.jsxs)(u.c,{maxH:"350px",overflowY:"auto",overflowX:"hidden",zIndex:"modalPopover",border:"1px solid",borderColor:"gray.200",children:[g&&(0,n.jsxs)(m.D,{onClick:()=>a("auto"),icon:(0,n.jsx)(w.g,{icon:v.uts,fixedWidth:!0}),children:[V.auto.label(),(0,n.jsx)(h.E,{color:"gray.400",fontSize:"sm",children:(0,n.jsx)(y.x6,{id:"bQcSlJ"})})]}),Object.entries(_.u).map(e=>{let[t,{label:i,icon:r,description:s,featureFlag:l,image:o}]=e,{label:c,flag:u,badge:g}=V[t]||{};return l&&!I.of.get(l)||u&&!I.of.get(u)?null:(0,n.jsxs)(m.D,{onClick:()=>a(t),icon:o?(0,n.jsx)(d._,{src:o.src,w:"1.5em",h:"1.5em",objectFit:"contain"}):r?(0,n.jsx)(w.g,{icon:r,fixedWidth:!0}):void 0,children:[(0,n.jsxs)(x.z,{children:[(0,n.jsx)(h.E,{children:(null==c?void 0:c())||i()}),g&&g()]}),s&&(0,n.jsx)(h.E,{color:"gray.400",fontSize:"sm",children:s()})]},t)})]})})]})});G.displayName="ImageProviderPicker";let M=()=>{let[e,t]=(0,P.R7)("imageProvider"),i=_.u[e]||_.u.aiGenerated;return(0,n.jsxs)(g.MJ,{children:[(0,n.jsx)(p.l,{fontSize:"sm",fontWeight:"semibold",children:(0,n.jsx)(y.x6,{id:"qA0pmh"})}),(0,n.jsx)(G,{providerKey:e,provider:i,setProvider:t})]})},D=e=>{let{hideImageStyle:t=!1}=e,[i]=(0,P.R7)("imageProvider"),[r,a]=(0,P.R7)("imageLicense"),[s,l]=(0,P.R7)("imageStyle",{debounce:500}),[o,d]=(0,P.T7)();return(0,n.jsxs)(n.Fragment,{children:["web"===i&&(0,n.jsxs)(g.MJ,{children:[(0,n.jsx)(p.l,{fontSize:"sm",fontWeight:"semibold",children:(0,n.jsx)(y.x6,{id:"6TSHCF"})}),(0,n.jsx)(A.V,{value:r,onChange:a})]}),"aiGenerated"===i&&!t&&(0,n.jsxs)(g.MJ,{children:[(0,n.jsx)(p.l,{fontSize:"sm",fontWeight:"semibold",children:(0,n.jsx)(y.x6,{id:"X2yiuT"})}),(0,n.jsx)(j.T,{value:s,onChange:e=>l(e.target.value),placeholder:S.Ru._({id:"5x/foo"}),rows:2,maxLength:T.nt})]}),"aiGenerated"===i&&(0,n.jsxs)(g.MJ,{children:[(0,n.jsx)(p.l,{fontSize:"sm",fontWeight:"semibold",children:(0,n.jsx)(y.x6,{id:"GVuOrw"})}),(0,n.jsx)(R.o,{value:o,setValue:d})]})]})}},61097:(e,t,i)=>{i.d(t,{I:()=>ed});var n=i(6029),r=i(46898),a=i(40452),s=i(49611),l=i(55597),o=i(48621),d=i(91106),c=i(77650),u=i(55729),m=i(37471),h=i(26814),x=i(95889),g=i(82927),p=i(30361),j=i.n(p),v=i(58495),f=i(81278),b=i(55023),w=i(71438),y=i(73549),S=i(12419),C=i(74553),I=i(13559),k=i(52077),E=i(88586),R=i(68301),A=i(58809),_=i(65421),T=i(15342),P=i(20715),z=i(99552),V=i(44141),L=i(95695),G=i(1057),M=i(8139),D=i(51817),W=i(55292),O=i(29608),N=i(9118),B=i(4868),U=i(28205),F=i(83370),q=i(81807);let H=e=>"condense"===e.textMode?"big":"preserve"===e.textMode?"preserve":"fast",J=e=>{if(e.contentTemplate)return{size:"big",model:R.of.get("generateDeckBigModel"),reasoningEffort:"none"};let t=H(e),i="preserve"===t?R.of.get("generateDeckPreserveModel"):"big"===t?R.of.get("generateDeckBigModel"):R.of.get("generateDeckFastModel"),n="none";return"preserve"===t&&(n=R.of.get("generateDeckReasoningEffort")),{size:t,model:i,reasoningEffort:n}};var K=i(87386),X=i(35605),$=i(34832),Q=i(89942),Z=i(70006),Y=i(88490);let ee=()=>{let{push:e}=(0,f.useRouter)(),[t]=(0,E.Ybb)(),i=(0,R.u)("createSiteAi"),n=(0,Q.Fd)(),{generate:r}=(0,$.pt)("DetermineSiteMetadata",{}),[a]=(0,E.g1r)(),[s]=(0,E.vlJ)(),[l]=(0,E.cGn)();return{canCreateSite:i&&n,createSiteWithAIAndRedirect:(0,u.useCallback)(async i=>{let{workspaceId:n,docId:o,themeId:d,generateVars:u,firstCards:m}=i,h=m[0]?(0,K.getCardTitle)(m[0].content):void 0,{data:x}=await t({variables:{input:{workspaceId:n,name:h||c.Ru._({id:"h3eRam"}),routes:[{docId:o,path:"/"}],themeId:d}}}),g=null==x?void 0:x.createSite;if(!g){console.error("[CreateSiteModal] Failed to create site, no site returned"),e("/docs/".concat(o,"?source=").concat(k.MH));return}try{let e=m.map(e=>e.raw).join("\n"),{language:t,topic:i,input:d}=u,{promise:c}=r({workspaceId:n,variables:{topic:i||"",input:d,language:t,pageHtml:e}}),h=await c,{title:x,subdomain:p}=(0,Y.d)(h);p=(0,X.Fw)(p);let j="string"==typeof p&&p.length<=60&&/^[a-z0-9-]+$/.test(p.toLowerCase()),v=[];j&&v.push(a({variables:{input:{siteId:g.id,name:p}}})),x&&v.push(s({variables:{input:{siteId:g.id,name:x}}}),l({variables:{id:o,title:x}})),await Promise.all(v)}catch(e){console.error("(caught) useGenerateSite error: ".concat(e))}e((0,Z.pF)({docId:o,params:{source:k.MH}}))},[t,e,r,a,s,l])}};var et=i(70557),ei=i(3487),en=i(74171);let er=()=>{let{push:e}=(0,f.useRouter)(),[t]=(0,E.Imo)(),{generate:i}=(0,$.pt)("DeterminePageMetadata",{}),[n]=(0,E.cGn)(),r=(0,R.u)("createFilePage");return{setPageMetadataWithAIAndRedirect:(0,u.useCallback)(async a=>{let{site:s,docId:l,workspaceId:o,generateVars:d,firstCards:c}=a;try{let{language:e,topic:a,input:u}=d,m=s.routes.map(e=>{var t;return{title:null==(t=e.doc)?void 0:t.title,path:e.path}}),h=c.map(e=>e.raw).join("\n"),x=c[0]?(0,K.getCardTitle)(c[0].content):void 0,g=!0,{promise:p}=i({workspaceId:o,variables:{topic:a||"",input:u,language:e,otherPages:m,pageHtml:h}}),j=await p,{path:f,title:b}=(0,Y.d)(j);b||(b=x||"Untitled page",g=!1),f||(f=(0,X.Fw)(b)),f=(0,X.Fw)(f),s.routes.some(e=>e.path===f)&&(f="".concat(f,"-").concat((0,v.Ak)(6)));let w=e=>t({variables:{input:{siteId:s.id,docId:l,path:(0,V.wK)(e),offline:!1}},refetchQueries:["GetSite"]}),y=[n({variables:{id:l,title:b,titleEdited:g}})];r||y.push(w(f).catch(e=>{if(e instanceof en.K&&(0,E.vIB)(e).find(e=>["duplicate_site_path","duplicate_doc_path"].includes(e)))return w("".concat(!f||"/"===f?(0,X.Fw)(b):f,"-").concat((0,v.Ak)(5)));throw e})),await Promise.all(y)}catch(e){console.error("(caught) useSetPageMetadataWithAI error: ".concat(e))}e((0,Z.pF)({docId:l,params:{source:k.MH}}))},[i,e,t,n,r])}},ea=e=>{let{onSuccess:t,options:i}=e,n=(0,x.st)(),{push:r,query:a}=(0,f.useRouter)(),s=a.channelId,l=(0,T.CU)(),o=(0,T.GV)(z.Gd),d=(0,T.GV)(A.nU),{canCreateSite:c,createSiteWithAIAndRedirect:m}=ee(),[h,p]=(0,et.R7)("themeId"),{setPageMetadataWithAIAndRedirect:H}=er(),[K]=(0,E.g5)(),[X]=(0,E.nqW)(),[$,Q]=(0,u.useState)(!1),Z=(0,R.u)("streamResumingEnabled"),Y=(0,R.u)("createFilePage"),[en]=(0,et.T7)(),{maxCards:ea}=(0,ei.Zq)(),{addToLocalThemeHistory:eo}=(0,w.a)(),ed=(0,E.tzS)(E.xAr),ec=null==i?void 0:i.visualsMenuEnabled;return{generate:(0,u.useCallback)(async()=>{var e,a,u,h,f;let w,A,T,z,$=l.getState(),ee=(0,F.gG)($),et=(0,F.nY)($);if(!et)throw Error("Cannot generate with no docGenerateInputId");Q(!0);let ei=(0,g.bs)(),er=(0,F.J$)($),eu=(0,F.fg)($),em=(0,F.zQ)($),eh=(0,N.xt)((0,F.Wt)("locale")($)),ex=(0,F.Wt)("textAmount")($),eg=(0,F.Wt)("audience")($),ep=(0,F.Wt)("tone")($),ej=(0,F.wS)($),ev=(0,F.yR)($),ef=(0,F.Wt)("imageLicense")($),eb=(0,F.Wt)("imageProvider")($),ew=null!=(e=(0,F.Wt)("imageModelAutoselect")($))&&e,ey=en;if(ec){w=null!=(a=(0,F.Wt)("artStylePreset")($))?a:b.Ij.artStylePreset,A=null!=(u=(0,F.Wt)("artStylePrompt")($))?u:b.Ij.artStylePrompt;let e=(0,F.Wt)("artStyleAdditionalKeywords")($);e&&(A="".concat(A,". ").concat(e)),ew&&(ey=(0,_._)())}let eS=(0,F.Wt)("styleTemplate")($),eC=(0,F.Wt)("imageStyle")($),eI=(0,F.Wt)("textMode")($),ek=(0,F.Wt)("editorMode")($),eE=(0,B.ky)((0,F.qT)($),ek),eR=(0,F.Wt)("contentTemplate")($),eA=(0,F.Wt)("cardContentType")($),e_="generate"!==em,eT=(0,F.Wt)("searchRequested")($),eP=(0,F.Wt)("themeId")($),{search:ez,searchProvider:eV,searchInGenerate:eL}=(0,U.g)(em,eT),eG=R.of.get("growthSkipThemePickerOnFirstDeck")&&"generate"===em,eM=eP||(eG?j()(L.CU):o?o.themeId:void 0);eM&&eo(eM),!eP&&eG&&(await p(eM),null==n||n.track(x.VV.SKIPPED_THEME_RANDOM_THEME_PICKED,{themeId:eM||"none"}));let eD=eM?(await ed({id:eM})).data.theme:void 0,eW=eD?(0,I.z)(eD):void 0,eO=eC?"Custom":"Theme";"image"===eA&&eD?eC=(0,G.LU)(eD):"aiGenerated"===eb&&!eC&&eD&&(eC=(0,G.xI)(eD));let eN=c&&"webpage"===ej&&!(null==d?void 0:d.id),eB=(0,V.dv)(o)||eN,{promptKey:eU}=el(),eF=es({textMode:eI,generationType:em,format:ej,language:eh.englishName,cardContentType:eA}),{model:eq,size:eH,reasoningEffort:eJ}=J({numCards:ev,editorMode:ek,textMode:eI,textAmount:ex,generationType:em,promptKey:eU,tokenLength:er,contentTemplate:eR}),eK=eS;eK||"social"!==ej||(eK="social_portrait");let eX=(eK?{...M.S9[eK].docSettings()}:{})||{};("lg"===ex||"xl"===ex)&&"document"!==ej&&(eX.fontSize="sm"),eX.locale=(0,F.Wt)("locale")(l.getState());let e$={topic:"generate"===em?eu:"",additionalInstructions:"generate"!==em?eu:"",input:eE,language:eh.englishName,numCards:Math.min(ev,ea),format:ej,imageOptions:{model:ey,stylePrompt:eC,stylePreset:eO,license:ef,artStylePreset:w,artStylePrompt:A,visualsMenuEnabled:ec},textAmount:ex,audience:eg,tone:ep,textMode:eI,editorMode:ek,imageProvider:eb,search:eL,searchProvider:eV,contentTemplate:eR,cardDimensions:eX.cardDimensions,theme:eW,basePromptKey:eF,blockFlags:(0,q.fc)()},eQ={docFormatKey:ej,imageOptions:{license:ef,provider:eb,generateStyle:eC,model:ey,stylePreset:eO,artStylePreset:w,artStylePrompt:A,...ec?{visualsMenuEnabled:ec,modelAutoselect:ew}:{}},theme:eD,preserveLayouts:!1,cardDimensions:eX.cardDimensions,promptKey:eU},eZ=null==(T=Y&&(null==d?void 0:d.id)?null==(h=(await X({variables:{docGenerateInputId:et,fileId:d.id,options:{pageSettings:eX,aiOptions:{preserveLayouts:eQ.preserveLayouts,imageOptions:eQ.imageOptions},schemaVersion:D.f$},path:"/untitled-page-".concat((0,v.Ak)(5))}})).data)?void 0:h.generatePage:null==(f=(await K({variables:{docGenerateInputId:et,fileId:null==d?void 0:d.id,options:{themeId:eB?void 0:eM||W.z.id,orgAccess:eB?E.aXG.Manage:void 0,docSettings:eX,aiOptions:{preserveLayouts:eQ.preserveLayouts,imageOptions:eQ.imageOptions},channels:s?[{channelId:s}]:void 0,schemaVersion:D.f$}}})).data)?void 0:f.generateDoc)?void 0:T.docGenerateInput.id;if(!eZ)throw Error("No docGenerateInput.id to use as interactionId");if(!T)throw Error("Could not create doc");let{input:eY,topic:e0,additionalInstructions:e1,...e5}=e$;C.B.trackRequestSent(l,{interface:"wizard",streaming:!0,interactionId:eZ,inputContent:e$.input,inputMessage:e$.topic||e$.additionalInstructions,inputData:{options:{...eQ,theme:eM,imageModelAutoselect:ew},isGenerateV2:!0,isAdvancedMode:e_,generationType:em,...e5,promptKey:eU,tokenLength:er,docSettings:eX,modelSize:eH,search:ez,searchInGenerate:eL,reasoningEffort:eJ,iconProvider:R.of.get("aiIconProvider")},docId:T.id,docGenerationId:ee,docGenerateInputId:eZ});let{stream:e2,cancel:e6}=(0,S.aO)({promptKey:eU,interactionId:eZ,variables:{...e$,docId:T.id,model:eq,reasoningEffort:eJ},workspaceId:null==ei?void 0:ei.id},{streamId:T.id,streamResumingEnabled:Z,retries:3});try{z=await (0,y.Ct)({stream:e2,onCancel:e6,interactionId:eZ,options:eQ,bufferCards:1,store:l,docId:T.id}).promise}catch(e){throw Q(!1),e}if((0,P.c)({doc_id:T.id,source:E.ALe.AiGenerated,extra:"v2"}),!o&&eN)await m({workspaceId:null==ei?void 0:ei.id,docId:T.id,generateVars:e$,themeId:eM,firstCards:z.cards});else if(o)await H({docId:T.id,site:o,workspaceId:null==ei?void 0:ei.id,generateVars:e$,firstCards:z.cards});else{let e=null==i?void 0:i.mobileDocGenerated,t=(0,O.Xb)()&&!e;r("/docs/".concat(T.id,"?source=").concat(k.MH).concat(t?"&isFirstMobileDocGeneration=true":""))}null==t||t()},[l,ea,o,ed,c,K,X,s,Z,p,n,m,H,t,null==i?void 0:i.mobileDocGenerated,r,ec,null==d?void 0:d.id,Y,en,eo]),isGenerating:$}},es=e=>{let{textMode:t,generationType:i,format:n,language:r,cardContentType:a}=e;if("code"===a)return"GenerateDeckCodeCards";if("image"===a)return"GenerateDeckImageCards";if("preserve"===t)return R.of.get("generateDeckPreserveBasePrompt");let s=R.of.get("generateDeckBasePrompt");return"GenerateDeckLoose"!==s||"deck"===n&&"generate"===i&&r.startsWith("English")?s:"GenerateDeck1.5"},el=()=>({promptKey:R.of.get("generateDeckPrompt")});var eo=i(12910);let ed=(0,u.memo)(e=>{var t;let{children:i,onClick:p,visualsMenuEnabled:j,...v}=e,{onGenerateSuccess:f}=(0,m._2)(),b=(0,r.d)(),{user:w}=(0,g.ur)(),{isGenerating:y,generate:S}=ea({onSuccess:f,options:{mobileDocGenerated:null==w||null==(t=w.settings)?void 0:t.mobileDocGenerated,visualsMenuEnabled:j}}),{canGenerate:C,cantGenerateReason:I}=(0,eo.w)(),k=(0,u.useCallback)(async()=>{null==p||p();try{await S()}catch(e){console.error("Error generating doc",e),b({title:c.Ru._({id:"lVr0qD"}),description:c.Ru._({id:"P+gnB7"}),status:"error",duration:5e3,isClosable:!0})}},[p,S,b]),E=(0,h.tO)(k,"generateV2",x.VV.GAMMA_UPSELL_CALLOUT_AI_CREDITS_GENERATE_V2);return(0,n.jsx)(d.Tz,{label:I,isDisabled:C,children:(0,n.jsx)(a.s,{flex:"1",alignSelf:"stretch",alignItems:"stretch",justifyContent:"stretch",flexDirection:"column",children:(0,n.jsx)(s.$,{leftIcon:(0,n.jsx)(o.g,{icon:l.p7g}),variant:"solid",isLoading:y,loadingText:c.Ru._({id:"NOdFZR"}),isDisabled:y||!C,onClick:E,size:{base:"md",lg:"lg"},...v,children:i})})})});ed.displayName="GenerateButton"},62864:(e,t,i)=>{i.d(t,{F:()=>k,H:()=>E});var n=i(6029),r=i(61204),a=i(16936),s=i(49611),l=i(58959),o=i(48810),d=i(26420),c=i(78140),u=i(36999),m=i(12514),h=i(41283),x=i(37930),g=i(48478),p=i(99492),j=i(48621),v=i(91106),f=i(19564),b=i(77650),w=i(55729),y=i(89528),S=i(74003),C=i(95889),I=i(3487);let k=(0,w.memo)(e=>{let{onIncrement:t,onDecrement:i,maxCards:c,cardCount:u,...m}=e,h={boxShadow:"sm",bg:"white"};return(0,n.jsxs)(r.e,{isAttached:!0,flex:"1",...m,children:[null!=u&&(0,n.jsx)(a.K,{display:"flex",onClick:i,icon:(0,n.jsx)(j.g,{icon:p.EZy}),"aria-label":b.Ru._({id:"MrRUp2"}),width:2,...h}),(0,n.jsx)(s.$,{flex:"1",...h,_hover:{color:"inherit"},cursor:"default",children:(0,n.jsx)(v.Tz,{label:(0,n.jsx)(f.x6,{id:"ukrE78"}),placement:"top",children:(0,n.jsx)(l.z,{spacing:1,cursor:"help",children:(0,n.jsxs)(o.E,{children:[(0,n.jsx)(d.a,{as:"span",css:{fontVariantNumeric:"tabular-nums"},children:u})," ",(0,n.jsx)(f.x6,{id:"MU+gFM",values:{0:null!=u?u:0}})]})})})}),null!=u&&(0,n.jsx)(a.K,{display:"flex",onClick:t,icon:(0,n.jsx)(j.g,{icon:p.QLR}),"aria-label":b.Ru._({id:"sFY+gw"}),width:2,isDisabled:u>=c,...h})]})});k.displayName="CardCountStepper";let E=(0,w.memo)(e=>{let{hint:t,cardCount:i,maxCards:r,onChange:a}=e,{openUpsellModal:d}=(0,S.I)(),v=(0,w.useMemo)(()=>[...Array(r)],[r]),b=(0,w.useMemo)(()=>[15,20,25,30,40,50].filter(e=>e>r),[r]),k=()=>{d({segmentEvent:C.VV.GAMMA_UPSELL_CALLOUT_AI_GENERATE_LONGER})};return(0,n.jsxs)(c.W,{isLazy:!0,modifiers:[{name:"flip",options:{fallbackPlacements:["bottom","top","right-start","right-end","right"]}}],children:[(0,n.jsx)(u.I,{size:"sm",boxShadow:"none",minW:"32",textAlign:"left",as:s.$,rightIcon:(0,n.jsx)(j.g,{size:"xs",icon:p.Jt$}),children:(0,n.jsx)(f.x6,{id:"fFAIng",values:{0:null!=i?i:0}})}),(0,n.jsx)(m.Z,{children:(0,n.jsx)(h.c,{zIndex:"tooltip",maxH:"90vh",overflow:"auto",children:(0,n.jsxs)(x.i,{maxW:"200px",title:t,onChange:e=>{let t=Number(e);if(t>r)return void k();a(t)},value:"".concat(i),children:[v.map((e,t)=>{let i=t+1;return(0,n.jsx)(g.k,{value:"".concat(i),children:(0,n.jsx)(f.x6,{id:"bM4Wv5",values:{count:i}})},i)}),b.map(e=>(0,n.jsx)(g.k,{bg:"trueblue.50",border:"1px solid white",_hover:{bg:"trueblue.50",borderColor:"trueblue.200"},value:"".concat(e),children:(0,n.jsxs)(l.z,{spacing:"3",children:[(0,n.jsx)(o.E,{w:"100%",children:(0,n.jsx)(f.x6,{id:"bM4Wv5",values:{count:e}})}),e>r&&(0,n.jsx)(y.zL,{product:e<=I.ST?"plus":"pro"})]})},e))]})})})]})});E.displayName="CardCountDropdown"},63470:(e,t,i)=>{i.d(t,{I:()=>y});var n=i(6029),r=i(26385),a=i(40452),s=i(58959),l=i(83370),o=i(19783),d=i(15342),c=i(37605),u=i(48810),m=i(91106),h=i(19564),x=i(55729),g=i(62864),p=i(55023),j=i(70557),v=i(3487);let f=(0,x.memo)(e=>{let{...t}=e,i=(0,d.GV)(l.yR),[a,s]=(0,j.R7)("numCards"),{maxCards:o}=(0,v.Zq)(),c=(0,x.useCallback)(()=>{if(!i)return;let e=i>=p.BO&&i%p.pn==0?p.pn:1;s(Math.min(i+e,o))},[i,s,o]),f=(0,x.useCallback)(()=>{if(!i||1===i)return;let e=i>=p.BO+p.pn&&i%p.pn==0?p.pn:1;s(Math.max(i-e,1))},[i,s]),[b]=(0,j.R7)("editorMode"),w=i>o,y=Math.min(i,o);return"structured"===b?(0,n.jsx)(m.Tz,{label:(0,n.jsx)(h.x6,{id:"Zne1Sw"}),placement:"top",children:(0,n.jsxs)(r.B,{spacing:{base:.5,sm:2},flex:"1",justifyContent:"center",alignItems:"center",direction:{base:"column-reverse",sm:"row"},children:[(0,n.jsx)(u.E,{cursor:"help",fontSize:w?"xs":"lg",fontWeight:w?void 0:"600",textDecoration:w?"line-through":void 0,color:w?"gray.500":void 0,css:{textWrap:"nowrap"},textAlign:"center",children:(0,n.jsx)(h.x6,{id:"AZLIlg",values:{cardCount:i}})}),w&&(0,n.jsx)(u.E,{fontSize:{base:"md",sm:"lg"},fontWeight:"600",lineHeight:"1",children:(0,n.jsx)(h.x6,{id:"gcpsjO",values:{adjustedCardCount:y}})})]})}):(0,n.jsx)(g.F,{maxCards:o,cardCount:i,onIncrement:c,onDecrement:f,...t})});f.displayName="CardCountSettings";var b=i(6295),w=i(50278);let y=e=>{let{cta:t}=e,i=(0,d.GV)(l.OM);if((0,d.GV)(l.n7))return null;let u=(0,n.jsx)(o.f,{modalId:"ai-credits-modal-generate-v2",variant:"ghost",justify:"flex-end",segmentEvent:c.VV.GAMMA_UPSELL_CALLOUT_AI_CREDITS_GENERATE_V2,alignSelf:"center"});return(0,n.jsx)(w.A,{children:(0,n.jsxs)(r.B,{w:"100%",direction:{base:"column-reverse",md:"row"},spacing:{base:2,md:4},alignItems:{base:"center",md:"flex-end"},children:[(0,n.jsx)(a.s,{flex:"1",children:u}),(0,n.jsxs)(r.B,{w:"2xl",maxW:"100%",overflow:"hidden",children:[(0,n.jsx)(b.NV,{}),(0,n.jsx)(b.Zy,{}),(0,n.jsx)(b.Kj,{}),(0,n.jsxs)(s.z,{spacing:{base:2,md:3},opacity:i?.75:1,pointerEvents:i?"none":"inherit",cursor:i?"not-allowed":"default",children:[(0,n.jsx)(f,{size:{base:"md",lg:"lg"}}),(0,n.jsx)(a.s,{flex:"1",alignItems:"stretch",flexDirection:"column",children:t})]})]}),(0,n.jsx)(a.s,{flex:"1",display:{base:"none",md:"flex"}})]})})}},68358:(e,t,i)=>{i.d(t,{BV:()=>E,j1:()=>I});var n=i(6029),r=i(41781),a=i(78140),s=i(36999),l=i(49611),o=i(48810),d=i(12514),c=i(41283),u=i(83550),m=i(85595),h=i(58959),x=i(26420),g=i(55597),p=i(48621),j=i(77650),v=i(55729),f=i(88586),b=i(27250),w=i(1057),y=i(55292),S=i(82927),C=i(70557);i(93885);let I=e=>{let t,{selectedThemeId:i,onSelectTheme:h,isDisabled:x=!1}=e,[v,f]=(0,C.R7)("themeId"),{globalThemes:b,workspaceThemes:w,allThemes:S}=E();i?t=S.find(e=>e.id===i):null===i&&(t=S.find(e=>e.id===y.z.id));let I=void 0!==i&&S.length>0&&(null==t?void 0:t.id)!==void 0,R=e=>{f(e),null==h||h(e)};return I?(0,n.jsxs)(a.W,{matchWidth:!0,isLazy:!0,children:[(0,n.jsx)(s.I,{as:l.$,w:"100%",variant:"plain",h:"80px",py:2,rightIcon:(0,n.jsx)(o.E,{fontSize:"xs",children:(0,n.jsx)(p.g,{icon:g.Jt$})}),boxShadow:"sm",bg:"white",border:"none",isDisabled:x,children:(0,n.jsx)(k,{theme:t||y.z,fontSize:"0.4em"})}),(0,n.jsx)(d.Z,{children:(0,n.jsxs)(c.c,{maxH:"50vh",overflow:"auto",children:[w.length>0&&(0,n.jsx)(u.r,{title:j.Ru._({id:"B+0JwP"}),children:w.map(e=>(0,n.jsx)(m.D,{onClick:()=>R(e.id),children:(0,n.jsx)(k,{theme:e,fontSize:"0.6em"})},e.id))}),(0,n.jsx)(u.r,{title:j.Ru._({id:"VjG5AF"}),children:b.map(e=>(0,n.jsx)(m.D,{onClick:()=>R(e.id),children:(0,n.jsx)(k,{theme:e,fontSize:"0.6em"})},e.id))})]})})]}):(0,n.jsx)(r.E,{width:"100%",height:"80px",rounded:"md"})},k=e=>{let{theme:t,...i}=e;return(0,n.jsxs)(h.z,{w:"100%",spacing:4,textAlign:"start",children:[(0,n.jsx)(x.a,{w:"16em",...i,children:(0,n.jsx)(b.q,{theme:t,borderRadius:"md"})}),(0,n.jsx)(x.a,{flex:"1",noOfLines:2,maxW:"100%",whiteSpace:"normal",wordBreak:"break-word",children:t.name})]})},E=()=>{let{currentWorkspace:e}=(0,S.ur)(),{data:t,loading:i}=(0,f.Snx)({variables:{workspaceId:null,archived:!1},fetchPolicy:"cache-first",nextFetchPolicy:"cache-only"}),{data:n,loading:r}=(0,f.Snx)({variables:{workspaceId:null==e?void 0:e.id,archived:!1},skip:!e,fetchPolicy:"cache-first",nextFetchPolicy:"cache-only"}),a=(0,v.useMemo)(()=>(null==t?void 0:t.themes)||[],[null==t?void 0:t.themes]),s=(0,v.useMemo)(()=>(null==n?void 0:n.themes)||[],[null==n?void 0:n.themes]),l=(0,v.useMemo)(()=>[...a,...s].sort(w._1),[a,s]);return{globalThemes:a,workspaceThemes:s,allThemes:l,loading:i||r}}},73549:(e,t,i)=>{i.d(t,{f6:()=>v,Ct:()=>f,po:()=>j});var n=i(91285),r=i(53907),a=i(74553),s=i(24926),l=i(55452),o=i(83605);class d extends n.Rv{constructor(e,t){super({transform:async(t,i)=>{if("data"!==t.event)return void i.enqueue(t);let{data:n}=t;try{let r;r="GenerateDeckWithLayout"===e.promptKey?await (0,o.dE)(n):await (0,o.Lm)(n,{...e,cardIndex:this.index,loadImages:!1});let a={index:this.index,cardComplete:!0,content:r,id:r.attrs.id,raw:n};i.enqueue({id:t.id,event:"data",data:a})}catch(t){console.error("[aiHtmlToCard] Skipping card ".concat(this.index," due to error:\n"),t,"\n",n),l.l7("aiHtml",n),l.l7("transformOptions",e),l.Cp(t),s.yf.logger.error("[aiHtmlToCard] Skipping card ${this.index} due to error",{sectionHtml:n,transformOptions:e},t)}this.index++}}),this.index=0,null!=t&&(this.index=t+1)}}let c=e=>{let t=e.match(/(<[^>]+>|<\/[^>]+>)|\S+/g);if(!t)throw Error("Could not parse tokens");return t};class u extends n.Rv{constructor(e){super({transform:async(t,i)=>{if("data"!==t.event)return void i.enqueue(t);let n=t.data,r=performance.now()-this.startTime,a=c(n.raw);e({index:this.index,duration:r,numTokens:a.length}),this.index++,this.startTime=performance.now(),i.enqueue(t)}}),this.index=0,this.startTime=performance.now()}}class m extends n.Rv{constructor(){super({transform:async(e,t)=>{"done"===e.event||"cancel"===e.event?t.enqueue({...e,content:this.content}):(this.content+=e.data.raw||"",t.enqueue(e))}}),this.content=""}}class h extends n.Rv{constructor(){let e=(e,t)=>{for(;;){let i=this._buffer.match(/<section\b[^>]*>(?:(?!<\/?section\b)[\s\S])*<\/section>/i);if(!i)break;let n=i[0],r=i.index;this._buffer=this._buffer.slice(r+n.length);let a=n+"\n\n";e.enqueue({id:t,event:"data",data:a})}};super({transform:async(t,i)=>{if("data"===t.event){if(!t.data)return;this._buffer+=t.data,e(i,t.id);return}this.lastId=t.id,i.enqueue(t)},flush:async t=>{e(t,this.lastId)}}),this._buffer=""}}class x extends n.Rv{constructor(){super({transform:(e,t)=>"done"===e.event?void t.enqueue({id:e.id,event:"done",finishReason:e.data,content:""}):"cancel"===e.event?void t.enqueue({id:e.id,event:"cancel",content:""}):"content"===e.event?void t.enqueue({id:e.id,event:"data",data:e.data}):void console.error("[StreamMessageEventParser] unknown event type",e)})}}var g=i(34630);let p="CANCEL",j=e=>new n.Rv({transform(t,i){e(t),i.enqueue(t)}}),v=e=>{let{stream:t,docId:i,lastCompletedCardId:n,lastCompletedCardIndex:s,interactionId:l,options:o,store:d}=e,[c,u]=b(t,o,s).tee(),m=c.pipeThrough(j(e=>{"done"===e.event&&a.B.trackStreamResponse(d,{interactionId:l,outputContent:e.content})}));(0,g.x_)(m,{}),d.dispatch((0,r.EX)({stream:{id:l,status:"running",stream:u,docId:i,isResuming:!0,lastCompletedCardId:n}}));let h=(0,r.A0)(i)(d.getState());if(!h)throw Error("Expected valid StreamResponse when resuming from stream");return h},f=e=>{let t,{stream:i,onCancel:n,interactionId:s,options:l,bufferCards:o=2,docId:d,store:c}=e,[m,h]=b(i,l).tee(),x=m.pipeThrough(new u(e=>{c.dispatch((0,r.cx)({interactionId:s,data:e}))})).pipeThrough(j(e=>{"done"===e.event&&a.B.trackStreamResponse(c,{interactionId:s,outputContent:e.content})}));c.dispatch((0,r.EX)({stream:{id:s,status:"running",stream:h,isResuming:!1,docId:d}}));let v=new Promise((e,i)=>{t=i;let n=[];(0,g.x_)(x,{onError:e=>{i(e)},onMessage(t){if("done"===t.event)return void e({status:"READY",cards:n});if("data"===t.event){let i=t.data.index+1;n.push(t.data),i>=o&&e({status:"READY",cards:n})}}})}).catch(e=>{if(e===p)return{status:"CANCELED",cards:[]};throw e}),f=!1;return{promise:v,cancel:()=>{f||(console.log("[AIStream] cancelling..."),f=!0,n(),null==t||t(p))}}},b=(e,t,i)=>e.pipeThrough(new x).pipeThrough(new h).pipeThrough(new d(t,i)).pipeThrough(j(e=>{"data"===e.event&&console.log("[AIStream] processed card ".concat(e.data.index+1))})).pipeThrough(new m).pipeThrough(j(e=>{"done"===e.event&&console.log("[AIStream] done (".concat(e.finishReason,")")),"cancel"===e.event&&console.log("[AIStream] cancelled")}))},74553:(e,t,i)=>{i.d(t,{B:()=>l});var n=i(11390),r=i(82927),a=i(40240),s=i(53907);let l={trackRequestSent(e,t){console.log("[AIStream] EVENT: ai.request.sent"),t.product=(0,n.A4)((0,r.vp)()),(0,a.rl)(t);let i=performance.now();e.dispatch((0,s.lC)({...t,startTime:i}))},trackStreamError(e,t){e.dispatch((0,s.Xu)({endTime:performance.now(),interactionId:t.interactionId}));let i=(0,s.U7)(t.interactionId)(e.getState());if(!i)return;let{startTime:n,...r}=i,{errorName:l,errorMessage:o,errorCode:d}=t,c={...r,errorName:l,errorMessage:o,errorCode:d,outputMessage:"",latency:performance.now()-n};console.log("[AIStream] EVENT: ai.request.error"),(0,a.tB)(c)},trackStreamAbort(e,t){let i=(0,s.U7)(t.interactionId)(e.getState());if(!i)return;let{startTime:n,...r}=i,l={...r,abortReason:t.abortReason,timeToAbort:performance.now()-n};console.log("[AIStream] EVENT: ai.request.abort"),(0,a.Hy)(l)},trackStreamStart(e,t){e.dispatch((0,s.o4)(t));let i=(0,s.U7)(t.interactionId)(e.getState());if(!i)return;let{startTime:n,...r}=i,l={...r,timeToStart:performance.now()-n};console.log("[AIStream] EVENT: ai.request.streamStart"),(0,a.xW)(l)},trackStreamResponse(e,t){e.dispatch((0,s.Xu)({endTime:performance.now(),...t}));let i=(0,s.U7)(t.interactionId)(e.getState());if(!i)return;let{startTime:n,...r}=i;console.log("[AIStream] EVENT: ai.request.response"),(0,a.Yh)(r)},trackStreamComplete(e,t,i){let n=(0,s.U7)(t)(e.getState());if(!n)return;let{startTime:r,...l}=n,o={...l,timeToComplete:performance.now()-r,...i};console.log("[AIStream] EVENT: ai.request.complete"),(0,a.UL)(o)}}},79459:(e,t,i)=>{i.d(t,{a:()=>d});var n=i(6029),r=i(26420),a=i(49023),s=i(62452),l=i(72386),o=i(62171);let d=e=>{let{theme:t}=e,i=(0,l.N)(),d=t||i,{isLoadingThemes:c}=(0,a.t)(),u=(0,o.fS)(d),m=(0,s.Mw)(d),h=(0,o.FD)(u,m);return(0,n.jsx)(r.a,{...c?{}:h,w:"100vw",h:"100%",position:"fixed",zIndex:-1,opacity:1,"data-theme-picker-background":!0,transitionProperty:"background-color, background-image",transitionDuration:"1s",inset:"0px"})}},79502:(e,t,i)=>{i.d(t,{Bz:()=>B,ut:()=>N});var n=i(9329),r=i(6029),a=i(57405),s=i(83638),l=i(25223),o=i(27229),d=i(26385),c=i(48810),u=i(49611),m=i(36218),h=i(40162),x=i(4192),g=i(40452),p=i(83004),j=i(99492),v=i(55597),f=i(48621),b=i(19564),w=i(77650),y=i(55729),S=i(10888),C=i(76891),I=i(2196),k=i(52090),E=i(70557),R=i(34832),A=i(9118),_=i(73247),T=i(13080),P=i(66048),z=i(79807),V=i(40782),L=i(14368),G=i(1057),M=i(93885),D=i(68358);function W(){let e=(0,n._)(["\n  from {\n    opacity: 0;\n  }\n  to {\n    opacity: 1;\n  }\n"]);return W=function(){return e},e}let O=(0,p.i7)(W()),N=(0,y.memo)(()=>{var e;let[t]=(0,E.R7)("imageProvider"),i=V.u[t]||L.R,n=(null==(e=k.Qd[t])?void 0:e.label())||(null==i?void 0:i.label()),[a]=(0,E.R7)("imageLicense");return(0,r.jsx)(M.X,{label:(0,r.jsx)(b.x6,{id:"1dt6zm"}),colorScheme:"deepocean",icon:v.Cyq,values:[n,"web"===t&&(0,z.h)(a)],testId:"visuals-settings-group",children:(0,r.jsx)(B,{themePreviewHeightEm:4})})});N.displayName="VisualsSettingsGroup";let B=e=>{let{themePreviewHeightEm:t,imageArtStyleColumns:i}=e,[n]=(0,E.R7)("imageProvider"),[s,l]=(0,E.R7)("imageLicense"),{artStylePreset:o,artStylePrompt:d,setArtStylePreset:c,setCustomArtStylePrompt:u}=H();return(0,r.jsxs)(a.T,{spacing:4,children:[(0,r.jsx)(q,{previewHeightEm:t,variant:"ghost-bordered"}),(0,r.jsx)(k.Ew,{}),"web"===n&&(0,r.jsx)(F,{imageLicense:s,setImageLicense:l}),"aiGenerated"===n&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(U,{}),(0,r.jsx)(J,{columns:i,artStylePrompt:d,artStylePreset:o,setArtStylePreset:c,setCustomArtStylePrompt:u}),(0,r.jsx)(K,{})]})]})},U=()=>{let[e,t]=(0,E.T7)({debounce:500}),[i,n]=(0,E.R7)("imageModelAutoselect",{debounce:500}),a=(0,y.useCallback)(e=>{n(!1),t(e)},[n,t]);return(0,r.jsxs)(s.MJ,{children:[(0,r.jsx)(l.l,{fontSize:"sm",fontWeight:"semibold",children:(0,r.jsx)(b.x6,{id:"GVuOrw"})}),(0,r.jsx)(P.o,{value:e,setValue:a,autoselect:{isActive:null!=i&&i,onChooseAutoselect:()=>n(!0)}})]})},F=e=>{let{imageLicense:t,setImageLicense:i}=e;return(0,r.jsxs)(s.MJ,{children:[(0,r.jsx)(l.l,{fontSize:"sm",fontWeight:"semibold",children:(0,r.jsx)(b.x6,{id:"6TSHCF"})}),(0,r.jsx)(z.V,{value:t,onChange:i})]})},q=e=>{let{previewHeightEm:t,variant:i}=e,[n,a]=(0,E.sC)(),{isOpen:m,onOpen:h,onClose:x}=(0,o.j)();return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(s.MJ,{children:[(0,r.jsxs)(d.B,{width:"100%",direction:"row",justify:"space-between",mb:1,children:[(0,r.jsxs)(d.B,{direction:"column",gap:.5,children:[(0,r.jsx)(l.l,{fontSize:"sm",fontWeight:"semibold",mb:0,children:(0,r.jsx)(b.x6,{id:"FEr96N"})}),(0,r.jsx)(c.E,{fontSize:"sm",color:"gray.600",children:(0,r.jsx)(b.x6,{id:"kuPFtR"})})]}),(0,r.jsx)(u.$,{size:"sm",variant:"ghost",leftIcon:(0,r.jsx)(f.g,{icon:j.fyG}),colorScheme:"gray",fontWeight:"regular",display:{base:"none",md:"flex"},onClick:h,children:(0,r.jsx)(b.x6,{id:"4m3nxQ"})})]}),(0,r.jsx)(C.n,{variant:i,themeId:n||"",setThemeId:a,previewHeightEm:t,compact:!0})]}),m&&(0,r.jsx)(S.l4,{themeId:n||"",setThemeId:a,isOpen:m,onClose:x,images:[]})]})},H=()=>{let[e,t]=(0,E.R7)("artStylePreset",{debounce:500}),i=null!=e?e:"photorealistic",[n,r]=(0,E.R7)("artStylePrompt",{debounce:500}),a=null!=n?n:T.ll[i].prompt;return{setArtStylePreset:(0,y.useCallback)(e=>{t(e),r(T.ll[e].prompt)},[t,r]),artStylePreset:i,artStylePrompt:a,setCustomArtStylePrompt:"custom"===i?r:void 0}},J=e=>{let{artStylePreset:t,setArtStylePreset:i,artStylePrompt:n,setCustomArtStylePrompt:a,columns:o}=e;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(s.MJ,{children:[(0,r.jsx)(l.l,{fontSize:"sm",fontWeight:"semibold",mb:0,children:(0,r.jsx)(b.x6,{id:"hAcO3j"})}),(0,r.jsxs)(d.B,{direction:"column",gap:.5,children:[(0,r.jsx)(c.E,{fontSize:"sm",color:"gray.600",children:(0,r.jsx)(b.x6,{id:"33F4wz"})}),(0,r.jsx)(I.q,{selectedPreset:t,onSelectPreset:i,columns:o})]})]}),a&&(0,r.jsxs)(s.MJ,{children:[(0,r.jsx)(l.l,{fontSize:"sm",color:"gray.600",children:(0,r.jsx)(b.x6,{id:"Ap/+tH"})}),(0,r.jsx)(m.T,{onChange:e=>a(e.target.value),value:n,placeholder:w.Ru._({id:"zPao75"}),resize:"none",fontSize:"sm",rows:2})]})]})},K=()=>{let[e,t]=(0,E.R7)("artStyleAdditionalKeywords",{debounce:500}),i=null!=e?e:"",[n]=(0,E.R7)("artStylePrompt",{debounce:500}),[a]=(0,E.R7)("artStylePreset",{debounce:500}),[o]=(0,E.R7)("imageStyle",{debounce:500}),[u]=(0,E.sC)(),{allThemes:x}=(0,D.BV)(),[g,p]=(0,y.useState)([]),j=(0,y.useRef)();(0,y.useEffect)(()=>{if("custom"===a)return;let e=(0,A.xt)((0,_.J)()).englishName,t=x.find(e=>e.id===u),i=t?(0,G.xI)(t):void 0;return j.current&&clearTimeout(j.current),j.current=setTimeout(async()=>{p((await (0,R.K8)({promptKey:"SuggestExtraKeywords",variables:{artStylePrompt:null!=n?n:"",themePrompt:null!=i?i:"",numKeywords:10,language:e}})).split("\n").map(e=>e.trim()).filter(Boolean))},500),()=>{j.current&&clearTimeout(j.current)}},[n,o,u,x,a]);let v=g.filter(e=>!i.includes(e)).slice(0,4);return(0,r.jsxs)(s.MJ,{children:[(0,r.jsx)(l.l,{fontSize:"sm",fontWeight:"semibold",mb:0,children:(0,r.jsx)(b.x6,{id:"3BIxra"})}),(0,r.jsxs)(d.B,{direction:"column",gap:1.5,children:[(0,r.jsx)(c.E,{fontSize:"sm",color:"gray.600",children:(0,r.jsx)(b.x6,{id:"U6/XPk"})}),(0,r.jsx)(m.T,{onChange:e=>t(e.target.value),value:i,placeholder:w.Ru._({id:"LLAa/9"}),resize:"none",fontSize:"sm",rows:1}),(0,r.jsx)(h.B,{mt:1,children:v.map(e=>(0,r.jsx)(X,{keyword:e,onClick:()=>{t(i?"".concat(i,", ").concat(e):e),p(t=>t.filter(t=>t!==e))}},e))})]})]})},X=(0,y.memo)(e=>{let{keyword:t,onClick:i}=e;return(0,r.jsx)(x.vw,{cursor:"pointer",colorScheme:"gray",boxShadow:"sm",borderRadius:16,animation:"".concat(O," .7s ease-in-out"),_hover:{color:"white",bg:"gray.600"},onClick:i,children:(0,r.jsxs)(g.s,{align:"center",gap:1,children:[(0,r.jsx)(f.g,{icon:v._$C,size:"xs"}),t]})})});X.displayName="ExtraKeywordsTag"},93885:(e,t,i)=>{i.d(t,{X:()=>f});var n=i(6029),r=i(59554),a=i(6743),s=i(58959),l=i(26420),o=i(26385),d=i(48810),c=i(29810),u=i(30928),m=i(62117),h=i(41781),x=i(48621),g=i(55729),p=i(83370),j=i(15342);let v={_groupHover:{color:"purple.600"}},f=(0,g.memo)(e=>{let{icon:t,colorScheme:i="gray",label:g,values:f=[],children:b,testId:w}=e,y=!(0,j.GV)(p.gG);return(0,n.jsx)(r.A,{border:"none",children:e=>{let{isExpanded:r}=e;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(a.J,{_focus:{boxShadow:"none",outline:"none"},py:2,p:3,outline:"none",transitionProperty:"common",transitionDuration:"normal",bg:"transparent",_hover:{bg:"".concat(i,".50")},"data-testid":w,children:(0,n.jsxs)(s.z,{width:"100%",spacing:"3",align:"start",children:[(0,n.jsx)(l.a,{...v,display:"inline",fontSize:"sm",color:"".concat(i,".300"),children:(0,n.jsx)(x.g,{icon:t,fixedWidth:!0})}),(0,n.jsxs)(o.B,{spacing:0,align:"start",textAlign:"left",children:[(0,n.jsx)(d.E,{...v,fontWeight:"700",children:g}),!r&&(0,n.jsx)(d.E,{fontSize:"sm",fontWeight:"500",noOfLines:2,...v,children:f.filter(Boolean).join(" \xb7 ")})]}),(0,n.jsx)(c.h,{}),(0,n.jsx)(u.Q,{...v})]})}),(0,n.jsx)(m.v,{p:4,pt:3,pb:6,children:y?(0,n.jsxs)(o.B,{spacing:4,pt:2,align:"start",children:[(0,n.jsx)(h.E,{w:"100%",height:"30px"}),(0,n.jsx)(h.E,{w:"100%",height:"30px"}),(0,n.jsx)(h.E,{w:"100%",height:"30px"})]}):b})]})}})});f.displayName="SettingsGroup"}}]);
//# sourceMappingURL=3109-1049e2eb79ab9f31.js.map