"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7424],{17206:(e,s,i)=>{i.d(s,{n:()=>F,j:()=>W});var n=i(6029),l=i(12514),r=i(40452),t=i(64268),a=i(26385),o=i(48810),d=i(49611),c=i(77364),x=i(99492),u=i(48621),j=i(55729),h=i(5061),p=i(15342),m=i(43634),g=i(29608),f=i(28615),v=i(11403),b=i(6807),C=i(85732),y=i(68986),w=i(19564),E=i(68301),k=i(70006),S=i(99038),O=i(80314),A=i(67604),I=i(47117),_=i(86025),R=i(88608),z=i(95889),N=i(82927),M=i(74003),D=i(86992),U=i(14322),P=i(65148);let B=[{Component:()=>{let e=(0,E.u)("outageButterbar");if(!e.enabled)return null;let{header:s,text:i,buttonLink:l,buttonText:r,key:t,pathnameRegexp:a}=e;return(0,n.jsx)(W,{definition:{key:t,header:s,text:i,buttonText:r,buttonLink:l,conditions:()=>!a||null!==window.location.pathname.match(new RegExp(a))}})},key:"outage-butterbar"},{Component:()=>"NORMAL"===(0,E.u)("openAiStatus")?null:(0,n.jsx)(W,{definition:{key:"ai-service-status",header:(0,n.jsx)(w.x6,{id:"1Agl06"}),text:(0,n.jsx)(w.x6,{id:"cCl6WD"}),ttl:86400,conditions:()=>(0,k.a5)(window.location.pathname)}}),key:"ai-service-status-butterbar"},{Component:()=>{var e,s,i;let{user:l,currentWorkspace:r}=(0,N.ur)(),{subscription:t,product:a}=(0,M.I)(),{launchFailedPaymentFlow:o,failedPaymentFlowEnabled:d}=(0,_.yf)({subscription:t,workspace:r,autoLaunch:!1});if(!t||!a)return null;let{name:c,dontChurnMessage:x}=(0,D.Ok)()[a],{status:u,expirationTime:j,id:h}=t,p=(0,R.Yq)(j,"MMMM do, yyyy"),m=(null==t||null==(e=t.createdByUser)?void 0:e.id)===(null==l?void 0:l.id),g=(0,U.AY)(),f=j>Date.now();if("unpaid"!==u&&"past_due"!==u&&!f)return null;let v=g&&(m||!(null==t?void 0:t.createdByUser))?(0,n.jsx)(w.x6,{id:"velw1T",values:{expirationFormatted:p,GAMMA_PROPER_NOUN:S.On,productName:c},components:{0:(0,n.jsx)(O.N,{href:d?void 0:g,onClick:d?o:void 0,isExternal:!0,textDecoration:"underline"})}}):(0,n.jsx)(w.x6,{id:"9aBOfk",values:{expirationFormatted:p,GAMMA_PROPER_NOUN:S.On,productName:c,0:null==(s=t.createdByUser)?void 0:s.displayName,1:null==(i=t.createdByUser)?void 0:i.email},components:{0:(0,n.jsx)("b",{}),1:(0,n.jsx)("b",{})}});return(0,n.jsx)(W,{definition:{key:"payment-overdue-".concat(h),header:(0,n.jsx)(w.x6,{id:"Lac1Vj",values:{GAMMA_PROPER_NOUN:S.On,productName:c}}),text:(0,n.jsxs)(n.Fragment,{children:[x," ",v]}),buttonText:(0,n.jsx)(w.x6,{id:"WLvqZR"}),buttonLink:d?void 0:g,buttonOnClick:d?o:void 0}})},key:"payment-overdue-butterbar"},{Component:()=>{let{subscription:e,openUpsellModal:s}=(0,M.I)();if(!e)return null;let{status:i,expirationTime:l,id:r}=e;if(!(new Date>(0,A.A)(l)&&new Date<(0,I.A)((0,A.A)(l),{days:10})))return null;let t=()=>s({segmentEvent:z.VV.GAMMA_PRO_UPSELL_SUBSCRIPTION_EXPIRED_BUTTERBAR}),a=(0,n.jsx)(O.N,{onClick:t,isExternal:!0,textDecoration:"underline",children:(0,n.jsx)(w.x6,{id:"mj68q/"})});return(0,n.jsx)(W,{definition:{key:"subscription-expired-".concat(r),header:(0,n.jsx)(w.x6,{id:"0hHZEf",values:{GAMMA_PROPER_NOUN:S.On}}),text:(0,n.jsxs)(n.Fragment,{children:["unpaid"===i||"past_due"===i?(0,n.jsx)(w.x6,{id:"QdgXJv"}):""," ",a]}),buttonText:(0,n.jsx)(w.x6,{id:"kwkhPe"}),buttonOnClick:t}})},key:"subscription-expired-butterbar"},{Component:()=>{var e,s,i;let{user:l}=(0,N.ur)(),{subscription:r,product:t}=(0,M.I)();if(!r||!t)return null;let{status:a,expirationTime:o,id:d,cancellationRequestedTime:c}=r;if(!("canceled"!=a&&c&&new Date<(0,A.A)(o)&&new Date>(0,I.A)((0,A.A)(o),{days:-7})))return null;let x=(null==r||null==(e=r.createdByUser)?void 0:e.id)===(null==l?void 0:l.id),u=(0,U.AY)(),j=(0,R.Yq)(o,"MMMM do, yyyy"),{name:h,dontChurnMessage:p}=(0,D.Ok)()[t],m=!x&&(null==r?void 0:r.createdByUser)?(0,n.jsx)(w.x6,{id:"z4DeyC",values:{expirationFormatted:j,GAMMA_PROPER_NOUN:S.On,productName:h,0:null==(s=r.createdByUser)?void 0:s.displayName,1:null==(i=r.createdByUser)?void 0:i.email},components:{0:(0,n.jsx)("b",{}),1:(0,n.jsx)("b",{})}}):(0,n.jsx)(w.x6,{id:"qP91+f",values:{expirationFormatted:j,GAMMA_PROPER_NOUN:S.On,productName:h},components:{0:(0,n.jsx)(O.N,{href:u,isExternal:!0,textDecoration:"underline"})}});return(0,n.jsx)(W,{definition:{key:"subscription-ending-soon-".concat(d),header:(0,n.jsx)(w.x6,{id:"66dedh",values:{GAMMA_PROPER_NOUN:S.On,productName:h}}),text:(0,n.jsxs)(n.Fragment,{children:[p," ",m]}),buttonText:(0,n.jsx)(w.x6,{id:"3jHA5d"}),buttonLink:u}})},key:"upcoming-cancellation-butterbar"},{key:"tablet-browser-warning",header:(0,n.jsx)(w.x6,{id:"JAtlMu",values:{GAMMA_PROPER_NOUN:S.On}}),text:(0,n.jsx)(w.x6,{id:"9JlCFS",values:{GAMMA_PROPER_NOUN:S.On}}),conditions:()=>(0,g.Pg)(),dismissKey:P.E.lastDismissedPreferredBrowserMessage},{key:"desktop-browser-warning",header:(0,n.jsx)(w.x6,{id:"3S0+Wy",values:{GAMMA_PROPER_NOUN:S.On}}),text:(0,n.jsx)(w.x6,{id:"Tf7VpJ"}),conditions:()=>T()&&(0,g.bh)(),dismissKey:P.E.lastDismissedPreferredBrowserMessage}],T=()=>(0,g.z3)()||!(0,g.H8)()&&!(0,g.nr)()&&!(0,g.yE)(),F=e=>{let{isViewOnly:s}=e,i=(0,v.En)(),t=(0,p.GV)(m.VJ);if(s||!i||(0,g.rA)()||f.D1||(0,C.NF)()||t)return null;let a=B.map(e=>"Component"in e?(0,n.jsx)(e.Component,{},e.key):(0,n.jsx)(W,{definition:e},e.key));return(0,n.jsx)(l.Z,{children:(0,n.jsx)(r.s,{"data-testid":"butterbar",direction:"column",top:2,pos:"absolute",zIndex:"toast",sx:{"> *:not(:first-child)":{display:"none"}},children:a})})},W=e=>{let{definition:s}=e,i=(0,h.fW)(),{key:l,dismissKey:p="butterbar-dismiss-".concat(l),header:m,text:g,buttonText:f,buttonLink:v,buttonOnClick:C=v?()=>window.open(v,"_blank"):void 0,conditions:w,ttl:E}=s,[k,S]=(0,b.M)(p,!1);if((0,j.useEffect)(()=>{if(E&&k)new Date().getTime()-new Date(k).getTime()>1e3*E&&y.x.removeItem(p)},[p,k,E]),w&&!w()||k)return null;let O=f&&C;return(0,n.jsxs)(t.F,{gap:4,position:"fixed",insetStart:"50%",transform:"translateX(".concat(i?"50%":"-50%",")"),shadow:"lg",width:{base:"calc(100% - 1rem)",md:"auto"},flexDirection:{base:"column",lg:"row"},alignItems:{base:"flex-start",lg:"center"},colorScheme:"pink",variant:"solid",children:[(0,n.jsxs)(a.B,{spacing:0,flex:1,pe:{base:12,lg:0},children:[(0,n.jsx)(o.E,{fontWeight:"bold",children:m}),(0,n.jsx)(o.E,{opacity:"0.7",fontSize:"xs",children:g})]}),O&&(0,n.jsx)(d.$,{flexShrink:0,variant:"plain",size:"sm",rightIcon:v?(0,n.jsx)(u.g,{icon:x.Ju_}):void 0,onClick:C,children:f}),(0,n.jsx)(r.s,{alignSelf:"flex-start",position:{base:"absolute",lg:"static"},insetEnd:4,top:4,children:(0,n.jsx)(c.J,{variant:"solid-alert",size:"sm",onClick:()=>{S(String(new Date))}})})]})}},51988:(e,s,i)=>{i.d(s,{J:()=>c});var n=i(6029),l=i(26385),r=i(48810),t=i(19564),a=i(77650),o=i(55729),d=i(68871);let c=e=>{let{password:s,setPassword:i,retypedPassword:c,setRetypedPassword:x,onValidationChange:u}=e,j=s.length>0?(0,d.O)(s):[],h=s!==c,p=(0!==j.length||h)&&s.length>0;return(0,o.useEffect)(()=>{null==u||u(p)},[p,u]),(0,n.jsxs)(l.B,{spacing:4,children:[(0,n.jsx)(d.s,{label:(0,n.jsx)(t.x6,{id:"/nT6AE"}),placeholder:a.Ru._({id:"0StR7t"}),value:s,onChange:e=>i(e.target.value),showHelp:!1}),(0,n.jsx)(d.s,{label:(0,n.jsx)(t.x6,{id:"u968bF"}),placeholder:a.Ru._({id:"hyMBbi"}),value:c,onChange:e=>x(e.target.value),showHelp:!0}),(0,n.jsxs)(l.B,{spacing:1,mt:1,children:[h&&(0,n.jsx)(r.E,{color:"red.500",fontSize:"sm",children:(0,n.jsx)(t.x6,{id:"iHXlwG"})}),j.map((e,s)=>(0,n.jsx)(r.E,{color:"red.500",fontSize:"sm",children:e},s))]})]})}},68871:(e,s,i)=>{i.d(s,{s:()=>f,O:()=>g});var n=i(6029),l=i(27229),r=i(40697),t=i(83638),a=i(25223),o=i(72470),d=i(38036),c=i(77979),x=i(16936),u=i(5091),j=i(19564),h=i(77650),p=i(55729),m=i(36034);let g=e=>{let s=[];return e.length<8&&s.push(h.Ru._({id:"cUUVem"})),e.match(/[A-Z]/)||s.push(h.Ru._({id:"+6oZdK"})),e.match(/[a-z]/)||s.push(h.Ru._({id:"Cjay54"})),e.match(/[0-9]/)||s.push(h.Ru._({id:"XcEl4D"})),e.match(/[\^$*.[\]{}()?"!@#%&/\\,><':;|_~`=+-]/)||s.push(h.Ru._({id:"EodnCE"})),s},f=(0,p.forwardRef)((e,s)=>{let{isOpen:i,onToggle:g}=(0,l.j)(),f=(0,p.useRef)(null),v=(0,p.useId)(),b=(0,r.SV)(f,s),C=!!((null==e?void 0:e.error)&&e.error.length>1);return(0,n.jsxs)(t.MJ,{isInvalid:C,children:[(0,n.jsx)(a.l,{htmlFor:v,fontSize:{base:"sm",md:"md"},mb:1,children:e.label||(0,n.jsx)(j.x6,{id:"8ZsakT"})}),(0,n.jsxs)(o.M,{children:[(0,n.jsx)(d.p,{id:v,ref:b,name:"password",type:i?"text":"password",autoComplete:"current-password",required:!0,...e}),(0,n.jsx)(c.t,{children:(0,n.jsx)(x.K,{variant:"ghost","aria-label":i?h.Ru._({id:"KJAyEq"}):h.Ru._({id:"B+wtoH"}),icon:i?(0,n.jsx)(m.QLA,{}):(0,n.jsx)(m.zeF,{}),onClick:()=>{g(),f.current&&f.current.focus({preventScroll:!0})},tabIndex:0})})]}),e.showHelp&&(0,n.jsx)(t.eK,{children:(0,n.jsx)(j.x6,{id:"v6cuzy"})}),e.error&&(0,n.jsx)(u.Wt,{children:e.error})]})});f.displayName="PasswordField"},96441:(e,s,i)=>{i.d(s,{Y:()=>t,X:()=>eH});var n=i(6029),l=i(40452),r=i(3276);let t=()=>(0,n.jsx)(l.s,{className:"full-page-spinner",flex:"1",justifyContent:"center",alignItems:"center",children:(0,n.jsx)(r.y,{})});var a=i(27229),o=i(78140),d=i(36999),c=i(96990),x=i(12514),u=i(41283),j=i(85595),h=i(83550),p=i(6760),m=i(99492),g=i(55597),f=i(48621),v=i(91106),b=i(19564),C=i(55729),y=i(91938),w=i(82328),E=i(19783),k=i(68301),S=i(5063),O=i(99767),A=i(73110),I=i(95889),_=i(82927),R=i(92816),z=i(58959),N=i(48810),M=i(64268),D=i(26385),U=i(96500),P=i(46898),B=i(67909),T=i(36071),F=i(54731),W=i(17920),L=i(3674),G=i(40691),J=i(26420),V=i(61491),$=i(16426),H=i(61204),q=i(49611),Z=i(77650),K=i(88586),Q=i(99038);let X=()=>(0,n.jsxs)(z.z,{px:2,py:2,border:"2px solid var(--chakra-colors-red-500)",borderRadius:"md",children:[(0,n.jsx)(R.u,{w:4,h:4,color:"red.500"}),(0,n.jsx)(N.E,{fontSize:"sm",color:"red.500",children:(0,n.jsx)(b.x6,{id:"Ofm9ns"})})]}),Y=e=>{let{user:s,workspace:i,canDeleteAccount:r}=e;return(0,n.jsxs)(M.F,{status:s||(null==i?void 0:i.memberCount)&&i.memberCount<=1?"error":"warning",display:"flex",flexDirection:"column",alignItems:"normal",mt:2,children:[(0,n.jsxs)(l.s,{pb:3,flexDirection:["column","column","row","row"],align:"flex-start",gap:2,children:[(0,n.jsxs)(l.s,{flex:1,children:[(0,n.jsx)(c.e,{src:null==s?void 0:s.profileImageUrl,size:"sm",name:(null==s?void 0:s.displayName)||(null==i?void 0:i.name)}),(0,n.jsxs)(D.B,{spacing:0,ml:2,flex:"1",children:[(0,n.jsx)(N.E,{fontSize:"sm",flex:"1",wordBreak:"break-word",children:(null==s?void 0:s.displayName)||(null==i?void 0:i.name)}),s&&(0,n.jsx)(N.E,{fontSize:"xs",color:"gray.600",flex:"1",wordBreak:"break-word",children:s.email}),i&&(0,n.jsx)(N.E,{fontSize:"xs",color:"gray.600",children:(0,n.jsx)(b.x6,{id:"LaQ44M",values:{0:i.memberCount||0}})})]})]}),(0,n.jsx)(l.s,{flexShrink:1,children:(s||i&&(null==i?void 0:i.memberCount)===1)&&(0,n.jsx)(X,{})})]}),(0,n.jsx)(U.c,{borderColor:"blackAlpha.200"}),(0,n.jsxs)(N.E,{pt:2,fontSize:"sm",color:s||(null==i?void 0:i.memberCount)&&i.memberCount<=1?"red.500":"yellow.700",children:[r&&s&&(0,n.jsxs)(n.Fragment,{children:["⚠️"," ",(0,n.jsx)(b.x6,{id:"j95nHI",values:{GAMMA_ARTIFACT_PROPER_NOUN_PLURAL:Q.Ix}})]}),r&&(null==i?void 0:i.memberCount)&&(i.memberCount>1?(0,n.jsxs)(n.Fragment,{children:["⚠️ ",(0,n.jsx)(b.x6,{id:"QnF/9z"})]}):(0,n.jsxs)(n.Fragment,{children:["⚠️"," ",(0,n.jsx)(b.x6,{id:"PU+L+E",values:{GAMMA_ARTIFACT_PROPER_NOUN_PLURAL:Q.Ix}})]})),!r&&(0,n.jsxs)(n.Fragment,{children:["⚠️"," ",(0,n.jsx)(b.x6,{id:"eFx5qm"})]})]})]})},ee=e=>{var s,i;let{isOpen:l,onClose:r,user:t}=e,[a,o]=(0,C.useState)(!1),[d,c]=(0,C.useState)(!1),{data:x}=(0,K.Agb)(),u=(0,P.d)(),[j]=(0,K.HCE)(),h=(null==x||null==(i=x.user)||null==(s=i.workspaceMemberships)?void 0:s.filter(e=>!1===e.disabled))||[],p=h.filter(e=>{var s,i;return"admin"===e.role&&(null==(s=e.workspace)?void 0:s.adminCount)===1&&(null==(i=e.workspace)?void 0:i.memberCount)&&e.workspace.memberCount>1}),m=h.map(e=>e.workspace),g=0===p.length,f=(0,C.useCallback)(()=>{c(!0),j().then(e=>{let{data:s}=e;s&&(window.location.href="".concat(y.$.API_HOST,"/logout?redirectTo=/user-deleted"))}).catch(()=>{c(!1),u({title:"Delete account failed. Try again or reach out to Gamma support.",status:"error",duration:3e3,position:"top",isClosable:!0})})},[u,j]);return(0,n.jsxs)(B.aF,{isOpen:l,onClose:r,size:"lg",closeOnOverlayClick:!1,children:[(0,n.jsx)(T.m,{}),(0,n.jsxs)(F.$,{p:2,children:[(0,n.jsx)(W.r,{children:(0,n.jsx)(b.x6,{id:"pj33Dr",values:{GAMMA_PROPER_NOUN:Q.On}})}),(0,n.jsx)(L.s,{}),(0,n.jsxs)(G.c,{children:[g&&(0,n.jsxs)(D.B,{spacing:3,children:[(0,n.jsx)(N.E,{children:(0,n.jsx)(b.x6,{id:"gICMDu"})}),(0,n.jsxs)(J.a,{children:[(0,n.jsx)(N.E,{colorScheme:"gray",fontSize:"sm",children:(0,n.jsx)(b.x6,{id:"sG4820"})}),(0,n.jsx)(Y,{user:t,canDeleteAccount:g})]}),m&&m.length>0&&(0,n.jsxs)(J.a,{children:[(0,n.jsx)(N.E,{colorScheme:"gray",fontSize:"sm",children:(0,n.jsx)(b.x6,{id:"dFEw4P"})}),null==m?void 0:m.map(e=>(0,n.jsx)(Y,{workspace:e,canDeleteAccount:g},null==e?void 0:e.id))]}),(0,n.jsxs)(J.a,{children:[(0,n.jsx)(N.E,{colorScheme:"gray",fontSize:"sm",children:(0,n.jsx)(b.x6,{id:"R3XcoA"})}),(0,n.jsxs)(z.z,{bg:"gray.50",mt:2,p:3,pl:2,spacing:2,borderRadius:"sm",children:[(0,n.jsx)(V.S,{size:"lg",spacing:"1rem",p:3,defaultChecked:a,onChange:e=>o(e.target.checked)}),(0,n.jsx)(N.E,{fontSize:"sm",children:(0,n.jsx)(b.x6,{id:"4YT8Pd"})})]})]})]}),!g&&(0,n.jsx)(D.B,{children:(0,n.jsxs)(J.a,{children:[(0,n.jsx)(N.E,{colorScheme:"gray",fontSize:"sm",children:(0,n.jsx)(b.x6,{id:"nhUDfL"})}),null==m?void 0:m.map(e=>(0,n.jsx)(Y,{workspace:e,canDeleteAccount:g},null==e?void 0:e.id))]})})]}),g&&(0,n.jsx)($.j,{children:(0,n.jsxs)(H.e,{children:[(0,n.jsx)(q.$,{variant:"ghost",colorScheme:"gray",onClick:r,children:(0,n.jsx)(b.x6,{id:"dEgA5A"})}),(0,n.jsx)(q.$,{isDisabled:!a,variant:"hazardous",onClick:f,isLoading:d,loadingText:Z.Ru._({id:"O71YIC"}),children:(0,n.jsx)(b.x6,{id:"dfBVKc"})})]})})]})]})};var es=i(33787),ei=i(58297),en=i(17496),el=i(5091),er=i(83638),et=i(25223),ea=i(38036),eo=i(29810),ed=i(23293),ec=i(99430),ex=i(81278),eu=i(79138),ej=i(47880),eh=i(87996),ep=i(18640),em=i(22445),eg=i(60908);let ef=e=>{let{isOpen:s,onClose:i,onConfirm:l,onDiscard:r,originalLocaleConfirmStrings:t}=e;return(0,n.jsxs)(B.aF,{isOpen:s,onClose:i,size:"xl",children:[(0,n.jsx)(T.m,{}),(0,n.jsxs)(F.$,{children:[(0,n.jsx)(W.r,{children:(0,n.jsxs)(D.B,{spacing:0,children:[(0,n.jsx)(b.x6,{id:"sCTlv5"}),(null==t?void 0:t.title)?(0,n.jsxs)(N.E,{children:["(",null==t?void 0:t.title,")"]}):null]})}),(0,n.jsx)(L.s,{}),(0,n.jsx)(G.c,{children:(0,n.jsxs)(D.B,{spacing:0,children:[(0,n.jsx)(N.E,{children:(0,n.jsx)(b.x6,{id:"EVJO23"})}),(null==t?void 0:t.body)?(0,n.jsxs)(N.E,{children:["(",null==t?void 0:t.body,")"]}):(0,n.jsx)(n.Fragment,{})]})}),(0,n.jsx)($.j,{children:(0,n.jsxs)(H.e,{flexWrap:"wrap",gap:"3",justifyContent:"flex-end",spacing:"0",children:[(0,n.jsx)(q.$,{variant:"ghost",onClick:r,...(null==t?void 0:t.secondaryCTA)?{height:"fit-content",py:4}:{},children:(0,n.jsxs)(D.B,{spacing:0,children:[(0,n.jsx)(b.x6,{id:"3EbjfR"}),(null==t?void 0:t.secondaryCTA)?(0,n.jsxs)(N.E,{children:["(",null==t?void 0:t.secondaryCTA,")"]}):null]})}),(0,n.jsx)(q.$,{variant:"solid",onClick:l,...(null==t?void 0:t.primaryCTA)?{height:"fit-content",py:4}:{},children:(0,n.jsxs)(D.B,{spacing:0,children:[(0,n.jsx)(b.x6,{id:"y3aU20"}),(null==t?void 0:t.primaryCTA)?(0,n.jsxs)(N.E,{children:["(",null==t?void 0:t.primaryCTA,")"]}):null]})})]})})]})]})},ev={cropped:"",original:""};var eb=function(e){return e.GOOGLE="GOOGLE",e.PASSWORD="PASSWORD",e}(eb||{});let eC=e=>{var s,i,t,a;let{isOpen:x,onClose:h,onAccountDeleteModalOpen:y,user:w,orgId:E}=e,S=(0,k.u)("passwordResetUI"),R=(0,I.st)(),M=(0,P.d)(),[H,{loading:Q,error:X}]=(0,K.H7G)(),[Y,ee]=(0,C.useState)(!1),{isOpen:eb,onOpen:eC,onClose:ey}=(0,em.E)({id:"account-settings-unsaved-changes"}),ew=(0,ex.useRouter)(),{setSettings:eE}=(0,_.ur)(),ek=(0,A.O)(),eS=(0,C.useMemo)(()=>ek,[]),[eO,eA]=(0,C.useState)(eS),[eI]=(0,C.useState)({title:Z.Ru._({id:"sCTlv5"}),body:Z.Ru._({id:"EVJO23"}),primaryCTA:Z.Ru._({id:"y3aU20"}),secondaryCTA:Z.Ru._({id:"3EbjfR"})});(0,ej.O)(eO);let[e_,eR]=(0,C.useState)(w.firstName||""),[ez,eN]=(0,C.useState)(w.lastName||""),[eM,eD]=(0,C.useState)((null==(s=w.settings)?void 0:s.unsubscribeAnnouncementEmails)||!1),[eU,eP]=(0,C.useState)((null==(i=w.settings)?void 0:i.unsubscribeOnboardingEmails)||!1),eB=!eU,eT=!eM,[eF,eW]=(0,C.useState)(w.profileImageUrl||null),[eL,eG]=(0,C.useState)(ev),[eJ,eV]=(0,C.useState)("original"),e$=eL.cropped&&"cropped"===eJ?eL.cropped:eL.original&&"original"===eJ?eL.original:eF,[eH,eq]=(0,C.useState)("idle"),eZ=(0,C.useMemo)(()=>eh.Fk.createUppyInstance(E,{onUploadStart:e=>{eG(ev),eq("uploading"),eV("original"),(0,eg.aI)(e.file.type||"")||eW(e.tempUrl)},onOriginalFileUpload:e=>{console.debug("[AccountSettingsModal] onOriginalFileUpload",e),eW(e.src),eG(s=>({...s,original:e.src}))},onUploadComplete:e=>{console.debug("[AccountSettingsModal] onUploadComplete",e),eW(s=>s||e.src),eG(()=>({original:e.src,cropped:e.croppedFace||""})),eq("idle"),eZ.cancelAll()},onUploadFailed:()=>{eq("error"),eZ.cancelAll()}},"profile"),[E]),{onClick:eK,inputElement:eQ}=(0,ep.W)({uppy:eZ}),eX=(0,C.useCallback)(()=>{y&&(y(),h())},[y,h]),eY=(0,C.useCallback)(()=>{null==R||R.track(I.VV.USER_PASSWORD_RESET),h(),ew.push("/forgot?email=".concat(encodeURIComponent(w.email)))},[ew,w.email,h,R]),e0=(0,C.useCallback)(()=>{var e,s;eZ.cancelAll(),eq("idle"),eR(w.firstName||""),eN(w.lastName||""),eW(w.profileImageUrl||null),eD((null==(e=w.settings)?void 0:e.unsubscribeAnnouncementEmails)||!1),eP((null==(s=w.settings)?void 0:s.unsubscribeOnboardingEmails)||!1),eV("original"),eG(ev),eA(eS)},[w,eS,eZ]),e6=eO!==eS,e1=!!(null==(t=w.settings)?void 0:t.unsubscribeAnnouncementEmails)!==eM,e2=!!(null==(a=w.settings)?void 0:a.unsubscribeOnboardingEmails)!==eU,e5=e_!==w.firstName||ez!==w.lastName||eF!==w.profileImageUrl,e3=(0,C.useMemo)(()=>e5||e6||e1||e2,[e6,e5,e1,e2]),e8=(0,C.useCallback)(()=>{if(!e3)return void h();let e=[],s=e6&&O.jF.includes(eO);eE&&(s||e1||e2)&&e.push(eE({set:{...s?{locale:eO}:{},...e1?{unsubscribeAnnouncementEmails:eM}:{},...e2?{unsubscribeOnboardingEmails:eU}:{}}})),e5&&e.push(H({variables:{input:{id:w.id,firstName:e_,lastName:ez,profileImageUrl:eF||""}}})),ee(!0),Promise.all(e).then(()=>{h(),M({title:(0,n.jsx)(b.x6,{id:"wAvGr+"}),position:"top",status:"success",isClosable:!0,duration:3e3})}).catch(e=>{console.error('[AccountSettingsModal.onSaveClick] Error updating user info "'.concat(null==w?void 0:w.id,'"'),e.message)}).finally(()=>{ee(!1)})},[e_,e3,e6,e5,ez,eO,h,eF,eE,M,eM,e1,eU,e2,H,w.id]),e4=e_.length<1&&ez.length<1||!!(null==X?void 0:X.message)||"error"===eH,e9=(0,C.useCallback)(()=>{e3?eC():h()},[e3,h,eC]);return(0,n.jsxs)(B.aF,{isOpen:x,onClose:e9,size:"2xl",closeOnOverlayClick:!1,children:[eQ,(0,n.jsxs)(J.a,{w:0,h:0,children:[(0,n.jsx)(es._,{src:eL.original}),(0,n.jsx)(es._,{src:eL.cropped})]}),(0,n.jsx)(T.m,{}),(0,n.jsxs)(F.$,{children:[(0,n.jsx)(W.r,{children:(0,n.jsx)(b.x6,{id:"T3FM0r"})}),(0,n.jsx)(L.s,{}),(0,n.jsx)(U.c,{mb:4}),(0,n.jsx)(G.c,{display:"flex",flexDirection:"column",alignItems:"center",children:(0,n.jsxs)(D.B,{direction:"column",w:"100%",px:4,spacing:10,children:[(0,n.jsxs)(l.s,{direction:{base:"column",md:"row"},justifyContent:"space-between",w:"100%",gap:4,children:[(0,n.jsxs)(D.B,{direction:"column",alignItems:"center",px:10,justifyContent:"center",width:{md:"50%"},maxWidth:{md:"50%"},children:[(0,n.jsxs)(o.W,{placement:"bottom-start",offset:[100,0],children:[(0,n.jsx)(v.Tz,{label:(0,n.jsx)(b.x6,{id:"etzA4s"}),openDelay:750,placement:"top",children:(0,n.jsx)(d.I,{position:"relative",disabled:"uploading"===eH,userSelect:"none",cursor:"pointer",role:"group",_hover:{opacity:.9},children:(0,n.jsxs)(c.e,{src:e$||"",name:"".concat(e_," ").concat(ez).trim(),size:"2xl",_groupHover:{shadow:"lg"},ignoreFallback:!0,children:["uploading"===eH&&(0,n.jsx)(ei.j,{position:"absolute",size:"full",justifyContent:"center",alignItems:"center",bg:"gray.300",opacity:.5,children:(0,n.jsx)(r.y,{size:"xl",thickness:"2px"})}),(0,n.jsx)(ei.j,{position:"absolute",bottom:0,right:0,borderRadius:"full",color:"gray.700",textAlign:"center",bg:"gray.200",size:9,_groupHover:{shadow:"lg",transform:"scale(1.02)"},children:(0,n.jsx)(f.g,{icon:eF?m.rwq:m.MT7,width:16,height:16,size:"xs"})})]})})}),(0,n.jsxs)(u.c,{fontSize:"sm",children:[(0,n.jsx)(j.D,{onClick:()=>{"uploading"!==eH&&eK()},children:(0,n.jsxs)(z.z,{children:[(0,n.jsx)(f.g,{icon:g.MNJ}),(0,n.jsx)(N.E,{children:(0,n.jsx)(b.x6,{id:"wPTug2"})})]})}),eF&&(0,n.jsx)(p.N,{}),eF&&(0,n.jsx)(j.D,{onClick:()=>{eW(null),eG(ev)},children:(0,n.jsxs)(z.z,{color:"var(--chakra-colors-red-500)",children:[(0,n.jsx)(f.g,{icon:m.sjs,color:"var(--chakra-colors-red-500)"}),(0,n.jsx)(N.E,{children:(0,n.jsx)(b.x6,{id:"k8od7T"})})]})})]})]}),(0,n.jsx)(en.S,{in:!!eF&&!!eL.cropped&&eF!==w.profileImageUrl&&"idle"===eH,animateOpacity:!0,children:(0,n.jsx)(V.S,{size:"sm",fontSize:"12px",color:"gray.500",isChecked:"cropped"===eJ,onChange:e=>{eV(e.target.checked?"cropped":"original"),eW(e.target.checked?eL.cropped:eL.original)},mb:3,children:(0,n.jsx)(b.x6,{id:"+J8/VC"})})}),(0,n.jsx)(el.Wt,{children:"error"===eH&&(0,n.jsx)(b.x6,{id:"CCcfKO"})}),(0,n.jsxs)(D.B,{spacing:0,alignItems:"center",children:[(0,n.jsx)(N.E,{fontSize:"lg",fontWeight:"bold",children:w.displayName}),(0,n.jsx)(N.E,{color:"gray.500",fontSize:"sm",wordBreak:"break-word",children:w.email})]})]}),(0,n.jsxs)(D.B,{direction:"column",width:{md:"50%"},maxWidth:{md:"50%"},spacing:4,children:[(0,n.jsxs)(er.MJ,{isInvalid:e4,children:[(0,n.jsx)(et.l,{children:(0,n.jsx)(b.x6,{id:"V1EGGU"})}),(0,n.jsx)(ea.p,{w:"100%",value:e_,onChange:e=>eR(e.target.value.slice(0,60))})]}),(0,n.jsxs)(er.MJ,{isInvalid:e4,children:[(0,n.jsx)(et.l,{children:(0,n.jsx)(b.x6,{id:"1ZaQUH"})}),(0,n.jsx)(ea.p,{w:"100%",value:ez,onChange:e=>eN(e.target.value.slice(0,60))}),(0,n.jsx)(el.Wt,{children:(null==X?void 0:X.message)?null==X?void 0:X.message:(0,n.jsx)(b.x6,{id:"yQeiGC"})})]}),S&&"PASSWORD"===w.authProvider&&(0,n.jsxs)(er.MJ,{isInvalid:e4,children:[(0,n.jsx)(et.l,{children:(0,n.jsxs)(z.z,{children:[(0,n.jsx)(b.x6,{id:"8ZsakT"}),(0,n.jsx)(eo.h,{}),(0,n.jsx)(q.$,{variant:"link",size:"sm",onClick:eY,children:(0,n.jsx)(b.x6,{id:"RfwZxd"})})]})}),(0,n.jsx)(ea.p,{w:"100%",value:"Password",isDisabled:!0,type:"password"})]}),(0,n.jsxs)(er.MJ,{children:[(0,n.jsx)(et.l,{children:(0,n.jsxs)(D.B,{direction:"row",alignItems:"center",gap:2,children:[(0,n.jsx)(f.g,{icon:m.Bwz}),(0,n.jsx)(b.x6,{id:"vXIe7J"})]})}),(0,n.jsx)(eu.m,{selectedLocale:O.zd[eO],onLocaleSelect:eA})]})]})]}),(0,n.jsxs)(D.B,{spacing:4,children:[(0,n.jsxs)(D.B,{children:[(0,n.jsx)(ed.D,{as:"h2",size:"md",children:(0,n.jsx)(b.x6,{id:"ZbXNIW"})}),(0,n.jsx)(N.E,{size:"sm",color:"gray.500",children:(0,n.jsx)(b.x6,{id:"2ZAirE"})})]}),(0,n.jsx)(N.E,{children:(0,n.jsx)(b.x6,{id:"iJoBlx"})}),(0,n.jsxs)(er.MJ,{as:l.s,gap:2,alignItems:"center",children:[(0,n.jsx)(ec.d,{size:"md",isChecked:eB,onChange:e=>eP(!e.target.checked)}),(0,n.jsx)(et.l,{m:0,cursor:"pointer",children:(0,n.jsx)(b.x6,{id:"gukxZ5"})})]}),(0,n.jsxs)(er.MJ,{as:l.s,gap:2,alignItems:"center",children:[(0,n.jsx)(ec.d,{size:"md",isChecked:eT,onChange:e=>eD(!e.target.checked)}),(0,n.jsx)(et.l,{m:0,cursor:"pointer",children:(0,n.jsx)(b.x6,{id:"8Q6T6o"})})]})]})]})}),(0,n.jsx)($.j,{children:(0,n.jsxs)(l.s,{justifyContent:"space-between",flex:1,alignItems:"flex-end",p:2,children:[(0,n.jsx)(l.s,{children:(0,n.jsx)(q.$,{variant:"hazardous",onClick:eX,children:(0,n.jsx)(b.x6,{id:"ktknoE"})})}),(0,n.jsxs)(l.s,{flexWrap:"wrap",justifyContent:"flex-end",gap:2,children:[e3&&(0,n.jsx)(q.$,{variant:"ghost",colorScheme:"gray",onClick:e0,children:(0,n.jsx)(b.x6,{id:"dEgA5A"})}),(0,n.jsx)(q.$,{variant:"solid",onClick:e8,isDisabled:e4||"uploading"===eH,isLoading:Q||Y,children:e3?(0,n.jsx)(b.x6,{id:"y3aU20"}):(0,n.jsx)(b.x6,{id:"DPfwMq"})})]})]})})]}),(0,n.jsx)(ef,{isOpen:eb,onClose:ey,onConfirm:e8,onDiscard:()=>{ey(),h()},originalLocaleConfirmStrings:eO!==eS?eI:null})]})};var ey=i(16936),ew=i(83817),eE=i.n(ew),ek=i(31615);let eS={route:"sign-in",profileImageUrl:"",firstName:"",lastName:"",authentication:{provider:"PASSWORD",email:""},emails:{onboardingEmails:!0,announcementEmails:!0},localeKey:void 0};var eO=i(24302),eA=i(7761),eI=i(73287);let e_={cropped:"",original:""},eR=e=>{let{orgId:s,firstName:i,lastName:l,profileImageUrl:t,setStore:a}=e,[x,h]=(0,C.useState)(t);(0,C.useEffect)(()=>{h(t)},[t]);let[y,w]=(0,C.useState)(e_),[E,k]=(0,C.useState)("original"),[S,O]=(0,C.useState)("idle"),A=y.cropped&&"cropped"===E?y.cropped:y.original&&"original"===E?y.original:x||"",I=(0,C.useMemo)(()=>eh.Fk.createUppyInstance(s,{onUploadStart:e=>{w(e_),O("uploading"),k("original"),(0,eg.aI)(e.file.type||"")||(h(e.tempUrl),a(s=>({...s,profileImageUrl:e.tempUrl})))},onOriginalFileUpload:e=>{h(e.src),a(s=>({...s,profileImageUrl:e.src})),w(s=>({...s,original:e.src}))},onUploadComplete:e=>{let s=e.src;h(e=>e||s),a(e=>({...e,profileImageUrl:s})),w(()=>({original:e.src,cropped:e.croppedFace||""})),O("idle"),I.cancelAll()},onUploadFailed:()=>{O("error"),I.cancelAll()}},"profile"),[s,a]),{onClick:_,inputElement:R}=(0,ep.W)({uppy:I}),M=(0,C.useCallback)(()=>{h(null),w(e_),a(e=>({...e,profileImageUrl:null}))},[a]),U=(0,C.useCallback)(e=>{let s=e.target.checked;k(s?"cropped":"original");let i=s?y.cropped:y.original;h(i),a(e=>({...e,profileImageUrl:i}))},[y.cropped,y.original,a]);return(0,n.jsxs)(D.B,{spacing:3,alignItems:"center",children:[R,(0,n.jsxs)(J.a,{w:0,h:0,children:[(0,n.jsx)(es._,{src:y.original}),(0,n.jsx)(es._,{src:y.cropped})]}),(0,n.jsx)(J.a,{position:"relative",children:(0,n.jsxs)(o.W,{placement:"bottom-start",offset:[100,0],children:[(0,n.jsx)(v.Tz,{label:(0,n.jsx)(b.x6,{id:"etzA4s"}),openDelay:750,placement:"top",children:(0,n.jsx)(d.I,{position:"relative",disabled:"uploading"===S,userSelect:"none",cursor:"pointer",role:"group",_hover:{opacity:.9},children:(0,n.jsxs)(c.e,{src:A||"",name:"".concat(i," ").concat(l),size:{base:"xl",md:"2xl"},_groupHover:{shadow:"lg"},ignoreFallback:!0,children:["uploading"===S&&(0,n.jsx)(ei.j,{position:"absolute",size:"full",justifyContent:"center",alignItems:"center",bg:"gray.300",opacity:.5,children:(0,n.jsx)(r.y,{size:"xl",thickness:"2px"})}),(0,n.jsx)(ei.j,{position:"absolute",bottom:0,right:0,borderRadius:"full",color:"gray.800",textAlign:"center",bg:"gray.200",size:9,_groupHover:{shadow:"lg",transform:"scale(1.02)"},children:(0,n.jsx)(f.g,{icon:x?m.rwq:m.MT7,width:16,height:16,size:"xs"})})]})})}),(0,n.jsxs)(u.c,{fontSize:"sm",children:[(0,n.jsx)(j.D,{onClick:()=>{"uploading"!==S&&_()},children:(0,n.jsxs)(z.z,{children:[(0,n.jsx)(f.g,{icon:g.MNJ}),(0,n.jsx)(N.E,{children:(0,n.jsx)(b.x6,{id:"wPTug2"})})]})}),x&&(0,n.jsx)(p.N,{}),x&&(0,n.jsx)(j.D,{onClick:M,children:(0,n.jsxs)(z.z,{color:"var(--chakra-colors-red-500)",children:[(0,n.jsx)(f.g,{icon:m.sjs,color:"var(--chakra-colors-red-500)"}),(0,n.jsx)(N.E,{children:(0,n.jsx)(b.x6,{id:"k8od7T"})})]})})]})]})}),(0,n.jsx)(en.S,{in:!!x&&!!y.cropped&&x!==t&&"idle"===S,animateOpacity:!0,children:(0,n.jsx)(V.S,{size:"sm",fontSize:"12px",color:"gray.500",isChecked:"cropped"===E,onChange:U,mb:3,children:(0,n.jsx)(b.x6,{id:"+J8/VC"})})}),(0,n.jsx)(el.Wt,{children:"error"===S&&(0,n.jsx)(b.x6,{id:"CCcfKO"})})]})},ez=e=>{let{isOpen:s,onClose:i,onConfirm:l}=e;return(0,n.jsxs)(B.aF,{isOpen:s,onClose:i,isCentered:!0,children:[(0,n.jsx)(T.m,{}),(0,n.jsxs)(F.$,{children:[(0,n.jsx)(W.r,{children:(0,n.jsx)(b.x6,{id:"1FFoxQ"})}),(0,n.jsx)(L.s,{}),(0,n.jsx)(G.c,{children:(0,n.jsx)(N.E,{children:(0,n.jsx)(b.x6,{id:"RLdvpT",values:{GAMMA_PROPER_NOUN:Q.On},components:{0:(0,n.jsx)("strong",{})}})})}),(0,n.jsxs)($.j,{children:[(0,n.jsx)(q.$,{variant:"plain",me:3,onClick:i,children:(0,n.jsx)(b.x6,{id:"1cHrEd"})}),(0,n.jsx)(q.$,{variant:"hazardous",onClick:l,children:(0,n.jsx)(b.x6,{id:"M5446u"})})]})]})]})},eN=e=>{let{orgId:s,store:i,setStore:r,onClose:t,tabIndex:a,setTabIndex:o,setRoute:d,onAccountDeleteModalOpen:c,isDirty:x,onResetStore:u,isSaving:j,hasSentAddPasswordEmail:h}=e,p=(0,C.useMemo)(()=>i.firstName.trim().length<1&&i.lastName.trim().length<1,[null==i?void 0:i.firstName,null==i?void 0:i.lastName]),g=(0,C.useMemo)(()=>[{key:"basic-info",label:(0,n.jsx)(b.x6,{id:"o+K7xz"}),icon:m.X46,content:(0,n.jsx)(eM,{orgId:s,store:i,setStore:r,hasErrorWithNames:p})},{key:"email-notifications",label:(0,n.jsx)(b.x6,{id:"aW3TOw"}),description:(0,n.jsx)(b.x6,{id:"2ZAirE"}),icon:m.y_8,content:(0,n.jsx)(eU,{store:i,setStore:r})},{key:"sign-in-security",label:(0,n.jsx)(b.x6,{id:"T0jvBg"}),icon:m.DW4,content:(0,n.jsx)(eD,{store:i,setRoute:d,onAccountDeleteModalOpen:c,hasSentAddPasswordEmail:h})}],[s,i,r,p,d,c,h]),v=(0,C.useMemo)(()=>g.map(e=>({key:e.key,label:e.label,icon:(0,n.jsx)(f.g,{icon:e.icon,fixedWidth:!0})})),[g]),y=(0,C.useMemo)(()=>{let e=g[a];return{key:e.key,label:e.label,icon:(0,n.jsx)(f.g,{icon:e.icon,fixedWidth:!0})}},[a,g]),w=(0,C.useCallback)(e=>{o(g.findIndex(s=>s.key===e.key))},[o,g]);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(G.c,{p:"6",children:(0,n.jsxs)(D.B,{spacing:"6",children:[(0,n.jsx)(eA.x,{options:v,selectedOption:y,setSelectedOption:w,dropdownButtonLeftIcon:y.icon,dropdownMenuTitle:Z.Ru._({id:"T3FM0r"}),size:"md"}),(0,n.jsxs)(D.B,{spacing:"4",children:[g[a].description&&(0,n.jsx)(N.E,{children:g[a].description}),g[a].content]})]})}),(0,n.jsx)(U.c,{}),(0,n.jsx)($.j,{children:(0,n.jsxs)(l.s,{flexWrap:"wrap",justifyContent:"flex-end",gap:2,children:[x&&(0,n.jsx)(q.$,{variant:"ghost",colorScheme:"gray",onClick:u,children:(0,n.jsx)(b.x6,{id:"dEgA5A"})}),(0,n.jsx)(q.$,{variant:"solid",isDisabled:p,onClick:t,isLoading:j,children:x?(0,n.jsx)(b.x6,{id:"y3aU20"}):(0,n.jsx)(b.x6,{id:"DPfwMq"})})]})})]})},eM=e=>{let{orgId:s,store:i,setStore:l,hasErrorWithNames:r}=e,t=i.authentication.email,a=i.profileImageUrl,o=(0,A.O)();return(0,ej.O)(i.localeKey||o),(0,n.jsxs)(D.B,{spacing:4,direction:{base:"column",md:"row"},children:[(0,n.jsxs)(D.B,{flex:"1.5",alignItems:"center",spacing:"3",children:[(0,n.jsx)(eR,{orgId:s,firstName:i.firstName,lastName:i.lastName,profileImageUrl:a,setStore:l}),(0,n.jsxs)(D.B,{w:"100%",alignItems:"center",spacing:"1",children:[(0,n.jsxs)(N.E,{fontWeight:"bold",textAlign:"center",fontSize:"xl",wordBreak:"break-word",maxW:"100%",children:[i.firstName," ",i.lastName]}),(0,n.jsx)(N.E,{color:"gray.500",wordBreak:"break-word",maxW:"100%",children:t})]})]}),(0,n.jsxs)(D.B,{flex:"2",spacing:"4",minW:"0",children:[(0,n.jsxs)(er.MJ,{isInvalid:r,children:[(0,n.jsx)(et.l,{children:(0,n.jsx)(b.x6,{id:"V1EGGU"})}),(0,n.jsx)(ea.p,{w:"100%",value:i.firstName,onChange:e=>l(s=>({...s,firstName:e.target.value.slice(0,60)}))})]}),(0,n.jsxs)(er.MJ,{isInvalid:r,children:[(0,n.jsx)(et.l,{children:(0,n.jsx)(b.x6,{id:"1ZaQUH"})}),(0,n.jsx)(ea.p,{w:"100%",value:i.lastName,onChange:e=>l(s=>({...s,lastName:e.target.value.slice(0,60)}))}),(0,n.jsx)(el.Wt,{children:(0,n.jsx)(b.x6,{id:"yQeiGC"})})]}),(0,n.jsxs)(er.MJ,{children:[(0,n.jsx)(et.l,{children:(0,n.jsxs)(D.B,{direction:"row",alignItems:"center",gap:2,children:[(0,n.jsx)(f.g,{icon:m.Bwz}),(0,n.jsx)(b.x6,{id:"vXIe7J"})]})}),(0,n.jsx)(eu.m,{selectedLocale:O.zd[o],onLocaleSelect:e=>{l(s=>({...s,localeKey:e}))}})]})]})]})},eD=e=>{let{store:s,setRoute:i,onAccountDeleteModalOpen:l,hasSentAddPasswordEmail:r}=e,[t,a]=(0,C.useState)(!1),[o]=(0,eI.hli)(),d=(0,P.d)(),c=(0,I.st)(),x=(0,C.useCallback)(()=>{a(!1)},[]),u=(0,C.useCallback)(async()=>{try{var e,s;(null==(s=(await o()).data)||null==(e=s.signOutOfAllDevices)?void 0:e.success)&&(null==c||c.track(I.VV.USER_SIGNOUT_ALL_DEVICES,{success:!0}),window.location.href="".concat(y.$.API_HOST,"/logout"))}catch(e){null==c||c.track(I.VV.USER_SIGNOUT_ALL_DEVICES,{success:!1}),d({title:(0,n.jsx)(b.x6,{id:"SlfejT"}),description:(0,n.jsx)(b.x6,{id:"GZmirP"}),status:"error",duration:5e3,isClosable:!0})}finally{a(!1)}},[o,d,c]),j="PASSWORD"===s.authentication.provider,h="GOOGLE"===s.authentication.provider,p=s.authentication.email,g=(0,C.useCallback)(e=>{i(e)},[i]);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(D.B,{spacing:"6",divider:(0,n.jsx)(U.c,{}),children:[(0,n.jsxs)(D.B,{spacing:"4",children:[(0,n.jsxs)(ed.D,{as:"h4",size:"sm",children:[(0,n.jsx)(f.g,{icon:m.OKD})," ",(0,n.jsx)(b.x6,{id:"P8fBlG"})]}),h&&(0,n.jsxs)(J.a,{children:[(0,n.jsxs)(z.z,{justifyContent:"space-between",alignItems:"flex-start",children:[(0,n.jsx)(b.x6,{id:"sdDSDG"}),!j&&(0,n.jsx)(v.Tz,{placement:"top",label:Z.Ru._({id:"dqLfRI",values:{displayEmail:p}}),children:(0,n.jsx)(q.$,{variant:"link",onClick:()=>g("add-password"),isDisabled:r,children:(0,n.jsx)(b.x6,{id:"5/Zg7X"})})})]}),(0,n.jsxs)(z.z,{p:"5",border:"2px solid",borderColor:"gray.100",borderRadius:"md",spacing:"3",boxShadow:"sm",w:"100%",children:[(0,n.jsx)(es._,{src:"https://static.gamma.app/icons/v0/google_logo-ed9087d7.svg"}),(0,n.jsx)(N.E,{children:p}),(0,n.jsx)(eo.h,{})]})]}),j&&(0,n.jsxs)(D.B,{spacing:"4",children:[(0,n.jsxs)(er.MJ,{children:[(0,n.jsxs)(z.z,{justifyContent:"space-between",children:[(0,n.jsx)(et.l,{children:(0,n.jsx)(b.x6,{id:"O3oNi5"})}),!1]}),(0,n.jsx)(ea.p,{value:s.authentication.email,pointerEvents:"none",readOnly:!0})]}),(0,n.jsxs)(er.MJ,{children:[(0,n.jsxs)(z.z,{justifyContent:"space-between",mb:2,children:[(0,n.jsx)(N.E,{children:(0,n.jsx)(b.x6,{id:"8ZsakT"})}),(0,n.jsx)(q.$,{variant:"link",onClick:()=>g("update-password"),children:(0,n.jsx)(b.x6,{id:"Q3MPWA"})})]}),(0,n.jsx)(ea.p,{value:"password",type:"password",pointerEvents:"none",readOnly:!0})]})]})]}),(0,n.jsxs)(D.B,{spacing:"4",children:[(0,n.jsxs)(ed.D,{as:"h4",size:"sm",children:[(0,n.jsx)(f.g,{icon:m.YBv})," ",(0,n.jsx)(b.x6,{id:"qwhpzz"})]}),(0,n.jsx)(q.$,{variant:"plain",width:"fit-content",size:"md",leftIcon:(0,n.jsx)(f.g,{icon:m.yBu,fixedWidth:!0}),onClick:()=>a(!0),children:(0,n.jsx)(b.x6,{id:"eFB9sk"})})]}),(0,n.jsxs)(D.B,{spacing:"4",children:[(0,n.jsxs)(ed.D,{as:"h4",size:"sm",children:[(0,n.jsx)(f.g,{icon:m.QJT,fixedWidth:!0})," ",(0,n.jsx)(b.x6,{id:"Zz6Cxn"})]}),(0,n.jsx)(q.$,{variant:"hazardous",width:"fit-content",leftIcon:(0,n.jsx)(f.g,{icon:m.sjs,fixedWidth:!0}),onClick:l,children:(0,n.jsx)(b.x6,{id:"ktknoE"})})]})]}),(0,n.jsx)(ez,{isOpen:t,onClose:x,onConfirm:u})]})},eU=e=>{let{store:s,setStore:i}=e,l=(0,eO.dU)("gray.100","elevation.3");return(0,n.jsxs)(D.B,{p:"4",bg:l,borderRadius:"md",children:[(0,n.jsxs)(z.z,{w:"100%",justifyContent:"space-between",children:[(0,n.jsx)(N.E,{children:(0,n.jsx)(b.x6,{id:"aQpE/g"})}),(0,n.jsx)(ec.d,{size:"md",isChecked:s.emails.onboardingEmails,onChange:e=>i(s=>({...s,emails:{...s.emails,onboardingEmails:e.target.checked}}))})]}),(0,n.jsxs)(z.z,{w:"100%",justifyContent:"space-between",children:[(0,n.jsx)(N.E,{children:(0,n.jsx)(b.x6,{id:"ThnnAz"})}),(0,n.jsx)(ec.d,{size:"md",isChecked:s.emails.announcementEmails,onChange:e=>i(s=>({...s,emails:{...s.emails,announcementEmails:e.target.checked}}))})]})]})},eP=e=>{let{icon:s=m.SGM,iconColor:i="green.500",iconProps:l,title:r,description:t,children:a}=e,o=(0,eO.dU)(i,i);return(0,n.jsxs)(D.B,{alignItems:"center",p:"6",bg:"gray.100",spacing:"4",minH:"180px",justifyContent:"center",children:[(0,n.jsxs)(D.B,{alignItems:"center",textAlign:"center",spacing:"2",children:[(0,n.jsx)(J.a,{p:2,children:(0,n.jsx)(f.g,{icon:s,...l,size:"2x",style:{color:o}})}),(0,n.jsx)(ed.D,{as:"h3",size:"md",fontWeight:"700",fontFamily:"body",children:r}),t&&(0,n.jsx)(N.E,{children:t})]}),a]})},eB=e=>{var s;let{store:i,setRoute:l,onEmailSent:r}=e,[t,a]=(0,C.useState)(!1),[o,d]=(0,C.useState)(!1),c=(0,A.O)(),[x]=(0,K.y2x)(),u=(0,I.st)(),j=null==i||null==(s=i.authentication)?void 0:s.email,h=()=>{l(null)},p=async()=>{d(!0);let e=!1;try{var s;let i=await (0,ek.hw)(eI.ySq.AddPassword),{emailSent:n}=(null==(s=(await x({variables:{input:{email:j,token:i,scenario:eI.acy.AddPassword,settings:{locale:c}}}})).data)?void 0:s.sendCode)||{};if(!n)throw Error("Failed to send email");a(!0),null==r||r(),e=!0}catch(e){}finally{d(!1);let s=!!j&&j.toLowerCase().includes("@gmail.com");null==u||u.track(I.VV.USER_PASSWORD_ADD,{success:e,isGmail:s})}};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(G.c,{p:"6",children:(0,n.jsxs)(D.B,{spacing:"6",minH:"300px",children:[!t&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(N.E,{children:(0,n.jsx)(b.x6,{id:"UvBNsM",values:{email:j},components:{0:(0,n.jsx)("strong",{})}})}),(0,n.jsx)(q.$,{w:"100%",leftIcon:(0,n.jsx)(f.g,{icon:m.y_8,fixedWidth:!0}),onClick:p,isLoading:o,isDisabled:t,children:(0,n.jsx)(b.x6,{id:"wlmEWp"})})]}),t&&(0,n.jsx)(eP,{icon:m.iW_,iconColor:"#3182CE",title:(0,n.jsx)(b.x6,{id:"CSCmIt"}),description:(0,n.jsx)(b.x6,{id:"Qon8E4",values:{email:j},components:{0:(0,n.jsx)("strong",{})}})})]})}),(0,n.jsxs)($.j,{children:[!t&&(0,n.jsx)(q.$,{variant:"plain",onClick:h,isDisabled:o,children:(0,n.jsx)(b.x6,{id:"dEgA5A"})}),t&&(0,n.jsx)(q.$,{variant:"solid",onClick:h,children:(0,n.jsx)(b.x6,{id:"DPfwMq"})})]})]})};var eT=i(68871),eF=i(51988);let eW=e=>{let{setRoute:s}=e,i=(0,P.d)(),[l,r]=(0,C.useState)(""),[t,a]=(0,C.useState)(""),[o,d]=(0,C.useState)(""),[c,x]=(0,C.useState)(!1),[u,j]=(0,C.useState)(!1),[h,p]=(0,C.useState)(!1),m=(0,I.st)(),[g]=(0,eI.SVg)(),f=!t||!o||!l||c||h,v=async()=>{var e,s,r,a;x(!0);let o=!1;try{let a=await g({variables:{input:{currentPassword:l,newPassword:t}}});if(null==(e=a.errors)?void 0:e.length){let e=a.errors[0].message||(0,n.jsx)(b.x6,{id:"XLO6fp"});i({title:(0,n.jsx)(b.x6,{id:"WOLn0C"}),description:e,status:"error",position:"top",isClosable:!0});return}if(!(null==(r=a.data)||null==(s=r.changePassword)?void 0:s.success))return void i({title:(0,n.jsx)(b.x6,{id:"WOLn0C"}),description:(0,n.jsx)(b.x6,{id:"2TG1lq"}),status:"error",position:"top",isClosable:!0});j(!0),i({title:(0,n.jsx)(b.x6,{id:"DA2pbs"}),status:"success",position:"top"}),o=!0}catch(l){let e=null==(a=l.graphQLErrors)?void 0:a[0],s=(null==e?void 0:e.message)||l.message||(0,n.jsx)(b.x6,{id:"XLO6fp"});i({title:(0,n.jsx)(b.x6,{id:"WOLn0C"}),description:s,status:"error",position:"top",isClosable:!0})}finally{x(!1),null==m||m.track(I.VV.USER_PASSWORD_UPDATE,{success:o})}},y=()=>{s(null)};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(G.c,{p:"6",children:(0,n.jsxs)(D.B,{spacing:"4",children:[!u&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(N.E,{children:(0,n.jsx)(b.x6,{id:"NSicHD"})}),(0,n.jsx)(eT.s,{label:(0,n.jsx)(b.x6,{id:"Pn2B7/"}),placeholder:Z.Ru._({id:"fR9laE"}),onChange:e=>r(e.target.value),showHelp:!1}),(0,n.jsx)(eF.J,{password:t,setPassword:a,retypedPassword:o,setRetypedPassword:d,onValidationChange:p})]}),u&&(0,n.jsx)(eP,{title:(0,n.jsx)(b.x6,{id:"fSy6T1"}),description:(0,n.jsx)(b.x6,{id:"rzqEOW"})})]})}),(0,n.jsxs)($.j,{children:[!u&&(0,n.jsxs)(H.e,{children:[(0,n.jsx)(q.$,{variant:"plain",onClick:y,isDisabled:c,children:(0,n.jsx)(b.x6,{id:"dEgA5A"})}),(0,n.jsx)(q.$,{variant:"solid",onClick:v,isDisabled:f,isLoading:c,children:(0,n.jsx)(b.x6,{id:"Q3MPWA"})})]}),u&&(0,n.jsx)(q.$,{variant:"solid",onClick:y,children:(0,n.jsx)(b.x6,{id:"DPfwMq"})})]})]})},eL={"update-password":(0,n.jsx)(b.x6,{id:"vEdQb2"}),"add-password":(0,n.jsx)(b.x6,{id:"f/dPsx"}),"change-email":(0,n.jsx)(b.x6,{id:"Xl7vxL"})};async function eG(e,s,i,n,l,r){if(!i.current||!l||!r)return!1;let t=s.firstName!==i.current.firstName||s.lastName!==i.current.lastName||s.profileImageUrl!==i.current.profileImageUrl||s.authentication.email!==i.current.authentication.email||s.authentication.provider!==i.current.authentication.provider,a=s.emails.onboardingEmails!==i.current.emails.onboardingEmails||s.emails.announcementEmails!==i.current.emails.announcementEmails||s.localeKey!==i.current.localeKey;try{t&&await n({variables:{input:{id:e,firstName:s.firstName,lastName:s.lastName,profileImageUrl:s.profileImageUrl||""}}}),a&&await l({set:{locale:s.localeKey,unsubscribeAnnouncementEmails:!s.emails.announcementEmails,unsubscribeOnboardingEmails:!s.emails.onboardingEmails}}),a||await r()}catch(e){return!1}return!0}let eJ=e=>{let{orgId:s,user:i,isOpen:l,onClose:r,onAccountDeleteModalOpen:t}=e,[a]=(0,K.H7G)(),[o,d]=(0,C.useState)(!1),{refetch:c,setSettings:x}=(0,_.ur)(),[u,j]=(0,C.useState)(0),[h,p]=(0,C.useState)(null),g=(0,A.O)(),v=(0,C.useMemo)(()=>g,[]),[y,w]=(0,C.useState)(v),[E,k]=(0,C.useState)(!1),S=(0,P.d)(),O=(0,C.useRef)(null),[I,R]=(0,C.useState)(eS);(0,C.useEffect)(()=>{if(l){var e,s;let n={route:"sign-in",profileImageUrl:i.profileImageUrl||"",firstName:i.firstName,lastName:i.lastName,authentication:{provider:i.authProvider,email:i.email},emails:{onboardingEmails:!(null==(e=i.settings)?void 0:e.unsubscribeOnboardingEmails),announcementEmails:!(null==(s=i.settings)?void 0:s.unsubscribeAnnouncementEmails)},localeKey:y};O.current=structuredClone(n),R(n),d(!1)}},[l,i,y]);let[z,N]=(0,C.useState)(!1);(0,C.useEffect)(()=>{N(!eE()(O.current,I))},[I]);let{isOpen:M,onOpen:D,onClose:G}=(0,em.E)({id:"account-settings-unsaved-changes"}),J=async()=>{if(!z)return void r();D()},V=async()=>{if(!z)return void r();k(!0);let e=await eG(i.id,I,O,a,x,c);k(!1),r(),e?S({title:(0,n.jsx)(b.x6,{id:"wAvGr+"}),position:"top",status:"success",isClosable:!0,duration:3e3}):S({title:(0,n.jsx)(b.x6,{id:"ttXyaw"}),position:"top",status:"error",isClosable:!0,duration:3e3})},[$]=(0,C.useState)({title:Z.Ru._({id:"sCTlv5"}),body:Z.Ru._({id:"EVJO23"}),primaryCTA:Z.Ru._({id:"y3aU20"}),secondaryCTA:Z.Ru._({id:"3EbjfR"})});return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(ek.vj,{}),(0,n.jsxs)(B.aF,{trapFocus:!1,isOpen:!0,size:"2xl",onClose:J,children:[(0,n.jsx)(T.m,{}),(0,n.jsxs)(F.$,{children:[(0,n.jsxs)(W.r,{children:[null!==h&&(0,n.jsx)(ey.K,{"aria-label":"Back",size:"sm",variant:"ghost",icon:(0,n.jsx)(f.g,{icon:m.Wzs}),onClick:()=>{p(null)},me:2}),h&&eL[h]||(0,n.jsx)(b.x6,{id:"T3FM0r"})]}),(0,n.jsx)(U.c,{}),(0,n.jsx)(L.s,{}),null===h&&(0,n.jsx)(eN,{orgId:s,store:I,setStore:R,onClose:V,tabIndex:u,setTabIndex:j,setRoute:p,onAccountDeleteModalOpen:()=>{t(),r()},isDirty:z,onResetStore:()=>{O.current&&R(structuredClone(O.current))},isSaving:E,hasSentAddPasswordEmail:o}),"add-password"===h&&(0,n.jsx)(eB,{store:I,setRoute:p,onEmailSent:()=>d(!0)}),"update-password"===h&&(0,n.jsx)(eW,{setRoute:p})]})]}),(0,n.jsx)(ef,{isOpen:M,onClose:G,onConfirm:V,onDiscard:()=>{G(),r()},originalLocaleConfirmStrings:y!==v?$:null})]})};var eV=i(45143);let e$={maxWidth:"sm",whiteSpace:"break-spaces"},eH=(0,C.memo)(e=>{var s;let{showRing:i,showCreditsBadge:l=!0}=e,{isInOfflineMode:r}=(0,w.u)(),{user:t,anonymousUser:C,isUserLoading:R,color:z,currentWorkspace:N}=(0,_.ur)(),{isOpen:M,onOpen:D,onClose:U}=(0,a.j)({id:"locale-modal-profile-menu"}),P=(0,A.O)(),B=(0,eV.h5)(["xs","sm"]),T={...C,organizations:[]},{displayName:F,profileImageUrl:W}=t||T,{isConnected:L}=(0,w.u)(),{isOpen:G,onOpen:J,onClose:V}=(0,a.j)({id:"user-settings-modal"}),{isOpen:$,onOpen:H,onClose:q}=(0,a.j)({id:"account-delete-modal"}),Z=(0,k.u)("newAccountSettingsUI");return(0,n.jsxs)(o.W,{children:[(0,n.jsx)(v.Tz,{label:L?t?(0,n.jsx)(b.x6,{id:"hBHHtH"}):F:(0,n.jsx)(b.x6,{id:"ysdDIA"}),children:(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(d.I,{tabIndex:0,_focus:{shadow:"outline"},as:c.e,bg:z.value,color:z.isDark?"white":"black",border:i?"solid 2px ".concat(z.value):"solid 2px var(--chakra-colors-gray-50)",shadow:i?"base":void 0,outline:"none",name:R?void 0:F,src:W,size:B,alignItems:"center",className:"profile-menu-avatar",flexDirection:"column",cursor:"pointer",transition:"box-shadow 150ms ease-out",_hover:{shadow:"0 0 0 3px #CBD5E0"},onDragStart:e=>e.preventDefault(),sx:{span:{display:"none"}}})})}),(0,n.jsx)(x.Z,{children:(0,n.jsx)(u.c,{zIndex:"popover",children:t?(0,n.jsxs)(n.Fragment,{children:[l&&(0,n.jsx)(h.r,{title:t.email||F,sx:e$,children:(0,n.jsx)(E.f,{modalId:"ai-credits-modal-profile-menu",segmentEvent:I.VV.GAMMA_UPSELL_CALLOUT_AI_CREDITS_PROFILE_MENU})}),(0,n.jsxs)(h.r,{...l?{}:{title:t.email||F},sx:e$,children:[(0,n.jsx)(p.N,{}),(0,n.jsx)(j.D,{icon:(0,n.jsx)(f.g,{icon:g.BH7,fixedWidth:!0}),onClick:J,isDisabled:r,children:(0,n.jsx)(b.x6,{id:"LpPf/O"})}),(0,n.jsx)(j.D,{icon:(0,n.jsx)(f.g,{fixedWidth:!0,icon:m.Bwz}),onClick:D,children:(null==(s=O.zd[P])?void 0:s.displayName)||"Unknown"}),(0,n.jsx)(j.D,{color:"red.500",icon:(0,n.jsx)(f.g,{icon:m.GxD,fixedWidth:!0}),onClick:()=>{window.location.href="".concat(y.$.API_HOST,"/logout")},isDisabled:r,children:(0,n.jsx)(b.x6,{id:"fcWrnU"})})]})]}):(0,n.jsx)(j.D,{icon:(0,n.jsx)(f.g,{icon:m.rhE,fixedWidth:!0}),onClick:()=>{window.location.href="/signin"},isDisabled:r,children:(0,n.jsx)(b.x6,{id:"n1ekoW"})})})}),Z&&G&&t&&(0,n.jsx)(eJ,{orgId:(null==N?void 0:N.id)||"",user:t,isOpen:G,onClose:V,onAccountDeleteModalOpen:H}),!Z&&G&&t&&(0,n.jsx)(eC,{orgId:(null==N?void 0:N.id)||"",user:t,isOpen:G,onClose:V,onAccountDeleteModalOpen:H}),$&&t&&(0,n.jsx)(ee,{user:t,isOpen:$,onClose:q}),M&&(0,n.jsx)(S.l,{onClose:U})]})});eH.displayName="ProfileMenu"}}]);
//# sourceMappingURL=7424-63d038809a3ca5b1.js.map