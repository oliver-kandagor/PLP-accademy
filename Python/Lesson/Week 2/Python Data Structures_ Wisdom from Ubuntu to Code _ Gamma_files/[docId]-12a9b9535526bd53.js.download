(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8289],{1771:(e,t,i)=>{"use strict";i.d(t,{R:()=>l});var n=i(81278),s=i(55729),r=i(20746),o=i(65148);let l=()=>{let{pathname:e,isReady:t}=(0,n.useRouter)(),i=(0,s.useRef)(!1),[l,a]=(0,r.F)(o.E.lastHomeUrl,"/");(0,s.useEffect)(()=>{!i.current&&t&&(a("/inspiration"===e||"/templates"===e?e:"/"),i.current=!0)},[a,t,e])}},2087:(e,t,i)=>{"use strict";i.d(t,{A:()=>b});var n=i(6029),s=i(32844),r=i(59554),o=i(6743),l=i(26420),a=i(30928),d=i(62117),c=i(22832),u=i(49611),x=i(99492),h=i(48621),m=i(19564),p=i(56432),g=i(30645),j=i(42550);let f=(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(m.x6,{id:"nwtY4N"})," ",(0,n.jsx)("span",{role:"img","aria-label":"sad face",children:"\uD83D\uDE15"})]}),b=e=>{let{errMessage:t=f,showDisclosure:i=!1}=e;return(0,n.jsx)(j.L,{"data-error-component":!0,children:(0,n.jsx)(p.Kp,{stackProps:{textAlign:"center"},children:(0,n.jsxs)(g.K,{title:(0,n.jsx)(m.x6,{id:"yCLOsA"}),message:(0,n.jsx)(m.x6,{id:"oDmq3g"}),children:[i&&(0,n.jsx)(s.n,{allowToggle:!0,w:"100%",children:(0,n.jsxs)(r.A,{children:[(0,n.jsx)("h2",{children:(0,n.jsxs)(o.J,{children:[(0,n.jsx)(l.a,{flex:"1",textAlign:"start",children:(0,n.jsx)(m.x6,{id:"K6HS5B"})}),(0,n.jsx)(a.Q,{})]})}),(0,n.jsx)(d.v,{overflowX:"auto",children:(0,n.jsx)(c.C,{colorScheme:"red",maxHeight:{base:24,md:60},overflowY:"auto",children:t})})]})}),(0,n.jsx)(u.$,{mt:"4",leftIcon:(0,n.jsx)(h.g,{fixedWidth:!0,icon:x.lLb}),variant:"solid",onClick:()=>{window.location.reload()},children:(0,n.jsx)(m.x6,{id:"C6f2hU"})})]})})})}},2543:(e,t,i)=>{"use strict";i.d(t,{m:()=>J});var n=i(6029),s=i(27828),r=i(26385),o=i(56570),l=i(69388),a=i(80314),d=i(55597),c=i(19564),u=i(81278),x=i(55729),h=i(36062),m=i(26420),p=i(49611),g=i(74676),j=i(40452),f=i(33787),b=i(23293),v=i(99492),y=i(48621),w=i(82203),C=i.n(w),k=i(29608);let E=e=>{let{children:t,href:i,onClick:s,as:r=C()}=e;return i?(0,n.jsx)(h.Q,{as:m.a,role:"group",onClick:s,children:(0,n.jsx)(h.r,{href:i,as:r,_focusVisible:{boxShadow:"none",outline:"0 none !important"},_hover:{textDecoration:"none !important"},children:t})}):(0,n.jsx)(m.a,{as:p.$,w:"100%",variant:"unstyled",display:"flex",alignItems:"stretch",justifyContent:"stretch",h:"auto",role:"group",onClick:s,maxW:{base:"none",md:"18em"},tabIndex:0,_focusVisible:{boxShadow:"none",outline:"0 none !important"},children:t})},S=e=>{let{badge:t}=e,i={fontSize:"sm",display:"inline-flex"};return"recommended"===t?(0,n.jsxs)(g.E,{colorScheme:"pink",...i,children:[(0,n.jsx)(m.a,{me:1,children:(0,n.jsx)(y.g,{icon:d.yy})}),(0,n.jsx)(c.x6,{id:"hXb7ZT"})]}):(0,n.jsxs)(g.E,{colorScheme:"gray",...i,children:[(0,n.jsx)(m.a,{me:1,children:(0,n.jsx)(y.g,{icon:v.a$})}),(0,n.jsx)(c.x6,{id:"L4VvTF"})]})},I=e=>{let{label:t,description:i,badge:s,isBeta:o,imageUrl:l,imageComponent:a,href:d,onClick:u,as:x}=e;return(0,n.jsx)(E,{href:d,onClick:e=>{null==u||u(e)},as:x||C(),children:(0,n.jsxs)(r.B,{cursor:"pointer",direction:{base:"row",md:"column"},flex:"1",whiteSpace:"normal",textAlign:"start",spacing:4,bg:"white",borderRadius:"lg",p:6,boxShadow:{base:"sm",md:"md"},transitionDuration:"normal",transitionProperty:"common",_groupHover:(0,k.Xb)()?{}:{boxShadow:"xl",transform:"scale(1.03)"},position:"relative",_groupFocusWithin:{shadow:"outline"},children:[(0,n.jsxs)(j.s,{flex:"1",children:[a,l&&(0,n.jsx)(f._,{src:l,objectFit:"cover"})]}),(0,n.jsx)(r.B,{spacing:"1.5",maxW:"100%",minH:{base:"100px",md:"none"},flex:"1.5",direction:{base:"row",md:"column"},children:(0,n.jsxs)(r.B,{align:"flex-start",children:[(0,n.jsx)(b.D,{size:"md",children:t}),(0,n.jsx)(m.a,{fontSize:{base:"sm",md:"md"},fontWeight:"500",lineHeight:"1.4",color:"gray.600",children:i}),s&&(0,n.jsx)(S,{badge:s}),o&&(0,n.jsx)(g.E,{fontSize:"md",colorScheme:"pink",children:(0,n.jsx)(c.x6,{id:"YBt9YP"})})]})})]})})};var T=i(87461),A=i(88586),R=i(68301),O=i(15342),_=i(95889),D=i(82927);let P={src:"/_next/static/media/generate-big-button-rebrand.b74a0218.svg"},z={src:"/_next/static/media/import-big-button-rebrand.b67764ff.svg"},M={src:"/_next/static/media/paste-in-big-butotn-rebrand.1eab7a2f.svg"};var N=i(83370),F=i(13429),L=i(88240);let V=e=>{let{needsEditorOnboarding:t,userGoals:i,lastGenerationType:n,lastGenerationTypeLoading:s,userLoading:r,personalizedCreateWithAi:o,featureFlagsInitialized:l}=e;if(s||r||!l||null===o);else if(t&&!n)if(!o)return{flow:"generate",badge:"recommended"};else if(i[L.w.PresentationsFromNotes])return{flow:"paste",badge:"recommended"};else if(i[L.w.EnhancePptOrPdf])return{flow:"import",badge:"recommended"};else return{flow:"generate",badge:"recommended"};else if(!n)return{flow:"generate",badge:"recommended"};else if(n===A.xbH.Generate)return{flow:"generate",badge:"last-used"};else if(n===A.xbH.PasteText)return{flow:"paste",badge:"last-used"};else if(n===A.xbH.ImportGoogleDoc||n===A.xbH.ImportGoogleSlides||n===A.xbH.UploadWordFile||n===A.xbH.UploadPpt||n===A.xbH.UploadPptV2||n===A.xbH.ImportWebpage||n===A.xbH.ImportPdf)return{flow:"import",badge:"last-used"}};var W=i(19513),G=i(37471),B=i(26662);let U=e=>{var t;let{lastGenerationType:i,lastGenerationTypeLoading:n}=e,{user:s}=(0,D.ur)(),{hasInitialized:r}=(0,R.FY)(),[o,l]=(0,x.useState)(null);return(0,x.useEffect)(()=>{var e;if(i&&!n)return void l(!1);(null==s||null==(e=s.settings)?void 0:e.goals)&&r&&l(R.of.get("personalizedCreateWithAi"))},[null==s||null==(t=s.settings)?void 0:t.goals,r,i,n]),o},H=e=>{let{needsEditorOnboarding:t,userGoals:i,lastGenerationType:n,lastGenerationTypeLoading:s,userLoading:r,featureFlagsInitialized:o}=e,l=U({lastGenerationType:n,lastGenerationTypeLoading:s});return(0,x.useMemo)(()=>V({needsEditorOnboarding:t,userGoals:i,lastGenerationType:n,lastGenerationTypeLoading:s,userLoading:r,personalizedCreateWithAi:l,featureFlagsInitialized:o}),[t,i,n,s,r,l,o])},K=()=>{var e,t,i;let{hasInitialized:s}=(0,R.FY)(),r=R.of.get("importUrl"),{user:o,isUserLoading:l}=(0,D.ur)(),a=(0,D.gx)(),{data:u,loading:x}=(0,A.vCR)({variables:{workspaceId:a,first:5},fetchPolicy:"cache-and-network"}),h=H({needsEditorOnboarding:null==o||null==(e=o.settings)?void 0:e.needsEditorOnboarding,userGoals:null==o||null==(t=o.settings)?void 0:t.goals,lastGenerationType:null==u||null==(i=u.docGenerations.edges[0])?void 0:i.node.generationType,lastGenerationTypeLoading:x,userLoading:l,featureFlagsInitialized:s});return{paste:{label:(0,n.jsx)(c.x6,{id:"Q4xH1Z"}),description:(0,n.jsx)(c.x6,{id:"MxbdK6"}),icon:d.bLf,colorScheme:"pink",imageUrl:M.src,transform:"rotate(-1.5deg) scale(0.84)",badge:(null==h?void 0:h.flow)==="paste"?h.badge:void 0,screen:"createPaste"},generate:{label:(0,n.jsx)(c.x6,{id:"ziAjHi"}),description:(0,n.jsx)(c.x6,{id:"anOFr5"}),icon:d.p7g,colorScheme:"trueblue",imageUrl:P.src,badge:(null==h?void 0:h.flow)==="generate"?h.badge:void 0,screen:"createGenerate"},import:{label:r?(0,n.jsx)(c.x6,{id:"krF+YI"}):(0,n.jsx)(c.x6,{id:"2xoyqj"}),description:r?(0,n.jsx)(c.x6,{id:"fG2B2z"}):(0,n.jsx)(c.x6,{id:"5c5WYH"}),icon:d.$MS,colorScheme:"purple",imageUrl:z.src,transform:"rotate(1.5deg) scale(0.84)",badge:(null==h?void 0:h.flow)==="import"?h.badge:void 0,screen:"createImport"}}},J=(0,x.memo)(()=>{let e=(0,O.jL)(),{goToScreen:t,navEnabled:i}=(0,G._2)(),d=K(),x=(0,_.st)(),{query:h}=(0,u.useRouter)(),m=h.channelId;return(0,n.jsxs)(T.d,{children:[i&&(0,n.jsx)(B.V,{}),(0,n.jsx)(W.I,{title:(0,n.jsx)(c.x6,{id:"1zuBj5"}),subtitle:(0,n.jsx)(c.x6,{id:"h0sjMM"}),children:(0,n.jsx)(s.m,{maxW:"4xl",children:(0,n.jsx)(r.B,{spacing:12,align:"center",children:(0,n.jsx)(o.x,{gap:6,alignItems:"center",gridTemplateAreas:{base:'"generate" "paste" "import"',md:'"paste generate import"'},gridTemplateColumns:{base:"1fr",md:"1fr 1fr 1fr"},width:"100%",children:Object.entries(d).map(i=>{let[s,{label:r,description:o,badge:d,colorScheme:c,imageUrl:u,screen:h}]=i;return(0,n.jsx)(l.E,{area:s,children:(0,n.jsx)(I,{as:a.N,label:r,description:o,badge:d,colorScheme:c,imageUrl:u,onClick:i=>{null==x||x.track(_.VV.AI_DOC_CREATION_GENERATION_TYPE_CLICKED,{generationType:s,device:(0,k.ZI)()}),e((0,N.s)()),i.preventDefault(),i.stopPropagation(),t(h,{ref:"createWithAI",channelId:m})}})},s)})})})})}),(0,n.jsx)(s.m,{maxW:"2xl",pb:"10vw",children:(0,n.jsx)(F.r,{})})]})});J.displayName="CreatePage"},3819:(e,t,i)=>{"use strict";i.d(t,{V:()=>r});var n=i(79555),s=i(73287);let r=new n.F({systemPromptOperation:s.mc.GenerateImagePromptSystem,userPromptOperation:s.mc.GenerateImagePromptUser,variables:["input","html"],params:{temperature:.7,maxTokens:50}})},3844:(e,t,i)=>{"use strict";i.d(t,{A:()=>n});let n={src:"/_next/static/media/gamma-logo-profile-image.73d64ea1.png",height:800,width:800,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAMAAADz0U65AAAARVBMVEX////3/f+64P9Zb47H5v+l1v40VYGOyv/v9/zh8f5uh6d/kKgtSHHD1OjV3OMZMF4dK1tIZYufy/JPealwmsbE0uCXttYFpAwdAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAPklEQVR4nCXFRxKAMAwEsHVc1g4l9P8/lWHQRSDpJAn344yrOcwi+mMNtYw79ipIztq3FAhW1SnxsfaPqgReR38Br+Tzt/8AAAAASUVORK5CYII=",blurWidth:8,blurHeight:8}},4837:(e,t,i)=>{"use strict";i.d(t,{V:()=>o});var n=i(55729),s=i(15342),r=i(43634);let o=e=>{let{editor:t}=e,i=(0,s.jL)(),o=(0,s.CU)();return{editCardInPresentMode:(0,n.useCallback)(()=>{(0,r.Ik)(o.getState())&&(i((0,r._b)({isEditingInSlideView:!0})),i((0,r.mF)({attached:!1})),i((0,r.tB)()),null==t||t.commands.turnOffSpotlight())},[t,i,o])}}},6731:(e,t,i)=>{"use strict";let n;i.d(t,{h:()=>eL});var s=i(6029);i(11230),i(46967);var r=i(29329),o=i(19521),l=i(77650),a=i(95669),d=i.n(a),c=i(81278),u=i(55729),x=i(74158),h=i(91938),m=i(55452),p=i(88586),g=i(2087);let j=e=>{let t=["malformed","encoded","illegal"];return e.includes("URIError")&&e.split(" ").some(e=>t.includes(e))};class f extends u.Component{componentDidMount(){window.addEventListener("error",this.handleError),window.addEventListener("unhandledrejection",this.handleUnhandledRejection)}componentWillUnmount(){window.removeEventListener("error",this.handleError),window.removeEventListener("unhandledrejection",this.handleUnhandledRejection)}componentDidCatch(e,t){if("dev"===h.$.APPLICATION_ENVIRONMENT)throw e;m.Cp(e,{extra:{info:null==t?void 0:t.componentStack}})}static getDerivedStateFromError(e){return{hasError:!0,errMessage:e.message,shouldMountChildren:!1}}handleError(e){if("dev"===h.$.APPLICATION_ENVIRONMENT)throw Error("[ErrorBoundary]: ".concat(e.message))}handleUnhandledRejection(e){if(this.props.unhandledRejectionFilter(e)){var t;let i=(null==(t=e.reason)?void 0:t.message)||"";this.setState({hasError:!0,errMessage:i})}}render(){let e=!0===j(this.state.errMessage)?{opacity:"0.65",starOverlay:!1}:{};return(0,s.jsxs)(s.Fragment,{children:[this.state.hasError&&(0,s.jsx)(g.A,{pos:"absolute",top:0,...e,errMessage:""===this.state.errMessage?void 0:this.state.errMessage,showDisclosure:!0}),this.state.shouldMountChildren&&this.props.children]})}constructor(e){super(e),this.state={hasError:!1,errMessage:"",shouldMountChildren:!0},this.handleError=this.handleError.bind(this),this.handleUnhandledRejection=this.handleUnhandledRejection.bind(this)}}f.defaultProps={unhandledRejectionFilter:e=>{var t;return!!j((null==(t=e.reason)?void 0:t.message)||"")||e.reason instanceof p.Teu&&!1===document.hidden||e.reason instanceof p.cdx}};var b=i(8814),v=i(31615),y=i(17859),w=i(6308),C=i(9052),k=i(65905),E=i(29238),S=i(15342);let I=e=>{console.debug("%c[useApiRefetch] Refetching due to ".concat(e),"background-color: aqua"),(0,C.H4)().reFetchObservableQueries()},T=()=>{let e=(0,S.CU)(),t=(0,u.useRef)(!1),i=(0,u.useRef)(null),n=(0,u.useCallback)(e=>{i.current&&(clearTimeout(i.current),i.current=null),i.current=setTimeout(()=>{I(e),i.current=null},3e3)},[]),s=(0,u.useCallback)(()=>(0,E.mN)(e.getState()).backgrounded,[e]);(0,k.LQ)("online",(0,u.useCallback)(()=>{if(s()){t.current=!0;return}n("online")},[n,s])),(0,k.LQ)("wakeup",(0,u.useCallback)(()=>{if(s()){t.current=!0;return}n("wakeup")},[n,s])),(0,k.LQ)("foreground",(0,u.useCallback)(()=>{t.current&&(n("foreground"),t.current=!1)},[n]))},A=Number(new URLSearchParams(h.$.IS_CLIENT_SIDE?window.location.search:"").get("MAX_BACKGROUND_TIME_ALLOWED"))||432e5,R=()=>{let e=(0,u.useRef)(!1),t=(0,u.useCallback)(t=>{t.timeInBackground&&!e.current&&t.timeInBackground>A&&(e.current=!0,window.location.reload())},[]);(0,k.LQ)("foreground",t)},O=(0,u.memo)(()=>((0,k.yj)(),T(),R(),null));O.displayName="ConnectionMonitor";var _=i(7836),D=i(72751),P=i(68301),z=i(69768),M=i(19564),N=i(73247),F=i(41215);let L=e=>{let{children:t}=e;return(0,N.e)(),(0,F.Z)(),(0,s.jsx)(M.CY,{i18n:l.Ru,children:t})};var V=i(43728),W=i(3247),G=i(60149),B=i(88956),U=i(31061),H=i(3615),K=i(55765),J=i.n(K),q=i(25991);class Y{async enable(){try{await window.serwist.register()}catch(e){console.error("Error registering Serwist service worker:",e)}}async disable(){try{for(let e of(await navigator.serviceWorker.getRegistrations()))console.debug("offlineMode - [SerwistOfflineCache] Unregistering service worker:",e),await e.unregister()}catch(e){console.error("Error unregistering Serwist service worker:",e)}try{await this.clearCaches()}catch(e){console.error("Error clearing caches",e)}this.store.dispatch((0,q.Em)())}async debug(){let e=await window.caches.keys();return{cache:(await Promise.all(e.map(async e=>{let t=await window.caches.open(e).then(e=>e.matchAll());return[e,t]}))).reduce((e,t)=>(e[t[0]]=t[1],e),{})}}async gc(e){}async clearCaches(){try{if(!window.caches)return;for(let e of(await window.caches.keys()))await window.caches.delete(e);console.debug("offlineMode - [SerwistOfflineCache] Serwist caches cleared successfully")}catch(e){console.error("Error clearing caches",e)}}constructor(){this.store=(0,S.KA)()}}let $=J()(()=>new Y);var X=i(58859),Q=i(34647),Z=i(12364),ee=i.n(Z),et=i(83817),ei=i.n(et);let en="offline-state-v1",es=e=>{let t=er(),i=null;t&&(console.debug("offlineMode - [setupOfflineManagerPersistence] LOADING PERSISTED STATE",t),e.dispatch((0,q.OA)(t)),i=t);let n=ee()(e=>{eo(e)},500);return e.subscribe(()=>{let t=(0,q.uc)(e.getState());if(i!==t){if(ei()(i,t)){i=t;return}i=t,console.debug("offlineMode - [setupOfflineManagerPersistence] PERSISTING STATE",t),n(t)}})},er=()=>{try{let e=localStorage.getItem(en);return JSON.parse(e)}catch(e){return null}},eo=async e=>{try{let t=JSON.stringify(e);localStorage.setItem(en,t)}catch(e){console.error("Error persisting state",e)}},el=(0,Q.B)();class ea{get enabled(){return(0,q.yy)(this.store.getState())}async init(){if(!el)return void console.debug("offlineMode - [OfflineManager] Offline mode is not supported");this.cleanupFns.push(es(this.store)),await this.notifyCaches(this.enabled),console.debug("offlineMode - [OfflineManager] caches initialized",this.enabled),this.setupFeatureFlagSubscription(),this.setupConnectionListener(),console.debug("offlineMode - [OfflineManager] subscriptions initialized")}setupConnectionListener(){let e=B.l.on("offline",()=>{this.apolloOfflineCache.useOfflineCache()}),t=B.l.on("online",()=>{this.apolloOfflineCache.backOnline()});this.cleanupFns.push(t),this.cleanupFns.push(e)}setupFeatureFlagSubscription(){P.of.initializePromise.then(()=>{let e=P.of.get("offline");e!==this.enabled&&(e?this.enable():this.disable()),this.cleanupFns.push(P.of.subscribe("offline",e=>{e?this.enable():this.disable()}))})}async enable(){if(!el)return void console.debug("offlineMode - [OfflineManager] Offline mode is not supported");if(this.enabled)return void console.warn("Offline mode already enabled");let{user:e,status:t}=await (0,U.m)({returnOfflineUser:!1});if("loggedIn"!==t)return void console.warn("[OfflineManager] Offline mode user not logged in");await this.notifyCaches(!0),this.store.dispatch((0,q.Es)({user:e,lastSynced:new Date().toISOString()}))}async disable(){return el?this.enabled?void(await this.notifyCaches(!1),this.store.dispatch((0,q.lK)())):void console.warn("[OfflineManager] Offline mode already disabled"):void console.debug("offlineMode - [OfflineManager] Offline mode is not supported")}async notifyCaches(e){return Promise.all(e?this.caches.map(e=>e.enable()):this.caches.map(e=>e.disable()))}cleanup(){for(;this.cleanupFns.length>0;){var e;null==(e=this.cleanupFns.pop())||e()}}constructor(){this.store=(0,S.KA)(),this.serwistOfflineCache=$(),this.ydocOfflineCache=(0,X.f)(),this.apolloOfflineCache=(0,H.h)(),this.caches=[this.serwistOfflineCache,this.ydocOfflineCache,this.apolloOfflineCache],this.cleanupFns=[]}}let ed=async()=>{if(n)throw Error("OfflineManager already initialized");try{n=new ea,await n.init()}catch(e){console.error("Error initializing OfflineManager",e)}};window.getOfflineManagerState=()=>(0,S.KA)().getState().OfflineManager,window.getOfflineManager=()=>n;var ec=i(82927),eu=i(7092),ex=i(59190),eh=i(82891);let em="no_org_id",ep=e=>{let{children:t}=e;(0,ex.Iy)();let{user:i,anonymousUser:n,currentWorkspace:r,isUserLoading:o}=(0,ec.ur)();return(0,u.useEffect)(()=>{let e=(0,eh.g)();(0,eu.eZ)(e.get()),e.fetch().then(eu.eZ).catch(()=>{})},[]),(0,u.useEffect)(()=>{let e;if(!o){if(i){let{id:t,email:n}=i,s=!!n&&n.endsWith("@gamma.app");e={userId:t,isGammaUser:s,userOrgId:(null==r?void 0:r.id)||em,anonymousUser:!1,gammaUserFirstName:s?i.firstName:""}}else e={userId:"anonymous_user",isGammaUser:!1,userOrgId:em,anonymousUser:!0,gammaUserFirstName:""};(0,eu.eZ)(e)}},[o,i,n,r]),(0,s.jsx)(s.Fragment,{children:t})};var eg=i(1771),ej=i(95889),ef=i(21088),eb=i(33521),ev=i(56288),ey=i(29608),ew=i(23460),eC=i(75287),ek=i(85732);i(85465),i(98026),i(8262),i(98),i(1433),i(77741),i(62706),i(65613),i(87213);var eE=i(6772),eS=i.n(eE),eI=i(11403),eT=i(59392),eA=i(11390);let eR=()=>{window._vntQueue=window._vntQueue||[],window.VNT=window.VNT||{init:function(){window._vntQueue.push(["init",Array.prototype.slice.call(arguments)])},identify:function(){window._vntQueue.push(["identify",Array.prototype.slice.call(arguments)])}}},eO=async e=>{let{user:t,currentWorkspace:i,anonymousUser:n}=e;if(window.VNT)try{await e_({anonymousUser:n,user:t,currentWorkspace:i}),await eD({anonymousUser:n,user:t}),console.debug("[VANTARA] ✅ Init and identify complete")}catch(e){console.error("[VANTARA] ❌ Error initializing Vantara",e)}},e_=async e=>{let{anonymousUser:t,user:i,currentWorkspace:n}=e,s=window.VNT;if(s)try{var r;let e=(0,eT.m)(h.$.NEXT_PUBLIC_VERCEL_URL||"");await s.init(h.$.VANTARA_PRODUCT_ID,h.$.VANTARA_CLIENT_KEY,{environment:h.$.APPLICATION_ENVIRONMENT,...e?{version:e}:{},metadata:{isNewUser:!!(null==(r=i.settings)?void 0:r.needsEditorOnboarding),anonymousId:null==t?void 0:t.id,...n?{company:{id:n.id,name:n.name,plan:(0,eA.A4)(n)}}:{}}})}catch(e){console.error("[VANTARA] ❌ Error calling VNT.init",e)}},eD=async e=>{let{user:t,anonymousUser:i}=e,n=window.VNT;if(n)try{var s,r;let{id:e,email:o,displayName:l}=t,a={userId:e,email:o,name:l,metadata:{anonymousId:null==i?void 0:i.id,jobFunction:t.jobFunction,referrer:t.referrer,createdTime:t.createdTime,authProvider:t.authProvider,locale:null==(s=t.settings)?void 0:s.locale,goals:null==(r=t.settings)?void 0:r.goals}};await n.identify(a)}catch(e){console.error("[VANTARA] ❌ Error calling VNT.identify",e)}},eP=()=>{let{user:e,currentWorkspace:t,anonymousUser:i}=(0,ec.ur)(),{hasInitialized:n}=(0,P.FY)(),s=(0,P.u)("vantaraSnippet"),r=null==t?void 0:t.id,o=!!("OFF"!==s&&e&&r);(0,eI.Vg)(()=>{o&&e&&eO({user:e,currentWorkspace:t,anonymousUser:i})},[t,r,e,o,i,n],[r,o])},ez=()=>{eP();let e=!(0,ey.rA)()&&!(0,ek.NF)(),t=(0,eI.En)(),{hasInitialized:i}=(0,P.FY)(),n=(0,P.u)("vantaraSnippet"),r="OFF"!==n;return((0,u.useEffect)(()=>{r&&eR()},[r]),t&&e&&r&&i)?(0,s.jsx)(eS(),{id:"vantara-browser-api",src:n,async:!0,type:"module"}):null};o.$W.autoAddCss=!1;let eM=(0,S.KA)();ed();let eN=(0,p.fqS)({supportOfflineMode:!0}),eF=(0,p.fFM)();(0,ew.xy)(),W.WC.initialize(),(0,z.Wf)(),ej.zS.init(),(0,_.Lm)(),(0,_.Gu)(),(0,V.Ts)(),(0,D.li)(),(0,eb.P)("appMainBundleLoaded"),P.of.get("debugLogging")||(window.console.debug=()=>{});let eL=e=>function(t){return(0,s.jsx)(eV,{children:(0,s.jsx)(e,{...t})})},eV=e=>{let{children:t}=e,i=(0,c.useRouter)();(0,eg.R)(),(0,eC.E)(),(0,b.G)(),(0,u.useEffect)(()=>{let e=(e,t)=>{let{shallow:i}=t;console.debug("[GammaApp - handleRouteChange] App is changing to ".concat(e," ").concat(i?"with":"without"," shallow routing"))};return i.events.on("routeChangeStart",e),()=>{i.events.off("routeChangeStart",e)}},[i]);let n=(0,ev.dC)();return(0,s.jsx)(x.Kq,{store:eM,children:(0,s.jsx)(L,{children:(0,s.jsx)(w.Z,{children:(0,s.jsx)(f,{children:(0,s.jsx)(r.X,{client:eN,children:(0,s.jsxs)(p.N0f,{client:eF,children:[(0,s.jsx)(eW,{}),(0,s.jsx)(v.fH,{}),(0,s.jsx)(V.FM,{}),(0,s.jsx)(y.D,{}),(0,s.jsx)(O,{}),(0,s.jsxs)(ec.ac,{children:[(0,s.jsx)(ef.M7,{children:(0,s.jsxs)(P.Yy,{children:[(0,s.jsx)(ez,{}),(0,s.jsx)(G.K,{children:(0,s.jsx)(ep,{children:(0,s.jsx)(ev.gk,{value:n,children:t})})})]})}),(0,s.jsx)(P.zf,{})]})]})})})})})})},eW=()=>{let e=h.$.OG_IMAGE_URL_REBRAND,t=l.Ru._({id:"0v7kQB"}),i=h.$.APPLICATION_ENVIRONMENT;return(0,s.jsxs)(d(),{children:[(0,s.jsx)("title",{children:"Gamma"}),"production"!==i&&(0,s.jsx)("meta",{name:"robots",content:"noindex, nofollow"}),(0,s.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1.0, viewport-fit=cover"}),(0,s.jsx)("link",{rel:"manifest",href:"/manifest.json"}),"production"!==i?(0,s.jsx)("link",{rel:"shortcut icon",href:"staging"===i?"/icons/favicon_staging.jpg":"/icons/favicon_local.jpg"}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("link",{rel:"icon",href:"https://static.gamma.app/favicons/favicon_light.ico",sizes:"32x32"}),(0,s.jsx)("link",{rel:"icon",type:"image/svg+xml",href:"https://static.gamma.app/favicons/favicon_dark.svg",media:"(prefers-color-scheme: dark)"}),(0,s.jsx)("link",{rel:"icon",type:"image/svg+xml",href:"https://static.gamma.app/favicons/favicon_light.svg",media:"(prefers-color-scheme: light)"}),(0,s.jsx)("link",{rel:"apple-touch-icon",href:"https://static.gamma.app/favicons/apple-touch-icon.png"})]}),(0,s.jsx)("meta",{content:t,name:"description"},"description"),(0,s.jsx)("meta",{content:"Gamma",property:"og:title"},"og:title"),(0,s.jsx)("meta",{content:t,property:"og:description"},"og:description"),(0,s.jsx)("meta",{content:e,property:"og:image"},"og:image"),(0,s.jsx)("meta",{content:"Gamma",property:"twitter:title"},"twitter:title"),(0,s.jsx)("meta",{content:t,property:"twitter:description"},"twitter:description"),(0,s.jsx)("meta",{content:e,property:"twitter:image"},"twitter:image"),(0,s.jsx)("meta",{property:"og:type",content:"website"},"og:type"),(0,s.jsx)("meta",{content:"summary_large_image",name:"twitter:card"},"twitter:card"),(0,s.jsx)("meta",{name:"google",content:"notranslate"}),(0,s.jsx)("link",{href:"https://fonts.googleapis.com/css2?family=Inter:wght@100;200;300;400;500;600;700;800;900",rel:"stylesheet"}),(0,s.jsx)("link",{rel:"stylesheet",href:"https://use.typekit.net/tiw2cwq.css"}),!(0,ey.rA)()&&!(0,ek.NF)()&&(0,s.jsx)("script",{async:!0,src:"https://cdn.optimizely.com/js/20579410255.js"}),(0,s.jsx)("script",{src:"//cdn.iframe.ly/embed.js",async:!0,charSet:"utf-8"})]})}},8262:()=>{},10995:(e,t,i)=>{"use strict";i.d(t,{x:()=>r});var n=i(4007),s=i(15342);let r=()=>{let e=(0,s.GV)(n.AO);return t=>{var i,n,s,r;if(e)return!0;if(document.activeElement&&document.activeElement!==document.body&&document.activeElement!==document.documentElement){let e=document.activeElement;if(["input","select","textarea","button"].includes(e.tagName.toLowerCase()))return!0;let t=e.getAttribute("role");if(t&&["menuitem","menu","listbox","combobox","dialog","button"].includes(t)||e.hasAttribute("data-focus-visible-added"))return!0}if(!(t.target instanceof HTMLElement))return!1;let o=t.target;return!!((null==o||null==(i=o.closest)?void 0:i.call(o,"[data-gamma-child-tiptap-editor]"))||(null==o||null==(n=o.closest)?void 0:n.call(o,"input, select, textarea, button"))||(null==o||null==(s=o.closest)?void 0:s.call(o,'[role="menuitem"], [role="menu"], [role="listbox"], [role="combobox"], [role="dialog"], [role="button"]'))||(null==o||null==(r=o.closest)?void 0:r.call(o,"[data-focus-visible-added]")))}}},11525:(e,t,i)=>{"use strict";i.d(t,{R:()=>r});var n=i(27229),s=i(55729);let r=()=>{let{isOpen:e,onOpen:t,onClose:i}=(0,n.j)({id:"sharePanelDisclosure"}),[r,o]=(0,s.useState)("invite");return{isSharePanelOpen:e,onSharePanelOpen:t,onSharePanelClose:(0,s.useCallback)(()=>{o("invite"),i()},[i]),view:r,setView:o}}},13427:(e,t,i)=>{"use strict";i.d(t,{$x:()=>J});var n=i(6029),s=i(40452),r=i(46898),o=i(56151),l=i(30709),a=i(85813),d=i(26420),c=i(48810),u=i(58959),x=i(65372),h=i(64575),m=i(17403),p=i(99492),g=i(48621),j=i(91106),f=i(87386),b=i(19564),v=i(77650),y=i(22905),w=i(18833),C=i(42328),k=i(97139),E=i.n(k),S=i(82203),I=i.n(S),T=i(81278),A=i(55729),R=i(88586),O=i(82328),_=i(39247),D=i(68301),P=i(5061),z=i(15342),M=i(47665),N=i(43634),F=i(85235),L=i(53957),V=i(82927),W=i(85607),G=i(45143),B=i(20746),U=i(65148),H=i(37869);let K=(0,w.P)(s.s),J=e=>{let{doc:t}=e;return(0,n.jsx)(K,{initial:{opacity:1},animate:{opacity:1},exit:{opacity:0},children:(0,n.jsx)(C.N,{initial:!1,children:(0,n.jsx)(Q,{doc:t})})})},q=(0,A.memo)(e=>{let{doc:t}=e,{editor:i}=(0,W.mi)(),{isConnected:s}=(0,O.u)(),c=(0,r.d)(),u=(0,A.useRef)(null),x=(0,A.useRef)(null),[h,{loading:m}]=(0,R.cGn)(),[p,g]=(0,A.useState)(null),[w,C]=(0,A.useState)(!1),[k,S]=(0,A.useState)(!1),I=(0,V.Iy)("edit",t),T=I?300:500,{editedTextColor:_}=(0,H.l)(),D=(0,A.useCallback)(()=>{if(!i)return"";let[e]=(0,y.xe)(i.state.doc,M.jg);return e&&(0,f.getCardTitle)(e.node.toJSON())||""},[i]);(0,A.useEffect)(()=>{!t||w||m||(g(t.title||""),S(!!t.titleEdited))},[t,w,m]);let P=()=>{u.current.style.width=x.current.offsetWidth+0+"px"};return(0,n.jsx)(j.Tz,{label:I?s?(0,n.jsx)(b.x6,{id:"2wxgft"}):(0,n.jsx)(b.x6,{id:"Cb+Bgk"}):null,"aria-label":v.Ru._({id:"2wxgft"}),children:(0,n.jsxs)(o.F,{value:p||"",placeholder:p||D(),isDisabled:m||!I||!s,isPreviewFocusable:I,maxW:T,width:"100%",fontWeight:"normal",onCancel:()=>{P(),C(!1)},onFocus:()=>{P(),t&&!m&&C(!0)},onChange:e=>{P(),w&&(g(e),S(!!e))},onSubmit:()=>{if(!t||m)return;C(!1);let e=p||D();h({variables:{id:t.id,title:e,titleEdited:k}}).catch(e=>{console.error(e),c({title:(0,n.jsx)(b.x6,{id:"AToAqe",values:{0:e.message}}),position:"top",status:"error"})})},children:[(0,n.jsx)(l.l,{ms:["-0.25rem","-0.5rem"],px:1,py:.5,display:w?"inline":"block",overflowX:"hidden",textOverflow:"ellipsis",color:k?_:"inherit"}),(0,n.jsx)(a.j,{ms:["-0.25rem","-0.5rem"],ref:u,px:1,py:.5,color:k?_:"inherit",maxW:T,_focus:{outline:"none",shadow:"0 0 0 2px rgb(66 153 225 / 60%)"}}),(0,n.jsx)(d.a,{ref:x,as:"span",display:"inline-block",position:"absolute",left:"-9999px",opacity:0,zIndex:-1,minW:"180px",px:1,dangerouslySetInnerHTML:{__html:E().sanitize((p||"").replace(/\s/g,"&nbsp;"))}})]})})});q.displayName="EditableDocTitle";let Y=e=>{let{cardId:t,isEllipsis:i,value:s,onClick:r}=e,o=(0,z.GV)((0,_.F1)(t||""));return i?(0,n.jsx)(g.g,{icon:p.vHW}):t||s?(0,n.jsx)(c.E,{noOfLines:1,onClick:r,maxW:180,fontWeight:"normal",children:s||o||""}):null},$=e=>{let{isPresentModeFlat:t}=e;return e=>{let i=(0,N.wC)(e),n=(0,N.$i)(e)||"",s=(0,N.Ev)(e).parents[n]||[];if(i!==F.w.SLIDE_VIEW||t)return[{isHome:!0},{isDocTitle:!0}];let r=s[0],o=s[s.length-1];return[{isHome:!0},s.length>1?{cardId:r}:null,s.length>2?{isEllipsis:!0}:null,s.length>0?{cardId:o}:null,{cardId:n}]}},X=()=>{let e=(0,D.u)("presentModeFlat");return(0,z.GV)($({isPresentModeFlat:e}),(e,t)=>JSON.stringify(e)===JSON.stringify(t))},Q=(0,A.memo)(e=>{let{doc:t}=e,i=(0,P.fW)(),r=X(),[o]=(0,B.F)(U.E.lastHomeUrl,"/"),{user:l}=(0,V.ur)(),{isConnected:a,isInOfflineMode:f}=(0,O.u)(),{confirmNavigation:y}=(0,W.mi)(),{push:w}=(0,T.useRouter)(),C=(0,G.h5)({base:"xs",sm:"sm"}),{textColor:k,lastItemColor:E,separatorColor:S}=(0,H.l)();return(0,n.jsxs)(u.z,{spacing:0,textAlign:"start",px:0,h:8,children:[(0,n.jsx)(x.Q,{display:"flex",alignItems:"center",whiteSpace:"nowrap",size:C,spacing:["4px",4],separator:(0,n.jsx)(d.a,{color:S,mt:["0.2rem","0.125rem"],children:(0,n.jsx)(g.g,{icon:i?p.Wzs:p.XkK})}),children:r.map((e,i)=>{if(!e)return null;let s=i===r.length-1,{cardId:a,isEllipsis:c,isDocTitle:u,isHome:x,value:p}=e,g=x?"home":c?"ellipsis":a||p||i;if(x&&!l)return null;let j={as:I(),passHref:!0,href:o||"/","data-testid":"toolbar-home-link"};return(0,n.jsx)(h.J,{children:(0,n.jsx)(K,{initial:{opacity:0,scale:0},animate:{opacity:1,scale:1},exit:{opacity:0,scale:0},children:(0,n.jsx)(m.w,{isCurrentPage:s,pointerEvents:s&&!u?"none":"inherit",color:s?E:k,children:u?(0,n.jsx)(q,{doc:t}):x?(0,n.jsx)(d.a,{marginInlineStart:-3,...j,onClick:e=>{!e.shiftKey&&(e.metaKey||e.ctrlKey)||(e.preventDefault(),y().then(()=>{w(j.href)}))},marginInlineEnd:-1,children:(0,n.jsx)(H.Z,{boxProps:{boxSize:[6,8],p:["0.2rem","0.3rem"]}})}):(0,n.jsx)(Y,{cardId:a,value:p,isEllipsis:c,onClick:()=>{a&&(0,L.o)({cardId:a,method:"push"})}})})},g)},g)})}),!a&&(0,n.jsx)(j.Tz,{label:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(c.E,{marginInlineEnd:2,children:(0,n.jsx)(b.x6,{id:"ysdDIA"})}),f&&(0,n.jsx)(c.E,{color:"gray.300",children:(0,n.jsx)(b.x6,{id:"+QNhGE"})})]}),"aria-label":v.Ru._({id:"IcHxhR"}),children:(0,n.jsx)(s.s,{color:"gray.500",alignItems:"center",pe:3,children:(0,n.jsx)(g.g,{icon:p.seF})})})]})});Q.displayName="BreadcrumbGroup"},14509:(e,t,i)=>{"use strict";i.d(t,{l:()=>p});var n=i(46887),s=i(55729),r=i(91938),o=i(73287),l=i(68301),a=i(58809),d=i(15342),c=i(42721),u=i(22529),x=i(53381),h=i(44630),m=i(55276);let p=e=>{let t=(0,d.GV)(a.Jo),i=(0,s.useMemo)(()=>!!n.A.get(x.oH),[]),p=(0,d.GV)(u.iG),g=(0,c.IM)(),j=(0,d.jL)(),f=(0,d.GV)(m.wt),b=(0,l.u)("docEditorForcePublicStatic"),v=window!==window.top,y=(0,s.useMemo)(()=>{var e,n;if(p||v)return!1;let s=new URLSearchParams(window.location.search);if(s.get("following_id")&&s.get("follow_on_start"))return!0;if(!t)return i;let l=null==(n=t.accessLinks)||null==(e=n.find(e=>e.token===r.$.SHARE_TOKEN))?void 0:e.permission;return l&&[o.aXG.Edit,o.aXG.Comment].includes(l)||g.can(o.aXG.Comment,t)||g.can(o.aXG.Edit,t)||g.can(o.aXG.Manage,t)},[g,t,i,v,p]);(0,s.useEffect)(()=>{let t=b?h.i.PUBLIC_STATIC:e||(y?h.i.COLLABORATIVE:h.i.PUBLIC_STATIC);j((0,m.wm)({docEditorType:t}))},[j,e,b,y]);let w=e||(y?h.i.COLLABORATIVE:h.i.PUBLIC_STATIC);return f||w}},16306:(e,t,i)=>{"use strict";i.d(t,{q:()=>u});var n=i(6029),s=i(40452),r=i(24302),o=i(64268),l=i(51504),a=i(41974),d=i(76461);let c=(0,i(18833).P)(s.s),u=e=>{let{children:t,from:i="Designer",warning:s=!1,cardStyleOverrides:u,error:x=!1,...h}=e,m=(0,r.dU)("deepocean.400","deepocean.700"),p=(0,r.dU)("deepocean.50","yellow.700"),g=(0,r.dU)("red.100","red.500"),j="User"===i,f=j?{bg:m,borderBottomRightRadius:0,color:"white",...u}:{bg:s?void 0:x?g:p,borderBottomLeftRadius:0,...u};return(0,n.jsx)(c,{justify:j?"flex-end":"flex-start",initial:{opacity:0,translateX:-20},animate:{opacity:1,translateX:0},...h,children:s?(0,n.jsxs)(o.F,{status:"warning",borderColor:"orange.200",borderWidth:"1px",fontSize:"inherit",...f,children:[(0,n.jsx)(l._,{}),t]}):(0,n.jsx)(a.Z,{size:"sm",shadow:"sm",borderRadius:"xl",variant:"filled",minH:0,borderColor:x?"red.200":"blackAlpha.200",...f,children:(0,n.jsx)(d.b,{py:2,px:2,children:t})})})}},20746:(e,t,i)=>{"use strict";i.d(t,{F:()=>r});var n=i(55729),s=i(68986);function r(e,t){let[i,r]=(0,n.useState)(()=>{try{let i=s.e.getItem(e);if(null===i)return t;return JSON.parse(i)}catch(e){return console.error("[useSessionStorage.getItem] Error getting sessionStorage item",e),t}});return[i,(0,n.useCallback)(t=>{try{s.e.setItem(e,JSON.stringify(t)),r(t)}catch(e){console.error("[useSessionStorage.setItem] Error setting sessionStorage item",e)}},[e])]}},30615:(e,t,i)=>{"use strict";i.d(t,{u:()=>f});var n=i(6029),s=i(58959),r=i(26476),o=i(48810),l=i(26420),a=i(26385),d=i(23293),c=i(83743),u=i(96500),x=i(49611),h=i(99492),m=i(55597),p=i(48621),g=i(19564);i(55729);let j=e=>{let{label:t,shortcuts:i}=e;return(0,n.jsxs)(s.z,{children:[i.map((e,t)=>(0,n.jsx)(r.u,{padding:1,children:e},t)),(0,n.jsx)(o.E,{fontSize:"sm",fontWeight:"medium",whiteSpace:"nowrap",children:t})]})},f=e=>{let{onClose:t,showExitPresentMode:i=!0}=e;return(0,n.jsx)(l.a,{children:(0,n.jsxs)(a.B,{spacing:6,children:[(0,n.jsxs)(a.B,{spacing:1,children:[(0,n.jsxs)(s.z,{color:"gray.500",children:[(0,n.jsx)(p.g,{icon:h.Lhe})," ",(0,n.jsx)(d.D,{size:"xs",fontWeight:"normal",children:(0,n.jsx)(g.x6,{id:"h7MgpO"})})]}),(0,n.jsx)(d.D,{size:"md",children:(0,n.jsx)(g.x6,{id:"UodEcE"})})]}),(0,n.jsxs)(c.r,{spacing:3,columns:1,children:[(0,n.jsx)(j,{label:(0,n.jsx)(g.x6,{id:"9xCxY6"}),shortcuts:[(0,n.jsx)(p.g,{icon:m.CeG},"left"),(0,n.jsx)(p.g,{icon:m.dmS},"right")]}),(0,n.jsx)(j,{label:(0,n.jsx)(g.x6,{id:"K0Oq/D"}),shortcuts:["R"]}),(0,n.jsx)(u.c,{borderColor:"gray.300"}),(0,n.jsx)(j,{label:(0,n.jsx)(g.x6,{id:"CgmvBu"}),shortcuts:["S"]}),(0,n.jsx)(j,{label:(0,n.jsx)(g.x6,{id:"/5i2oX"}),shortcuts:[(0,n.jsx)(p.g,{icon:m.INu},"up"),(0,n.jsx)(p.g,{icon:m.B0C},"down")]}),(0,n.jsx)(j,{label:(0,n.jsx)(g.x6,{id:"rEj/lx"}),shortcuts:["Enter"]}),(0,n.jsx)(u.c,{borderColor:"gray.300"}),i&&(0,n.jsx)(j,{label:(0,n.jsx)(g.x6,{id:"IkakN2"}),shortcuts:["Esc"]})]}),(0,n.jsx)(x.$,{size:"sm",variant:"solid",onClick:t,children:(0,n.jsx)(g.x6,{id:"76gPWk"})})]})},"coach-bar")}},31226:(e,t,i)=>{"use strict";i.d(t,{BC:()=>gI,UN:()=>gh,vn:()=>gU,mi:()=>t5.mi});var n,s=i(6029),r=i(40452),o=i(26385),l=i(48810),a=i(49611),d=i(26420),c=i(21938),u=i(99492),x=i(48621),h=i(54839),m=i(19564),p=i(77650),g=i(95669),j=i.n(g),f=i(82203),b=i.n(f),v=i(55729),y=i(74158),w=i(9131),C=i(68469),k=i(82592),E=i(82328),S=i(88055),I=i(47956),T=i(36936),A=i(91938),R=i(68301),O=i(51567),_=i(29608),D=i(70006),P=i(38055),z=i(83747);let M=new z.b;var N=i(12514),F=i(94740),L=i(59272),V=i(24302),W=i(18078),G=i(25311),B=i(23293),U=i(53996),H=i(16936),K=i(83004),J=i(91106),q=i(46673),Y=i(84208),$=i(85697),X=i(5061),Q=i(85011),Z=i(95889),ee=i(91792),et=i(82927),ei=i(23460),en=i(92124);let es=e=>{let{selector:t}=e,[i,n]=(0,v.useState)(null),s=t?document.querySelector(t):null,r=(0,v.useCallback)(()=>{if(!t)return void n(null);if(s){s.scrollIntoView({behavior:"auto",block:"center"});let e=s.getBoundingClientRect();n({top:e.top,bottom:e.bottom,left:e.left,right:e.right,width:e.width,height:e.height})}else n(null)},[t,s]),o=(0,en.wb)(r,500);return(0,v.useEffect)(()=>(r(),window.addEventListener("resize",o),window.addEventListener("scroll",o),()=>{window.removeEventListener("resize",o),window.removeEventListener("scroll",o)}),[o,r]),{rectAttrs:i}},er=e=>({backgroundColor:e?"elevation.3":"white",borderColor:e?"gray.600":"gray.200",color:e?"white":"gray.700"});var eo=i(70967);i(31312);let el=e=>{let{selector:t,onClickTargetElement:i,rectAttrs:n,lockScroll:r=!1}=e,o=(0,v.useCallback)(e=>{let i=t&&document.querySelector(t);i&&(null==i?void 0:i.parentElement)&&(e?i.parentElement.style.opacity="1":i.parentElement.style.opacity="unset")},[t]);(0,v.useEffect)(()=>{let e=()=>{null==i||i(),o(!1)},n=t&&document.querySelector(t);return n&&n.addEventListener("mousedown",e),()=>{n&&n.removeEventListener("mousedown",e)}},[o,i,t]),(0,v.useEffect)(()=>(o(!0),()=>{o(!1)}),[o]);let l=(0,v.useMemo)(()=>(0,eo.X)(),[]);return(0,s.jsxs)(N.Z,{children:[r&&(0,s.jsx)(K.mL,{styles:{".doc-root":{overflowY:"hidden !important",paddingInlineEnd:"".concat(l,"px !important")}}}),(0,s.jsxs)("svg",{className:"overlay-svg",width:"100%",height:"100%",preserveAspectRatio:"none",children:[(0,s.jsxs)("defs",{children:[n&&(0,s.jsxs)("mask",{id:"mask",children:[(0,s.jsx)("rect",{width:"100%",height:"100%",fill:"white",rx:3,ry:3}),(0,s.jsx)("rect",{x:n.left,y:n.top,width:n.width,height:n.height,fill:"black",rx:3,ry:3})]}),(0,s.jsxs)("linearGradient",{id:"gradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[(0,s.jsx)("stop",{offset:"0%",stopColor:"#f79533"}),(0,s.jsx)("stop",{offset:"20%",stopColor:"#f37055"}),(0,s.jsx)("stop",{offset:"40%",stopColor:"#ef4e7b"}),(0,s.jsx)("stop",{offset:"60%",stopColor:"#a166ab"}),(0,s.jsx)("stop",{offset:"80%",stopColor:"#5073b8"}),(0,s.jsx)("stop",{offset:"100%",stopColor:"#1098ad"}),(0,s.jsx)("animateTransform",{attributeName:"gradientTransform",type:"rotate",from:"0",to:"1000",dur:"3s",repeatCount:"indefinite"})]})]}),(0,s.jsx)("rect",{width:"100%",height:"100%",fill:"black",opacity:"0.5",mask:"url(#mask)",id:"mask-overlay"}),n&&(0,s.jsx)("rect",{x:n.left-4,y:n.top-4,width:n.width+8,height:n.height+8,rx:3,ry:3,fill:"none",stroke:"url(#gradient)",strokeWidth:"3"})]}),(0,s.jsx)(d.a,{className:"overlay-clickable",children:n&&(0,s.jsx)(d.a,{className:"cutout-area",position:"absolute",top:n.top,left:n.left,width:"".concat(n.width,"px"),height:"".concat(n.height,"px"),borderRadius:3})})]})};var ea=i(66199),ed=i(79956),ec=i(53907),eu=i(15342),ex=i(43634),eh=i(6807),em=i(65148),ep=i(26476),eg=i(1079),ej=i(99038);let ef={createFirstGamma:!1,addCard:!1,dragToReorderCards:!1,addMedia:!1,changeTheme:!1,editWithAI:!1,tryPresenterView:!1,exportPDF:!1},eb=()=>({createFirstGamma:{title:(0,s.jsx)(m.x6,{id:"cwH/bW",values:{GAMMA_ARTIFACT_PROPER_NOUN:ej.TP}}),detail:(0,s.jsx)(m.x6,{id:"gPnQTx"}),learnMoreLink:eg.C.CREATE_NEW_GAMMA,webm:"https://static.gamma.app/videos/editor-checklist/v2/CreateNewGamma_c0a1ff03.webm",mp4:"https://static.gamma.app/videos/editor-checklist/v2/CreateNewGamma_838d509f.mp4"},addCard:{title:(0,s.jsx)(m.x6,{id:"B3xxao"}),detail:(0,s.jsx)(m.x6,{id:"QFRh35",components:{0:(0,s.jsx)(ep.u,{})}}),webm:"https://static.gamma.app/videos/editor-checklist/v2/AddCard_b581730c.webm",mp4:"https://static.gamma.app/videos/editor-checklist/v2/AddCard_bafff15e.mp4",maskSelector:'[data-guider-highlight="add-card-button"]'},dragToReorderCards:{title:(0,s.jsx)(m.x6,{id:"eCIfAy"}),detail:(0,s.jsx)(m.x6,{id:"r2DHdM"}),webm:"https://static.gamma.app/videos/editor-checklist/v2/DragToReorder_73bf1b69.webm",mp4:"https://static.gamma.app/videos/editor-checklist/v2/DragToReorder_a5a6c98c.mp4",maskSelector:'[data-guider-highlight="filmstrip-scroller"]',actionBefore:()=>{T.R.emit("openFilmStrip",{})}},addMedia:{title:(0,s.jsx)(m.x6,{id:"upnFWM"}),detail:(0,s.jsx)(m.x6,{id:"4IBZBD",components:{0:(0,s.jsx)(ep.u,{})}}),learnMoreLink:eg.C.ADD_BLOCKS,webm:"https://static.gamma.app/videos/editor-checklist/v2/AddMedia_a78ee09c.webm",mp4:"https://static.gamma.app/videos/editor-checklist/v2/AddMedia_85b8aee8.mp4",maskSelector:'[data-guider-highlight="insert-widget"]'},changeTheme:{title:(0,s.jsx)(m.x6,{id:"UOE+DR"}),detail:(0,s.jsx)(m.x6,{id:"MOba58"}),learnMoreLink:eg.C.CHANGE_THEME,webm:"https://static.gamma.app/videos/editor-checklist/v2/ChangeTheme_18381f26.webm",mp4:"https://static.gamma.app/videos/editor-checklist/v2/ChangeTheme_a7fd3334.mp4",maskSelector:'[data-guider-highlight="toolbar-theme-button"]'},editWithAI:{title:(0,s.jsx)(m.x6,{id:"EVnzPs"}),detail:(0,s.jsx)(m.x6,{id:"t5XFEE"}),learnMoreLink:eg.C.EDIT_WITH_AI,webm:"https://static.gamma.app/videos/editor-checklist/v2/EditWithAI_47eefcc5.webm",mp4:"https://static.gamma.app/videos/editor-checklist/v2/EditWithAI_1e1eeaa6.mp4",maskSelector:'[data-guider-highlight="edit-with-ai-button"]'},tryPresenterView:{title:(0,s.jsx)(m.x6,{id:"E3nYWH"}),detail:(0,s.jsx)(m.x6,{id:"c4vcd2",components:{0:(0,s.jsx)(ep.u,{})}}),learnMoreLink:eg.C.PRESENT_MODE,webm:"https://static.gamma.app/videos/editor-checklist/v2/TryPresenting_44202db8.webm",mp4:"https://static.gamma.app/videos/editor-checklist/v2/TryPresenting_af27f32c.mp4",maskSelector:'[data-guider-highlight="present-button-group"]'},exportPDF:{title:(0,s.jsx)(m.x6,{id:"eW0Hm2"}),detail:(0,s.jsx)(m.x6,{id:"GZeq1f"}),learnMoreLink:eg.C.EXPORT,webm:"https://static.gamma.app/videos/editor-checklist/v2/ShareAndExport_3b15ca89.webm",mp4:"https://static.gamma.app/videos/editor-checklist/v2/ShareAndExport_41008843.mp4",maskSelector:'[data-guider-highlight="share-button"]',skipCompleteStepOnMaskClick:!0}}),ev=eb(),ey=()=>{let[e]=(0,eh.M)(em.E.onboardingChecklistSteps,ef),t=Object.values(ev).length,i=Object.values(e).filter(Boolean).length;return{isChecklistComplete:i===t,progress:i/t*100,stepCount:i,totalSteps:t}},ew="onboardingChecklistWidgetActivator",eC=()=>{var e;let t=(0,eu.GV)(ex.sX),i=(0,eu.GV)((0,ec.A0)(t)),n=(null==i?void 0:i.status)==="running",{user:r,isUserLoading:d}=(0,et.ur)(),{progress:c,stepCount:u,totalSteps:x,isChecklistComplete:h}=ey(),p=(0,V.dU)("gray.700","gray.200"),g=(0,V.dU)("gray.400","gray.600"),j=null==r||null==(e=r.settings)?void 0:e.needsEditorOnboarding;return n||d||h?null:(0,s.jsx)(ea.W,{children:(0,s.jsx)(a.$,{onClick:()=>{T.R.emit("toggleOpen",{behavior:"toggle"})},width:"fit-content",px:4,minW:"150px",borderRadius:"full","data-id":ew,visibility:j||0===u?"hidden":"visible",pointerEvents:j||0===u?"none":"auto",children:(0,s.jsxs)(o.B,{spacing:1,w:"100%",children:[(0,s.jsxs)(o.B,{w:"100%",direction:"row",alignItems:"center",justifyContent:"space-between",children:[(0,s.jsx)(B.D,{size:"xs",color:p,children:(0,s.jsx)(m.x6,{id:"ZDIydz"})}),(0,s.jsx)(l.E,{fontSize:"xxs",color:g,children:(0,s.jsx)(m.x6,{id:"sNvodR",values:{totalSteps:x,0:String(u)}})})]}),(0,s.jsx)(ed.k,{size:"xs",value:c,colorScheme:"green",borderRadius:"full"})]})})})};i(57690);let ek=[{heading:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(m.x6,{id:"WywDbS",values:{GAMMA_ARTIFACT_PROPER_NOUN:ej.TP}})," ",(0,s.jsx)("span",{role:"img","aria-label":"party popper",className:"emoji",children:"\uD83C\uDF89"})]}),description:(0,s.jsx)(m.x6,{id:"qp5/eb",values:{GAMMA_ARTIFACT_PROPER_NOUN:ej.TP}}),cta:(0,s.jsx)(m.x6,{id:"1K069f"})},{heading:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(m.x6,{id:"SikK9S",values:{GAMMA_PROPER_NOUN:ej.On}})," ",(0,s.jsx)("span",{role:"img","aria-label":"card",className:"emoji",children:"\uD83C\uDCCF"})]}),description:(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(m.x6,{id:"OXpHoP"})}),selector:'[data-guider-highlight="card-body"]'},{heading:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(m.x6,{id:"ufgIDV"})," ",(0,s.jsx)("span",{role:"img","aria-label":"brick",className:"emoji",children:"\uD83E\uDDF1"})]}),description:(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(m.x6,{id:"YzLd99",values:{GAMMA_ARTIFACT_PROPER_NOUN:ej.TP}})}),shouldFocusEditor:!0,selector:".first-block-in-card"},{heading:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(m.x6,{id:"xL3A5l"})," ",(0,s.jsx)("span",{role:"img","aria-label":"racing flag",className:"emoji",children:"\uD83C\uDFC1"})]}),description:(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(m.x6,{id:"USbGN7",values:{GAMMA_PROPER_NOUN:ej.On}})})}],eE='[data-id="'.concat(ew,'"]'),eS=e=>{let{editor:t}=e,i=(0,X.fW)(),{setSettings:n}=(0,et.ur)(),[r,o]=(0,v.useState)(0),l=(0,Q.O2)("editor"),[a,c]=(0,v.useState)(!1),u=ek[r],{rectAttrs:x}=es({selector:u.selector}),{rectAttrs:h}=es({selector:eE}),m=u.selector&&x||h;(0,v.useEffect)(()=>{(0,ei._1)(eE,12e4).then(()=>{l.scrollTo({top:0,behavior:"smooth"}).then(()=>{requestAnimationFrame(()=>{(0,Y.v)(Z.VV.ONBOARDING_WELCOME_TOUR_STARTED),c(!0)})})}).catch(()=>{})},[]);let p=(0,v.useCallback)(()=>{(0,Y.v)(Z.VV.ONBOARDING_WELCOME_TOUR_STEP_COMPLETED,{step:r+1}),o(r+1)},[r]);(0,v.useEffect)(()=>{u.shouldFocusEditor&&(null==t||t.commands.focusDelayed())},[r,t,u.shouldFocusEditor]);let g=(0,v.useCallback)(()=>{(0,Y.v)(Z.VV.ONBOARDING_WELCOME_TOUR_STEP_COMPLETED,{step:r+1}),c(!1),null==n||n({remove:["needsEditorOnboarding"]}),T.R.emit("toggleOpen",{behavior:"open"})},[n,r]),j=(0,v.useCallback)(()=>{o(r-1)},[r]),f=(0,ee.rd)();return!a||(0,_.Xb)()||!m?null:(0,s.jsxs)(N.Z,{children:[(0,s.jsx)(K.mL,{styles:{"[data-editor-toolbar] button":{pointerEvents:"none"}}}),(0,s.jsx)(J.L8,{isDark:f,children:(0,s.jsxs)(F.A,{isOpen:!0,lazyBehavior:"unmount",closeOnBlur:!1,isLazy:!0,gutter:8,preventOverflow:!0,boundary:"clippingParents",placement:u.selector&&x?"start-start":"top",modifiers:[{name:"detectOverflow",phase:"beforeWrite",requiresIfExists:["offset"],enabled:!0,fn:e=>{let{state:t}=e;if(!u.selector)return t.styles.popper={...t.styles.popper,left:i?"".concat($.uA):"-".concat($.uA)},t;let n=(0,q.A)(t,{boundary:"clippingParents"}),s=n.top>0||n.bottom>0||n.left>0||n.right>0,r=t.elements.popper.getBoundingClientRect();return u.selector&&(null==h?void 0:h.top)&&s&&(t.styles.popper={...t.styles.popper,right:i?"auto":"0px",top:"-".concat(8,"px"),left:i?"0px":"auto",bottom:"auto",transform:"translate3d(0px, ".concat(h.top-r.height,"px, 0px)"),insetInlineEnd:$.uA}),t}}],children:[(0,s.jsx)(L.d,{children:(0,s.jsx)(d.a,{position:"absolute",pointerEvents:"none",top:"".concat(null==m?void 0:m.top,"px"),left:"".concat(null==m?void 0:m.left,"px"),width:"".concat(null==m?void 0:m.width,"px"),height:"".concat(null==m?void 0:m.height,"px")})}),(0,s.jsx)(N.Z,{children:(0,s.jsx)(eI,{step:u,onNextClick:p,onBackClick:j,onCompleteClick:g,stepIndex:r},r)})]})}),(0,s.jsx)(el,{selector:u.selector,rectAttrs:x||null,onClickTargetElement:()=>{}})]})},eI=e=>{let{step:t,onNextClick:i,onBackClick:n,onCompleteClick:r,stepIndex:c}=e,h=(0,X.fW)(),g=h?u.CeG:u.dmS,j=h?u.dmS:u.CeG,f=er((0,ee.rd)()),b=(0,V.dU)("gray.500","gray.400"),v=(0,V.dU)("gray.300","gray.600");return(0,s.jsx)(W.h,{"data-id":"tour-popover-content",shadow:"2xl",w:"400px",border:"1px solid var(--chakra-colors-gray-200)",className:"tour-popover",...f,children:(0,s.jsx)(G.e,{children:(0,s.jsxs)(o.B,{p:2,pt:4,spacing:6,children:[c!==ek.length-1&&(0,s.jsx)(l.E,{fontSize:"sm",color:v,fontWeight:"bold",mt:-2,children:(0,s.jsx)(m.x6,{id:"RfkEBH",values:{0:c+1,1:ek.length-1}})}),(0,s.jsxs)(o.B,{spacing:2,children:[(0,s.jsx)(d.a,{display:"inline",alignItems:"center",children:(0,s.jsx)(B.D,{display:"inline",variant:"fancy",size:"md",mb:2,textAlign:"start",lineHeight:"1",children:t.heading})}),(0,s.jsx)(l.E,{fontSize:"md",children:t.description}),t.helperText&&(0,s.jsx)(l.E,{fontSize:"sm",color:b,children:t.helperText})]}),0===c?(0,s.jsx)(U.o,{children:(0,s.jsx)(a.$,{w:"fit-content",variant:"solid",onClick:i,children:(0,s.jsx)(m.x6,{id:"1K069f"})})}):c===ek.length-1?(0,s.jsx)(U.o,{children:(0,s.jsx)(a.$,{onClick:r,w:"fit-content",variant:"solid",children:(0,s.jsx)(m.x6,{id:"O1h2Xs"})})}):(0,s.jsxs)(o.B,{w:"100%",alignItems:"center",justifyContent:"space-between",direction:"row",children:[(0,s.jsx)(H.K,{size:"md",variant:"plain",px:6,colorScheme:"blackAlpha",onClick:n,"aria-label":p.Ru._({id:"iH8pgl"}),icon:(0,s.jsx)(x.g,{icon:j})}),(0,s.jsx)(H.K,{px:6,size:"md",variant:"solid",onClick:i,"aria-label":p.Ru._({id:"hXzOVo"}),icon:(0,s.jsx)(x.g,{icon:g})})]})]})})})},eT=e=>{let{editor:t}=e,[i,n]=(0,v.useState)("off"),{hasInitialized:r}=(0,R.FY)(),o=r&&("tour"===i||"aiGenerate"===i)&&!A.$.IS_USER_TESTING_SESSION;return((0,v.useEffect)(()=>{if(!A.$.IS_USER_TESTING_SESSION)return M.on("triggerOnboarding",e=>{let{reason:t}=e;(0,_.Xb)()||n(t)})},[]),eA(),o)?(0,s.jsx)(eS,{editor:t}):null},eA=()=>{let e="true"===(0,D.sF)()[P.y];(0,O.o)(P.y),(0,v.useEffect)(()=>{e&&M.emit("triggerOnboarding",{reason:"tour"})},[e])};var eR=i(32617),eO=i(58809),e_=i(53281),eD=i(61106),eP=i(81043),ez=i(27229),eM=i(55765),eN=i.n(eM),eF=i(47687),eL=i.n(eF);class eV extends z.b{setup(){document.addEventListener("mousemove",this.throttled)}teardown(){document.removeEventListener("mousemove",this.throttled)}constructor(){super(),this.throttled=eL()(e=>{this.emit("move",e)},200,{leading:!0})}}let eW=eN()(()=>new eV),eG=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2?arguments[2]:void 0,n=eW(),[s,r]=(0,v.useState)(!1),o=(0,v.useRef)(null),l=(0,v.useRef)(e);return l.current=e,(0,v.useEffect)(()=>{if(t)return;let e=()=>{null!==o.current&&(clearTimeout(o.current),o.current=null)},s=()=>{e(),i&&(o.current=setTimeout(()=>{r(!1),o.current=null},i))};s();let a=n.on("move",e=>{r(l.current(e)),s()});return()=>{e(),a()}},[n,t,i]),s};var eB=i(85328),eU=i(30615);let eH=(0,v.memo)(e=>{let{forceShow:t=!1}=e,{isOpen:i,onToggle:n,onClose:r,onOpen:o}=(0,ez.j)(),l=(0,eu.GV)(ex.VJ),a=eG((0,v.useCallback)(e=>e.clientX>window.innerWidth-150&&e.clientY>window.innerHeight-150,[]));return(0,v.useEffect)(()=>{t?o():r()},[t,o,r]),(0,s.jsx)(eB.x,{me:!l||i||a||t?"0px":"-100%",transitionProperty:"margin-right",transitionDuration:"ultra-slow",transitionTimingFunction:"ease-in-out",children:(0,s.jsxs)(F.A,{returnFocusOnClose:!1,isOpen:i,onClose:r,closeOnBlur:!0,closeOnEsc:!1,children:[(0,s.jsx)(ea.W,{children:(0,s.jsx)(H.K,{onClick:()=>{n()},"aria-label":"Help",isRound:!0,size:"md",icon:(0,s.jsx)(x.g,{icon:u.Lhe})})}),(0,s.jsx)(W.h,{...$.kK,children:(0,s.jsx)(G.e,{children:(0,s.jsx)(eU.u,{onClose:r})})})]})})});eH.displayName="PresentModeHelpWidget";var eK=i(39892),eJ=i(75748),eq=i(33633),eY=i(3247),e$=i(27748),eX=i(84431),eQ=i(45143),eZ=i(54929),e0=i(20751),e1=i(22249);let e6={ifPanelHasRoomToOpen:function(e,t,i){return"left"===i?{base:t,xl:e}:{base:t,"2xl":e}}},e2=e=>{let{children:t,onClose:i,panelName:n}=e;return(0,v.useEffect)(()=>eY.WC.on("keydown",n,e=>"Escape"===e.key&&(i(),!0)),[n,i]),t},e5=e=>{var t;let{position:i,panelLifecycle:n,editor:o,canResize:l=!0}=e,a=(0,X.fW)()?"left"===i?"right":"left":i,d=(0,v.useRef)(),[c,u]=(0,v.useState)(!1),x=(0,y.wA)(),h=(0,eu.GV)((0,e1.DP)(i)),m=(0,eu.GV)((0,e1.wM)(i)),p=(0,eu.GV)((0,e1.I2)(i)),g=(0,eu.GV)(ex.OG),j=(0,eu.GV)((0,e1.lp)(i)),f=(0,eu.GV)((0,e1.yG)(i)),b=!!(0,R.u)("docAlwaysZoomToFit")&&(null==f?void 0:f.alwaysDocked),w=null!=(t=null==f?void 0:f.canCollapse)&&t,C=(0,v.useCallback)(()=>{x((0,e1.Zv)({position:i}))},[x,i]),k=(0,v.useCallback)(()=>{x((0,e1.NE)({component:f}))},[f,x]),E=(0,v.useCallback)(e=>{x((0,e1.bz)({width:e,position:i})),n.emit("resize",{})},[x,n,i]),S=(0,eu.GV)((0,e1.aL)(i))&&l,I={zIndex:eX.$.panel,position:b?"relative":e6.ifPanelHasRoomToOpen("relative","fixed",a),top:b?0:e6.ifPanelHasRoomToOpen(0,"var(--editor-padding-top)",a),bottom:0,[a]:0},T=(0,ee.rd)();p||c||(I.transitionProperty="width",I.transitionDuration="".concat(e$.o0,"ms")),(0,v.useEffect)(()=>{let e=e=>{"width"===e.propertyName&&n.emit("resize",{})};return d.current.addEventListener("transitionend",e),()=>{d.current&&d.current.removeEventListener("transitionend",e)}},[n,d]);let A=(0,eQ.h5)(e6.ifPanelHasRoomToOpen(!0,!1,a))||!1,O=b||A;return(0,v.useEffect)(()=>{h&&!O&&w&&C()},[O,h,C,w]),(0,v.useEffect)(()=>{g&&C()},[g,C]),(0,s.jsxs)(r.s,{ref:d,...I,style:{width:h||w?j:0},boxShadow:O?"none":"2xl",borderColor:h?T?"gray.700":"blackAlpha.100":void 0,borderLeftWidth:h&&"right"===a?"1px":0,borderRightWidth:h&&"left"===a?"1px":0,maxW:"100%","data-print-hidden":!0,children:[h&&"right"===i&&S&&(0,s.jsx)(e0.$P,{isDragging:c,setIsDragging:u,position:a,width:j,minWidth:null==f?void 0:f.minWidth,setWidth:E,panelRef:d,onClose:C,initialWidth:e$.JO}),(0,s.jsx)(eZ.Y.Provider,{value:n,children:f&&(h||w)&&(0,s.jsx)(e2,{onClose:C,panelName:f.panelName,children:(0,s.jsx)(f,{isDragging:c,isOpen:h,closePanel:C,openPanel:k,panelRef:d,lifecycle:n,hasRoomToOpen:O,editor:o,...m})})}),h&&"left"===i&&S&&(0,s.jsx)(e0.$P,{isDragging:c,setIsDragging:u,position:a,width:j,minWidth:null==f?void 0:f.minWidth,setWidth:E,panelRef:d,onClose:C,initialWidth:e$.qm})]})},e4=(0,v.memo)(e=>(0,s.jsx)(e5,{position:"right",...e}));e4.displayName="RightPanelContainer";let e3=(0,v.memo)(e=>(0,s.jsx)(e5,{position:"left",...e}));e3.displayName="LeftPanelContainer";var e8=i(58959),e7=i(61204),e9=i(81278),te=i(8944);let tt=e=>{let{docId:t}=e,i=(0,eu.jL)(),n=(0,V.dU)("gray.300","gray.700"),o=(0,V.dU)("white","gray.800"),l=(0,V.dU)("transparent","transparent"),c=(0,V.dU)("gray.500","gray.400"),h=(0,V.dU)("trueblue.50","trueblue.400"),g=(0,V.dU)("trueblue.500","white"),j=(0,V.dU)("gray.600","gray.50"),f=(0,V.dU)("gray.50","gray.600"),b=(0,V.dU)("trueblue.50","trueblue.400"),y=(0,V.dU)("trueblue.500","white"),{replace:w}=(0,e9.useRouter)(),C=(0,eu.GV)(te.og),k=(0,v.useCallback)(()=>{t&&w((0,D.pF)({docId:t}),void 0,{shallow:!0})},[t,w]),E=(0,v.useCallback)(e=>{i((0,te.ey)({previewSize:e}))},[i]);return(0,v.useEffect)(()=>eY.WC.on("keydown","SITE_PREVIEW_PANE",e=>("Escape"===e.key&&k(),!0)),[k]),(0,s.jsx)(r.s,{bg:"white",align:"flex-start",direction:"column",width:"100%","data-sites-preview-pane":!0,children:(0,s.jsxs)(e8.z,{w:"100%",spacing:0,p:2,py:2,bg:o,borderColor:n,justify:"flex-start",borderBottomWidth:"1px",children:[(0,s.jsx)(e8.z,{spacing:2,flexBasis:"30%",children:!(0,_.Xb)()&&(0,s.jsx)(a.$,{size:"sm",variant:"plain",onClick:k,children:(0,s.jsx)(e8.z,{children:(0,s.jsx)(d.a,{children:(0,s.jsx)(x.g,{icon:u.CeG})})})})}),(0,s.jsxs)(e7.e,{size:"sm",ml:24,flexBasis:"40%",justifyContent:"center",children:[(0,s.jsx)(J.Tz,{label:(0,s.jsx)(m.x6,{id:"58m6Qy"}),children:(0,s.jsx)(H.K,{"aria-label":p.Ru._({id:"58m6Qy"}),variant:"ghost",size:"sm",icon:(0,s.jsx)(x.g,{icon:u.GrJ}),bg:"mobile"===C?h:l,_hover:{color:"mobile"===C?y:j,bg:"mobile"===C?b:f},color:"mobile"===C?g:c,onClick:()=>{E("mobile")}})}),!(0,_.Xb)()&&(0,s.jsx)(J.Tz,{label:(0,s.jsx)(m.x6,{id:"fpcKeD"}),children:(0,s.jsx)(H.K,{"aria-label":p.Ru._({id:"fpcKeD"}),variant:"ghost",size:"sm",icon:(0,s.jsx)(x.g,{icon:u.w7B}),bg:"tablet"===C?h:l,_hover:{color:"tablet"===C?y:j,bg:"tablet"===C?b:f},color:"tablet"===C?g:c,onClick:()=>{E("tablet")}})}),!(0,_.Xb)()&&(0,s.jsx)(J.Tz,{label:(0,s.jsx)(m.x6,{id:"K3p0ar"}),children:(0,s.jsx)(H.K,{"aria-label":p.Ru._({id:"K3p0ar"}),variant:"ghost",size:"sm",icon:(0,s.jsx)(x.g,{icon:u.ArK}),bg:"desktop"===C?h:l,_hover:{color:"desktop"===C?y:j,bg:"desktop"===C?b:f},color:"desktop"===C?g:c,onClick:()=>{E("desktop")}})})]}),(0,s.jsx)(e8.z,{flexBasis:"30%",justifyContent:"flex-end"})]})})};var ti=i(24573),tn=i(12364),ts=i.n(tn),tr=i(99552),to=i(72492);let tl=(e,t)=>{let i=(0,eu.jL)(),n=(0,eu.CU)(),s=!!(0,eu.GV)(tr.df),r=(0,eu.GV)(ex.Ik),o=(0,eu.GV)(tr.le),l=t&&s&&r;(0,v.useEffect)(()=>{var t,s;if(!l||!e||e.gammaDocId!==o)return;let r=(0,eO.Jo)(n.getState()),a=null==r||null==(s=r.publishedSnapshot)||null==(t=s.content)?void 0:t.default;if(!a)return;let d=!(0,to.wX)(e,a);console.debug("[useDirtyStateTracking] INITIALIZING DIRTY STATE ".concat(o," via compareDocJSON"),{isDirty:d}),d&&i((0,tr.VP)({pageId:e.gammaDocId,lastUpdatedAt:new Date().toISOString()}))},[i,n,e,l,o]),(0,v.useEffect)(()=>{if(!l||!e)return;let t=ts()(()=>{i((0,tr.VP)({pageId:e.gammaDocId,lastUpdatedAt:new Date().toISOString()}))},500,{leading:!0,trailing:!0,maxWait:1e3});return e.on("update",t),()=>{e.off("update",t)}},[l,i,e])};var ta=i(44141),td=i(32263),tc=i(51967),tu=i(26053),tx=i(73813),th=i(30524),tm=i(59543),tp=i(22905),tg=i(831),tj=i.n(tg),tf=i(47665),tb=i(85235);let tv=(e,t,i,n,s)=>{let r=n-i,o=Math.max(r-Math.max(e-i,0)-Math.max(n-t,0),0),l=o/r,a=l>0&&o==t-e;return{overlap:l,viewing:s&&(a||l>.5||o>400),only:a}},ty=(e,t)=>{let i=(0,Q.O2)("editor"),[n,s]=(0,v.useState)(null),r=(0,v.useRef)({presentingCardId:null,scrollTop:0,containerHeight:0,expandedCards:{}}),o=(0,eu.GV)(ex.wC),l=(0,eu.GV)(ex.$i);(0,v.useEffect)(()=>{r.current.presentingCardId=null!=l?l:null},[l]);let a=(0,eu.GV)(ex.vy);(0,v.useEffect)(()=>{r.current.expandedCards=a},[a]),(0,v.useEffect)(()=>{let e=document.querySelector(i.scrollSelector);if(!e)return;s(e);let{height:t}=e.getBoundingClientRect();r.current.scrollTop=e.scrollTop,r.current.containerHeight=t},[i.scrollSelector,r]),(0,v.useEffect)(()=>{let e=ts()(()=>{n&&(r.current.scrollTop=n.scrollTop)},250,{trailing:!0,maxWait:500});return window.addEventListener("scroll",e,!0),()=>window.removeEventListener("scroll",e,!0)},[n]),(0,v.useEffect)(()=>{let e=ts()(()=>{n&&(r.current.containerHeight=n.getBoundingClientRect().height)},250,{trailing:!0,maxWait:500});return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[n]),(0,v.useEffect)(()=>{if(!e)return;if(o===tb.w.SLIDE_VIEW){let e=setInterval(()=>{t.emit("cardViewed",{cardId:r.current.presentingCardId,interval:1e3})},1e3);return()=>clearInterval(e)}let n=setInterval(()=>{if(document.hidden)return;let{scrollTop:n,containerHeight:s,expandedCards:o}=r.current,l=n+s;tj()((0,tp.xe)(e.state.doc,tf.jg),e=>e.node.attrs.id).map(t=>{let s,r=t.node.attrs.id,a=o[r];if(!a)return null;try{s=e.view.nodeDOM(t.pos)}catch(e){return null}if(s instanceof HTMLElement){let e=(0,ei.sR)(s,i.scrollSelector),{offsetHeight:t}=s;return{id:r,...tv(n,l,e,t+e,a)}}return null}).filter(e=>!!(null==e?void 0:e.viewing)).forEach(e=>{t.emit("cardViewed",{cardId:e.id,interval:1e3})})},1e3);return()=>clearInterval(n)},[o,e,r,t,i.scrollSelector])},tw=e=>{let{editor:t,backoffFactor:i=1}=e,n=(0,Z.st)(),[s,r]=(0,v.useState)(15e3);ty(t,tm.t);let o=(0,v.useCallback)(()=>{tm.t.flush(),r(Math.min(s*i,12e4))},[i,s]);return(0,v.useEffect)(()=>{if(!n)return;tm.t.initialize(),tm.t.on("flush",e=>{let{viewed:t}=e;for(let[e,i]of Object.entries(t))n.trackDocEvent(Z.VV.CARD_VIEWED,{card_id:e,duration:i})});let e=setInterval(()=>o(),s);return()=>{clearInterval(e),tm.t.destroy()}},[n,s,o]),null};var tC=i(11324),tk=i(75074),tE=i(39162),tS=i(77364),tI=i(57405),tT=i(29810),tA=i(55597),tR=i(90184),tO=i(647),t_=i(95563),tD=i(39099),tP=i(83817),tz=i.n(tP),tM=i(70259),tN=i(71737);let tF=e=>{let t=(0,eu.GV)(tk.Ix),{title:i}=(0,tM.d)({cardId:t||void 0,editor:e}),n=(0,eu.GV)(ex.uF,function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return tz()(...t)}),s=n.indexOf(t||""),r=(0,v.useCallback)(t=>()=>{var i,r;if(!e)return;let o=null!=(r=n[s+(t?1:-1)])?r:n[s],l=null==(i=(0,tf.W0)(e,o))?void 0:i.pos;if(!l)return;(0,tN.I5)(e,l)||e.commands.selectInsideNodeAtPos(l);let a=e.view.nodeDOM(l);a instanceof HTMLElement&&(0,Q.H1)("editor").scrollElementIntoView({element:a,delay:0})},[s,e,n]);return{cardId:t,title:i||"Untitled",canGoForward:s<n.length-1,canGoBack:s>0,goToNextCard:r(!0),goToPreviousCard:r(!1)}};var tL=i(75495),tV=i(92397);let tW=e=>{let{editor:t,isReadonly:i}=e,{selection:n}=(0,tL.y)(t),s=(0,eu.jL)();(0,v.useEffect)(()=>{if(!t)return;let e=(0,tV.hT)(t.state.doc,t.state.selection.from);if(e&&e.node&&!(0,tN.eh)(e.node)){if(i)return void s((0,tk.qq)());(0,tN.ni)(t,e.pos)}},[s,t,i,n])};var tG=i(80116),tB=i(34832),tU=i(40240),tH=i(26814),tK=i(6018),tJ=i(37605),tq=i(3239),tY=i(3383),t$=i(53615),tX=i(11403);let tQ=e=>{let{editor:t,cardId:i}=e,n=(0,eu.GV)(ex.sK),s=(0,eu.GV)(ex.nD),r=(0,R.u)("aiCardNotes"),o=(0,v.useCallback)(e=>{if(!t||!i)return;let n=(0,tf.W0)(t,i);if(!n)return;let s=t.state.doc.resolve(n.pos),r=(0,tN.PD)(s);if(!r)return;let o=(0,t$.os)(e,t.schema),{tr:l}=t.state,a=r.pos+1,d=a+r.node.content.size;l.delete(a,d).insert(a,o.content),t.view.dispatch(l)},[t,i]),l=(0,tX.wb)(o,200),[a,d]=(0,v.useState)(!1),{generate:c}=(0,tB.pt)("GenerateSpeakerNotes",{onStart(){d(!0),l("")},onContent(e){l(e)},onComplete(e){l(e),d(!1)},timeout:3e4}),u=(0,eu.CU)(),x=(0,v.useCallback)(async()=>{if(!n||!t||!i)return;let e=(0,tf.W0)(t,i);if(!e)return;let s=(0,tG.yO)(t,e.node);s.querySelectorAll("notes").forEach(e=>{var t;null==(t=e.parentElement)||t.removeChild(e)});let r=(0,tG._u)(s),o=(0,tU.$F)(),l=(0,tY.ze)(t,e.pos),a=(0,tq.u)(u);await c({variables:{cardHtml:r,previous:l,outline:a},workspaceId:n.id}).promise,(0,tK.w)("generateCardNotes",n,o)},[c,n,t,i,u]);return{onClickGenerate:(0,tH.tO)(x,"generateCardNotes",tJ.VV.GAMMA_UPSELL_CALLOUT_AI_CREDITS_GENERATE_CARD),isGenerating:a,canGenerateCardNotes:r&&s}},tZ=e=>{let{closePanel:t}=e,{editor:i}=(0,t5.mi)(),n=(0,eu.GV)(ex.nD),{cardId:o,canGoBack:d,canGoForward:c,title:h,goToNextCard:g,goToPreviousCard:j}=tF(i),{isInOfflineMode:f}=(0,E.u)();tW({editor:i,isReadonly:!n});let b=(0,ee.rd)(),v=b?"elevation.3":"white",y=b?"white":"gray.800",w=b?"gray.300":"gray.500",{onClickGenerate:C,isGenerating:k,canGenerateCardNotes:S}=tQ({editor:i,cardId:o});return(0,s.jsx)(J.L8,{isDark:b,children:(0,s.jsx)(tO.Z,{bgColor:v,"data-panelid":"card-notes-panel",color:y,children:(0,s.jsxs)(r.s,{direction:"column",h:"100%",flex:1,children:[(0,s.jsxs)(r.s,{px:6,py:4,children:[(0,s.jsx)(r.s,{flex:1,children:(0,s.jsxs)(e8.z,{spacing:4,children:[(0,s.jsx)(t_.N,{children:(0,s.jsx)(m.x6,{id:"1DBGsz"})}),n&&!f&&(0,s.jsx)(J.qT,{label:(0,s.jsx)(m.x6,{id:"qcPeK2"})})]})}),(0,s.jsx)(tS.J,{"data-card-notes-close-button":!0,onClick:t})]}),(0,s.jsxs)(tI.T,{px:6,pb:4,alignItems:"stretch",flex:1,overflowY:"hidden",spacing:4,"data-card-notes-bubble-menu-target":!0,children:[(0,s.jsxs)(e8.z,{align:"end",children:[(0,s.jsx)(l.E,{fontWeight:"600",color:w,wordBreak:"break-word",noOfLines:2,"data-testid":"card-notes-card-title",py:1,children:h}),(0,s.jsx)(tT.h,{}),S&&(0,s.jsx)(J.Tz,{label:(0,s.jsxs)(e8.z,{spacing:0,children:[(0,s.jsx)(m.x6,{id:"GyxUS3"}),(0,s.jsx)(tR.G,{type:"generateCardNotes"})]}),placement:"top",children:(0,s.jsx)(a.$,{variant:"ghost",onClick:C,isLoading:k,isDisabled:f,size:"sm","aria-label":p.Ru._({id:"ziAjHi"}),rightIcon:(0,s.jsx)(x.g,{icon:tA.p7g}),flexShrink:0,children:(0,s.jsx)(m.x6,{id:"ziAjHi"})})})]}),(0,s.jsx)(tD.z,{isEditable:n,isDark:b}),n&&(0,s.jsxs)(e8.z,{children:[(0,s.jsx)(J.Tz,{label:d?(0,s.jsx)(m.x6,{id:"cbqngJ"}):(0,s.jsx)(m.x6,{id:"4OtlnH"}),children:(0,s.jsx)(r.s,{flex:1,children:(0,s.jsx)(H.K,{"aria-label":d?p.Ru._({id:"cbqngJ"}):p.Ru._({id:"4OtlnH"}),icon:(0,s.jsx)(x.g,{icon:u.CeG}),onClick:j,isDisabled:!d,flex:1})})}),(0,s.jsx)(J.Tz,{label:c?(0,s.jsx)(m.x6,{id:"EyUKqu"}):(0,s.jsx)(m.x6,{id:"ggpGEd"}),children:(0,s.jsx)(r.s,{flex:1,children:(0,s.jsx)(H.K,{"aria-label":c?p.Ru._({id:"EyUKqu"}):p.Ru._({id:"ggpGEd"}),icon:(0,s.jsx)(x.g,{icon:u.dmS}),onClick:g,isDisabled:!c,flex:1})})})]})]})]})})})};tZ.panelPosition="right",tZ.panelName="card-notes";let t0=()=>{let{togglePanel:e,isPanelOpen:t}=(0,eq.ww)(tZ),{editor:i}=(0,tE.m)(),n=(0,eu.jL)(),s=(0,eu.GV)(ex.wC)===tb.w.SLIDE_VIEW;(0,v.useEffect)(()=>{t&&s&&e()},[t,e,s]),(0,v.useEffect)(()=>{!t&&i&&(n((0,tk.Yf)({isOpen:!1})),i.view.dispatch(i.state.tr))},[n,i,t,e]),(0,v.useEffect)(()=>{if(i)return tC.R.on("toggle",s=>{let{config:r,clickedCardId:o,activeNotesCardId:l}=s;t&&o!==l||(e(r),n((0,tk.Yf)({isOpen:!t})),i.view.dispatch(i.state.tr))})},[n,i,t,e])},t1="drag-in-progress",t6=()=>{(0,v.useEffect)(()=>{let e=()=>{document.body.classList.add(t1)},t=()=>{document.body.classList.remove(t1)};return document.body.addEventListener("dragstart",e,!0),document.body.addEventListener("dragend",t,!0),document.body.addEventListener("drop",t,!0),document.body.addEventListener("mouseup",t,!0),()=>{document.body.removeEventListener("dragstart",e,!0),document.body.removeEventListener("dragend",t,!0),document.body.removeEventListener("drop",t,!0),document.body.removeEventListener("mouseup",t,!0)}},[])};var t2=i(44630),t5=i(85607),t4=i(3276),t3=i(7756),t8=i(63902),t7=i(64072),t9=i(78116),ie=i(99743),it=i(57860),ii=i(15253),is=i(85732),ir=i(34807),io=i(49776),il=i(64084),ia=i(85684),id=i(30228),ic=i(59320),iu=i(71128),ix=i(36512);let ih=()=>{let e=(0,eQ.h5)({lg:100,xl:125,"2xl":150})||100,t=(0,eu.GV)(il.jF),i=null!==t?t:e;return{previewWidth:i,width:i+40,fontSize:i/ix.s5}};var im=i(43607),ip=i(22529),ig=i(55276);let ij=()=>{let e=(0,eu.GV)(ip.iG),t=(0,R.u)("filmstrip"),i=(0,eu.GV)(ig.wt),n=(0,im.UT)("comment"),s=(0,eu.GV)(ex.wC),r=(0,eu.GV)((0,e1.DP)("left")),o=(0,eu.GV)(te.C),l=i===t2.i.COLLABORATIVE||e;return t&&l&&(n||e)&&s===tb.w.DOC_VIEW&&!(0,_.Xb)()&&!r&&!o},ib=()=>{let e=(0,X.fW)(),t=(0,eq.t3)(),i=(0,eq.Wm)(),n=(0,eQ.h5)({base:!1,lg:!0,"3xl":t+i>0}),s=(0,eu.GV)(ex.cS),r=(0,eu.GV)(il.lh),o=ij(),l=(0,iu.Tq)(),a=(0,io.U)(),d=r&&o&&n,c=(0,ia.R)(),u=(0,ir.A)({base:"0px",[id.y3]:ic.iq})||"0px",{width:x}=ih();return(0,v.useMemo)(()=>{let n=d?"".concat(x,"px"):!a&&l.src&&"bottom-left"===l.position?"".concat(l.width+l.paddingX/2,"px"):"0px",r=s?u:c?"60px":"0px";return{"--doc-padding-left":e?r:n,"--doc-padding-right":e?n:r,"--present-padding-left":"".concat(t,"px"),"--present-padding-right":"".concat(i,"px"),"--comment-slide-margin":u}},[x,t,s,i,c,u,a,l,d,e])};var iv=i(83850);let iy=e=>"tablet"===e?"768px":"mobile"===e?(0,_.Xb)()?"100vw":"375px":"100vw",iw=e=>{let{loading:t,...i}=e,{editor:n,docId:l,previewSize:a}=i;return(0,s.jsxs)(t3.Tw,{children:[(0,s.jsx)("style",{id:"global-styles",dangerouslySetInnerHTML:{__html:iv.S.toString()}}),(0,s.jsx)(t8.Um,{children:(0,s.jsx)(r.s,{pos:"relative",justifyContent:"center",bg:"#C5C5C5",flex:1,children:!t&&n&&l?(0,s.jsx)(iC,{...i,editor:n,docId:l}):(0,s.jsx)(d.a,{flexDirection:"column",w:iy(a),h:"var(--100vh)",bg:"gray.50","data-testid":"preview-editor-loading",inset:0,children:(0,s.jsx)(U.o,{h:"100%",children:(0,s.jsx)(o.B,{align:"center",children:(0,s.jsx)(t4.y,{})})})})})})]})},iC=e=>{let{docId:t,editor:i,previewSize:n,onCreate:o}=e,l=(0,v.useMemo)(()=>(0,t7.C)().concat(t9.Q),[]),a=(0,v.useMemo)(()=>i.getJSON(),[i]),u="mobile"===n?"mobile":"desktop",x=(0,it.h)({async onCreate(e){let{editor:t}=e;console.debug("[SimpleEditor][onCreate] TipTap editor is now ready"),null==o||o({editor:t})},content:a,extensions:l,editable:!1});x.shouldUsePublishedVersion=!0;let{editorAnimationsClass:h,editorAnimationsCSSVars:m}=(0,tc.O)({editor:x,instanceId:u,scrollingParentSelector:".".concat(t2.v)}),p=(0,eu.GV)(tr.Gd),g=(0,eu.GV)(ex.SJ),j=(0,is.pg)(p),f=j?tx.kb:0,b=iy(n),y=ib();return(0,s.jsxs)(d.a,{className:(0,c.cx)("preview-editor-root",h),style:m,w:b,h:"100%",css:{...y,"--editor-width":b,"--doc-padding-top":"".concat(f,"px"),"--editor-padding-top":"".concat(50,"px")},position:"relative",shadow:"xl",children:[p&&j&&(0,s.jsx)(r.s,{pos:"absolute",top:0,left:0,w:"100%",zIndex:"10",children:(0,s.jsx)(ie._,{theme:g,editable:!1,content:p.navContent},"".concat(t,"__preview-editor-nav__").concat(u,"}"))}),(0,s.jsx)(ii.N,{editor:x},"".concat(t,"__preview-editor__").concat(u,"}"))]})};var ik=i(88586);let iE=()=>{let e=(0,eu.GV)(tr.Gd),t=(0,eu.GV)(ex.SJ),i=(0,eu.CU)(),[n]=(0,ik.vlJ)(),o=(0,v.useCallback)(async e=>{var t;let{editor:s}=e,r=null==(t=(0,tr.Gd)(i.getState()))?void 0:t.id;r&&await n({variables:{input:{siteId:r,navContent:s.state.doc.toJSON()}}})},[n,i]),l=(0,tX.lW)(o,500);return e?(0,s.jsx)(r.s,{pos:"absolute",top:0,left:0,w:"100%",zIndex:eX.$.siteNav,children:(0,s.jsx)(ie._,{theme:t,onUpdate:l,content:e.navContent,editable:!0,scrollingParentSelector:".".concat(t2.v)})}):null};var iS=i(2942),iI=i(46898),iT=i(68068),iA=i(60628),iR=i(17920),iO=i(3674),i_=i(40691),iD=i(96500),iP=i(64268),iz=i(51504),iM=i(97481),iN=i.n(iM),iF=i(22445),iL=i(27828),iV=i(73287),iW=i(74945);let iG={title:(0,s.jsx)(m.x6,{id:"DD5mqk"}),description:(0,s.jsx)(m.x6,{id:"8BmWcz"}),status:"error",position:"top",isClosable:!0},iB=e=>{let{doc:t,site:i,path:n}=e,r=(0,iI.d)(),o=(0,eu.jL)(),c=(0,eu.GV)(tr.aK),h=(0,iW.rB)(),[p]=(0,iV.b0Z)(),[g]=(0,iV.w$N)(),[j]=(0,iV._Su)(),f=(0,eu.GV)(tr.le),b=null==t?void 0:t.id,y=(0,ta.jY)({site:i,path:(0,ta.wK)(n)}),w=null==i?void 0:i.id,C=(0,v.useCallback)(async()=>{if(b){if(h)return void r(iG);(0,tr.wb)(o)(!0),await (0,ta.fb)(b),await g({variables:{id:b},refetchQueries:["GetDoc","GetSite"]}).then(()=>{r({render:function(){return(0,s.jsx)(d.a,{color:"white",p:3,bg:"green.500",shadow:"md",borderRadius:"md",children:(0,s.jsxs)(e8.z,{spacing:4,children:[(0,s.jsx)(d.a,{children:(0,s.jsx)(x.g,{icon:u.QRE})}),(0,s.jsx)(l.E,{fontWeight:"semibold",children:(0,s.jsx)(m.x6,{id:"V6Byuz"})}),y&&(0,s.jsx)(a.$,{variant:"plain",as:"a",target:"_blank",_hover:{textDecoration:"none",color:"trueblue.500"},href:y,rightIcon:(0,s.jsx)(x.g,{icon:u.Ju_}),children:(0,s.jsx)(m.x6,{id:"Zel0o2"})}),(0,s.jsx)(tS.J,{onClick:()=>r.closeAll()})]})})},status:"success",position:"top",duration:5e3,isClosable:!0})}).catch(e=>{r({title:(0,s.jsx)(m.x6,{id:"DD5mqk"}),status:"error",position:"top",isClosable:!0}),console.error("Error publishing site:",e.message)}).finally(()=>{(0,tr.wb)(o)(!1)})}},[o,b,h,g,r,y]);return{publishSite:(0,v.useCallback)(async()=>{if(w){if(h)return void r(iG);(0,tr.wb)(o)(!0),f&&await (0,ta.fb)(f),await p({variables:{id:w},update:(e,t)=>{let{data:i}=t,n=null==i?void 0:i.publishSite;n&&n.routes.forEach(t=>{e.updateQuery({query:iV.iVk,variables:{id:t.docId}},e=>{var i,n,s;return(e||console.log("%c Publish doc _data is undefined or null","color: red; font-size: 16px"),null==e?void 0:e.doc)?{doc:{...e.doc,publishedTime:null==(i=t.doc)?void 0:i.publishedTime,publishedSnapshotId:null==(n=t.doc)?void 0:n.publishedSnapshotId,currentSnapshotId:null==(s=t.doc)?void 0:s.currentSnapshotId}}:e})})}}).then(()=>{r({render:function(){return(0,s.jsx)(d.a,{color:"white",p:3,bg:"green.500",shadow:"md",borderRadius:"md",children:(0,s.jsxs)(e8.z,{spacing:4,children:[(0,s.jsx)(d.a,{children:(0,s.jsx)(x.g,{icon:u.QRE})}),(0,s.jsx)(l.E,{fontWeight:"semibold",children:(0,s.jsx)(m.x6,{id:"V6Byuz"})}),y&&(0,s.jsx)(a.$,{variant:"plain",as:"a",target:"_blank",_hover:{textDecoration:"none",color:"trueblue.500"},href:y,rightIcon:(0,s.jsx)(x.g,{icon:u.Ju_}),children:(0,s.jsx)(m.x6,{id:"Zel0o2"})}),(0,s.jsx)(tS.J,{onClick:()=>r.closeAll()})]})})},status:"success",position:"top",duration:5e3,isClosable:!0})}).catch(e=>{r({title:(0,s.jsx)(m.x6,{id:"DD5mqk"}),description:(0,s.jsx)(m.x6,{id:"R4PZ4k"}),status:"error",position:"top",isClosable:!0}),console.error("Error publishing site:",e.message)}).finally(()=>{(0,tr.wb)(o)(!1)})}},[w,h,o,f,p,r,y]),publishDoc:C,isPublishing:c}};var iU=i(88608);let iH=e=>{var t;let{site:i}=e,n=null==i||null==(t=i.currentDeployment)?void 0:t.deploymentTime,r=(0,v.useMemo)(()=>({fromNow:(0,iU.Gx)(n),calendar:(0,iU.Yq)(n,"PPpp")}),[n]);return(0,s.jsx)(m.x6,{id:"ay/UB+",values:{0:r.fromNow},components:{0:(0,s.jsx)(J.Tz,{label:r.calendar,placement:"top",shouldWrapChildren:!0}),1:(0,s.jsx)(l.E,{as:"span",cursor:"pointer",style:{textDecoration:"underline"}})}})},iK=e=>{let t=(0,eu.GV)(tr.Gd),i=(0,ta.m8)(t),n=!(0,ta.dv)(t),r=(0,eu.GV)(tr.Tx),o=(0,eu.GV)(tr.vP),{icon:l,text:a,color:d}=(0,v.useCallback)(()=>e?{icon:(0,s.jsx)(x.g,{icon:u.z1G,height:13,width:13}),text:(0,s.jsx)(m.x6,{id:"mkk40+"}),color:"gray.500"}:n?{icon:(0,s.jsx)(x.g,{icon:u.DW4,height:13,width:13}),text:(0,s.jsx)(m.x6,{id:"r5OY1d"}),color:"gray.500"}:i?r>0||o?{icon:(0,s.jsx)(x.g,{icon:u.ijf,height:13,width:13}),text:(0,s.jsx)(m.x6,{id:"eVV2pl"}),color:"orange.500"}:{icon:(0,s.jsx)(x.g,{icon:u.vBH,height:13,width:13}),text:(0,s.jsx)(m.x6,{id:"Rgbxkx"}),color:"green.500"}:{icon:(0,s.jsx)(x.g,{icon:u.Bwz,height:13,width:13}),text:(0,s.jsx)(m.x6,{id:"tpB6bH"}),color:"gray.600"},[e,n,i,r,o])(),c=e?null:n?(0,s.jsx)(m.x6,{id:"u8Rqhk"}):!1===i||r>0||o?(0,s.jsx)(m.x6,{id:"Ys0XoA"}):null,h=!1===n&&!e;return{statusText:a,statusIcon:l,statusColor:d,detailText:c,needsPublish:!i||o||r>0,lastPublishedTime:t?(0,s.jsx)(iH,{site:t}):null,publishEnabled:h}},iJ=e=>{let{context:t,openSiteSettings:i}=e,n=(0,eu.GV)(tr.Gd),r=(0,iW.Gx)(),{publishSite:d,isPublishing:c}=iB({site:n}),{statusText:h,detailText:p,needsPublish:g,publishEnabled:j}=iK(c),f=(0,V.dU)(!1,!0);return("pages"!==t||g||c)&&r&&n&&(0,ta.dv)(n)?(0,s.jsx)(iL.m,{px:0,children:(0,s.jsxs)(o.B,{w:"100%",bg:f?"gray.700":"gray.50",borderRadius:"md",p:4,align:"pages"===t?"stretch":"center",direction:"pages"===t?"column":"row",spacing:"pages"===t?3:1,children:[(0,s.jsxs)(tI.T,{spacing:0,color:f?"gray.200":void 0,textAlign:"pages"===t?"center":"left",align:"pages"===t?"center":"start",children:[(0,s.jsx)(l.E,{fontWeight:"500",fontSize:"sm",children:h}),p&&(0,s.jsx)(l.E,{fontSize:"xs",textColor:"gray.500",css:{textWrap:"balance"},children:p})]}),"pages"!==t&&(0,s.jsx)(tT.h,{}),(0,s.jsx)(a.$,{flexShrink:"0",size:"sm",variant:"solid",leftIcon:(0,s.jsx)(x.g,{icon:u.MNJ}),isDisabled:!j,onClick:d,isLoading:c,children:(0,s.jsx)(m.x6,{id:"1EeNDU"})}),"pages"===t&&(0,s.jsx)(a.$,{textAlign:"left",color:f?"trueblue.200":"trueblue.600",variant:"link",size:"sm",onClick:i,flex:1,children:(0,s.jsx)(m.x6,{id:"WtsmDd"})})]})}):null};var iq=i(81664),iY=i(96441),i$=i(38907),iX=i(38036),iQ=i(20845),iZ=i(89942),i0=i(67909),i1=i(36071),i6=i(54731),i2=i(16426);let i5=e=>{let{onClose:t,domainName:i,onDelete:n,isDeleting:r}=e;return(0,s.jsxs)(i0.aF,{isOpen:!0,onClose:t,trapFocus:!1,size:"xl",isCentered:!0,closeOnOverlayClick:!1,children:[(0,s.jsx)(i1.m,{}),(0,s.jsxs)(i6.$,{children:[(0,s.jsx)(iR.r,{children:(0,s.jsx)(o.B,{spacing:0,children:(0,s.jsx)(l.E,{children:(0,s.jsx)(m.x6,{id:"T3exbL",values:{domainName:i}})})})}),(0,s.jsx)(i_.c,{children:(0,s.jsx)(o.B,{spacing:4,children:(0,s.jsx)(l.E,{children:(0,s.jsx)(m.x6,{id:"DkFGZj"})})})}),(0,s.jsx)(i2.j,{children:(0,s.jsxs)(e7.e,{children:[(0,s.jsx)(a.$,{isDisabled:r,variant:"ghost",colorScheme:"gray",onClick:t,children:(0,s.jsx)(m.x6,{id:"dEgA5A"})}),(0,s.jsx)(a.$,{variant:"hazardous",isLoading:r,onClick:n,loadingText:p.Ru._({id:"EF2EU9"}),children:(0,s.jsx)(m.x6,{id:"cnGeoo"})})]})})]})]})};var i4=i(74676),i3=i(41974),i8=i(76461),i7=i(80314),i9=i(31090),ne=i(22832);let nt=e=>{let{code:t,data:i}=e;switch(t){case ik.sYx.AddARecord:return(0,s.jsx)(m.x6,{id:"ZIfa5n",values:{0:i.ip},components:{0:(0,s.jsx)("strong",{}),1:(0,s.jsx)(ne.C,{})}});case ik.sYx.AddCnameRecordSubdomain:return(0,s.jsx)(m.x6,{id:"edcjuc",values:{0:i.subdomain,1:i.cnameDomain},components:{0:(0,s.jsx)("strong",{}),1:(0,s.jsx)(ne.C,{}),2:(0,s.jsx)(ne.C,{})}});case ik.sYx.EditCnameRecordSubdomain:return(0,s.jsx)(m.x6,{id:"ngCUo8",values:{0:i.subdomain,1:i.cnameDomain},components:{0:(0,s.jsx)(ne.C,{}),1:(0,s.jsx)("strong",{}),2:(0,s.jsx)(ne.C,{})}});case ik.sYx.RemoveARecord:return(0,s.jsx)(m.x6,{id:"GLzRh5",values:{0:i.ip},components:{0:(0,s.jsx)("strong",{}),1:(0,s.jsx)(ne.C,{})}});case ik.sYx.RemoveAaaaRecord:return(0,s.jsx)(m.x6,{id:"g1KLfp",values:{0:i.ip},components:{0:(0,s.jsx)("strong",{}),1:(0,s.jsx)(ne.C,{})}});case ik.sYx.AddCnameRecordWww:return(0,s.jsx)(m.x6,{id:"Hb2/CF",values:{0:i.cnameDomain},components:{0:(0,s.jsx)("strong",{}),1:(0,s.jsx)(ne.C,{})}});case ik.sYx.EditCnameRecordWww:return(0,s.jsx)(m.x6,{id:"LmV2TD",values:{0:i.cnameDomain},components:{0:(0,s.jsx)(ne.C,{}),1:(0,s.jsx)("strong",{}),2:(0,s.jsx)(ne.C,{})}});case ik.sYx.ContactGammaSupport:return(0,s.jsx)(m.x6,{id:"Wr1wrv",values:{GAMMA_PROPER_NOUN:ej.On}});case ik.sYx.SslModeFullCloudflare:return(0,s.jsx)(m.x6,{id:"D61i6v"});case ik.sYx.CheckDnsCloudflare:return(0,s.jsx)(m.x6,{id:"gYfbYc"})}return(0,s.jsx)(s.Fragment,{})};var ni=i(67604),nn=i(63111);let ns=e=>{let t=(0,ni.A)(e),i=new Date;return 30>=Math.abs((0,nn.A)(i,t))},nr=e=>{var t,i,n;let{domain:s}=e,[r,o]=(0,v.useState)(!1),l=(0,v.useRef)(null),{data:a}=(0,iV.SmF)({variables:{name:s.name},skip:s.builtin||"failed"===s.status}),d=!!((null==a?void 0:a.checkDomain)&&(null==(t=a.checkDomain.actions)?void 0:t.length)&&(null==(n=a.checkDomain)||null==(i=n.dns)?void 0:i.status)!==ik.mXm.Ok);return(0,v.useEffect)(()=>{let{createdTime:e,setupMethod:t}=s;if(!("string"==typeof e&&d&&(t===ik.hbC.Automatic||t===ik.hbC.Purchase)))return void o(!1);let i=ns(e);if(o(i),i)return l.current=setInterval(()=>{let t=ns(e);if(o(t),!t){o(!1),l.current&&(clearInterval(l.current),l.current=null);return}},3e5),()=>{l.current&&clearInterval(l.current)}},[s,d]),(0,v.useMemo)(()=>{var e;return{showDNSIssues:d&&!r,checkDomainActions:(null==a||null==(e=a.checkDomain)?void 0:e.actions)||[]}},[d,r,a])};var no=i(83638),nl=i(25223),na=i(35605);let nd=e=>{let{isOpen:t,onClose:i,domain:n,siteId:r}=e,o=(0,iI.d)(),d=null==n?void 0:n.name,c=null==d?void 0:d.split(".")[0].split("-").slice(-1)[0],[u,x]=(0,v.useState)(null==d?void 0:d.split(".")[0].split("-").slice(0,-1).join("-")),h=null==d?void 0:d.split(".").slice(1).join("."),[g,{loading:j}]=(0,ik.g1r)(),f=(0,v.useCallback)(()=>{g({variables:{input:{siteId:r,name:u}}}).then(()=>{o({title:(0,s.jsx)(m.x6,{id:"oMgC5V"}),description:(0,s.jsx)(m.x6,{id:"tIBLtD"}),duration:3e3,position:"top",isClosable:!1,status:"success"}),i()}).catch(e=>{o({title:(0,s.jsx)(m.x6,{id:"YoFYYT"}),description:(0,s.jsx)(m.x6,{id:"Wd0ucu"}),duration:3e3,position:"top",isClosable:!1,status:"error"}),console.error("[BuiltInDomainEditModal] Failed to change domain name:",e)})},[g,r,u,o,i]);return(0,s.jsxs)(i0.aF,{isOpen:t,onClose:i,size:"md",closeOnOverlayClick:!1,children:[(0,s.jsx)(i1.m,{}),(0,s.jsxs)(i6.$,{children:[(0,s.jsx)(iR.r,{children:(0,s.jsx)(m.x6,{id:"VMKg48"})}),(0,s.jsx)(iO.s,{}),(0,s.jsx)(i_.c,{children:(0,s.jsxs)(no.MJ,{children:[(0,s.jsxs)(e8.z,{children:[(0,s.jsx)(iX.p,{value:u,onKeyDown:e=>{"Enter"===e.key&&f()},onChange:e=>{x((0,na.Fw)(e.target.value))},placeholder:p.Ru._({id:"dcSbw0"})}),(0,s.jsxs)(nl.l,{whiteSpace:"nowrap",children:["-",c,".",h]})]}),(0,s.jsx)(no.eK,{lineHeight:"normal",children:(0,s.jsx)(l.E,{children:(0,s.jsx)(m.x6,{id:"bvN4Vx"})})})]})}),(0,s.jsxs)(i2.j,{children:[(0,s.jsx)(a.$,{onClick:i,mr:3,variant:"ghost",children:(0,s.jsx)(m.x6,{id:"dEgA5A"})}),(0,s.jsx)(a.$,{variant:"solid",onClick:f,isLoading:j,isDisabled:u.length<3,children:(0,s.jsx)(m.x6,{id:"tfDRzk"})})]})]})]})},nc={pending:{tooltip:(0,s.jsx)(m.x6,{id:"/BjVEU"}),badgeText:(0,s.jsx)(m.x6,{id:"bl9677"}),badgeColorScheme:"yellow"},failed:{tooltip:(0,s.jsx)(m.x6,{id:"7Bj3x9"}),badgeText:(0,s.jsx)(m.x6,{id:"7Bj3x9"}),badgeColorScheme:"red"}},nu=e=>{let{status:t,onClick:i}=e;if("verified"===t)return null;let{tooltip:n,badgeText:r,badgeColorScheme:o}=nc[t];return(0,s.jsx)(J.Tz,{label:n,placement:"top",children:(0,s.jsx)(i4.E,{display:"flex",justifyContent:"center",colorScheme:o,cursor:i?"pointer":"default",onClick:i||void 0,children:r})})},nx=e=>{let{domain:t,onDomainSetupClick:i,path:n,onDeleteClick:r,numDomains:c,siteId:h}=e,g=(0,ta.bO)({domain:t,path:n}),j=(0,iI.d)(),f=!t.builtin,b=t.builtin,y=f&&("verified"!==t.status||"verified"===t.status&&c>1),[w]=(0,ik.MyE)(),{checkDomainActions:C,showDNSIssues:k}=nr({domain:t}),E=(0,v.useCallback)(async()=>{await w({variables:{id:t.id}}),j({title:(0,s.jsx)(m.x6,{id:"LIAJwx"}),status:"success",duration:3e3,position:"top",isClosable:!0})},[w,t.id,j]),{isOpen:S,onOpen:I,onClose:T}=(0,ez.j)({id:"edit-domain-modal"});return(0,s.jsxs)(i3.Z,{variant:"outline",children:[(0,s.jsx)(i8.b,{children:(0,s.jsxs)(o.B,{spacing:1,children:[(0,s.jsxs)(e8.z,{children:[(0,s.jsx)(o.B,{children:"verified"===t.status?(0,s.jsx)(J.Tz,{label:g,placement:"top",children:(0,s.jsx)(a.$,{as:i7.N,variant:"link",href:g,wordBreak:"break-all",target:"_blank",rightIcon:(0,s.jsx)(d.a,{ms:2,children:(0,s.jsx)(x.g,{icon:tA.Ju_,size:"xs"})}),whiteSpace:"normal",children:t.name})}):(0,s.jsx)(l.E,{children:t.name})}),(0,s.jsx)(tT.h,{}),(0,s.jsx)(e8.z,{children:(0,s.jsx)(nu,{status:t.status,onClick:"failed"===t.status?E:null})}),(0,s.jsxs)(e7.e,{children:[b&&(0,s.jsx)(J.Tz,{label:(0,s.jsx)(m.x6,{id:"VMKg48"}),placement:"top",children:(0,s.jsx)(H.K,{onClick:I,"aria-label":p.Ru._({id:"VMKg48"}),size:"sm",variant:"ghost",icon:(0,s.jsx)(x.g,{icon:u.MT7})})}),f&&(0,s.jsx)(J.Tz,{label:(0,s.jsx)(m.x6,{id:"UqSZMD"}),placement:"top",children:(0,s.jsx)(H.K,{onClick:()=>{i(t.name)},"aria-label":p.Ru._({id:"UqSZMD"}),size:"sm",variant:"ghost",colorScheme:"blackAlpha",icon:(0,s.jsx)(x.g,{icon:u.mEO})})}),y&&(0,s.jsx)(J.Tz,{label:(0,s.jsx)(m.x6,{id:"C2YqXi"}),placement:"top",children:(0,s.jsx)(H.K,{onClick:()=>{r(null==t?void 0:t.id)},"aria-label":p.Ru._({id:"C2YqXi"}),size:"sm",variant:"hazardous",icon:(0,s.jsx)(x.g,{icon:u.sjs})})})]})]}),b&&(0,s.jsx)(d.a,{children:(0,s.jsxs)(l.E,{fontSize:"xs",color:"gray.500",as:"span",children:[(0,s.jsx)(m.x6,{id:"gDP3Mn",values:{GAMMA_PROPER_NOUN:ej.On}})," ",(0,s.jsx)(J.qT,{label:(0,s.jsx)(m.x6,{id:"ABSkTP",values:{GAMMA_PROPER_NOUN:ej.On}})})]})}),k&&(0,s.jsxs)(o.B,{spacing:2,fontSize:"xs",color:"gray.500",children:[(0,s.jsxs)(l.E,{children:[(0,s.jsx)(m.x6,{id:"ezr3/E"})," "]}),(0,s.jsx)(i9.Xy,{ps:"0",spacing:"2",children:C.map((e,t)=>(0,s.jsx)(i9.ck,{sx:{code:{fontSize:"xxs",bg:"gray.50",color:"gray.700"}},children:nt(e)},e.code+t))})]})]})}),(0,s.jsx)(nd,{isOpen:S,onClose:T,domain:t,siteId:h})]})};var nh=i(73110),nm=i(42721);let np=()=>{let e=(0,v.useRef)(!1),[t,i]=(0,v.useState)(()=>void 0!==window.entri);return(0,tX.nW)("https://cdn.goentri.com/entri.js",{predicate:()=>void 0===window.entri,onload:()=>{i(!0),e.current=!0}}),{entriReady:t}};var ng=i(37219);let nj=async()=>{if(!window.entri)throw Error("Entri not found");return fetch("/api/domains/connectToken").then(e=>e.json()).then(e=>{if(!e.auth_token)throw Error("No auth token returned");return e.auth_token})},nf=async e=>{let{firstName:t,lastName:i,email:n,locale:s}=e,r=await nj();if(!window.entri)throw Error("Entri not found");let{dnsRecords:o}=(0,ta.oX)(""),l={applicationId:"gamma",applicationName:"Gamma",token:r,dnsRecords:o,sellVersion:"v3",locale:s,whiteLabel:{theme:{primary:"#dcebfd",onPrimary:"#262527",secondary:"#0540ad",onSecondary:"#ffffff",headerBackground:"#dcebfd",interactive:"#0540ad",premiumBadge:"#fee9fb",onPremiumBadge:"#b71f97",priceBadge:"#e2f7e1",onPriceBadge:"#1a561c",activating:"#0540ad",onActivating:"#ffffff"},sell:{flowTarget:"_blank",overlayScreenHeight:"60%",partnerName:"Gamma",partnerLogo:ng.Yd,partnerIcon:ng.Uf,contact:{firstName:t,lastName:i,email:n}}}};return console.log("[launchEntri] Purchasing Entri with config",l),window.entri.purchaseDomain(l),nv()},nb=async(e,t)=>{let i=await nj(),{domain:n,dnsRecords:s,isRootDomain:r,subdomain:o}=(0,ta.oX)(e),l={applicationId:"gamma",token:i,prefilledDomain:n,dnsRecords:s,locale:t,...!r&&{defaultSubdomain:o,forceSubdomain:!0}};return console.log("[launchEntri] Launching Entri with config",l),window.entri.showEntri(l),nv()},nv=()=>new Promise((e,t)=>{let i=n=>{if(window.removeEventListener("onEntriClose",i),n.detail.success)e(n.detail);else{var s,r;let e=null==n||null==(s=n.detail)?void 0:s.error;if(!e||(null==(r=e.details)?void 0:r.includes("Please refresh")))return t();let i=e.title||"",o=e.details||"",l=i&&o?": ":"";t("".concat(i).concat(l).concat(o).trim()||void 0)}};window.addEventListener("onEntriClose",i,!1)}),ny=e=>{let{siteId:t}=e,i=(0,Z.st)(),{user:n}=(0,nm.ur)(),r=(0,nh.O)(),{entriReady:o}=np(),l=(0,iI.d)(),[d,c]=(0,v.useState)(!1),[u,{loading:x}]=(0,ik.yuV)(),h=(0,v.useCallback)(async()=>{t&&(c(!0),nf({firstName:(null==n?void 0:n.firstName)||"",lastName:(null==n?void 0:n.lastName)||"",email:(null==n?void 0:n.email)||"",locale:r}).then(e=>{if(e&&"purchase"===e.setupType&&e.domain){let n=e.domain;null==i||i.track(Z.VV.SITE_DOMAIN_PURCHASED,{domain:n,siteId:t}),u({variables:{input:{name:n,siteId:t,method:ik.hbC.Purchase}}}).then(()=>{null==i||i.track(Z.VV.SITE_DOMAIN_ADDED,{domain:n,siteId:t,source:"entriSell"}),l({title:(0,s.jsx)(m.x6,{id:"5Ae0kE"}),description:(0,s.jsx)(m.x6,{id:"HqV46b"}),status:"success",duration:3e3,isClosable:!0,position:"top"})}).catch(e=>{console.error("[DomainListWrapper] error adding domain error",e),l({title:(0,s.jsx)(m.x6,{id:"JXFM3z"}),description:(null==e?void 0:e.message)&&e.message,status:"error",duration:null,position:"top",isClosable:!0})})}}).catch(e=>{console.error("[DomainListWrapper] entriPurchaseDomain error",e),l({title:e?(0,s.jsx)(m.x6,{id:"JXFM3z"}):(0,s.jsx)(m.x6,{id:"vr6nIz"}),description:e||void 0,status:"error",duration:e?null:3e3,position:"top",isClosable:!0})}).finally(()=>{c(!1)}))},[u,i,t,l,n,r]);return t?(0,s.jsx)(a.$,{variant:"outline",size:"md",onClick:h,isLoading:d,isDisabled:!o,children:(0,s.jsx)(m.x6,{id:"+VODT0"})}):null},nw=e=>{let{isOpen:t,onClose:i,domainName:n,onTransferConfirm:r,onTransferCancel:d,domainToTransfer:c,isTransferring:u}=e,x=(0,v.useCallback)(()=>{d(),i()},[i,d]),h=(0,v.useCallback)(async()=>{r(),i()},[i,r]);return c?(0,s.jsx)(J.L8,{isDark:!1,children:(0,s.jsxs)(i0.aF,{isOpen:t,onClose:x,size:"lg",children:[(0,s.jsx)(i1.m,{}),(0,s.jsxs)(i6.$,{children:[(0,s.jsx)(iR.r,{children:(0,s.jsx)(m.x6,{id:"hqplvI"})}),(0,s.jsx)(iO.s,{}),(0,s.jsx)(i_.c,{children:(0,s.jsxs)(o.B,{spacing:2,children:[(0,s.jsx)(l.E,{children:c.siteArchived?(0,s.jsx)(m.x6,{id:"SeHn75",values:{domainName:n,0:c.siteName}}):(0,s.jsx)(m.x6,{id:"tX38ij",values:{domainName:n,0:c.siteName}})}),(0,s.jsx)(l.E,{children:(0,s.jsx)(m.x6,{id:"rKH6wM"})})]})}),(0,s.jsxs)(i2.j,{children:[(0,s.jsx)(a.$,{variant:"ghost",mr:3,onClick:x,children:(0,s.jsx)(m.x6,{id:"yz7wBu"})}),(0,s.jsx)(a.$,{isLoading:u,variant:"hazardous",onClick:h,children:(0,s.jsx)(m.x6,{id:"vTZxnA"})})]})]})]})}):(0,s.jsx)(s.Fragment,{})},nC=e=>{var t;let{site:i,path:n,onDomainSetupClick:r,onAddDomain:d,isAddingDomain:c,refetchSites:u}=e,x=(0,R.u)("purchaseDomain"),h=(0,iI.d)(),{currentWorkspace:g}=(0,et.ur)(),[j,f]=(0,v.useState)(),[b,y]=(0,v.useState)(),[w,C]=(0,v.useState)(""),{isOpen:k,onOpen:E,onClose:S}=(0,ez.j)({id:"delete-domain-modal"}),{isOpen:I,onOpen:T,onClose:A}=(0,iF.E)({id:"transferDomainModal"}),[O,{loading:_}]=(0,ik.D3l)({fetchPolicy:"network-only",nextFetchPolicy:"network-only"}),D=i.domains.find(e=>e.id===j),P=(0,ta.zC)(w)&&void 0===i.domains.find(e=>e.name===w),[z,{loading:M}]=(0,ik.InM)(),[N,{loading:F}]=(0,ik.OyM)(),[L,V]=(0,v.useState)(void 0),W=(0,v.useCallback)(async e=>{var t;let n=await O({variables:{name:e,workspaceId:null==g?void 0:g.id}}),s=null==n||null==(t=n.data)?void 0:t.domains,r=null==s?void 0:s[0];if(i&&r){y(r),T();return}d(e),y(void 0),C("")},[null==g?void 0:g.id,O,d,T,i]);(0,tX.Vg)(()=>{j?V(null==D?void 0:D.name):V(void 0)},[j,null==D?void 0:D.name],[j]);let G=(0,v.useCallback)(()=>{S(),f(()=>void 0)},[S]),B=(0,v.useCallback)(async()=>{D&&(await z({variables:{id:j}}),await u(),h({title:(0,s.jsx)(m.x6,{id:"V4fbcv",values:{0:D.name}}),status:"success",duration:3e3,position:"top",isClosable:!0}),G())},[u,z,j,D,G,h]),U=(0,iZ.ez)("custom_domains"),H=U&&x,K=(0,ta.H3)(i.domains),q=(0,v.useCallback)(()=>{y(void 0)},[]),Y=(0,v.useCallback)(async()=>{b&&(await N({variables:{id:null==b?void 0:b.id,siteId:i.id},refetchQueries:["GetSite"]}),h({title:(0,s.jsx)(m.x6,{id:"dHhDGG",values:{0:b.name}}),position:"top",status:"success",duration:5e3}),C(""),y(void 0))},[b,i.id,h,N]);return(0,s.jsxs)(o.B,{spacing:8,p:2,children:[U&&(0,s.jsxs)(o.B,{spacing:4,mb:2,children:[H&&(0,s.jsxs)(o.B,{children:[(0,s.jsx)(l.E,{fontSize:"md",children:(0,s.jsx)(m.x6,{id:"gBiND0"})}),(0,s.jsx)(ny,{siteId:null==i?void 0:i.id})]}),(0,s.jsxs)(o.B,{children:[(0,s.jsx)(l.E,{children:H?(0,s.jsx)(m.x6,{id:"9UtMWk"}):(0,s.jsx)(m.x6,{id:"ssWCSl"})}),(0,s.jsxs)(e8.z,{children:[(0,s.jsx)(iX.p,{bg:"white",placeholder:(null==i||null==(t=i.domains)?void 0:t.length)?p.Ru._({id:"jt/2Ky"}):p.Ru._({id:"1y9z1r"}),value:w,onChange:e=>C(e.target.value),onKeyDown:e=>{"Enter"===e.key&&P&&(e.preventDefault(),W(w))}}),(0,s.jsx)(o.B,{children:(0,s.jsx)(J.Tz,{label:(0,s.jsx)(m.x6,{id:"aUB5ST"}),placement:"top",shouldWrapChildren:!0,isDisabled:P,children:(0,s.jsx)(a.$,{isDisabled:!P,variant:"plain",onClick:()=>{W(w)},isLoading:c||_,children:(0,s.jsx)(m.x6,{id:"EdEpYN"})})})})]})]})]}),(0,s.jsxs)(o.B,{spacing:2,children:[(0,s.jsx)(m.x6,{id:"bwl+tv"}),K.map(e=>(0,s.jsx)(nx,{domain:e,onDomainSetupClick:r,path:n,onDeleteClick:e=>{f(e),E()},numDomains:i.domains.length||0,siteId:i.id},e.id))]}),!U&&(0,s.jsx)(iQ.c,{segmentEvent:Z.VV.GAMMA_PRO_UPSELL_DOMAINS,title:(0,s.jsx)(m.x6,{id:"m6aLo0"}),description:(0,s.jsx)(m.x6,{id:"xFELnF",values:{GAMMA_PRO_PROPER_NOUN:ej.Ol,GAMMA_PROPER_NOUN:ej.On}}),targetFeature:"custom_domains"}),k&&(0,s.jsx)(i5,{onClose:G,onDelete:B,domainName:L,isDeleting:M}),(0,s.jsx)(nw,{isOpen:I,onClose:A,onTransferCancel:q,domainName:w,domainToTransfer:b,onTransferConfirm:Y,isTransferring:F})]})};var nk=i(41960),nE=i(42706),nS=i(29768),nI=i(59142),nT=i(54920),nA=i(92130),nR=i(55452),nO=i(3509);let n_=e=>{let{isOpen:t,onClose:i,domainName:n,onDomainConfirmed:d}=e,[c,h]=(0,v.useState)("initial"),p=(0,nh.O)(),{entriReady:g}=np(),[j,f]=(0,v.useState)(!1),b=(0,iI.d)(),{dnsRecords:y,isRootDomain:w,subdomain:C}=(0,v.useMemo)(()=>(0,ta.oX)(n||""),[n]);return(0,s.jsx)(J.L8,{isDark:!1,children:(0,s.jsxs)(i0.aF,{isOpen:t,onClose:i,size:"3xl",trapFocus:!1,children:[(0,s.jsx)(i1.m,{}),(0,s.jsxs)(i6.$,{children:[(0,s.jsx)(iR.r,{children:(0,s.jsx)(m.x6,{id:"YSyDVG",values:{domainName:n,GAMMA_PROPER_NOUN:ej.On}})}),(0,s.jsx)(iO.s,{}),(0,s.jsxs)(i_.c,{children:["initial"===c&&(0,s.jsx)(i3.Z,{variant:"filled",children:(0,s.jsx)(i8.b,{children:(0,s.jsxs)(o.B,{spacing:4,py:4,mx:"auto",children:[(0,s.jsxs)(o.B,{spacing:2,children:[(0,s.jsxs)(o.B,{spacing:1,children:[(0,s.jsx)(l.E,{textAlign:"center",fontSize:"2xl",children:(0,s.jsx)(x.g,{icon:u.Bwz,size:"lg"})}),(0,s.jsx)(l.E,{fontWeight:"semibold",fontSize:"lg",textAlign:"center",children:(0,s.jsx)(m.x6,{id:"w5l5pM"})})]}),(0,s.jsx)(l.E,{textAlign:"center",maxW:"unset",children:(0,s.jsx)(m.x6,{id:"aV1OpM",values:{GAMMA_PROPER_NOUN:ej.On}})})]}),(0,s.jsx)(r.s,{align:"center",justify:"center",w:"100%",children:(0,s.jsxs)(o.B,{w:64,maxW:"100%",children:[(0,s.jsx)(a.$,{size:"md",variant:"solid",isDisabled:!g,isLoading:j,onClick:()=>{n&&(f(!0),nb(n,p).then(e=>{console.log("[ENTRI] Successfully setup domain",e),null==d||d({domainName:n,source:"automatic"})}).catch(e=>{e&&nR.Cp("[entri.showEntri] Error setting up domain: ".concat(e)),b({title:e?(0,s.jsx)(m.x6,{id:"l/2jzv"}):(0,s.jsx)(m.x6,{id:"FZ1Qqq"}),description:e,status:"error",duration:3e3,isClosable:!0,position:"top"})}).finally(()=>{f(!1)}))},children:(0,s.jsx)(m.x6,{id:"qu+sXe"})}),(0,s.jsxs)(e8.z,{children:[(0,s.jsx)(iD.c,{}),(0,s.jsx)(l.E,{color:"gray.600",children:(0,s.jsx)(m.x6,{id:"BzEFor"})}),(0,s.jsx)(iD.c,{})]}),(0,s.jsx)(a.$,{size:"md",variant:"plain",onClick:()=>{h("manualSetup")},children:(0,s.jsx)(m.x6,{id:"ANIrop"})})]})})]})})}),"manualSetup"===c&&(0,s.jsx)(i3.Z,{variant:"filled",children:(0,s.jsx)(i8.b,{children:(0,s.jsxs)(o.B,{spacing:6,children:[(0,s.jsx)(l.E,{fontWeight:"semibold",fontSize:"lg",children:(0,s.jsx)(m.x6,{id:"L5N7HX"})}),(0,s.jsxs)(nk.X,{variant:"simple",children:[(0,s.jsx)(nE.d,{children:(0,s.jsxs)(nS.Tr,{children:[(0,s.jsx)(nI.Th,{children:(0,s.jsx)(m.x6,{id:"6YtxFj"})}),(0,s.jsx)(nI.Th,{children:(0,s.jsx)(m.x6,{id:"+zy2Nq"})}),(0,s.jsx)(nI.Th,{isNumeric:!0,children:(0,s.jsx)(m.x6,{id:"HKH+W+"})})]})}),(0,s.jsx)(nT.N,{children:(y||[]).map(e=>(0,s.jsxs)(nS.Tr,{children:[(0,s.jsx)(nA.Td,{fontFamily:"mono",children:e.host}),(0,s.jsx)(nA.Td,{fontFamily:"mono",children:e.type}),(0,s.jsx)(nA.Td,{isNumeric:!0,fontFamily:"mono",children:e.value})]},e.value))})]}),(0,s.jsxs)(iP.F,{status:"info",colorScheme:"orange",children:[(0,s.jsx)(iz._,{}),(0,s.jsxs)(o.B,{children:[(0,s.jsx)(l.E,{fontWeight:"bold",fontSize:"md",children:(0,s.jsx)(m.x6,{id:"NxHkkp"})}),(0,s.jsxs)(i9._J,{ps:"4",spacing:"2",children:[w?1===nO.Wc.length?(0,s.jsx)(i9.ck,{children:(0,s.jsx)(m.x6,{id:"wz2Cgq",values:{0:nO.Wc[0]},components:{0:(0,s.jsx)(ne.C,{colorScheme:"gray"}),1:(0,s.jsx)(ne.C,{colorScheme:"gray"})}})}):(0,s.jsx)(i9.ck,{children:(0,s.jsx)(m.x6,{id:"+kOqFW",values:{0:nO.Wc.slice(0,-1).map(e=>(0,s.jsx)(ne.C,{colorScheme:"gray",children:e},e)),1:nO.Wc.slice(-1)[0]},components:{0:(0,s.jsx)(ne.C,{colorScheme:"gray"}),1:(0,s.jsx)(e8.z,{display:"inline",divider:(0,s.jsx)("span",{children:", "})}),2:(0,s.jsx)(ne.C,{colorScheme:"gray"})}})}):null,w&&(0,s.jsx)(i9.ck,{children:(0,s.jsx)(m.x6,{id:"vLov0O",components:{0:(0,s.jsx)(ne.C,{colorScheme:"gray"}),1:(0,s.jsx)(ne.C,{colorScheme:"gray"})}})}),(0,s.jsx)(i9.ck,{children:(0,s.jsx)(m.x6,{id:"Jmb6Yp",values:{subdomain:C,GAMMA_SITES_HOST:nO._o},components:{0:(0,s.jsx)(ne.C,{colorScheme:"gray"}),1:(0,s.jsx)(ne.C,{colorScheme:"gray"}),2:(0,s.jsx)(ne.C,{colorScheme:"gray"})}})})]})]})]}),d&&(0,s.jsxs)(e8.z,{justifyContent:"space-between",children:[(0,s.jsx)(a.$,{variant:"plain",onClick:()=>h("initial"),children:(0,s.jsx)(m.x6,{id:"iH8pgl"})}),(0,s.jsx)(a.$,{variant:"solid",onClick:()=>{i(),null==d||d({domainName:n,source:"manual"})},size:"md",mx:"auto",children:(0,s.jsx)(m.x6,{id:"RyhVuk"})})]})]})})})]}),(0,s.jsx)(i2.j,{})]})]})})},nD=e=>{let{children:t,shouldWrap:i=!1}=e;return i?(0,s.jsx)(iL.m,{py:16,maxW:"container.md",children:t}):(0,s.jsx)(s.Fragment,{children:t})},nP=e=>{let{showHeadings:t=!0}=e,i=(0,Z.st)(),n=(0,eu.GV)(tr.Gd),a=(0,iI.d)(),{refetch:d}=(0,iV.DL0)({variables:{id:null==n?void 0:n.id},fetchPolicy:"cache-first",skip:!(null==n?void 0:n.id)}),{isOpen:c,onOpen:u,onClose:x}=(0,iF.E)({id:"domainSetupModal"}),h=null==n?void 0:n.domains.find(e=>"pending"===e.status),[p,g]=(0,v.useState)(null),[j,{loading:f}]=(0,iV.yuV)(),[b,y]=(0,v.useState)();(0,v.useEffect)(()=>{if(!h)return;let e=setInterval(()=>{d()},1e4);return()=>{clearInterval(e)}},[h,d,n]);let w=(0,v.useCallback)(e=>{y(e),u()},[u]),C=(0,v.useCallback)(e=>{let{domainName:t,source:r}=e;"addDomain"===p&&j({variables:{input:{siteId:null==n?void 0:n.id,name:t,method:"automatic"===r?iV.hbC.Automatic:iV.hbC.Manual}}}).then(()=>{null==i||i.track(Z.VV.SITE_DOMAIN_ADDED,{domain:t,siteId:null==n?void 0:n.id,source:r}),a({title:(0,s.jsx)(m.x6,{id:"p8Oc6N"}),description:(0,s.jsx)(m.x6,{id:"HqV46b"}),status:"success",duration:3e3,isClosable:!0,position:"top"}),x()}).catch(e=>{let t=(0,i$.vI)(e).some(e=>"max_domains_reached"===e);a({title:t?(0,s.jsx)(m.x6,{id:"634yzf"}):(0,s.jsx)(m.x6,{id:"HugOMA"}),description:t?(0,s.jsx)(m.x6,{id:"aMKkZK"}):(0,s.jsx)(m.x6,{id:"PZCqeW"}),status:"error",isClosable:!0,position:"top"})})},[j,i,p,x,null==n?void 0:n.id,a]);return console.debug("%cDomainsPanel debug","background-color: #cc00ff",{site:n}),(0,s.jsx)(r.s,{w:"100%",flex:1,direction:"column",mt:4,children:(0,s.jsxs)(nD,{shouldWrap:t,children:[t&&(0,s.jsxs)(o.B,{spacing:1,mb:4,children:[(0,s.jsx)(B.D,{children:(0,s.jsx)(m.x6,{id:"AZ4xlc"})}),(0,s.jsx)(l.E,{children:(0,s.jsx)(m.x6,{id:"tNT34Z",values:{GAMMA_PROPER_NOUN:ej.On}})})]}),n?(0,s.jsx)(nC,{site:n,onDomainSetupClick:w,onAddDomain:e=>{u(),y(e),g("addDomain")},isAddingDomain:f,refetchSites:d}):(0,s.jsx)(iY.Y,{}),c&&b&&(0,s.jsx)(n_,{domainName:b,isOpen:c,onClose:()=>{x(),g(null)},onDomainConfirmed:p?C:null})]})})};var nz=i(33787),nM=i(83743),nN=i(87996),nF=i(59230),nL=i(43183);let nV={src:"/_next/static/media/no-navbar.e9d28333.png"},nW={src:"/_next/static/media/top-navbar.97a69a83.png"};var nG=i(74771),nB=i(72470),nU=i(77979),nH=i(83106);let nK=e=>{let{gtmContainerId:t,setGtmContainerId:i}=e;return(0,s.jsxs)(no.MJ,{children:[(0,s.jsx)(e8.z,{justifyContent:"center",children:(0,s.jsxs)(nl.l,{display:"flex",flex:"1",my:.5,mx:0,children:[(0,s.jsx)(m.x6,{id:"d4WWfP"}),(0,s.jsx)(J.qT,{ms:2,label:(0,s.jsx)(m.x6,{id:"gmEwbH"})}),(0,s.jsx)(tT.h,{}),(0,s.jsx)(a.$,{"aria-label":"Learn more about Google Tag Manager",as:"a",variant:"link",href:"https://support.google.com/tagmanager/answer/6103696?hl=en",target:"_blank",size:"sm",rightIcon:(0,s.jsx)(nG.p,{ms:-1}),children:(0,s.jsx)(m.x6,{id:"zwWKhA"})})]})}),(0,s.jsxs)(nB.M,{children:[(0,s.jsx)(nU.W,{pointerEvents:"none",color:"gray.500",w:"fit-content",px:3,children:"GTM -"}),(0,s.jsx)(iX.p,{placeholder:"XXXXXX",paddingStart:16,value:t||"",onChange:e=>{i(nH.W.sanitize(e.currentTarget.value).replace(/[\W_]+/g,"").toUpperCase().slice(0,10))}})]})]})},nJ=e=>{let{pixelId:t,setPixelId:i}=e;return(0,s.jsxs)(no.MJ,{children:[(0,s.jsx)(e8.z,{justifyContent:"center",children:(0,s.jsxs)(nl.l,{display:"flex",flex:"1",m:0,children:[(0,s.jsx)(m.x6,{id:"163jQp"}),(0,s.jsx)(J.qT,{ms:2,label:(0,s.jsx)(m.x6,{id:"mynmm2",components:{0:(0,s.jsx)("span",{"aria-label":"arrow-right",role:"img"})}})}),(0,s.jsx)(r.s,{mx:2,mb:1.5,alignItems:"center",children:(0,s.jsx)(i4.E,{colorScheme:"green",children:(0,s.jsx)(m.x6,{id:"isRobC"})})}),(0,s.jsx)(tT.h,{}),(0,s.jsx)(a.$,{"aria-label":"Learn more about the Meta Pixel",as:"a",variant:"link",href:"https://developers.facebook.com/docs/meta-pixel/get-started",target:"_blank",size:"sm",rightIcon:(0,s.jsx)(nG.p,{ms:-1}),children:(0,s.jsx)(m.x6,{id:"zwWKhA"})})]})}),(0,s.jsx)(r.s,{children:(0,s.jsx)(iX.p,{ps:4,placeholder:"12345*****67890",value:t||"",onChange:e=>{i(nH.W.sanitize(e.currentTarget.value).replace(/[\W_]+/g,"").toUpperCase().slice(0,20))}})})]})},nq=e=>{let t=(0,eu.GV)(tr.Gd);return t?(0,s.jsx)(nY,{site:t,...e}):null},nY=e=>{let{site:t,showHeadings:i=!0,doc:n}=e,d=(0,iI.d)(),c=(0,R.u)("sitesNav"),[h,g]=(0,v.useState)(t.name),[j,f]=(0,v.useState)(t.gtmContainerId),[b,y]=(0,v.useState)(t.metaPixelId),[w,C]=(0,v.useState)(t.navEnabled),[k,E]=(0,v.useState)(!1),[S,I]=(0,v.useState)(!1),[T,A]=(0,v.useState)(null),{currentWorkspace:O}=(0,et.ur)(),[_]=(0,ik.vlJ)(),D=(0,v.useCallback)(async()=>{if(!(null==t?void 0:t.id))return;E(!0);let e={siteId:t.id,name:h,navEnabled:w,gtmContainerId:j||null,metaPixelId:b||null};!w||(null==t?void 0:t.navContent)||(e.navContent=(0,tx.aG)()),await _({variables:{input:e}}),d({title:(0,s.jsx)(m.x6,{id:"bZn5Ok"}),status:"success",isClosable:!0,position:"top"}),E(!1)},[j,b,h,w,t,d,_]),P=(0,v.useCallback)(async e=>{(null==t?void 0:t.id)&&(I(!0),await _({variables:{input:{siteId:t.id,faviconUrl:e}}}),d({title:e?(0,s.jsx)(m.x6,{id:"64GEyu"}):(0,s.jsx)(m.x6,{id:"/K2cLG"}),status:"success",isClosable:!0,position:"top"}),I(!1))},[null==t?void 0:t.id,d,_]),z=(0,v.useMemo)(()=>{let e=j||void 0,i=(null==t?void 0:t.gtmContainerId)||void 0,n=b||void 0,s=(null==t?void 0:t.metaPixelId)||void 0;return h!==(null==t?void 0:t.name)||w!==(null==t?void 0:t.navEnabled)||e!==i||n!==s},[t,h,w,j,b]);return(0,s.jsxs)(r.s,{w:"100%",flex:1,direction:"column",px:2,children:[(0,s.jsxs)(nD,{shouldWrap:i,children:[i&&(0,s.jsx)(B.D,{size:"md",letterSpacing:"tight",fontWeight:"800",mb:12,children:(0,s.jsx)(m.x6,{id:"Tz0i8g"})}),(0,s.jsxs)(o.B,{spacing:4,mt:6,children:[(0,s.jsxs)(no.MJ,{children:[(0,s.jsx)(e8.z,{justifyContent:"center",children:(0,s.jsx)(nl.l,{flex:"1",children:(0,s.jsx)(m.x6,{id:"Lve3H6"})})}),(0,s.jsx)(iX.p,{onChange:e=>{g(e.currentTarget.value)},placeholder:p.Ru._({id:"ZiMSMQ"}),value:h})]}),(0,s.jsxs)(no.MJ,{children:[(0,s.jsx)(e8.z,{justifyContent:"center",children:(0,s.jsx)(nl.l,{flex:"1",children:(0,s.jsx)(m.x6,{id:"+Qaboy"})})}),(0,s.jsx)(r.s,{h:"150px",w:"100%",position:"relative",justify:"center",align:"center",children:(null==t?void 0:t.faviconUrl)?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(r.s,{align:"center",justify:"center",w:"128px",h:"128px",border:"1px solid var(--chakra-colors-blackAlpha-200)",children:(0,s.jsx)(nz._,{src:null==t?void 0:t.faviconUrl,maxW:"100px",maxH:"100px",borderRadius:"sm"})}),(0,s.jsx)(J.Tz,{label:(0,s.jsx)(m.x6,{id:"XyBdok"}),children:(0,s.jsx)(H.K,{zIndex:2,position:"absolute",top:0,right:0,isRound:!0,isDisabled:S,size:"sm",icon:(0,s.jsx)(x.g,{icon:u.yLS}),"aria-label":p.Ru._({id:"XyBdok"}),onClick:()=>P(null)})})]}):S||T===nF.A.Uploading?(0,s.jsx)(t4.y,{}):(0,s.jsx)(nN.Zc,{orgId:null==O?void 0:O.id,uploadType:"favicon",editType:"favicon",dropHereText:p.Ru._({id:"hVCCpY",values:{0:"%{browse}"}}),customHeight:"150px",customFontSize:"xs",onUploadStart:()=>{A(nF.A.Uploading)},onUploadSuccess:async(e,t)=>{let{src:i,uploadResultStep:n}=e;"optimized"===n&&(await P(i),A(nF.A.Done))},onUploadFailed:e=>{A(nF.A.Error),d({title:(0,s.jsx)(m.x6,{id:"aECahe"})}),console.error("[Site SettingsPanel] Favicon upload error",e)},sx:{width:"100%",".uppy-Root":{border:"1px solid var(--chakra-colors-gray-200)",borderRadius:"md",width:"100%"},".uppy-DragDrop-label":{fontSize:"xs",color:"gray.500"},".uppy-DragDrop--isDragDropSupported":{border:"none"},".uppy-DragDrop-arrow":{transform:"scale(0.85)"}}})}),(0,s.jsx)(l.E,{fontSize:"xs",color:"gray.500",mt:2,children:(0,s.jsx)(m.x6,{id:"TvUKq9"})})]}),c&&(0,s.jsxs)(no.MJ,{children:[(0,s.jsx)(e8.z,{justifyContent:"center",children:(0,s.jsx)(nl.l,{flex:"1",children:(0,s.jsx)(m.x6,{id:"UxKoFf"})})}),(0,s.jsxs)(nM.r,{columns:2,spacing:6,flex:1,children:[(0,s.jsx)(n$,{name:p.Ru._({id:"Nom9QG"}),src:nW.src,isSelected:w,onClick:()=>{C(!0)}}),(0,s.jsx)(n$,{name:p.Ru._({id:"BvDFuc"}),src:nV.src,isSelected:!w,onClick:()=>{C(!1)}})]})]}),(0,s.jsx)(nK,{gtmContainerId:j,setGtmContainerId:f}),(0,s.jsx)(nJ,{pixelId:b,setPixelId:y}),n&&(0,s.jsx)(nL.w,{label:(0,s.jsx)(m.x6,{id:"ebOoCq",values:{GAMMA_PROPER_NOUN:ej.On}}),segmentEvent:tJ.VV.GAMMA_PRO_UPSELL_SITE_REMOVE_WATERMARK,doc:n})]})]}),(0,s.jsx)(r.s,{w:"100%",flex:1,direction:"column",pos:"sticky",bottom:0,children:(0,s.jsxs)(r.s,{mx:-2,flex:1,mb:-2,py:4,bg:"white",children:[(0,s.jsx)(tT.h,{}),(0,s.jsx)(a.$,{variant:"solid",isDisabled:!z,onClick:D,isLoading:k,children:(0,s.jsx)(m.x6,{id:"tfDRzk"})})]})})]})},n$=e=>{let{name:t,src:i,onClick:n,isSelected:r,...a}=e;return(0,s.jsxs)(o.B,{p:2,bg:r?"trueblue.50":"transparent",_hover:{bg:"trueblue.50",cursor:"pointer"},borderRadius:"md",spacing:2,...a,transitionProperty:"common",transitionDuration:"normal",onClick:n,children:[(0,s.jsx)(d.a,{height:"80px",bg:"gray.50",borderRadius:"md",borderWidth:"1px",overflow:"hidden",children:i&&(0,s.jsx)(nz._,{src:i,width:"100%",height:"100%",objectFit:"contain",borderRadius:"md"})}),(0,s.jsxs)(e8.z,{children:[r&&(0,s.jsx)(d.a,{children:(0,s.jsx)(x.g,{icon:u.e68})}),(0,s.jsx)(l.E,{fontSize:"sm",fontWeight:"500",children:t})]})]})};var nX=i(5091),nQ=i(91140);let nZ=e=>{let{label:t,initialValue:n="",updateValue:r,helperText:o,language:l,...a}=e,[c,u]=(0,v.useState)(n),[x,h]=(0,v.useState)(null),m=(0,tX.lW)(r,100),[p,g]=(0,v.useState)();(0,v.useEffect)(()=>{"css"===l?Promise.all([i.e(6171),i.e(6374),i.e(960)]).then(i.bind(i,30960)).then(e=>{g(e.css())}):"html"===l&&Promise.all([i.e(6171),i.e(6374),i.e(960),i.e(5516),i.e(83)]).then(i.bind(i,80083)).then(e=>{g(e.html())})},[l]),(0,tX.Vg)(()=>{h(null),m(c)},[c,m],[c]);let j=[p].filter(Boolean);return(0,s.jsxs)(no.MJ,{isInvalid:!!x,children:[(0,s.jsx)(nl.l,{children:t}),x&&(0,s.jsx)(nX.Wt,{children:x}),o&&(0,s.jsx)(no.eK,{children:o}),(0,s.jsx)(d.a,{border:"1px solid",borderColor:"gray.200",fontSize:"md",position:"relative",children:(0,s.jsx)(v.Suspense,{fallback:(0,s.jsx)("span",{}),children:(0,s.jsx)(nQ.j,{value:c,extensions:j,onChange:u,...a})})})]})},n0=(0,v.memo)(e=>{let{editor:t}=e,{bodyStart:i}=(0,eu.GV)(ex.BP),n=(0,v.useCallback)(e=>{null==t||t.commands.updateNestedAttributesAtPos(0,{customCode:{bodyStart:e}})},[t]);return(0,s.jsx)(r.s,{w:"100%",flex:1,direction:"column",p:2,pt:6,children:(0,s.jsx)(nZ,{label:p.Ru._({id:"fC5kYg"}),helperText:p.Ru._({id:"0AZNtw"}),initialValue:i,updateValue:n,language:"html",height:"600px"})})});n0.displayName="CustomCodePanel";let n1=(0,v.memo)(e=>{let{selectedPanel:t,setSelectedPanel:i}=e,n=(0,R.u)("docCustomCode");return(0,s.jsx)(o.B,{spacing:4,children:(0,s.jsx)(o.B,{spacing:8,children:(0,s.jsxs)(e7.e,{variant:"ghost",size:"sm",borderRadius:"full",w:"100%",children:[(0,s.jsx)(a.$,{borderRadius:"md",leftIcon:(0,s.jsx)(x.g,{icon:u.y5z,fixedWidth:!0}),"data-website-panel-active-view-button":"domains",colorScheme:"domains"===t?"trueblue":"gray",bg:"domains"===t?"trueblue.100":void 0,onClick:()=>i("domains"),flex:1,children:(0,s.jsx)(m.x6,{id:"AZ4xlc"})}),(0,s.jsx)(a.$,{borderRadius:"md",leftIcon:(0,s.jsx)(x.g,{icon:u.BH7,fixedWidth:!0}),"data-website-panel-active-view-button":"website",colorScheme:"website"===t?"trueblue":"gray",bg:"website"===t?"trueblue.100":void 0,onClick:()=>i("website"),flex:1,children:(0,s.jsx)(m.x6,{id:"Tz0i8g"})}),n&&(0,s.jsx)(a.$,{borderRadius:"md",leftIcon:(0,s.jsx)(x.g,{icon:u.jTw,fixedWidth:!0}),"data-website-panel-active-view-button":"code",colorScheme:"code"===t?"trueblue":"gray",bg:"code"===t?"trueblue.100":void 0,onClick:()=>i("code"),flex:1,children:(0,s.jsx)(m.x6,{id:"E16GGw"})})]})})})});n1.displayName="SettingsPanelHeader";var n6=i(24351),n2=i(58495);let n5=e=>{var t;let{title:i,site:n}=e,s="/".concat((0,na.Fw)(i||"untitled"));return(null==n||null==(t=n.routes)?void 0:t.find(e=>e.path===s))&&(s="".concat(s,"-").concat((0,n2.Ak)(6))),s},n4={variant:"outline",transitionProperty:"all",transitionDuration:"normal",cursor:"pointer",boxShadow:"none",tabIndex:0,_hover:{shadow:"lg",borderColor:"trueblue.300",bg:"trueblue.50"},_focusVisible:{boxShadow:"none",outline:"none"},_focus:{boxShadow:"outline"}},n3=e=>{let{sites:t}=e,i=(0,eu.GV)(eO.Jo),n=(0,Z.st)(),{currentWorkspace:a}=(0,et.ur)(),[d]=(0,ik.Imo)(),[c,h]=(0,v.useState)(!1),p=(0,iI.d)(),{push:g,reload:j}=(0,e9.useRouter)(),f=(0,v.useCallback)(async e=>{if(!i)return;h(!0);let r=null==t?void 0:t.find(t=>t.id===e),o=i.id;if(!(null==a?void 0:a.id))return void console.error("[MoveToSiteModal] No currentWorkspace found");let l=n5({title:i.title,site:r});if(await (0,ta.fb)(o),!o)return void console.error("[MoveToSiteModal] No docId found");null==n||n.track(Z.VV.DOC_MOVED_TO_SITE,{doc_id:o,site_id:e}),d({variables:{input:{siteId:e,docId:o,path:l}},refetchQueries:["GetSite"]}).then(()=>{(0,D.pF)({docId:o}),console.debug("[MoveToSiteModal] Doc moved to site. Adding route then navigating to editor",o),p({position:"top",title:(0,s.jsx)(m.x6,{id:"oMgC5V"}),description:(0,s.jsx)(m.x6,{id:"rYG2u6"}),status:"success",duration:5e3}),j()}).catch(e=>{p({position:"top",title:"Error",description:e.message,status:"error",duration:5e3}),h(!1)}).finally(()=>{h(!1)})},[n,null==a?void 0:a.id,i,j,d,t,p]);return(0,s.jsxs)(s.Fragment,{children:[c&&(0,s.jsx)(r.s,{w:"100",h:"400px",maxH:"30vh",children:(0,s.jsx)(iY.Y,{})}),!c&&(0,s.jsxs)(o.B,{spacing:4,children:[(0,s.jsx)(o.B,{pt:2,pb:2,children:(0,s.jsxs)(l.E,{fontSize:"sm",letterSpacing:"normal",color:"gray.600",fontWeight:"500",children:[(0,s.jsx)(m.x6,{id:"1osTfm",values:{GAMMA_ARTIFACT_PROPER_NOUN:ej.TP},components:{0:(0,s.jsx)("strong",{})}})," ",(0,s.jsxs)(i7.N,{href:eg.C.CREATE_SITE,textDecoration:"underline",isExternal:!0,color:"trueblue.500",children:[(0,s.jsx)(m.x6,{id:"Px95UX"}),(0,s.jsx)(nG.p,{mx:"2px"})]})," "]})}),t&&t.length>0&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(l.E,{fontSize:"sm",letterSpacing:"normal",color:"gray.600",fontWeight:"500",children:(0,s.jsx)(m.x6,{id:"kjbPb3",values:{GAMMA_ARTIFACT_PROPER_NOUN:ej.TP}})}),null==t?void 0:t.map(e=>(0,s.jsx)(i3.Z,{onClick:()=>f(e.id),onKeyPress:t=>{"Enter"===t.key&&f(e.id)},...n4,children:(0,s.jsx)(i8.b,{children:(0,s.jsxs)(e8.z,{children:[(0,s.jsx)(o.B,{spacing:0,children:(0,s.jsxs)(e8.z,{children:[e.faviconUrl&&(0,s.jsx)(nz._,{w:"4",src:e.faviconUrl}),(0,s.jsx)(l.E,{fontWeight:"600",children:e.name})]})}),(0,s.jsx)(tT.h,{}),(0,s.jsx)(x.g,{icon:u.dmS})]})})},e.id))]})]})]})},n8=()=>{let{isOpen:e,onOpen:t,onClose:i}=(0,iF.E)({id:"MoveToSiteDisclosure"}),{currentWorkspace:n}=(0,et.ur)(),{data:r,loading:o}=(0,ik._qT)({variables:{workspaceId:null==n?void 0:n.id},skip:!(null==n?void 0:n.id),fetchPolicy:"cache-first"}),l=null==r?void 0:r.sites;return o?(0,s.jsx)(t4.y,{size:"xs"}):l&&0===l.length?(0,s.jsx)(s.Fragment,{}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(a.$,{variant:"plain",onClick:t,colorScheme:"trueblue",children:(0,s.jsx)(m.x6,{id:"hsMvVQ"})}),(0,s.jsxs)(i0.aF,{isOpen:e,onClose:i,size:"3xl",children:[(0,s.jsx)(i1.m,{}),(0,s.jsxs)(i6.$,{children:[(0,s.jsx)(iR.r,{children:(0,s.jsx)(m.x6,{id:"i4b0iJ"})}),(0,s.jsx)(iO.s,{}),(0,s.jsx)(i_.c,{maxH:"80vh",overflowY:"auto",children:(0,s.jsx)(n3,{sites:l})}),(0,s.jsx)(i2.j,{children:(0,s.jsx)(a.$,{mr:3,onClick:i,children:(0,s.jsx)(m.x6,{id:"yz7wBu"})})})]})]})]})},n7=e=>{let{onEnable:t,isLoading:i}=e;return(0,s.jsx)(o.B,{align:"center",justify:"center",spacing:4,flex:1,p:6,mt:8,children:(0,s.jsx)(n6.p,{size:"md",title:(0,s.jsx)(m.x6,{id:"CcudBl",values:{GAMMA_ARTIFACT_PROPER_NOUN:ej.TP}}),description:(0,s.jsx)(m.x6,{id:"xEtury"}),children:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(o.B,{w:"100%",mt:4,children:[(0,s.jsx)(a.$,{variant:"solid",onClick:t,isLoading:i,children:(0,s.jsx)(m.x6,{id:"oL6HHo"})}),(0,s.jsx)(n8,{})]}),(0,s.jsx)(a.$,{as:i7.N,variant:"ghost",isExternal:!0,href:eg.C.CREATE_SITE,rightIcon:(0,s.jsx)(x.g,{icon:u.vMs,size:"sm"}),children:(0,s.jsx)(m.x6,{id:"Px95UX"})})]})})})};var n9=i(58297),se=i(18833),st=i(42328);let si=(0,se.P)(d.a),sn={initial:{opacity:0,translateY:-40},animate:{opacity:1,translateY:0},exit:{opacity:0,translateY:40},transition:{duration:.3}},ss=e=>{let{isLoading:t,onChange:i,isChecked:n,isDisabled:o,enabledText:l,disabledText:a}=e;return(0,s.jsxs)(r.s,{cursor:o?"not-allowed":"pointer",className:(0,c.cx)("gamma-switch-container",t&&"loading",n?"active":""),opacity:o?.6:1,children:[(0,s.jsx)(d.a,{as:"label",className:"text",fontSize:"sm",justifyContent:"center",htmlFor:"gamma-checkbox",position:"relative",overflow:"hidden",children:(0,s.jsx)(st.N,{initial:!1,children:t?(0,s.jsx)(si,{as:"span",position:"absolute",...sn,children:(0,s.jsx)(t4.y,{size:"sm"})},"loading"):n?(0,s.jsx)(si,{as:"span",position:"absolute",...sn,children:l},"checked"):(0,s.jsx)(si,{as:"span",position:"absolute",...sn,children:a},"unchecked")})}),(0,s.jsxs)(d.a,{as:"label",className:"switch",pointerEvents:o?"none":"auto",children:[(0,s.jsx)("input",{id:"gamma-checkbox",type:"checkbox",onChange:i,disabled:t||o}),(0,s.jsx)("span",{className:"slider round"})]})]})},sr=(0,K.i7)({"0%":{transform:"scale(1)",opacity:1},"50%":{transform:"scale(1.7)",opacity:0},"100%":{transform:"scale(1)",opacity:0}}),so=(0,K.i7)({"0%":{transform:"scale(1)",opacity:1},"15%":{transform:"scale(1)",opacity:1},"60%":{transform:"scale(1.7)",opacity:0},"100%":{transform:"scale(1)",opacity:0}}),sl=(0,K.i7)({"0%":{transform:"scale(1)"},"30%":{transform:"scale(1)"},"50%":{transform:"scale(1.05)"},"70%":{transform:"scale(1)"},"100%":{transform:"scale(1)"}}),sa=e=>{let{icon:t,showDisabled:i=!1,shouldPulse:n=!1,bg:r="gray.200",color:o="gray.700"}=e;return(0,s.jsx)(n9.j,{color:o,textAlign:"center",bg:r,size:8,opacity:i?.5:1,position:"relative",animation:n?"".concat(sl," 2.7s infinite"):"none",sx:{":before":n?{position:"absolute",top:0,left:0,width:"100%",height:"100%",borderRadius:"50%",content:"''",boxShadow:"inset 0 0 0 3px #6910D166",transition:"transform 0.2s, opacity 0.2s",animation:"".concat(sr," 2.7s infinite")}:{},":after":n?{position:"absolute",top:0,left:0,width:"100%",height:"100%",borderRadius:"50%",content:"''",boxShadow:"inset 0 0 0 2px #6910D133",transition:"transform 0.2s, opacity 0.2s",animation:"".concat(so," 2.7s infinite")}:{}},children:i?(0,s.jsxs)("span",{className:"fa-stack",children:[(0,s.jsx)(x.g,{icon:u.$Dv,className:"fa-stack-1x"}),(0,s.jsx)(x.g,{icon:t,className:"fa-stack-1x"})]}):(0,s.jsx)(x.g,{size:"1x",icon:t})})},sd=e=>{let{isLoading:t=!1,site:i,onChange:n,disabledText:o,doc:a}=e,c=(0,ta.dv)(i),x=(0,iW.mL)(),h=(0,et.Iy)("manage",a),p=x||h,g=!!(t||o||!p),j=(0,ta.m8)(i),f=p?o||(t?(0,s.jsx)(m.x6,{id:"mkk40+"}):c?(0,s.jsx)(m.x6,{id:"f4CBNf"}):(0,s.jsx)(m.x6,{id:"5G4vd5"})):(0,s.jsx)(m.x6,{id:"Z2uNdQ"});return i?(0,s.jsxs)(e8.z,{w:"100%",justify:"space-between","data-testid":"toggle-website-settings",children:[(0,s.jsx)(d.a,{children:(0,s.jsxs)(r.s,{alignItems:"center",children:[(0,s.jsx)(sa,{shouldPulse:j,bg:j?"#6910D1":"gray.200",color:j?"white":"gray.700",icon:j?u.LIr:u.Bwz}),(0,s.jsxs)(d.a,{ml:3,children:[(0,s.jsx)(e8.z,{children:(0,s.jsx)(l.E,{children:j?(0,s.jsx)(m.x6,{id:"MuDTSp"}):c?(0,s.jsx)(m.x6,{id:"AAm5jh"}):(0,s.jsx)(m.x6,{id:"HzFHhy"})})}),(0,s.jsx)(r.s,{align:"center",children:(0,s.jsx)(e8.z,{spacing:1,align:"center",children:(0,s.jsx)(l.E,{fontSize:"xs",color:"gray.500",css:{textWrap:"balance"},children:i&&j?(0,s.jsx)(iH,{site:i}):c?(0,s.jsx)(m.x6,{id:"N4VTXP"}):(0,s.jsx)(m.x6,{id:"39MFjF",values:{GAMMA_PROPER_NOUN:ej.On}})})})})]})]})}),(0,s.jsx)(d.a,{children:(0,s.jsx)(J.Tz,{label:f,placement:"top",shouldWrapChildren:!0,children:(0,s.jsx)(ss,{isChecked:c,isDisabled:g,isLoading:t,onChange:n})})})]}):null},sc=e=>{var t,i;let{doc:n}=e,{isOpen:o,onClose:l,onOpen:a}=(0,iF.E)({id:"SiteSettingsDrawer"}),d=(0,iI.d)(),c=(0,eu.jL)(),u=(0,eu.GV)(tr.Gd),x=(0,eu.GV)(tr.df),{editor:h}=(0,t5.mi)(),{currentWorkspace:p}=(0,et.ur)(),[g,j]=(0,v.useState)(!1),[f]=(0,ik.Ybb)(),[b]=(0,ik.yqC)(),[y]=(0,ik.Xcb)(),[w]=(0,ik.LTv)(),[C,k]=(0,v.useState)("domains"),E=n.id,S=n.title,I=null==p?void 0:p.id,T=null==n||null==(t=n.theme)?void 0:t.id,A=!1==!!n.site?null:(null==(i=n.site)?void 0:i.enabled)?"enabled":"disabled",R=!!u,_=(null==u?void 0:u.archived)?(0,s.jsx)(m.x6,{id:"jxz7x1",values:{GAMMA_PROPER_NOUN:ej.On}}):null,{query:D}=(0,e9.useRouter)();(0,O.o)("showDomains"),(0,v.useEffect)(()=>{let e=iq.R.on("openSiteSettings",e=>{k(e),a()});return()=>{e()}},[a]),(0,v.useEffect)(()=>{"true"===D.showDomains&&iq.R.emit("openSiteSettings","domains")},[D.showDomains]);let P=(0,v.useCallback)(async()=>{if(I){j(!0),w({variables:{id:E,themeId:null}});try{await f({variables:{input:{workspaceId:I,name:S,themeId:T,routes:[{docId:E,path:"/"}]}},refetchQueries:["GetDoc"]}).then(e=>{let{data:t}=e;(0,tr.wC)(c)({site:null==t?void 0:t.createSite,docId:E})})}catch(e){console.error("[WebsiteSettingsModal] Failed to create site",e.message),d({title:(0,s.jsx)(m.x6,{id:"Pdboh4"}),description:(0,s.jsx)(m.x6,{id:"8wxFbh"}),status:"error",duration:5e3,isClosable:!0,position:"top"})}finally{j(!1)}}},[f,c,E,S,T,d,w,I]),z=(0,v.useCallback)(async()=>{if(x){j(!0);try{await b({variables:{id:x},update:(e,t)=>{let{data:i}=t;e.updateQuery({query:ik.iVk,variables:{id:E}},e=>e&&e.doc?iN()({},e,{doc:{site:null==i?void 0:i.disableSite}}):e)}})}catch(e){console.error("[WebsiteSettingsModal] Failed to deactivate site",e.message),d({title:(0,s.jsx)(m.x6,{id:"ksq4sM"}),description:(0,s.jsx)(m.x6,{id:"VE0YVl"}),status:"error",duration:5e3,isClosable:!0,position:"top"})}finally{j(!1)}}},[b,E,x,d]),M=(0,v.useCallback)(async()=>{if(x){j(!0);try{await y({variables:{id:x},update:(e,t)=>{let{data:i}=t;e.updateQuery({query:ik.iVk,variables:{id:E}},e=>e&&e.doc?iN()({},e,{doc:{site:null==i?void 0:i.enableSite}}):e)}})}catch(e){console.error("[WebsiteSettingsModal] Failed to re-activate site",e.message),d({title:(0,s.jsx)(m.x6,{id:"aQnYTJ"}),description:(0,s.jsx)(m.x6,{id:"E2sPQM"}),status:"error",duration:5e3,isClosable:!0,position:"top"})}finally{j(!1)}}},[E,y,x,d]),N=(0,v.useCallback)(()=>{null===A?P():"enabled"===A?z():"disabled"===A&&M()},[P,z,M,A]);return(0,s.jsx)(J.L8,{isDark:!1,children:(0,s.jsx)(iT._s,{isOpen:o,onClose:l,size:"md",trapFocus:!1,blockScrollOnMount:!1,children:(0,s.jsxs)(iA.z,{p:0,shadow:"xl",children:[(0,s.jsx)(iR.r,{children:(0,s.jsx)(m.x6,{id:"WtsmDd"})}),(0,s.jsx)(iO.s,{}),(0,s.jsxs)(i_.c,{children:[(0,s.jsxs)(tI.T,{spacing:4,align:"stretch",children:[(0,s.jsx)(sd,{isLoading:g,site:u,doc:n,onChange:N,disabledText:_}),R&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(iJ,{context:"settings"}),(0,s.jsx)(iD.c,{}),"disabled"===A&&(0,s.jsxs)(iP.F,{status:"warning",mb:6,children:[(0,s.jsx)(iz._,{}),(0,s.jsx)(m.x6,{id:"CHu+l0"})]}),(0,s.jsxs)(r.s,{direction:"column",children:[(0,s.jsx)(n1,{selectedPanel:C,setSelectedPanel:k}),"website"===C?(0,s.jsx)(nq,{showHeadings:!1,doc:n}):"domains"===C?(0,s.jsx)(nP,{showHeadings:!1}):"code"===C?(0,s.jsx)(n0,{editor:h}):null]})]})]}),!u&&(0,s.jsx)(n7,{onEnable:N,isLoading:g})]})]})})})};var su=i(96430),sx=i(73689);let sh="onboarding-checklist-popover-content";var sm=i(80074);let sp=e=>{let{item:t,itemKey:i,onButtonClick:n}=e,r=(0,V.dU)("gray.700","gray.200"),d=(0,V.dU)("gray.500","gray.400"),c=(0,V.dU)("gray.400","gray.300"),u=(0,v.useCallback)(()=>{(0,Y.v)(tJ.VV.ONBOARDING_CHECKLIST_WIDGET_ITEM_LEARN_MORE_CLICKED,{item:i})},[i]);return(0,s.jsx)(G.e,{overflowY:"auto","data-id":"onboarding-checklist-item-detail",sx:{kbd:{color:"gray.700"}},children:(0,s.jsxs)(o.B,{spacing:4,py:2,children:[(0,s.jsx)(sm.g,{ratio:16/9,children:(0,s.jsxs)("video",{autoPlay:!0,loop:!0,muted:!0,playsInline:!0,controls:!0,children:[(0,s.jsx)("source",{src:t.mp4}),(0,s.jsx)("source",{src:t.webm})]})}),(0,s.jsxs)(o.B,{children:[(0,s.jsx)(B.D,{size:"md",children:t.title}),(0,s.jsxs)(l.E,{fontSize:"sm",color:r,children:[t.detail&&t.detail,t.learnMoreLink&&(0,s.jsxs)(s.Fragment,{children:[" ",(0,s.jsxs)(i7.N,{href:t.learnMoreLink,isExternal:!0,display:"inline-block",alignItems:"center",color:d,textDecoration:"underline",_hover:{color:c},verticalAlign:"text-top",fontSize:"xs",onClick:u,children:[(0,s.jsx)(m.x6,{id:"zwWKhA"})," ",(0,s.jsx)(nG.p,{})]})]})]})]}),(0,s.jsx)(a.$,{variant:"solid",onClick:n,size:"sm",id:"completeButton",children:(0,s.jsx)(m.x6,{id:"76gPWk"})})]})})};var sg=i(38676);let sj=e=>{let{item:t,onClick:i,itemKey:n,isCompleted:r,showPointer:c}=e,h=(0,V.dU)("gray.700","white"),m=(0,V.dU)("gray.600","gray.400"),p=(0,V.dU)("blackAlpha.50","blackAlpha.100"),g=(0,V.dU)("gray.400","gray.600"),j=r?g:h,f=(0,V.dU)("trueblue.50","trueblue.50"),b=(0,X.fW)();return(0,s.jsx)(a.$,{w:"100%",py:.5,variant:"link",alignItems:"flex-start",justifyContent:"flex-start",onClick:e=>{e.stopPropagation(),i()},id:"checklist-item-".concat(n),textDecoration:"none",color:j,_hover:{textDecoration:"none",color:m,bgColor:p},fontSize:"sm",fontWeight:"medium",css:{"--checklist-item-highlight-color":f},className:r?"highlight-animation":"",whiteSpace:"normal",textAlign:"start",children:(0,s.jsxs)(o.B,{direction:"row",alignItems:"flex-start",spacing:2,w:"100%",position:"relative",children:[(0,s.jsx)(d.a,{w:"fit-content",color:r?g:j,children:r?(0,s.jsx)(x.g,{icon:u.e68,fixedWidth:!0}):(0,s.jsx)(x.g,{icon:u.Nfw,fixedWidth:!0})}),(0,s.jsxs)(d.a,{children:[(0,s.jsx)(l.E,{pos:"relative",lineHeight:"1.5",display:"inline",...r?{background:"linear-gradient(currentColor, currentColor)",backgroundRepeat:"no-repeat",textDecoration:"none",backgroundPosition:"0% 50%",backgroundSize:"100% 2px",className:"strike-animation ".concat(b?"strike-animation-rtl":"")}:{},children:t.title}),c&&(0,s.jsx)(d.a,{display:"inline-block",position:"absolute",marginInlineStart:2,className:b?"pointer-animation-rtl":"pointer-animation-ltr",lineHeight:0,fontSize:"2xl",bottom:"10px",children:(0,s.jsx)("span",{role:"img","aria-label":"show me how",children:b?"\uD83D\uDC49":"\uD83D\uDC48"})})]})]})})},sf=e=>{let{onMinimizeClick:t,onListItemClick:i,completedSteps:n,steps:r}=e,{progress:a,stepCount:c,totalSteps:u}=ey(),h=(0,V.dU)("gray.400","gray.600"),p=(0,V.dU)("blackAlpha","whiteAlpha");return(0,s.jsxs)(d.a,{children:[(0,s.jsx)(d.a,{position:"absolute",top:1,insetInlineEnd:2,zIndex:3,children:(0,s.jsx)(H.K,{variant:"ghost",color:"currentColor",colorScheme:p,isRound:!1,size:"xs",icon:(0,s.jsx)(x.g,{icon:tA.AJu,fixedWidth:!0}),"aria-label":"Minimize",onClick:t})},"onboarding-checklist-popover-minimize-button"),(0,s.jsx)(sg.D,{border:"0 none",children:(0,s.jsxs)(o.B,{spacing:2,children:[(0,s.jsxs)(o.B,{direction:"row",alignItems:"baseline",justifyContent:"flex-start",children:[(0,s.jsx)(B.D,{size:"sm",children:(0,s.jsx)(m.x6,{id:"ZDIydz"})}),(0,s.jsx)(l.E,{fontSize:"xs",color:h,children:(0,s.jsx)(m.x6,{id:"llY0P5",values:{totalSteps:u,0:String(c)}})})]}),(0,s.jsx)(ed.k,{size:"sm",colorScheme:"green",value:a,isAnimated:!0,borderRadius:"full"})]})}),(0,s.jsx)(G.e,{children:(0,s.jsx)(o.B,{spacing:4,w:"100%",children:(0,s.jsx)(o.B,{spacing:1,w:"100%",children:r.map(e=>{let[t,r]=e,o=n[t],l=Object.entries(n).find(e=>{let[t,i]=e;return!i}),a=l&&l[0]===t;return(0,s.jsx)(sj,{item:r,onClick:()=>{i(t)},itemKey:t,isCompleted:o,showPointer:a},t)})})})})]})};i(51407);let sb=eb(),sv=e=>{let{onEditClick:t}=e,[i,n]=(0,eh.M)(em.E.onboardingChecklistSteps,ef),r=(0,ee.rd)(),c=(0,v.useMemo)(()=>Object.entries(sb),[]),u=(0,X.fW)(),{isOpen:x,onOpen:h,onClose:p,onToggle:g}=(0,ez.j)({id:"onboarding-checklist-popover"}),{isOpen:j,onOpen:f,onClose:b}=(0,ez.j)({id:"attached-helper-popover"}),[y,w]=(0,v.useState)(null),C=null!==y&&sb[y]||null,{rectAttrs:k}=es({selector:null==C?void 0:C.maskSelector}),{rectAttrs:E}=es({selector:'[data-id="'.concat(ew,'"]')}),S=k||E,I=(0,v.useCallback)(async e=>{"addMedia"===e&&(T.R.emit("bringInsertWidgetToFront",{inFront:!0}),await new Promise(e=>setTimeout(e,500))),(0,Y.v)(tJ.VV.ONBOARDING_CHECKLIST_WIDGET_ITEM_VIEWED,{item:e}),w(e);let t=sb[e];(null==t?void 0:t.actionBefore)&&t.actionBefore(),requestAnimationFrame(()=>{f()})},[f]),A=(0,v.useCallback)(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"btn";y&&((0,Y.v)(tJ.VV.ONBOARDING_CHECKLIST_WIDGET_ITEM_COMPLETED,{item:y,method:e}),w(null),b(),n({...i,[y]:!0}),"addMedia"===y&&T.R.emit("bringInsertWidgetToFront",{inFront:!1}))},[i,b,y,n]),R=!!(j&&C),{reward:O}=(0,sx.bS)("confettiOriginator","confetti"),{reward:_}=(0,sx.bS)("checklist-item-createFirstGamma","confetti"),{isChecklistComplete:D}=ey();(0,v.useEffect)(()=>{D&&((0,Y.v)(tJ.VV.ONBOARDING_CHECKLIST_WIDGET_COMPLETED),setTimeout(()=>{O()},500))},[D,O]),(0,v.useEffect)(()=>T.R.on("toggleOpen",e=>{let{behavior:t="toggle",skipTracking:i=!1}=e;if(!i){let e={open:tJ.VV.ONBOARDING_CHECKLIST_WIDGET_OPENED,close:tJ.VV.ONBOARDING_CHECKLIST_WIDGET_CLOSED,toggle:x?tJ.VV.ONBOARDING_CHECKLIST_WIDGET_CLOSED:tJ.VV.ONBOARDING_CHECKLIST_WIDGET_OPENED};(0,Y.v)(e[t])}({open:()=>{h(),D&&n(ef)},close:p,toggle:g})[t]()}),[D,x,p,h,g,n]),(0,v.useEffect)(()=>{T.R.emit("isInOnboardingChecklist",x)},[x]),(0,v.useEffect)(()=>{let e=document.querySelector('[data-id="'.concat(sh,'"]')),t=null==e?void 0:e.closest(".chakra-popover__popper");t&&(k?t.style.pointerEvents="none":t.style.pointerEvents="auto",y?t.style.zIndex="1":t.style.zIndex="".concat(eX.$.onboardingChecklist))},[y,k]);let P=(0,v.useCallback)(()=>{null!=C&&C.skipCompleteStepOnMaskClick||A("mask")},[A,C]);(0,v.useEffect)(()=>{x&&!i.createFirstGamma&&(n({...ef,createFirstGamma:!0}),(0,Y.v)(tJ.VV.ONBOARDING_CHECKLIST_WIDGET_ITEM_COMPLETED,{item:"createFirstGamma",method:"auto"}),_())},[i.createFirstGamma,n,_,x]);let z=(0,v.useCallback)(()=>{(0,Y.v)(tJ.VV.ONBOARDING_CHECKLIST_WIDGET_CLOSED),p()},[p]),M=er(r),G=(0,V.dU)("gray.500","gray.400");return(0,s.jsxs)(J.L8,{isDark:r,children:[(0,s.jsxs)(F.A,{isOpen:x,placement:"top",gutter:8,children:[(0,s.jsx)(L.d,{children:(0,s.jsx)(eC,{})}),(0,s.jsx)(N.Z,{children:(0,s.jsx)(W.h,{"data-id":sh,marginInlineEnd:$.uA,...M,children:D?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(su.q,{fontSize:"xxs",zIndex:3,onClick:p}),(0,s.jsxs)(o.B,{align:"center",justify:"flex-start",direction:"column",textAlign:"start",spacing:4,py:6,pb:4,px:4,children:[(0,s.jsxs)(o.B,{spacing:2,children:[(0,s.jsx)(B.D,{size:"lg",id:"confettiOriginator",children:(0,s.jsx)("span",{role:"img","aria-label":"confetti",children:"\uD83C\uDF89"})}),(0,s.jsx)(B.D,{size:"lg",textAlign:"start",children:(0,s.jsx)(m.x6,{id:"KQBnUP"})}),(0,s.jsx)(l.E,{fontSize:"sm",children:(0,s.jsx)(m.x6,{id:"hAMA9K",values:{GAMMA_PROPER_NOUN:ej.On}})})]}),(0,s.jsxs)(o.B,{flexDirection:"column",justifyContent:"center",alignContent:"center",spacing:2,w:"100%",children:[(0,s.jsx)(a.$,{as:i7.N,width:"100%",href:"/create",variant:"solid",target:"_blank",size:"sm",textDecoration:"none !important",onClick:()=>{(0,Y.v)(tJ.VV.ONBOARDING_CHECKLIST_WIDGET_COMPLETION_MODAL_CTA_CLICKED,{cta:"create"})},children:(0,s.jsx)(m.x6,{id:"WudVHw"})}),(0,s.jsx)(a.$,{width:"100%",variant:"plain",size:"sm",onClick:()=>{(0,Y.v)(tJ.VV.ONBOARDING_CHECKLIST_WIDGET_COMPLETION_MODAL_CTA_CLICKED,{cta:"edit"}),p(),t()},children:(0,s.jsx)(m.x6,{id:"bObOD4"})})]}),(0,s.jsx)(l.E,{fontSize:"xs",color:G,children:(0,s.jsx)(m.x6,{id:"sapBOc",components:{0:(0,s.jsx)(ep.u,{})}})})]})]}):(0,s.jsx)(sf,{onMinimizeClick:z,onListItemClick:I,completedSteps:i,steps:c})})})]}),(0,s.jsxs)(N.Z,{children:[(0,s.jsxs)(F.A,{strategy:"fixed",isOpen:R,lazyBehavior:"unmount",closeOnBlur:!1,placement:k?"end-start":"top",isLazy:!0,gutter:8,modifiers:[{name:"computeStyles",options:{gpuAcceleration:!1}},{name:"detectOverflow",phase:"beforeWrite",requiresIfExists:["offset"],enabled:!0,fn:e=>{let{state:t}=e,i=(0,q.A)(t,{boundary:"clippingParents"}),n=i.top>0||i.bottom>0||i.left>0||i.right>0,s=t.elements.popper.getBoundingClientRect();return(null==E?void 0:E.top)&&n&&(t.styles.popper={...t.styles.popper,right:u?"auto":"0px",top:"-".concat(8,"px"),left:u?"0px":"auto",bottom:"auto",transform:"translate3d(0px, ".concat(E.top-s.height,"px, 0px)"),marginInlineEnd:$.uA}),t}}],children:[(0,s.jsx)(L.d,{children:(0,s.jsx)(d.a,{position:"absolute",pointerEvents:"none",top:"".concat(null==S?void 0:S.top,"px"),left:"".concat(null==S?void 0:S.left,"px"),width:"".concat(null==S?void 0:S.width,"px"),height:"".concat(null==S?void 0:S.height,"px")})}),C&&y&&R&&(0,s.jsx)(N.Z,{children:(0,s.jsx)(W.h,{w:"400px",...M,children:(0,s.jsx)(sp,{item:C,itemKey:y,onButtonClick:()=>{A("btn")}})})})]}),y&&(0,s.jsx)(el,{selector:(null==C?void 0:C.maskSelector)||"",onClickTargetElement:P,rectAttrs:k||null,lockScroll:!0})]})]})};var sy=i(78140),sw=i(36999),sC=i(41283),sk=i(37930),sE=i(48478),sS=i(6760),sI=i(84462),sT=i.n(sI),sA=i(14753),sR=i(89115);let sO=sT()(()=>parseFloat(getComputedStyle(document.documentElement).fontSize)),s_=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,{fontSize:t,defaultContentWidth:i}=(0,eu.GV)(ex.Uu);return sD({zoomLevel:e,docSettingsFontSize:t,defaultContentWidth:i,viewportScaleFactor:(0,sA.t)(),theme:(0,eu.GV)(ex.SJ)})},sD=e=>{let{docSettingsFontSize:t,defaultContentWidth:i,zoomLevel:n=1,viewportScaleFactor:s,theme:r}=e,o=(0,_.Xb)(),{cardWidthEms:l,baseFontSize:a}=(0,sR.S)({fontSize:t,contentWidth:i,theme:r,isMobileDevice:o});return s*a*sO()*n*l};var sP=i(15607),sz=i(36679);let sM={portrait:{max:1,min:.4},landscape:{max:1,min:.5}};function sN(e,t){var i;let n=e&&getComputedStyle(e).getPropertyValue(t);return n?parseInt(null==(i=n.match(/\d+/))?void 0:i[0],10):0}let sF=e=>{let{cardWrapperWidth:t,cardWrapperLeftPaddingNum:i,cardWrapperRightPaddingNum:n}=e;return t-i-n},sL=()=>{let{max:e,min:t}=sM[(0,eu.GV)(ex.fX)||"landscape"]||sM.landscape;return{max:e,min:t}},sV=e=>{let{editor:t,editorWrapperDiv:i,aspectRatioValue:n}=e,s=(0,eu.jL)(),{max:r,min:o}=sL(),l=(0,v.useCallback)(e=>{e<r&&e>o?s((0,ex.Ye)({zoomLevel:e})):e>=r?s((0,ex.Ye)({zoomLevel:r})):e<=o&&s((0,ex.Ye)({zoomLevel:o}))},[s,r,o]),a=(0,eu.GV)((0,e1.lp)("left")),d=(0,eu.GV)((0,e1.lp)("right")),c=(0,eu.GV)(ex.yh),u=t&&(0,sP.jB)(t,0),x=s_(),h=(0,v.useCallback)(()=>{try{if(!i)return;document.body.classList.add(sz.Ur);let e=function(e,t){let i=null==e?void 0:e.querySelector(".card-wrapper"),n=sN(i,"padding-top"),s=sN(i,"padding-bottom"),r=null==i?void 0:i.clientWidth,o=sN(i,"padding-left"),l=sN(i,"padding-right");return{editorHeight:t.clientHeight,cardWrapperTopPaddingNum:n,cardWrapperBottomPaddingNum:s,cardWrapperWidth:r,cardWrapperLeftPaddingNum:o,cardWrapperRightPaddingNum:l}}(u,i);if(0===e.cardWrapperWidth)return;let t=sF(e),s=n&&t/n,r=function(e){let{editorHeight:t,cardWrapperTopPaddingNum:i,cardWrapperBottomPaddingNum:n}=e;return t-i-n}(e),o=s&&s-r;if(n&&o&&o>-10){let e=r*n,t=Math.round(e/x*100);l(t/100)}else{let e=Math.round(t/x*100);l(e/100)}requestAnimationFrame(()=>{document.body.classList.remove(sz.Ur)})}catch(e){nR.Cp(e),console.error(e)}},[i,n,u,x,l]);(0,v.useEffect)(()=>{c&&h()},[c,h]),(0,v.useEffect)(()=>{c&&ts()(h,200)()},[c,h,a,d]),(0,v.useEffect)(()=>(c&&window.addEventListener("resize",h),c||window.removeEventListener("resize",h),()=>{window.removeEventListener("resize",h)}),[h,c])},sW=[1.4,1.3,1.2,1.1,1,.9,.8,.7,.6,.5],sG=e=>{let{editor:t,editorWrapperDiv:i,aspectRatioValue:n}=e,r=(0,ee.rd)(),o=(0,eu.jL)(),l=(0,eu.GV)(ex.Uu),d=(0,eu.GV)(ex.sA),c=(0,eu.GV)(ex.We),u=(0,eu.GV)(ex.yh),x=l.scaleContentToFit,h=(0,R.u)("docAlwaysZoomToFit");sV({editor:t,editorWrapperDiv:i,aspectRatioValue:n});let m=e=>{o((0,ex.Ye)({zoomLevel:e}))},g=e=>{o((0,ex.us)({enabled:e}))};return((0,v.useEffect)(()=>{let e="social"===d.formatType,t="fluid"!==l.cardDimensions&&"deck"===d.formatType;e||t||x?o((0,ex.us)({enabled:!0})):"fluid"===l.cardDimensions&&(o((0,ex.Ye)({zoomLevel:1})),h?o((0,ex.us)({enabled:!0})):o((0,ex.us)({enabled:!1})))},[o,d.formatType,l.cardDimensions,x,h]),x)?null:(0,s.jsx)(J.L8,{isDark:r,children:(0,s.jsxs)(sy.W,{children:[(0,s.jsx)(sw.I,{w:"fit-content",as:a.$,position:"relative",size:"xs",minWidth:"46px",maxW:"46px",borderRadius:"full",fontSize:"11px",px:"1",sx:{fontVariantNumeric:"tabular-nums"},children:"".concat(Math.round(100*c),"%")}),(0,s.jsx)(sC.c,{children:(0,s.jsxs)(sk.i,{value:u?"fit":"".concat(c),onChange:e=>{if("fit"===e)return void g(!0);m(parseFloat(e)),g(!1)},children:[sW.map(e=>(0,s.jsxs)(sE.k,{value:"".concat(e),children:[Math.round(100*e),"%"]},e)),(0,s.jsx)(sS.N,{}),(0,s.jsx)(sE.k,{value:"fit",children:p.Ru._({id:"u4iXQi"})})]})})]})})},sB=e=>{let{editor:t,editorWrapperDiv:i,aspectRatioValue:n}=e;return(0,s.jsx)(eD.x,{zIndex:eX.$.bottomRightControls,children:(0,s.jsxs)(o.B,{direction:"column",alignItems:"flex-end",children:[(0,s.jsx)(sG,{editor:t,editorWrapperDiv:i,aspectRatioValue:n}),(0,s.jsxs)(o.B,{direction:"row",children:[(0,s.jsx)(sv,{onEditClick:()=>{null==t||t.commands.focusDelayed()}}),(0,s.jsx)(eP.P,{showOnboardingChecklist:!0})]})]})})};var sU=i(44811),sH=i(94289),sK=i(8255),sJ=i(87386),sq=i(62452),sY=i(72386),s$=i(10817),sX=i(77387),sQ=i(30034),sZ=i(62171);let s0=v.createContext({enabled:!1,registerEditor:(e,t)=>{},getAllCards:()=>[],userMessage:"",setUserMessage:e=>{}});function s1(){return(0,v.useContext)(s0)}let s6=e=>{let{children:t}=e,i=(0,v.useRef)(new Map),n=(0,v.useRef)(""),r=(0,v.useRef)((e,t)=>{i.current.set(e,t)}),o=(0,v.useRef)(()=>Array.from(i.current.values()).map(e=>{var t,i;return null==(i=e.state.doc.firstChild)||null==(t=i.content.toJSON())?void 0:t[0]}).filter(Boolean)),l=(0,v.useCallback)(e=>{n.current=e},[]);return(0,s.jsx)(s0.Provider,{value:{enabled:!0,registerEditor:r.current,getAllCards:o.current,userMessage:n.current,setUserMessage:l},children:t})};var s2=i(48993),s5=i(63821),s4=i(10500);let s3=e=>{let{cardId:t,onClick:i}=e,n=(0,eu.GV)((0,s2.qw)(t)),r=(0,eu.GV)(ex.SJ);return n?(0,s.jsxs)(o.B,{zIndex:1,mt:"4.5em",width:"180px",bg:"whiteAlpha.500",border:"1px solid",borderColor:"blackAlpha.300",borderRadius:"lg",p:4,sx:{"*":{"backdrop-filter":"none !important","-webkit-backdrop-filter":"none !important"}},children:[n.variants.map(e=>{if(!e)return null;let{label:o,card:l,id:a}=e;return(0,s.jsx)(s8,{theme:r,isSelected:n.selected===a,label:o,card:l,onClick:()=>{i({cardId:t,variationId:a})}},a)}),n.variants.length<2&&(0,s.jsx)(U.o,{children:(0,s.jsx)(t4.y,{})})]}):null},s8=e=>{let{label:t,card:i,theme:n,isSelected:a=!1,onClick:d=()=>{}}=e,c=(0,v.useMemo)(()=>(0,sJ.createDocWithCards)({},[i]),[i]);return(0,s.jsxs)(o.B,{align:"start",children:[(0,s.jsx)(r.s,{borderRadius:"md",bg:"white",shadow:a?"outline":"md",overflow:"hidden",cursor:"pointer",_hover:{bg:"trueblue.50"},transitionProperty:"common",transitionDuration:"fast",onClick:d,children:(0,s.jsx)(r.s,{sx:sX.o,css:{"--editor-font-size":"0.15rem","--editor-width":"150px"},justifyContent:"center",alignItems:"top",pointerEvents:"none",children:(0,s.jsx)(sX.S,{content:c,theme:n,isThumbnail:!0})})}),(0,s.jsxs)(l.E,{fontSize:"sm",children:[a&&(0,s.jsx)(s4.S,{boxSize:3,mr:2}),t]})]})},s7="ai-wizard-editor-root",s9=e=>{let{doc:t,cards:i,theme:n=(0,sY.N)()}=e,o=(0,sZ.fS)(n),l=(0,sq.Mw)(n),a=(0,sZ.FD)(o,l),d=(0,eu.jL)(),{registerEditor:c}=s1();return((0,v.useEffect)(()=>()=>{d((0,s2.cL)())},[d]),t)?(0,s.jsxs)(r.s,{bg:"gray.50",overflowY:"auto",overflowX:"hidden",justifyContent:"flex-start",alignContent:"center",alignItems:"center",alignSelf:"stretch",direction:"column",width:"100%",height:"100%",position:"relative",className:s7,...a,children:[(0,s.jsx)(sQ.s,{}),i.map((e,i)=>{var n;let r=null==(n=e.attrs)?void 0:n.id;return r?(0,s.jsx)(re,{doc:t,cardId:r,cardIndex:i,cardJSON:e,onCreate:e=>{c(r,e)}},r):null})]}):null},re=e=>{let{cardId:t,cardIndex:i,cardJSON:n,doc:o,onCreate:l}=e,a=(0,eu.jL)(),[d,c]=(0,v.useState)(null),{userMessage:u}=s1(),x=(0,s5.F)({editor:d});(0,v.useEffect)(()=>{d&&x({doc:d.state.doc,cardId:t,message:u})},[x,d,t,i,u]);let h=(0,v.useMemo)(()=>(0,sJ.createDocWithCards)({},[n]),[n]),m=(0,eu.GV)((0,s2.vE)(t));(0,tX.Vg)(()=>{if(!d||!m)return;let e=(0,tf.W0)(d,t);e&&d.commands.command(t=>{let{tr:i}=t,n=sH.bP.fromJSON(d.schema,m.card);return i.replaceWith(e.pos,e.pos+e.node.nodeSize,n),!0})},[d,m,t],[m]);let p=(0,v.useCallback)(e=>{let{cardId:i,variationId:n}=e;d&&i===t&&a((0,s2.S6)({cardId:t,variantId:n}))},[a,d,t]);return(null==o?void 0:o.id)?(0,s.jsxs)(r.s,{className:"ai-variation-editor-".concat(t),alignItems:"flex-start",sx:sX.o,my:-8,children:[(0,s.jsx)(s3,{cardId:t,onClick:p}),(0,s.jsx)(s$.b,{initialContent:h,onCreate:e=>{let{editor:t}=e;c(t),l(t)},doc:o,docId:o.id,scrollingParentSelector:".".concat(s7),readOnly:!0,isStatic:!0,animationsEnabled:!1,extensions:[],shouldSupportMenus:!1})]}):null},rt=e=>{let{isOpen:t,onClose:i,onOpen:n}=(0,iF.E)({id:"cardSuggestionDrawer"}),r=(0,eu.GV)(ex.SJ),[o]=(0,v.useState)(()=>(0,sU.U1)({reducer:eu.Ki}));return(0,s.jsx)(y.Kq,{store:o,children:(0,s.jsx)(ri,{...e,isOpen:t,onClose:i,onOpen:n,theme:r})})},ri=(n=e=>{let{doc:t,editor:i,theme:n,isOpen:r,onClose:o,onOpen:l}=e,[d,c]=(0,v.useState)([]),[u,x]=(0,v.useState)(null),{getAllCards:h,setUserMessage:p}=s1(),g=(0,v.useCallback)(()=>{o(),c([]),x(null)},[o]),j=(0,v.useCallback)(()=>{if(g(),!i)return;let e={type:"document",content:h()};console.log("[handleConfirm] contentToUse",e);let t=1,n=i.state.doc.nodeSize-2,s=(0,tf.W0)(i,u);if(s){n=(t=s.pos)+s.node.nodeSize;let i=e.content.find(e=>{var t;return(null==(t=e.attrs)?void 0:t.id)===u});if(!i)return void console.warn("[handleConfirm] Count not find card to use");e=i}i.commands.command(s=>{let{tr:r}=s;return r.replaceRangeWith(t,n,sH.bP.fromJSON(i.schema,e)),!0})},[g,i,u,h]),f=(0,v.useCallback)(async(e,t,i)=>{l(),x(t),c(e.toJSON().content[0].content.filter(e=>{var i;return null===t||(null==(i=e.attrs)?void 0:i.id)===t})),p(i)},[l,p]);return(0,v.useEffect)(()=>{if(i)return sK.R.on("openSuggestionEditor",e=>{let{cardId:t,userMessage:n}=e;f(i.view.state.doc,t,n)})},[i,f]),(0,s.jsxs)(iT._s,{placement:"bottom",onClose:o,isOpen:r,trapFocus:!0,isFullHeight:!0,children:[(0,s.jsx)(i1.m,{}),(0,s.jsxs)(iA.z,{borderTopRadius:"xl",h:"calc(var(--100vh) - 24px)",transform:"none !important",children:[(0,s.jsx)(iO.s,{zIndex:"10",backgroundColor:"white",mr:2,shadow:"md"}),(0,s.jsx)(i_.c,{p:0,h:"100%",children:d.length>0&&t?(0,s.jsx)(s9,{doc:t,cards:d,theme:n}):(0,s.jsx)(iY.Y,{})}),(0,s.jsx)(i2.j,{borderTop:"1px solid #000",borderColor:"gray.200",children:(0,s.jsxs)(e7.e,{spacing:4,children:[(0,s.jsx)(a.$,{variant:"ghost",onClick:o,children:(0,s.jsx)(m.x6,{id:"dEgA5A"})}),(0,s.jsx)(a.$,{variant:"solid",onClick:j,children:(0,s.jsx)(m.x6,{id:"7VpPHA"})})]})})]})]})},(0,v.memo)(e=>(0,s.jsx)(s6,{children:(0,s.jsx)(n,{...e})})));var rn=i(17928),rs=i(65978),rr=i(42670),ro=i(7270),rl=i(23201),ra=i(68917);let rd=e=>{let{count:t,onClose:i,commentStatusFilter:n,setCommentStatusFilter:o}=e;return(0,s.jsxs)(r.s,{width:"100%",px:6,py:4,justifyContent:"space-between",alignItems:"center",h:16,tabIndex:0,outline:"none",children:[(0,s.jsx)(r.s,{flex:1,children:(0,s.jsxs)(e8.z,{spacing:4,children:[(0,s.jsx)(t_.N,{children:(0,s.jsx)(m.x6,{id:"eiUA4k",values:{count:t}})}),(0,s.jsxs)(sy.W,{closeOnSelect:!0,children:[(0,s.jsx)(sw.I,{as:a.$,size:"sm",rightIcon:(0,s.jsx)(ra.D,{}),children:n===ik.EB6.Open?(0,s.jsx)(m.x6,{id:"dXB4UR"}):(0,s.jsx)(m.x6,{id:"jeFwPX"})}),(0,s.jsx)(sC.c,{zIndex:3,children:(0,s.jsxs)(sk.i,{defaultValue:n,title:p.Ru._({id:"0cVgUw"}),type:"radio",children:[(0,s.jsx)(sE.k,{onClick:()=>o(ik.EB6.Open),value:"open",children:(0,s.jsx)(m.x6,{id:"dXB4UR"})}),(0,s.jsx)(sE.k,{onClick:()=>o(ik.EB6.Closed),value:"closed",children:(0,s.jsx)(m.x6,{id:"jeFwPX"})})]})})]})]})}),(0,s.jsx)(tS.J,{onClick:i,"data-comment-feed-close-button":!0})]})};var rc=i(36842),ru=i(21465),rx=i(72926);let rh=e=>{let{user:t,editor:i}=e,[n,r]=(0,v.useState)(()=>{let e=(0,ru.tq)(i,ic.S5);return e&&e.length?e[0]:(0,ru.CD)(()=>ic.S5,i,"")});(0,v.useEffect)(()=>{if(n&&i)return()=>{var e,t;null==(e=(t=i.commands).createDraftComment)||e.call(t,n)}},[n,i]);let o=(0,rx.Zb)({draftComment:n,clearDraftComment(){var e,t,s,o;n&&(null==(s=(o=i.commands).removeDraftComments)||s.call(o,[n]));let l=(0,ru.CD)(()=>ic.S5,i,"");null==(e=(t=i.commands).createDraftComment)||e.call(t,l),r(l)},editor:i}),l=(0,v.useCallback)(e=>{let{editor:t}=e;r(e=>e?{...e,json:t.view.state.doc.toJSON(),text:t.view.state.doc.textContent}:e)},[]);return(0,s.jsx)(rc.h,{draftComment:n,user:t,onCommentDraftUpdate:l,onCommentSave:o,commentIdToHighlight:null})},rm=()=>({today:p.Ru._({id:"ecUA8p"}),thisWeek:p.Ru._({id:"yByRxz"}),earlier:p.Ru._({id:"HPqZkW"})}),rp=e=>{var t;let{onClose:i,editor:n}=e,o=(0,eu.GV)(eO.Jo),{isConnected:l}=(0,E.u)(),[a,c]=(0,v.useState)(ik.EB6.Open),u=null==o?void 0:o.comments,x=null==o||null==(t=o.comments)?void 0:t.filter(e=>e.status===a),h=(0,eu.GV)(ex.wC),p=(0,et.Iy)("comment",o)&&l,{user:g}=(0,et.ur)(),j=(0,S.h6)(o,g),f=(0,v.useMemo)(()=>(0,rl.WP)({items:x||[],sortBy:rl.VJ,latestTimeGetterFn:rl.wS}),[x]);return u&&o&&n?(0,s.jsxs)(r.s,{direction:"column",h:"100%",overflowX:"hidden",className:rs.V,w:"100%",children:[(0,s.jsx)(rd,{commentStatusFilter:a,setCommentStatusFilter:c,count:(null==x?void 0:x.length)||0,onClose:i}),(0,s.jsxs)(r.s,{direction:"column",className:"comments-list",flex:1,overflowY:"auto",tabIndex:0,outline:"none",children:[(0,s.jsx)(eJ.r,{description:(0,s.jsx)(m.x6,{id:"pQvCbR"}),isConnected:l,mx:6}),j&&!g&&o&&(0,s.jsx)(ro.W,{doc:o,accessLink:j}),p&&(0,s.jsx)(d.a,{px:6,py:2,children:(0,s.jsx)(rh,{user:g,editor:n})}),!(null==x?void 0:x.length)&&(0,s.jsx)(U.o,{p:6,children:(0,s.jsx)(n6.p,{size:"sm",title:"open"===a?(0,s.jsx)(m.x6,{id:"0Bm90s"}):(0,s.jsx)(m.x6,{id:"QnXc6h"}),description:(0,s.jsx)(m.x6,{id:"iB9OEi"})})}),Object.entries(f).filter(e=>{let[,t]=e;return t.length}).map(e=>{let[t,l]=e;return(0,s.jsxs)(r.s,{direction:"column",children:[(0,s.jsx)(J._x,{px:6,pt:4,pb:2,position:"sticky",top:-2,bg:"white",zIndex:2,children:rm()[t]}),(0,s.jsx)(r.s,{direction:"column",children:l.map(e=>(0,s.jsx)(rr.h,{instanceType:"feed",userCanComment:p,editor:n,comment:e,selfUser:g,docId:null==o?void 0:o.id,editorMode:h,onClose:i,isRootComment:!0,pt:6,px:6,pb:4},e.id))})]},t)})]})]}):null},rg=e=>{let{closePanel:t}=e,{editor:i}=(0,tE.m)();return(0,v.useEffect)(()=>{let e=e=>{let{open:i}=e;i&&t()};return rn.LF.on(rn.DN.POPUP_COMMENT_TOGGLED,e),()=>{rn.LF.on(rn.DN.POPUP_COMMENT_TOGGLED,e)}},[t]),(0,s.jsx)(tO.Z,{bgColor:"white","data-panelid":"comment-feed-panel",children:(0,s.jsx)(rp,{onClose:t,editor:i})})};rg.panelPosition="right",rg.panelName="comment-feed";let rj=()=>{let{togglePanel:e,isPanelOpen:t}=(0,eq.ww)(rg);return{toggleCommentsPanel:e,isCommentsPanelOpen:t}};var rf=i(70315),rb=i(71024),rv=i.n(rb),ry=i(64961),rw=i(19783);let rC=()=>{var e,t;let i=(0,eu.GV)(eO.Jo),{user:n}=(0,nm.ur)(),s=(0,nm.Iy)("manage",i)&&!!n,r=null==i||null==(e=i.docGenerateInput)?void 0:e.docGeneration;if(i&&r&&(null==(t=i.createdBy)?void 0:t.id)===(null==n?void 0:n.id)&&s)return(0,D.o0)(r)};var rk=i(5221),rE=i(99745),rS=i(16306);let rI=e=>{let{onClose:t}=e;return(0,s.jsxs)(o.B,{flex:1,align:"center",justify:"center",p:6,spacing:6,children:[(0,s.jsx)(nz._,{src:"https://cdn.gamma.app/zc87vhr30n8uf3n/b4b04402416f4ec8b5c1dc24f4c2a3d6/optimized/Sal-Spaceship-Riding.png",px:12}),(0,s.jsx)(rS.q,{children:(0,s.jsx)(l.E,{children:(0,s.jsx)(m.x6,{id:"jVQv+Q"})})}),(0,s.jsx)(a.$,{variant:"ghost",colorScheme:"blackAlpha",leftIcon:(0,s.jsx)(x.g,{icon:u.Jyw}),onClick:t,children:(0,s.jsx)(m.x6,{id:"pqZJT2"})})]})},rT=()=>(0,s.jsxs)(iP.F,{status:"warning",mt:12,minH:20,flexDirection:"column",alignItems:"center",justifyContent:"center",textAlign:"center",borderRadius:"lg",borderWidth:"1px",children:[(0,s.jsx)(rk.X,{children:(0,s.jsx)(m.x6,{id:"rvbk/4"})}),(0,s.jsx)(rE.T,{children:(0,s.jsx)(m.x6,{id:"XNkIFY"})})]});var rA=i(36218),rR=i(63867);let rO="40px",r_=e=>{let{value:t,onChange:i,onSubmit:n,isLoading:r,editor:o,resetMessages:a}=e;(0,im.lC)(o);let{selection:d,doc:c}=o.state,u=c.textBetween(d.from,d.to,"\n"),h=(0,eK.ez)("unlimited_credits"),g=(0,v.useRef)(null),[j,f]=(0,v.useState)(!1),b=d instanceof rR.nh,y=d instanceof rR.U3,w=b&&"card"===d.node.type.name,C=d.empty||w?p.Ru._({id:"XrfE9D"}):b?p.Ru._({id:"CsUli9"}):y&&u?p.Ru._({id:"+NPPZN",values:{0:function(e,t){return e.length>50?e.slice(0,50)+"...":e}(u,50)}}):p.Ru._({id:"/fY1js"}),k=(0,v.useCallback)(()=>{g.current&&(g.current.style.height=rO,g.current.style.height="".concat(g.current.scrollHeight,"px"))},[]);return(0,v.useEffect)(()=>(o.on("selectionUpdate",k),()=>{o.off("selectionUpdate",k)}),[o,k]),(0,v.useEffect)(()=>{j?k():setTimeout(()=>{f(!0),k()},400)},[j,C,k,t]),(0,s.jsxs)(e8.z,{align:"end",children:[(0,s.jsx)(nB.M,{size:"md",children:(0,s.jsx)(rA.T,{"data-gamma-child-tiptap-editor":!0,id:"ai-chat-input",h:rO,minH:rO,ref:g,resize:"none",maxH:j?32:rO,bg:"white",shadow:"md",autoFocus:!0,placeholder:C,value:t,onKeyPress:e=>{"Enter"!==e.key||!(t.length>0)||r||e.shiftKey||(e.preventDefault(),n())},onChange:e=>i(e.target.value),paddingInlineEnd:12})}),(0,s.jsx)(J.Tz,{placement:"top",label:(0,s.jsxs)(tI.T,{spacing:0,children:[(0,s.jsx)(m.x6,{id:"4k2VbT"}),!h&&(0,s.jsx)(l.E,{color:"gray.400",children:(0,s.jsx)(m.x6,{id:"jxCfNz",components:{0:(0,s.jsx)(tR.G,{type:"chatSuggestion",ml:0})}})}),(0,s.jsx)(J.iM,{shortcut:"Enter"})]}),children:(0,s.jsx)(H.K,{"aria-label":"Send message",isDisabled:!t||r,size:"sm",h:rO,w:rO,variant:"solid",icon:(0,s.jsx)(x.g,{icon:tA.fmP,fixedWidth:!0}),onClick:n})})]})},rD=v.createContext({scrollToBottom:()=>{},onClose:()=>{}}),rP=()=>v.useContext(rD);var rz=i(76083),rM=i(42142),rN=i(59684),rF=i(79555),rL=i(66634),rV=i(73581),rW=i(12562),rG=i(47314),rB=i(75703);class rU extends rL.a{async runPrompt(e){let{input:t,context:i,variables:n,trackFns:s,retries:r=2}=e,o=await (0,rV.U)(t,i.interactionId,{timeout:rW.of.get("aiRequestTimeouts").basicReply});if(!o)throw Error("Couldn't get response from prompt");if((0,rG.t)(o)||(null==o?void 0:o.includes("```"))){if(r<=0)throw new rN.K$("Did not receive proper response after retries",{chatMessage:"Sorry, I am having trouble understanding. Could you try asking in a different way?",inputMessage:i.message,resp:o,interactionId:i.interactionId});return s.trackRequestRetry({interactionId:i.interactionId,retriesRemaining:r,resp:o}),this.runPrompt({input:t,context:i,variables:n,trackFns:s,retries:r-1})}return o}async run(e){let{context:t,addMessage:i,history:n,trackFns:s,provider:r}=e,o={message:t.message},l=(0,rB.K)(n||[]),a=this.prompt.prepare({variables:o,history:l,params:{provider:r},interactionId:t.interactionId}),d=await this.runPrompt({input:a,context:t,variables:o,trackFns:s,retries:1});s.trackRequestComplete({taskContext:t,outputMessage:d}),i({from:"Designer",type:"text",message:d,resp:d,interactionId:t.interactionId})}constructor(e){super(e),this.prompt=e.prompt}}let rH=[new rU({key:"CHAT",description:"A general chat message, or a request that doesn't fit any of the previous categories",classifyExamples:["hi how are you","hdfoho;safjw","help there are bees everywhere","great job!","this looks ugly"],prompt:new rF.F({systemPromptOperation:ik.mc.BasicReplyChatSystem,userPromptOperation:ik.mc.BasicReplyChatUser,variables:["message"],params:{maxTokens:150,temperature:0}})})],rK=e=>rH.find(t=>t.key===e),rJ=e=>!!rH.find(t=>t.key===e);var rq=i(7158),rY=i(28630),r$=i(3819);class rX extends rL.a{async run(e){var t,i;let{addMessage:n,context:s,trackFns:r,history:o,imageOptions:l}=e,a=performance.now(),d=r$.V.prepare({variables:{input:s.message,html:s.editorContext.cardContent.html}}),c=await (0,rV.U)(d,s.interactionId);if(!c)throw Error("Couldn't get response from prompt");let u={prompt:c,count:1,model:null!=(t=null==l?void 0:l.model)?t:R.of.get("aiGeneratedImagesDefaultModel"),stylePrompt:null==l?void 0:l.stylePrompt},x=rY.Rz[u.model],h={interactionId:s.interactionId,interface:"generate-image",provider:x.provider,streaming:!1,inputContent:c,docId:s.docId,generateImageOptions:u};try{(0,tU.rl)(h);let e=null==(i=(0,et.bs)())?void 0:i.id,t=await (0,rY.hU)({interactionId:s.interactionId,docId:s.docId,workspaceId:e,...u});if(0===t.length)throw Error("No images generated");n({from:"Designer",type:"generateImage",suggestions:t,interactionId:s.interactionId,isFirstGenerationInSession:!o||!o.some(e=>"generateImage"===e.type),message:s.message}),(0,tU.Yh)({...h,latency:performance.now()-a,generateImageUrls:t.map(e=>e.attrs.src)}),r.trackRequestComplete({taskContext:s,outputContent:JSON.stringify(t),outputMessage:""})}catch(e){console.error("(caught) [AIGenerateImage] error:",e),(0,tU.tB)({...h,latency:performance.now()-a,errorName:"GenerateImageError",errorMessage:e.message,outputMessage:""})}}constructor(e){super(e)}}let rQ=[new rX({key:"GENERATE_IMAGE",description:"Generate an image using AI.",classifyExamples:["generate an image of a panda eating starbursts","add an AI image that shows people talking and working","use AI to make a picture of a laptop on a windowsill","generate an image of a watercolor painting of a flower vase"],classifyReply:"Sure, I'll generate an image of a panda..."})],rZ=e=>rQ.find(t=>t.key===e),r0=e=>!!rZ(e);var r1=i(83605),r6=i(90010),r2=i(9922),r5=i.n(r2),r4=i(91242),r3=i(63562);class r8{isApplied(e){return!!(0,tf.W0)(e,this.cardId)}getPreviewJson(e){let t=e.state.tr;this.transact(e,t);let i=r5()(t.doc.toJSON());return(0,r3.sT)(i,this.cardId)}apply(e){if(this.isApplied(e))return void console.debug("[InsertCardModification] NOT applying modification, card already exists with cardId=".concat(this.cardId),{modification:this});let t=e.state.tr;this.transact(e,t),console.debug("[InsertCardModification] Applying modification",{modification:this}),e.view.dispatch(t),(0,tV.OM)({editor:e,cardId:this.cardId})}transact(e,t){let i=(0,tf.W0)(e,this.afterCardId);if(!i)return null;let n=(0,r3.ni)(e,this.content),s=i.pos+i.node.nodeSize;t.insert(s,n.content.firstChild);let r=(0,r4.s)(t.doc.resolve(s),1);return t.setSelection(r),{from:s,to:s+t.doc.nodeAt(s).nodeSize}}getContentForTracking(){return this.content}constructor(e){this.type="insert-card",this.description=e.description,this.cardId=e.cardId,this.afterCardId=e.afterCardId,this.content=e.content}}class r7{isApplied(e){return!(0,tf.W0)(e,this.cardId)}getPreviewJson(e){return null}apply(e){let t=e.state.tr,i=(0,tf.W0)(e,this.cardId);i&&(t.delete(i.pos,i.pos+i.node.nodeSize),console.debug("[RemoveCardModification] Applying modification",{modification:this}),e.view.dispatch(t))}getContentForTracking(){return this.cardId}constructor(e){this.type="remove-card",this.description=e.description,this.cardId=e.cardId}}var r9=i(30481);class oe extends r9.dV{async getResponseMessages(e){let{editor:t,context:i,response:{suggestion:n,message:s,raw:r}}=e;if(!n)throw new rN.tF("No card content returned",{interactionId:i.interactionId,resp:r,chatMessage:s||(0,r9.Fz)(),inputMessage:i.message});let o=(0,r6.IZ)((0,r6.lI)(t)),{aiOptions:l}=(0,r6.lI)(t),a=null==l?void 0:l.imageOptions,d=await (0,r1.Lm)(n,{loadImages:!0,docFormatKey:o.formatType,cardIndex:1,imageOptions:a||{provider:"web"},theme:i.editorContext.theme,context:{docId:i.docId,workspaceId:(0,et.gx)(),interactionId:i.interactionId}}),c=d.attrs.id,u=new r8({description:"New Card",content:{type:"json",json:[d]},cardId:c,afterCardId:i.editorContext.card.cardId}),x={label:"New card",modification:u,jsonContentPreview:u.getPreviewJson(t)},h=new r7({description:"Remove card",cardId:c}),m={label:"Remove card",modification:h,jsonContentPreview:h.getPreviewJson(t)},p={from:"Designer",type:"suggestContent",resp:r,message:s||"How about this?",suggestions:[x,m],interactionId:i.interactionId};return console.debug("[addCard]",{insert:x,remove:m,message:s,html:n,content:d}),{messages:[p],suggestionToApply:x}}}let ot=new oe({key:"ADD_CARD",description:"Add a new card after the current one",classifyExamples:["add a new slide","add a card describing our mission","i want a new section for leadership development","make another card","on a new card compare the two options in a table"],classifyReply:"Ok, I'll start writing a new card...",prompt:new rF.F({systemPromptOperation:ik.mc.AddCardSystem,userPromptOperation:ik.mc.AddCardUser,variables:["html","message","outline"],params:{temperature:.7,maxTokens:1e3}})});var oi=i(17275);class on{isApplied(e){let t=(0,tf.W0)(e,this.cardId);return t?t.node.attrs.layout===this.layout:(console.error("[SetCardLayoutModification.apply] Could not find card to update: ".concat(this.cardId,", maybe deleted")),!1)}getPreviewJson(e){let t=e.state.tr;this.transact(e,t);let i=r5()(t.doc.toJSON()),n=(0,r3.sT)(i,this.cardId);return console.debug("[SetCardLayoutModification.getPreviewJson] result",n),n}apply(e){if(this.isApplied(e))return void console.debug("[SetCardLayoutModification] NOT applying modification, card already has layout=".concat(this.layout),{modification:this});let t=e.state.tr;this.transact(e,t),console.debug("[SetCardLayoutModification] Applying modification",{modification:this}),e.view.dispatch(t),(0,tV.OM)({editor:e,cardId:this.cardId})}transact(e,t){let i=(0,tf.W0)(e,this.cardId);if(!i)return void console.error("[SetCardLayoutModification.apply] Could not find card to update: ".concat(this.cardId,", maybe deleted"));(0,oi.c)(e,t,i.pos,this.layout)}getContentForTracking(){return this.layout}constructor(e){this.type="set-card-layout",this.description=e.description,this.cardId=e.cardId,this.layout=e.layout}}let os=()=>p.Ru._({id:"ppX7+s"});class or extends r9.dV{async getResponseMessages(e){let{editor:t,context:i,rangeId:n,response:{suggestion:s,raw:r,message:o}}=e;if(!s)throw new rN.tF("No card layout returned",{resp:r,chatMessage:os(),inputMessage:i.message,interactionId:i.interactionId});if(!(0,tf.pI)(s))throw console.error("Invalid card layout:",s),new rN.tF("Invalid card layout: ".concat(s),{resp:r,chatMessage:os(),inputMessage:i.message,interactionId:i.interactionId});let l=new on({description:p.Ru._({id:"nyQWMb"}),cardId:i.editorContext.card.cardId,layout:s}),a={label:p.Ru._({id:"nyQWMb"}),modification:l,jsonContentPreview:l.getPreviewJson(t)},d=new on({description:p.Ru._({id:"HxF6Fk"}),cardId:i.editorContext.card.cardId,layout:i.editorContext.card.attrs.layout}),c={label:p.Ru._({id:"HxF6Fk"}),modification:d,jsonContentPreview:d.getPreviewJson(t)};return{messages:[{from:"Designer",type:"suggestContent",resp:r,message:o||p.Ru._({id:"pMSbe+"}),interactionId:i.interactionId,suggestions:[a,c]}],suggestionToApply:a}}}let oo=new or({key:"MOVE_ACCENT_IMAGE",description:"Move or remove the accent image of the card. Use ADD_IMAGE to add accent images.",classifyExamples:["move the sand dune to the left","remove the cover photo"],classifyReply:"Ok, I will move the accent image to the left...",getTaskTarget:e=>e.card,prompt:new rF.F({systemPromptOperation:ik.mc.ChangeAccentImageLayoutSystem,userPromptOperation:ik.mc.ChangeAccentImageLayoutUser,variables:["html","message"],params:{temperature:.2,maxTokens:100}}),checkEnabled:e=>"blank"!==e.card.attrs.layout}),ol=new rF.F({systemPromptOperation:ik.mc.ChangeContentSystem,userPromptOperation:ik.mc.ChangeContentUser,variables:["html","message","outline"],params:{temperature:.7,maxTokens:1e3}}),oa=new r9.dV({key:"CHANGE_CONTENT",description:"Rephrase, summarize, expand, change text formatting, add content, or express ideas differently.",classifyExamples:["condense this to just the key points","say this like a pirate","make this more formal","add a box about health benefits","add more text please","make the bullets red","make the text bigger","fill in the last  column","write something about ___","add ___ to the table"],classifyReply:"Ok, I'll try making it shorter...",prompt:ol,jsxPrompt:"ChatChangeContent"});var od=i(92053),oc=i(45666),ou=i(20196),ox=i(8327);let oh=new rF.F({systemPromptOperation:ik.mc.RateImagesSystem,userPromptOperation:ik.mc.RateImagesUser,variables:["dataset"],params:{temperature:.1,maxTokens:100}}),om=async(e,t)=>{let i=e.map((e,t)=>{let{description:i,query:n}=e;return"".concat(t+1,": ").concat(i,": ").concat(n)}).join("\n"),n=oh.prepare({variables:{dataset:i},history:[]});return(await (0,rV.U)(n,t,{timeout:rW.of.get("aiRequestTimeouts").rateImages})||"").split("\n").map(e=>{let[,t]=e.split("-");return Number(t.trim())})};class op extends r9.dV{async getResponseData(e,t){let i=(await Promise.all(e.replaceAll(this.key,"").split("\n").map(async e=>{let t=e.split(",").map(e=>e.trim()).slice(0,2);return await (0,oc.r)({queries:t,count:ou.s.count,provider:"web",prefetch:!0,options:{gammaFeature:"aiChat"}})}))).flat();console.debug("[SuggestImagesTask][getResponseData] allResults",i);let n=i.map(e=>{let{image:t,query:i}=e,n=(0,ox.TF)(t,i,"web");return{description:(0,ox.ve)(n)||"",query:i}});console.debug("[SuggestImagesTask][imageRatingData]",{imagesToRate:n});try{let e=await om(n,t);if(console.debug("[SuggestImagesTask][imageRatingValues]",{imageRatingValues:e}),e.length!==i.length)throw Error("Image rating values length does not match allResults length");let s=i.map((t,i)=>({...t,rating:e[i]})).sort((e,t)=>t.rating-e.rating);return console.debug("[SuggestImagesTask][allResultsSorted]",{allResultsSorted:s}),s}catch(e){console.warn("[SuggestImagesTask] Error rating images. Returing unsorted results.",e)}return i}async getResponseMessages(e){let{context:t,response:{message:i,raw:n,suggestion:s}}=e;if(!s)throw new rN.tF("No image results were returned",{resp:n,inputMessage:t.message,chatMessage:i||"I'm sorry, I wasn't able to find any images for this.",interactionId:t.interactionId});return{messages:[{from:"Designer",type:"suggestImages",suggestions:await this.getResponseData(s,t.interactionId),resp:n,interactionId:t.interactionId,message:i||"Here are some suggestions:"}]}}}let og=new op({key:"ADD_IMAGE",description:"Add images, or replace an existing image. Do not use for moving or removing images.",classifyExamples:["add a picture of a bus","find some different images","this needs a pic","show me dolphins","find a meme of stonks","give me more images","add a background image","i need a graph of population over time"],classifyReply:"Let me look for some good bus pictures...",getTaskTarget:e=>e.defaultRange,prompt:new rF.F({systemPromptOperation:ik.mc.SuggestImagesSystem,userPromptOperation:ik.mc.SuggestImagesUser,variables:["html","message"],params:{temperature:.7,maxTokens:500}})});var oj=i(8584);class of extends r9.dV{getResponseData(e){let t=[];for(let i of e.matchAll(/^\/\/\s*(.*)$\n(.*)$/gm)){let e=i[1],n=i[2];t.push({reason:e,value:n})}return t}async getResponseMessages(e){let{editor:t,context:i,rangeId:n,response:{suggestion:s,message:r,raw:o}}=e;if(!s)throw new rN.tF("No suggestions found in response",{interactionId:i.interactionId,inputMessage:i.message,chatMessage:r||p.Ru._({id:"7KKeOM"})});let l=this.getResponseData(s).map(e=>{let i=new oj.m(t,{description:e.reason,content:{type:"html",html:e.value},rangeId:n});return{...e,modification:i}}),a=this.determineTaskTarget(i.editorContext).html,d=new oj.m(t,{description:p.Ru._({id:"HxF6Fk"}),content:{type:"html",html:a},rangeId:n}),c={reason:p.Ru._({id:"HxF6Fk"}),value:a,modification:d};return{messages:[{from:"Designer",type:"suggestText",message:r||p.Ru._({id:"3YHvwF"}),resp:o,suggestions:[...l,c],interactionId:i.interactionId}]}}}let ob=new of({key:"SUGGEST_TEXT",description:"Open-ended request to rephrase a sentence or paragraph",classifyExamples:["write a better headline","How else could i say this?","this feels too corporate","suggest a more engaging way to say this","give me a more interesting description"],classifyReply:"Let me think of some other headlines...",getTaskTarget:e=>e.selectionRange,prompt:new rF.F({systemPromptOperation:ik.mc.SuggestTextSystem,userPromptOperation:ik.mc.SuggestTextUser,variables:["html","message"],params:{temperature:.7,maxTokens:1e3}}),checkEnabled(e){let{selection:t}=e,i=t instanceof rR.U3,n=t.$from.parent.eq(t.$to.parent);return i&&!t.empty&&t.to-t.from<800&&n}});class ov{apply(e,t){t.setThemeWithAccentImages(this.themeId)}isApplied(e,t){return t.isThemeApplied(this.themeId)}getPreviewJson(){return null}getContentForTracking(){return this.themeId}constructor(e,t){this.type="change-theme",this.description=t.description,this.themeId=t.themeId}}class oy extends r9.dV{async getResponseMessages(e){let{editor:t,context:i,response:{raw:n,suggestion:s,message:r},themeModificationController:o}=e,{currentThemeId:l,isValidTheme:a}=o,d=null==s?void 0:s.split("\n"),c=await this.getFilteredSuggestions({ids:d,idToRemove:l,editor:t,isValid:a});if(0===c.length)throw new rN.tF("[SuggestContentTask] No themes provided in prompt response",{resp:n,chatMessage:p.Ru._({id:"GNHk+9"}),inputMessage:i.message,interactionId:i.interactionId});let u={label:p.Ru._({id:"HxF6Fk"}),themeId:l,modification:new ov(t,{description:p.Ru._({id:"HxF6Fk"}),themeId:l}),isOriginal:!0};return{messages:[{from:"Designer",type:"suggestThemes",resp:n,message:r||p.Ru._({id:"pMSbe+"}),suggestions:[...c,u],interactionId:i.interactionId}],suggestionToApply:c[0]}}async getFilteredSuggestions(e){let{ids:t,idToRemove:i,editor:n,isValid:s}=e;return t&&0!==t.length?(await Promise.all(t.map(e=>s(e).then(t=>t?e:null)))).filter(e=>null!==e).filter(e=>e!==i).map(e=>{let t=new ov(n,{description:p.Ru._({id:"nyQWMb"}),themeId:e});return{label:p.Ru._({id:"nyQWMb"}),themeId:e,modification:t}}):[]}}let ow=new oy({key:"SUGGEST_THEME",description:"Suggest a theme for the deck. This task will suggest themes based on the deck content or the prompt",classifyExamples:["change the theme","give me a blue theme","change the color palette","make this a dark theme","use a more colorful theme","let's change the look and the feel","change the theme to lilac and periwinkle","i'd like it to look more cheerful and welcoming"],classifyReply:"Let me find some themes...",prompt:new rF.F({systemPromptOperation:ik.mc.SuggestThemeSystem,userPromptOperation:ik.mc.SuggestThemeUser,variables:["html","message","outline"],params:{temperature:.7,maxTokens:100,model:"gpt-4-1106-preview"}})}),oC=[oo,od.t,oa,ob,og,ot,ow],ok=e=>oC.find(t=>t.key===e),oE=e=>!!oC.find(t=>t.key===e);class oS extends rL.a{async run(e){let{classificationResult:t,addMessage:i,context:n,trackFns:s}=e;i({from:"Designer",type:"unsupported",task:t.classification,message:this.apology,learnMoreLink:this.apologyLink,resp:t.resp,interactionId:n.interactionId}),s.trackRequestComplete({taskContext:n,outputMessage:this.apology})}constructor(e){super(e),this.apology=e.apology,this.apologyLink=e.apologyLink}}let oI=new oS({key:"CHANGE_CARD_BACKGROUND",description:"Change the background of the entire section.",classifyExamples:["make the background red","put a tunnel in the background","remove the background","get rid of the image in the background"],apology:"Sorry, I can't change backgrounds yet, but you can click on a card and change the background yourself. You can also change the document background by clicking Page Setup located at the top left corner of the page."}),oT=new oS({key:"CHANGE_FONT",description:"Change the font family or font style.",classifyExamples:["give me a more playful font","make the headings use arial","change the font to be more readable"],apology:"Sorry, I can't change fonts yet. But you can edit them yourself by creating a custom theme.",apologyLink:"https://gamma.app/public/o2he6ual8noal7u#card-82e40n78edir2x8"}),oA=new oS({key:"RESIZE_IMAGE",description:"Change the size of an image (its dimensions), or crop an image",classifyExamples:["make the image smaller","can you make the cat bigger","crop it so it's just the face","I want the disposition of the photos for more portrait instead of landscape"],apology:"Sorry, I can't resize images yet. But you can do it yourself by clicking on the image and dragging the boxes on the corners, or pressing the crop button above the image."}),oR=new oS({key:"EDIT_IMAGE",description:"Edit the appearance of an image",classifyExamples:["make the image brighter","add a blue border to the image","make the image black and white","add a nice filter to the image"],apology:"Sorry, I can't edit images yet."}),oO=new oS({key:"EXPORT",description:"Export or download the deck into a different a format.",classifyExamples:["download as ppt","make a pdf","export to google slides"],apology:"Sorry, I can't export files yet. However, you can download a PDF yourself by using the Share menu."}),o_=new oS({key:"SPLIT_CARD",description:"Split a card into multiple cards, or move content between cards.",classifyExamples:["break this into two cards","split this up as multiple slides","put the gallery on the next card"],apology:"Sorry, I can't split cards or move things between them yet. However, you can split cards yourself by typing /split inside a card."}),oD=new oS({key:"NEW_DECK",description:"Create a whole new deck",classifyExamples:["i need a presentation about [topic]","write a whole document about animal","make me a landing page about this"],apology:"To make a new deck, go back to the home screen and click New with AI."}),oP=new oS({key:"CHANGE_MULTIPLE_CARDS",description:"Make changes across multiple cards at once",classifyExamples:["I want this entire deck to be summarized","combine the cards together in one","make the whole doc sound more professional","make the deck more consistent","translate all of the cards","change the font for the whole deck"],apology:"Sorry, I can only change one card at a time right now."}),oz=new oS({key:"CHANGE_ANOTHER_CARDS",description:"Make changes for an unselected card",classifyExamples:["make the same change for the next card","do the same thing for the other cards","change the last card too","make this layout match the layout of the previous card","copy the first section from the last card here"],apology:"Sorry, I can only look at one card at a time right now. You can have me edit other cards by clicking on them."}),oM=new oS({key:"ADD_VIDEO",description:"Add a video or replace an existing video",classifyExamples:["add a youtube video about scrum","find videos of cats","i need more videos"],apology:"Sorry, I can't search for videos yet. You can embed video by copying the URL and pasting it into the card directly."}),oN=new oS({key:"ADD_FOOTNOTE",description:"Add a footnote to a card, or change footnotes",classifyExamples:["add a biography for him in a footnote","put the details into footnotes"],apology:"Sorry, I haven't learned to add footnotes yet. You can make footnotes by highlighting text and clicking the footnote button in the menu."}),oF=new oS({key:"MOVE_CARD",description:"Move a card to a different position in the deck",classifyExamples:["shift the slide to the top","move this card to the bottom"],apology:"Sorry, I haven't learned to move cards yet. You can move them by hovering on the table of contents on the left side of the screen and dragging them around."}),oL=new oS({key:"ADD_CHART",description:"Add a chart, diagram, or graph",classifyExamples:["put this information into a scatter plot","add a card about market share using a pie chart","i need to display this as a flow chart","create a diagram illustrating the interactions and relationships","can you change the card to have a line graph","turn this into a gantt chart","could you do this as a funnel diagram"],apology:"Sorry, Gamma doesn't support charts yet. You can paste in images of charts from other tools, or type /diagram in the editor to draw your own."}),oV=new oS({key:"ANIMATION",description:"Add animations to a card or edit animations",classifyExamples:["animate transitions","make the text appear one by one","fade in the images","make the bullets fly in"],apology:'Sorry, Gamma doesn\'t support custom animations yet. You can animate line by line by going into Present mode and pressing S for "spotlight".'}),oW=[oI,oT,oA,oR,oO,o_,oD,oP,oz,oM,oN,oF,oL,oV,new oS({key:"FOLLOW_LINK",description:"Read content from an external website",classifyExamples:["go to this website and add the content to this card http://www.example.com/","here is his linkedin page now add the details https://www.linkedin.com/...","add the images from https://medium.com/posts/2022/9/6/..."],apology:"Sorry, I'm not able to open links and read the content."}),new oS({key:"SHADOW",description:"Add or edit shadow for an element or text",classifyExamples:["add a drop shadow to the image","make the text have a shadow","make the button have a darker shadow"],apology:"Sorry, I'm not able to add custom shadows yet."})],oG=e=>oW.find(t=>t.key===e),oB=e=>!!oG(e),oU=new rF.F({variables:["message","taskList","ackExamples","html","cardHtml"],systemPromptOperation:ik.mc.ClassifySystem,userPromptOperation:ik.mc.ClassifyUser,params:{maxTokens:100,temperature:.2}}),oH=[...oC,...oW,...rH,...rQ],oK="\uD83D\uDE14 Sorry, I didn't understand your request. Could you please try asking a different way?",oJ=async e=>{let t,{message:i,context:n,history:s,provider:r}=e,{ackExamples:o,taskList:l,enabledTasks:a}=o$(oH,n.editorContext),d=R.of.get("aiChatJsx"),c=oX(s),u={message:i,ackExamples:o,taskList:l,html:n.editorContext.defaultRange.html,cardHtml:n.editorContext.card.html},x=oU.prepare({variables:u,params:{provider:r},history:c});console.debug("[AIChat classify] Getting classification",{classifyHistory:c,input:x});let h=await (0,rq.wo)(x);if(d){let{promise:e}=(0,tB.i4)({variables:{message:u.message,html:u.html,cardHtml:u.cardHtml,taskList:u.taskList,ackExamples:u.ackExamples,history:c.map(e=>({role:e.role===ik.VDI.Assistant?"assistant":"user",content:e.content||""}))},interactionId:n.interactionId,workspaceId:n.workspaceId,promptKey:"ChatClassify",opts:{timeout:R.of.get("aiRequestTimeouts").classify}});t=await e}else t=await (0,rV.U)(h,n.interactionId,{timeout:R.of.get("aiRequestTimeouts").classify});let m=oY(t,a);return(m||(console.debug("Failed classification, trying again...",{resp:t,parsedResp:m}),m=oY(t=await (0,rV.U)(x,n.interactionId),a)),m)?(console.debug("[AIChat classify] Got classification",{resp:t,parsedResp:m}),m):{type:"UNKNOWN",classification:"UNKNOWN",ack:oK,resp:t||""}},oq="Ok, I'll get right on it.",oY=(e,t)=>{var i;if(!e)return;let n=e.split("\n"),s=null==(i=n[0])?void 0:i.trim().toUpperCase();if(!t.find(e=>e.key===s))return;let r=n[1];return{classification:s.trim(),ack:r.includes(s.trim())?oq:r||("UNKNOWN"!==s?oq:oK),resp:e,type:"CLASSIFICATION"}},o$=(e,t)=>{let i=e.filter(e=>!t||!e.checkEnabled||e.checkEnabled(t));return{taskList:i.map(e=>{var t;return"".concat(e.key,": ").concat(e.description,"\n").concat(null==(t=e.classifyExamples)?void 0:t.map(e=>"- ".concat(e)).join("\n"))}).join("\n\n"),ackExamples:i.filter(e=>e.classifyExamples&&e.classifyExamples.length>0&&e.classifyReply).map(e=>"Request:\n".concat(e.classifyExamples[0],"\nResponse:\n").concat([e.key,e.classifyReply].join("\n"))).join("\n\n"),enabledTasks:i}},oX=e=>e.slice(-7).map(e=>"User"===e.from?{role:ik.VDI.User,content:e.message}:e.isClassification?{role:ik.VDI.Assistant,content:e.resp}:null).filter(e=>!!e),oQ=()=>{let{editor:e}=(0,tE.m)(),t=null==e?void 0:e.gammaDocId,{updateDocThemeWithAccentImages:i}=(0,ee.Kt)({docId:t,editor:e}),n=(0,eu.GV)(ex.r2),s=(0,v.useCallback)(e=>n===e,[n]),r=(0,ik.H4n)();return{setThemeWithAccentImages:i,isThemeApplied:s,currentThemeId:n,isValidTheme:(0,v.useCallback)(async e=>{try{let{data:t}=await r.query({query:ik.xAr,variables:{id:e},returnPartialData:!1});return(null==t?void 0:t.theme)!==null}catch(e){return console.warn("[useThemeModificationController.isValidTheme] Error checking if theme is valid",e),!1}},[r])}},oZ=()=>(0,R.u)("azureOpenAI")?ik.eON.Azure:ik.eON.Openai;var o0=i(66380),o1=i(98673);let o6=()=>{let e=(0,eu.CU)(),t=(0,eu.jL)(),i=(0,v.useCallback)((e,i)=>{t((0,o1.F1)({taskContext:e,provider:i})),(0,tU.rl)({interactionId:e.interactionId,interface:"chat",inputMessage:e.message,docId:e.docId,cardId:e.editorContext.card.cardId,provider:i})},[t]),n=(0,v.useCallback)(e=>{t((0,o1.Q6)(e))},[t]),s=(0,v.useCallback)(e=>{t((0,o1.lb)(e))},[t]),r=(0,v.useCallback)(i=>{t((0,o1.G8)(i));let{taskContext:n}=i,s=(0,o1.SY)(n.interactionId)(e.getState());if(!s)return void console.error("[trackRequestComplete] no data found for interactionId",n.interactionId);(0,tU.UL)({interactionId:n.interactionId,interface:"chat",docId:n.docId,cardId:s.cardId,classification:s.classification,provider:s.provider,inputMessage:n.message,inputContent:s.inputContent,rawResponse:i.resp,outputMessage:s.outputMessage,outputContent:s.outputContent,latency:performance.now()-n.startTime,timeToComplete:performance.now()-n.startTime})},[t,e]),o=(0,v.useCallback)(t=>{let{outputMessage:i,errorMessage:n,errorCode:s,interactionId:r,resp:o,errorName:l}=t,a=(0,o1.SY)(r)(e.getState());if(!a)return void console.error("[trackRequestError] no data found for interactionId",r);(0,tU.tB)({interactionId:r,interface:"chat",docId:a.docId,cardId:a.cardId,classification:a.classification,provider:a.provider,inputMessage:a.message,inputContent:a.inputContent,outputMessage:i,errorName:l,errorMessage:n,errorCode:s,rawResponse:o,latency:performance.now()-a.startTime})},[e]),l=(0,v.useCallback)(t=>{let{interactionId:i,retriesRemaining:n,resp:s}=t,r=(0,o1.SY)(i)(e.getState());if(!r)return void console.error("[trackRequestRetry] no data found for interactionId",i);(0,tU.zA)({interactionId:i,interface:"chat",classification:r.classification,docId:r.docId,cardId:r.cardId,provider:r.provider,inputMessage:r.message,inputContent:r.inputContent,rawResponse:s,retriesRemaining:n})},[e]),a=(0,v.useCallback)(t=>{let{interactionId:i,suggestionContent:n,suggestionType:s,suggestionLabel:r,autoApplied:o}=t,l=(0,o1.SY)(i)(e.getState());if(!l)return void console.error("[trackSuggestionApplied] no data found for interactionId",i);let a="string"==typeof n?n:"html"===n.type?n.html:"json"===n.type?n.json:void 0;(0,tU.hj)({interactionId:i,interface:"chat",docId:l.docId,cardId:l.cardId,classification:l.classification,provider:l.provider,inputMessage:l.message,inputContent:l.inputContent,outputMessage:l.outputMessage,outputContent:l.outputContent,suggestionType:s,suggestionLabel:r,suggestionContent:a,autoApplied:!!o})},[e]);return(0,v.useMemo)(()=>({trackClassification:n,trackRequestComplete:r,trackInputContent:s,trackRequestSent:i,trackRequestError:o,trackRequestRetry:l,trackSuggestionApplied:a}),[n,s,r,i,o,l,a])},o2=e=>{let{editor:t,addMessage:i,getMessageHistory:n}=e,s=(0,eu.CU)(),r=o6(),{hasEnoughCreditsToChat:o}=(0,tH.B9)(),l=oQ(),a=oZ(),d=(0,eu.jL)(),c=(0,eu.GV)(rM.Hw),{imageModel:u,imageStyle:x}=(0,o0.V)(),h=(0,v.useCallback)(e=>{d((0,rM.Lx)(e))},[d]);return{sendMessage:(0,v.useCallback)(async e=>{var d;let c,m,p,{message:g}=e;if(!t)return;let j=(0,tU.$F)(),f=null==(d=(0,et.bs)(t.gammaOrgId))?void 0:d.id;try{c=(0,tq.s)(t,s),m={interactionId:j,startTime:performance.now(),message:g,editorContext:c,docId:t.gammaDocId,workspaceId:f},console.debug("[AIChat] starting interaction",m);let e=n();i({from:"User",type:"text",message:g,interactionId:j});let d=R.of.get("aiChatJsx")?"amazon":a;if(r.trackRequestSent(m,d),!o)return;h("classifying");let b=await oJ({message:g,context:m,history:e,provider:a});if(r.trackClassification({taskContext:m,classification:b.classification}),h("fetching"),console.debug("[AIChat] Starting task",{taskContext:m,classification:b.classification,history:e}),"UNKNOWN"===b.type)i({from:"Designer",type:"text",message:b.ack,resp:b.resp,isClassification:!0,interactionId:j}),r.trackRequestComplete({taskContext:m,outputMessage:b.ack});else if(rJ(b.classification)){let n=rK(b.classification);await n.run({editor:t,addMessage:i,context:m,classificationResult:b,history:e,trackFns:r,themeModificationController:l,provider:a})}else if(oB(b.classification)){let n=oG(b.classification);await n.run({editor:t,context:m,addMessage:i,classificationResult:b,history:e,trackFns:r,themeModificationController:l,provider:a})}else if(oE(b.classification)){i({from:"Designer",type:"text",message:b.ack||"Sure, let me see what I can do...",resp:b.resp,isClassification:!0});let e=n(),s=ok(b.classification);await s.run({editor:t,context:m,addMessage:i,classificationResult:b,history:e,trackFns:r,themeModificationController:l,provider:a}),p="chatSuggestion"}else if(r0(b.classification)){i({from:"Designer",type:"text",message:b.ack||"Sure, let me see what I can do...",resp:b.resp,isClassification:!0});let n=rZ(b.classification);await n.run({editor:t,context:m,addMessage:i,classificationResult:b,history:e,trackFns:r,themeModificationController:l,provider:a,imageOptions:{model:u,stylePrompt:x}}),p="generateImage"}}catch(t){console.log("[AIChat.sendMessage] ERROR: ".concat(t.message,"}"),{err:t,taskContext:m});let e="Sorry, something unexpected happened. Please try again.";if(t instanceof rN.Bb){let n=t.opts.chatMessage||e;i({from:"Designer",type:"text",message:n,resp:t.opts.resp,interactionId:j}),r.trackRequestError({errorName:t.name,interactionId:j,outputMessage:n,errorMessage:t.message,resp:t.opts.resp})}else nR.Cp(t),i({from:"Designer",type:"text",message:e,interactionId:j}),r.trackRequestError({errorName:t.name,interactionId:j,outputMessage:e,errorMessage:t.message,errorCode:(0,i$.vI)(t)[0]})}p&&(0,tK.w)(p,void 0,j),h("idle")},[t,s,n,i,r,o,l,a,h,u,x]),status:c}};var o5=i(17496);let o4=(0,v.memo)(e=>{let{message:t}=e,i=(0,iI.d)(),n=(0,Z.st)(),{scrollToBottom:r}=rP(),l=(0,v.useRef)(null),[d,c]=(0,v.useState)(!1),[h,g]=(0,v.useState)(null);(0,v.useEffect)(()=>{if(d){var e;null==(e=l.current)||e.focus(),null==r||r()}},[d,r,n]);let j=t.interactionId,f=t.type,b=(0,v.useCallback)(e=>{g(e),c(!0),null==n||n.track(Z.VV.AI_SUGGESTION_FEEDBACK,{interactionId:j,rating:e,type:f})},[n,j,f]),y=(0,v.useCallback)(()=>{var e;c(!1),null==n||n.track(Z.VV.AI_SUGGESTION_FEEDBACK,{interactionId:j,rating:h,type:f,feedback:null==(e=l.current)?void 0:e.value}),l.current&&(l.current.value=""),i({title:(0,s.jsx)(m.x6,{id:"d6N994"}),description:(0,s.jsx)(m.x6,{id:"YVJNHr",values:{GAMMA_PROPER_NOUN:ej.On}}),status:"success",duration:5e3,isClosable:!0})},[i,n,j,h,f]);return(0,s.jsxs)(o.B,{width:"100%",children:[(0,s.jsxs)(e8.z,{children:[(0,s.jsx)(tT.h,{}),(0,s.jsxs)(e7.e,{size:"xs",variant:"ghost",colorScheme:"blackAlpha",children:[(0,s.jsx)(J.Tz,{label:(0,s.jsx)(m.x6,{id:"kR82DG"}),placement:"top",children:(0,s.jsx)(H.K,{"aria-label":"thumbs down",color:"poor"===h?"red.600":void 0,borderWidth:"1px",borderColor:"poor"===h?"red.600":"transparent",bg:"poor"===h?"red.100":void 0,_hover:{bg:"poor"===h?"red.200":"blackAlpha.100"},icon:(0,s.jsx)(x.g,{icon:u.lS9}),onClick:()=>{b("poor")}})}),(0,s.jsx)(J.Tz,{label:(0,s.jsx)(m.x6,{id:"y1GvbS"}),placement:"top",children:(0,s.jsx)(H.K,{"aria-label":"thumbs up",color:"good"===h?"green.600":void 0,borderWidth:"1px",borderColor:"good"===h?"green.600":"transparent",bg:"good"===h?"green.100":void 0,_hover:{bg:"good"===h?"green.200":"blackAlpha.100"},icon:(0,s.jsx)(x.g,{icon:u.Wcv}),onClick:()=>{b("good")}})})]})]}),(0,s.jsx)(o5.S,{in:d,children:(0,s.jsxs)(o.B,{children:[(0,s.jsx)(rA.T,{ref:l,bg:"white",size:"sm",placeholder:p.Ru._({id:"ZVGh9y"})}),(0,s.jsxs)(e7.e,{children:[(0,s.jsx)(tT.h,{}),(0,s.jsx)(a.$,{onClick:()=>c(!1),size:"xs",variant:"ghost",colorScheme:"blackAlpha",children:(0,s.jsx)(m.x6,{id:"6Uau97"})}),(0,s.jsx)(a.$,{onClick:y,size:"xs",variant:"plain",children:(0,s.jsx)(m.x6,{id:"RoafuO"})})]})]})})]})});o4.displayName="SuggestionFeedback";let o3=(0,v.memo)(e=>{let{message:t,editor:i}=e,n=t.suggestions.slice(0,1),r=(0,eu.jL)(),d=(0,eu.CU)(),c=(0,v.useCallback)(()=>(0,rM.Lt)(d.getState()),[d]),{sendMessage:u}=o2({addMessage:(0,v.useCallback)(e=>{let t={timestamp:Date.now(),...e};r((0,rM.tj)({message:t}))},[r]),getMessageHistory:c,editor:i});return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(rS.q,{children:(0,s.jsxs)(o.B,{align:"start",children:[(0,s.jsx)(l.E,{children:(0,s.jsx)(m.x6,{id:"A9MA7Q",components:{0:(0,s.jsx)(a.$,{variant:"link",onClick:()=>{u({message:t.message||""})}})}})}),(0,s.jsx)(l.E,{color:"gray.500",textAlign:"center",fontSize:"xs",children:(0,s.jsx)(m.x6,{id:"ygs5tU"})}),(0,s.jsx)(nM.r,{columns:2,spacing:2,w:"100%",children:n.map(e=>(0,s.jsx)(nz._,{src:e.attrs.src,onDragStart:()=>{i&&(0,rz.fS)(i,{type:"image",attrs:e.attrs})},h:36,draggable:!0,w:"100%",borderRadius:"md",transitionDuration:"normal",transitionProperty:"common",objectFit:"cover",cursor:"grab",_hover:{shadow:"outline"}},e.attrs.src))}),(0,s.jsx)(o4,{message:t})]})}),t.isFirstGenerationInSession&&(0,s.jsx)(rS.q,{children:(0,s.jsx)(l.E,{children:(0,s.jsx)(m.x6,{id:"cszDVM",values:{GAMMA_ARTIFACT_PROPER_NOUN:ej.TP}})})})]})});o3.displayName="GenerateImage";var o8=i(73272),o7=i.n(o8);let o9=()=>[p.Ru._({id:"91gjMr"}),p.Ru._({id:"PHyjBQ"}),p.Ru._({id:"zhFV/H"}),p.Ru._({id:"4ReFRy"}),p.Ru._({id:"aepNQh"}),p.Ru._({id:"fr8euV"}),p.Ru._({id:"+TEOEl"}),p.Ru._({id:"gQIRQv"}),p.Ru._({id:"pbDMHv"}),p.Ru._({id:"LP7cSD"}),p.Ru._({id:"ugneAh"})],le=()=>[p.Ru._({id:"DZ/eyq"}),p.Ru._({id:"S2U0+k"}),p.Ru._({id:"YZJ7kT"}),p.Ru._({id:"fLq3m1"}),p.Ru._({id:"1nrH2R"})],lt=e=>{let{sendMessage:t}=e,[i]=(0,v.useState)(o7()(o9(),4).concat(o7()(le(),2)));return(0,s.jsx)(tI.T,{spacing:2,align:"flex-start",children:i.map((e,i)=>(0,s.jsx)(a.$,{variant:"unstyled",bg:"white",borderRadius:"md",size:"sm",px:2,border:"1px solid",borderColor:"gray.200",color:"deepocean.500",fontWeight:"500",_hover:{bg:"deepocean.50",color:"deepocean.700"},onClick:()=>{t(e)},children:e},i))})},li=e=>({from:"Designer",type:"text",message:e?p.Ru._({id:"q65R55",values:{userName:e}}):p.Ru._({id:"15sYsk"}),timestamp:Date.now()}),ln=e=>{let{sendMessage:t,hideSuggestions:i=!1}=e,{user:n}=(0,nm.ur)();return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(rS.q,{from:"Designer",children:li(null==n?void 0:n.firstName).message}),!i&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(l.E,{color:"gray.500",fontSize:"sm",children:(0,s.jsx)(m.x6,{id:"MVir6z"})}),(0,s.jsx)(lt,{sendMessage:t})]})]})};var ls=i(73652);function lr(e,t,i){var n;return null!=(n=i.find(i=>i.modification.isApplied(e,t)))?n:null}function lo(e,t){let i=(0,eu.GV)(ex.SJ),n=oQ(),[s,r]=(0,v.useState)(()=>e?lr(e,n,t):null),o=(0,v.useCallback)(()=>{e&&r(lr(e,n,t))},[e,t,n]);return(0,v.useEffect)(()=>{if(!e)return;let i=ts()(()=>{r(lr(e,n,t))},1e3);return e.on("update",i),()=>{e.off("update",i)}},[e,t,n]),(0,v.useEffect)(()=>{o()},[o,i]),{activeSuggestion:s,forceUpdate:o}}let ll=(0,v.memo)(e=>{let{message:t,editor:i}=e,n=o6(),r=oQ(),{activeSuggestion:a,forceUpdate:d}=lo(i,t.suggestions),c=(0,v.useCallback)(e=>{i&&(n.trackSuggestionApplied({interactionId:t.interactionId,suggestionType:e.type,suggestionLabel:e.description,suggestionContent:e.getContentForTracking()}),e.apply(i,r),d())},[i,d,t.interactionId,r,n]);return i?(0,s.jsx)(rS.q,{children:(0,s.jsxs)(o.B,{divider:(0,s.jsx)(iD.c,{borderColor:"blackAlpha.200"}),children:[(0,s.jsx)(l.E,{children:t.message||"How's this?"}),t.suggestions.map((e,t)=>(0,s.jsx)(la,{isSelected:e.label===(null==a?void 0:a.label),jsonContentPreview:e.jsonContentPreview,label:e.label,modification:e.modification,onClick:()=>{c(e.modification)}},t)),(0,s.jsx)(o4,{message:t})]})}):null});ll.displayName="SuggestContent";let la=e=>{let{label:t,modification:i,jsonContentPreview:n,isSelected:o,onClick:a}=e,c=(0,eu.GV)(ex.SJ);console.debug("[".concat(t,"] jsonContentPreview"),n,i);let u=(0,v.useCallback)(()=>{o||a()},[o,a]);return(0,s.jsxs)(e8.z,{onClick:u,cursor:"pointer",px:2,py:1,borderRadius:"xl",_hover:{bg:"blackAlpha.100"},bg:o?"whiteAlpha.600":void 0,transitionProperty:"common",transitionDuration:"normal",spacing:4,children:[n&&(0,s.jsx)(r.s,{sx:{"mask-image":"linear-gradient(to bottom, black 75%, transparent 100%)"},children:(0,s.jsx)(r.s,{sx:sX.o,justifyContent:"center",alignItems:"top",width:"150px",h:16,children:(0,s.jsx)(d.a,{transformOrigin:"top",transform:"scale(0.15)",pointerEvents:"none",children:(0,s.jsx)(sX.S,{content:n,theme:c})})})}),(0,s.jsx)(l.E,{flex:1,fontSize:"sm",children:t}),(0,s.jsx)(ls.J,{in:o,children:(0,s.jsx)(x.g,{icon:tA.e68,fixedWidth:!0})})]})};var ld=i(59018),lc=i.n(ld),lu=i(60908);let lx=(0,v.memo)(e=>{let{message:t,editor:i}=e,n=t.suggestions.slice(0,8),r=lc()(n.map(e=>{let{query:t}=e;return t})),a=0===r.length?p.Ru._({id:"QICyFn"}):1==r.length?p.Ru._({id:"x/YBq7",values:{0:r[0].toLowerCase()}}):2==r.length?p.Ru._({id:"Tn1hkb",values:{0:r[0].toLowerCase(),1:r[1].toLowerCase()}}):p.Ru._({id:"Z918ro",values:{0:r[0].toLowerCase(),1:r[1].toLowerCase(),2:r[2].toLowerCase()}});return(0,s.jsx)(rS.q,{children:(0,s.jsxs)(o.B,{align:"start",children:[(0,s.jsxs)(l.E,{children:[a," ",(0,s.jsx)(m.x6,{id:"CvUN7V"})]}),(0,s.jsx)(l.E,{color:"gray.500",textAlign:"center",fontSize:"xs",children:(0,s.jsx)(m.x6,{id:"fg3FfA"})}),(0,s.jsx)(nM.r,{columns:2,spacing:2,w:"100%",children:n.map(e=>{let{image:t,query:n,provider:r}=e,o=(0,lu.Ub)(t.thumbnailUrl,{width:250,height:250});return(0,s.jsx)(nz._,{src:o,fallbackSrc:t.thumbnailUrl,onDragStart:()=>{i&&(0,rz.fS)(i,{type:"image",attrs:(0,ox.TF)(t,n,r)})},h:24,draggable:!0,w:"100%",borderRadius:"md",transitionDuration:"normal",transitionProperty:"common",objectFit:"cover",cursor:"grab",_hover:{shadow:"outline"}},t.id)})}),(0,s.jsx)(o4,{message:t})]})})});lx.displayName="SuggestImage";let lh=e=>e.replace(/(<([^>]+)>)/gi,""),lm=(0,v.memo)(e=>{let{message:t,editor:i}=e,n=o6(),r=oQ(),{activeSuggestion:o,forceUpdate:a}=lo(i,t.suggestions);return(0,s.jsx)(rS.q,{from:t.from,children:(0,s.jsxs)(tI.T,{spacing:2,align:"start",children:[(0,s.jsx)(l.E,{children:t.message||"Here are some ideas:"}),t.suggestions.map((e,l)=>(0,s.jsx)(lp,{value:e,isSelected:e===o,onClick:()=>{if(!i)return;let{modification:s}=e;n.trackSuggestionApplied({interactionId:t.interactionId,suggestionType:s.type,suggestionLabel:s.description,suggestionContent:s.getContentForTracking()}),s.apply(i,r),a()}},l)),(0,s.jsx)(o4,{message:t})]})})}),lp=e=>{let{value:t,isSelected:i,onClick:n}=e,r=(0,v.useCallback)(()=>{i||n()},[i,n]);return(0,s.jsxs)(e8.z,{onClick:r,cursor:"pointer",p:4,borderRadius:"xl",_hover:{bg:"whiteAlpha.600"},bg:"white",transitionProperty:"common",transitionDuration:"normal",spacing:4,shadow:"md",align:"start",children:[(0,s.jsxs)(d.a,{children:[(0,s.jsx)(l.E,{fontSize:"sm",color:"gray.500",children:t.reason}),(0,s.jsx)(l.E,{fontSize:"sm",noOfLines:3,children:lh(t.value)})]}),(0,s.jsx)(ls.J,{in:i,children:(0,s.jsx)(x.g,{icon:tA.e68,fixedWidth:!0})})]})};lm.displayName="SuggestText";var lg=i(27250);let lj=(0,v.memo)(e=>{let{message:t,editor:i}=e,{onClose:n}=rP(),r=o6(),d=oQ(),{activeSuggestion:c}=lo(i,t.suggestions),h=(0,v.useCallback)(e=>{i&&(r.trackSuggestionApplied({interactionId:t.interactionId,suggestionType:t.type,suggestionLabel:e.description,suggestionContent:e.getContentForTracking()}),e.apply(i,d))},[i,r,t,d]);return(0,s.jsx)(rS.q,{children:(0,s.jsxs)(o.B,{children:[(0,s.jsx)(l.E,{children:t.message}),t.suggestions.map(e=>{let{themeId:t,label:i,isOriginal:n}=e;return(0,s.jsxs)(v.Fragment,{children:[n&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(iD.c,{borderColor:"blackAlpha.200"}),(0,s.jsxs)(l.E,{children:[i,": "]})]}),(0,s.jsx)(lf,{themeId:t,onClick:()=>h(e.modification),isSelected:(null==c?void 0:c.themeId)===t})]},t)}),(0,s.jsx)(l.E,{children:(0,s.jsx)(m.x6,{id:"eVMeEi"})}),(0,s.jsx)(a.$,{leftIcon:(0,s.jsx)(x.g,{icon:u.fyG}),w:"100%",onClick:()=>{n(),iq.R.emit("toggleThemeBlock",!0)},children:(0,s.jsx)(m.x6,{id:"ni+gIz"})}),(0,s.jsx)(o4,{message:t})]})})});lj.displayName="SuggestThemes";let lf=(0,v.memo)(e=>{let{themeId:t,onClick:i,isSelected:n}=e,r=(0,ee.Lb)(t);return"new"===r.id?null:(0,s.jsxs)(tI.T,{onClick:i,cursor:"pointer",p:2,borderRadius:"xl",_hover:{bg:"blackAlpha.100"},bg:n?"whiteAlpha.600":void 0,transitionProperty:"common",transitionDuration:"normal",children:[(0,s.jsx)(d.a,{borderRadius:"lg",overflow:"hidden",w:"100%",children:(0,s.jsx)(lg.q,{theme:r,variant:"outline"})}),(0,s.jsxs)(e8.z,{alignSelf:"flex-start",color:n?"trueblue.700":void 0,children:[(0,s.jsx)(ls.J,{in:n,unmountOnExit:!0,children:(0,s.jsx)(x.g,{icon:tA.e68,fixedWidth:!0})}),(0,s.jsx)(l.E,{fontSize:"sm",fontWeight:n?"semibold":void 0,children:r.name})]})]})});lf.displayName="ThemeMessageThumbnailPreview";let lb=(0,v.memo)(e=>{let{message:t,sendMessage:i}=e;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(rS.q,{children:t.message&&(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)(l.E,{children:[(0,s.jsx)("span",{className:"emoji",role:"img","aria-label":"sorry",children:"\uD83D\uDE14"})," ",t.message," ",t.learnMoreLink&&(0,s.jsxs)(i7.N,{href:t.learnMoreLink,textDecoration:"underline",isExternal:!0,children:["Learn more ",(0,s.jsx)(nG.p,{mx:"2px",fontSize:"sm"})]})]})})}),(0,s.jsx)(l.E,{color:"gray.500",fontSize:"sm",children:"Here are some other things I can do:"}),(0,s.jsx)(lt,{sendMessage:i})]})});lb.displayName="UnsupportedTask";let lv=(0,v.memo)(e=>{let{message:t}=e;return(0,s.jsx)(rS.q,{warning:t.warning,from:t.from,children:t.message})});lv.displayName="UserDesignerMessage";let ly=e=>{let{messages:t,scrollSelector:i,editor:n,sendMessage:l,isLoading:a,onClose:d}=e,{hasEnoughCreditsToChat:c,isCreditsReady:u}=(0,tH.B9)(),x=(0,v.useCallback)(()=>{let e=i&&document.querySelector(i);e&&setTimeout(()=>{requestAnimationFrame(()=>{e.scrollTo({top:e.scrollHeight,behavior:"smooth"})})},400)},[i]),h=(0,v.useRef)({scrollToBottom:x,onClose:d});return h.current.scrollToBottom=x,(0,s.jsx)(rD.Provider,{value:h.current,children:(0,s.jsx)(r.s,{flex:1,flexDirection:"column",justifyContent:"flex-end",children:(0,s.jsx)(o.B,{pt:12,spacing:2,children:(0,s.jsxs)(st.N,{children:[(0,s.jsx)(ln,{sendMessage:l,hideSuggestions:u&&!c}),t.map(e=>{if("text"===e.type)return(0,s.jsx)(lv,{message:e},e.timestamp);if("suggestImages"===e.type)return(0,s.jsx)(lx,{message:e,editor:n},e.timestamp);if("generateImage"===e.type)return(0,s.jsx)(o3,{message:e,editor:n},e.timestamp);if("suggestText"===e.type)return(0,s.jsx)(lm,{message:e,editor:n},e.timestamp);if("suggestThemes"===e.type)return(0,s.jsx)(lj,{message:e,editor:n},e.timestamp);else if("suggestContent"===e.type)return(0,s.jsx)(ll,{message:e,editor:n},e.timestamp);else if("unsupported"===e.type)return(0,s.jsx)(lb,{message:e,sendMessage:l},e.timestamp);return console.warn("[MessageList] Message type not found",e),null}),a&&(0,s.jsx)(lw,{},"loading")]})})})})},lw=()=>(0,s.jsx)(rS.q,{from:"Designer",children:(0,s.jsx)(lC,{})}),lC=()=>(0,s.jsxs)(r.s,{className:"bouncing-loader",justify:"center",children:[(0,s.jsx)("div",{}),(0,s.jsx)("div",{}),(0,s.jsx)("div",{})]}),lk=e=>{let{editor:t,scrollSelector:i,onClose:n}=e,[l,a]=(0,v.useState)(""),d=(0,R.u)("openAiStatus"),c=(0,eu.jL)(),h=(0,Q.O2)("editor"),p=(0,eu.CU)(),g=(0,eu.GV)(rM.Lt),j=(0,eu.GV)(rM.Wp),[f,y]=(0,v.useState)(null),w=(0,v.useCallback)(()=>(0,rM.Lt)(p.getState()),[p]),C=(0,v.useCallback)(e=>{let t={timestamp:Date.now(),...e};c((0,rM.tj)({message:t}))},[c]),k=(0,v.useCallback)(()=>{c((0,rM.cL)())},[c]),{status:E,sendMessage:S}=o2({addMessage:C,getMessageHistory:w,editor:t});(0,v.useEffect)(()=>{let e=i&&document.querySelector(i);e&&requestAnimationFrame(()=>{e.scrollTop=e.scrollHeight})},[i,g]);let I="idle"!==E;(0,v.useEffect)(()=>{if(!j.length||I)return;let{task:e,id:t}=j[0];!1===e.submit?a(e.message):S({message:e.message}),c((0,rM.nD)({id:t}))},[I,S,c,j]);let T=(0,v.useCallback)(()=>{if(!f||!t)return;let e=document.querySelector('[data-card-id="'.concat(f,'"]')),i=(0,Q.cH)(e,100);null!=i&&i.yAxisInView||h.scrollElementIntoView({element:e})},[t,h,f]),A=(0,v.useCallback)(e=>{T(),S({message:e})},[T,S]),O=(0,v.useCallback)(()=>{A(l),a("")},[A,l]),D=(0,tH.tO)(O,"chatSuggestion",Z.VV.GAMMA_UPSELL_CALLOUT_AI_CREDITS_CHAT);(0,v.useEffect)(()=>{if(!t)return;let e=()=>{let e=(0,tV.hT)(t.state.doc,t.state.selection.from);e&&y(e.node.attrs.id)};return e(),t.on("selectionUpdate",e),()=>{t.off("selectionUpdate",e)}},[t]);let P=rC();return t?"DOWN"===d?(0,s.jsx)(rI,{onClose:n}):(0,s.jsxs)(r.s,{direction:"column",h:"100%",w:"100%",px:6,pb:2,children:["DEGRADED"===d&&(0,s.jsx)(rT,{}),(0,s.jsx)(ly,{scrollSelector:i,messages:g,editor:t,sendMessage:A,isLoading:I,onClose:n}),(0,s.jsxs)(o.B,{pos:"sticky",bottom:0,py:2,pt:4,bg:"gray.50",children:[(0,s.jsx)(r_,{editor:t,value:l,onChange:a,onSubmit:D,isLoading:I,resetMessages:k}),(0,s.jsx)(rw.f,{modalId:"ai-credits-modal-message-list",variant:"ghost",justify:"flex-end",segmentEvent:Z.VV.GAMMA_UPSELL_CALLOUT_AI_CREDITS_CHAT})]}),(0,s.jsxs)(e7.e,{position:"absolute",top:1,insetInlineStart:4,variant:"ghost",colorScheme:"blackAlpha",children:[(0,s.jsx)(J.Tz,{label:(0,s.jsx)(m.x6,{id:"5eg0kp"}),placement:"top",children:(0,s.jsx)(H.K,{color:"currentColor","aria-label":"reset-chat",icon:(0,s.jsx)(x.g,{icon:u.XAi}),onClick:k,isRound:!0})}),P&&(0,s.jsx)(J.Tz,{label:(0,s.jsx)(m.x6,{id:"pC3anp",values:{GAMMA_ARTIFACT_PROPER_NOUN:ej.TP}}),placement:"top",children:(0,s.jsx)(H.K,{color:"currentColor","aria-label":"source-prompt",icon:(0,s.jsx)(x.g,{icon:u.LjI}),as:b(),href:P,target:(0,_.sX)()?"_self":"_blank",isRound:!0})})]})]}):null},lE=e=>{let{onClose:t}=e;return(0,s.jsx)(r.s,{width:"100%",px:6,py:4,justifyContent:"space-between",alignItems:"center",h:8,tabIndex:0,outline:"none",position:"absolute",top:0,children:(0,s.jsx)(tS.J,{"data-design-partner-close-button":!0,position:"absolute",top:2,insetInlineEnd:6,zIndex:1,onClick:t})})},lS=rv()(async()=>(await Promise.resolve().then(i.bind(i,23636))).BuddyChatPane,{loadableGenerated:{webpack:()=>[23636]},ssr:!1}),lI="design-partner-panel-wrapper",lT=()=>{let{togglePanel:e,isPanelOpen:t}=(0,eq.ww)(lA),{editor:i}=(0,tE.m)(),n=(0,R.u)("aiChat"),s=(0,eu.jL)();(0,v.useEffect)(()=>()=>{s((0,rM.cL)())},[]);let r=(0,eu.GV)(ex.nD);return(0,v.useEffect)(()=>{!r&&t&&e()},[r,t,e]),(0,v.useEffect)(()=>{var e,n;i&&(null==(e=(n=i.commands).setSalOpen)||e.call(n,t))},[i,t]),(0,v.useEffect)(()=>{if(n)return ry.R.on("toggle",t=>{let{config:i}=t;e(i)})},[e,n]),(0,v.useEffect)(()=>{if(n)return rn.LF.on("queueDesignPartnerTask",t=>{s((0,rM.UT)({task:t})),e({disableTransition:!1,override:"open"}),console.log("queueDesignPartnerTask",t)})},[s,n,e]),(0,v.useEffect)(()=>{if(!n||!r)return;let t=(0,rf.Ay)("mod+shift+S");return eY.WC.on("keydown","DESIGN_PARTNER_PANEL",i=>!!t(i)&&(e(),!0))},[e,n,r]),{isDesignPartnerPanelOpen:t}},lA=e=>{let{closePanel:t}=e,{editor:i}=(0,tE.m)(),n=(0,R.u)("buddyEdit");return(0,v.useEffect)(()=>eY.WC.on("keydown","DESIGN_PARTNER_PANEL",e=>!!document.activeElement.closest('[data-panelid="design-partner-panel"]')&&"Escape"===e.key&&(t(),!0)),[t]),(0,s.jsx)(tO.Z,{bgColor:"gray.50","data-panelid":"design-partner-panel",borderInlineStartWidth:"1px",children:(0,s.jsxs)(r.s,{direction:"column",h:"100%",overflowY:"auto",overflowX:"hidden",className:"".concat(lI," buddy-scroll"),w:"100%",children:[n&&(0,s.jsx)(lS,{}),!n&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(lE,{onClose:t}),(0,s.jsx)(lk,{editor:i,scrollSelector:".".concat(lI),onClose:t})]})]})})};lA.panelPosition="right",lA.panelName="chat";let lR=e=>{let{disabled:t=!1,docId:i}=e;if(!t)return null;let n="https://metabase.internal.gamma.app/question/1558-workspace-lookup-by-id?org_id=none&doc_id=".concat(i);return(0,s.jsxs)(r.s,{direction:"row",bg:"red.500",color:"white",py:3,px:4,align:"center",fontSize:"sm",children:[(0,s.jsxs)(tI.T,{flex:"1",align:"start",spacing:0,children:[(0,s.jsxs)(l.E,{fontWeight:"bold",children:["This ",ej.TP," is disabled."]}),(0,s.jsx)(l.E,{opacity:"0.7",fontSize:"xs",children:"It is only visible to Gamma support personnel. For more information, check the admin site."})]}),(0,s.jsx)(a.$,{variant:"plain",size:"sm",mr:4,rightIcon:(0,s.jsx)(x.g,{icon:u.Ju_}),onClick:()=>{n&&window.open(n,"_blank")},children:"Admin page"})]})};var lO=i(21290),l_=i(90394),lD=i(20715),lP=i(2905),lz=i(89811),lM=i(96064),lN=i(2543),lF=i(64206),lL=i(8505),lV=i(37471);let lW=e=>{let{onGenerateSuccess:t,webpageOnly:i=!0}=e,[n,r]=(0,v.useState)("createWithAI"),[o,l]=(0,v.useState)([]),[a,d]=(0,v.useState)(void 0),c=(0,v.useMemo)(()=>({goToScreen:(e,t)=>{d(null==t?void 0:t.generateId),l(e=>[...e,n]),r(e)},navEnabled:"createGenerate"!==n&&"createWithAI"!==n&&"home"!==n,webpageOnly:i,skipThemeStep:!0,onGenerateSuccess:t}),[n,t,i]),u=(0,v.useMemo)(()=>{switch(n){case"createWithAI":case"home":return lN.m;case"createImport":return lM.D;case"createPaste":return lF.b;case"promptEditor":return function(){return(0,s.jsx)(lL.y,{id:a,children:(0,s.jsx)(lP.V,{})})};case"createGenerate":return function(){return a?(0,s.jsx)(lL.y,{id:a,children:(0,s.jsx)(lz.r,{autosetLocale:!1})}):(0,s.jsx)(lz.r,{autosetLocale:!0})};default:throw Error("invalid page")}},[a,n]);return(0,s.jsx)(lV.lW.Provider,{value:c,children:(0,s.jsx)(u,{})})},lG=e=>{let{isOpen:t,onClose:i}=e;return(0,s.jsx)(J.L8,{isDark:!1,children:(0,s.jsxs)(iT._s,{isOpen:t,placement:"bottom",onClose:i,isFullHeight:!0,children:[(0,s.jsx)(i1.m,{}),(0,s.jsxs)(iA.z,{h:"calc(var(--100vh) - 24px)",p:0,children:[(0,s.jsx)(iO.s,{zIndex:"sticky"}),(0,s.jsx)(i_.c,{p:0,children:(0,s.jsx)(lW,{onGenerateSuccess:i})})]})]})})},lB=e=>{var t;let{doc:i}=e,n=(0,ee.rd)(),r=(0,iI.d)(),l=null==i||null==(t=i.accessLinks)?void 0:t[0],d=(0,v.useMemo)(()=>(0,D.LN)({docTitle:null==i?void 0:i.title,docId:null==i?void 0:i.id,token:null==l?void 0:l.token,absolute:!0}),[i,null==l?void 0:l.token]),{onCopy:c}=(0,l_.i)(d),h=(0,v.useCallback)(()=>{(0,lD.d)({docId:null==i?void 0:i.id,source:"docWizardFooter",type:"tokenUrl"}),c(),r({title:(0,s.jsx)(m.x6,{id:"pQjjYo"}),status:"success",position:"top",duration:1e3,isClosable:!1})},[null==i?void 0:i.id,c,r]),p=rC();return(0,s.jsxs)(o.B,{spacing:4,textAlign:"center",children:[(0,s.jsx)(B.D,{size:"md",children:(0,s.jsx)(m.x6,{id:"bB+DHs"})})," ",(0,s.jsx)(a.$,{as:b(),target:(0,_.sX)()?"_self":"_blank",variant:"solid",colorScheme:n?"blackAlpha":"whiteAlpha",leftIcon:(0,s.jsx)(x.g,{icon:u.QLR}),href:"/create",children:(0,s.jsx)(m.x6,{id:"xFxi2V"})}),p?(0,s.jsx)(a.$,{leftIcon:(0,s.jsx)(x.g,{icon:u.LjI}),variant:"plain",as:b(),target:(0,_.sX)()?"_self":"_blank",href:p,children:(0,s.jsx)(m.x6,{id:"550oRP"})}):(0,s.jsx)(a.$,{leftIcon:(0,s.jsx)(x.g,{icon:u.CQO}),variant:"plain",onClick:h,children:(0,s.jsx)(m.x6,{id:"RGCCrg"})})]})},lU=()=>{let{isOpen:e,onClose:t,onOpen:i}=(0,iF.E)({id:"add-page-ai-modal"}),n=(0,eu.GV)(tr.Gd),r=(0,ta.dv)(n),{publishSite:l,isPublishing:d}=iB({site:n}),c=(0,ee.rd)();return(0,s.jsxs)(o.B,{spacing:4,textAlign:"center",children:[(0,s.jsx)(B.D,{size:"md",children:(0,s.jsx)(m.x6,{id:"bB+DHs"})}),(0,s.jsx)(a.$,{variant:"solid",colorScheme:c?"blackAlpha":"whiteAlpha",leftIcon:(0,s.jsx)(x.g,{icon:u.QLR}),onClick:i,children:(0,s.jsx)(m.x6,{id:"K3193W"})}),r&&(0,s.jsx)(a.$,{leftIcon:(0,s.jsx)(x.g,{icon:u.MNJ}),variant:"plain",onClick:l,isLoading:d,children:(0,s.jsx)(m.x6,{id:"2uGo/E"})}),(0,s.jsx)(lG,{isOpen:e,onClose:t})]})},lH=()=>(0,s.jsx)(o.B,{spacing:4,textAlign:"center",children:(0,s.jsx)(B.D,{size:"md",children:(0,s.jsx)(m.x6,{id:"tL6yYg",values:{GAMMA_PROPER_NOUN:ej.On}})})}),lK=e=>{var t,i;let{doc:n}=e,r=null==n||null==(i=n.docGenerateInput)||null==(t=i.docGeneration)?void 0:t.generationType;return n?r===ik.xbH.UploadPptV2?(0,s.jsx)(lH,{}):n.site?n.site&&!(0,_.Xb)()?(0,s.jsx)(lU,{}):null:(0,s.jsx)(lB,{doc:n}):null};var lJ=i(19515),lq=i.n(lJ),lY=i(13731),l$=i.n(lY),lX=i(96104),lQ=i.n(lX),lZ=i(56143);let l0=[{key:"content_quality",category:"content",label:(0,s.jsx)(m.x6,{id:"geq9gH"})},{key:"missing_content",category:"content",label:(0,s.jsx)(m.x6,{id:"n4zPFX"})},{key:"wrong_language",category:"content",label:(0,s.jsx)(m.x6,{id:"R2Ly6h"})},{key:"amount_of_text",category:"content",label:(0,s.jsx)(m.x6,{id:"pi+Tez"})},{key:"inaccurate_content",category:"content",label:(0,s.jsx)(m.x6,{id:"Qk+SyG"})},{key:"image_quality",category:"image",label:(0,s.jsx)(m.x6,{id:"ESjmDR"})},{key:"number_of_images",category:"image",label:(0,s.jsx)(m.x6,{id:"x6yr/9"})},{key:"layouts_and_templates",category:"layout",label:(0,s.jsx)(m.x6,{id:"5yz5Kl"})},{key:"theme_styling",category:"layout",label:(0,s.jsx)(m.x6,{id:"nTZNkL"})}],l1={key:"other",category:"other",label:(0,s.jsx)(m.x6,{id:"/IX/7x"})},l6=[{key:"missing_content",category:"content",label:(0,s.jsx)(m.x6,{id:"n4zPFX"})},{key:"inaccurate_content",category:"content",label:(0,s.jsx)(m.x6,{id:"04mUQ2"})},{key:"missing_images",category:"image",label:(0,s.jsx)(m.x6,{id:"CLDdsj"})},{key:"image_quality",category:"image",label:(0,s.jsx)(m.x6,{id:"ESjmDR"})},{key:"wrong-layout",category:"layout",label:(0,s.jsx)(m.x6,{id:"x2M7iY"})},{key:"colors-fonts",category:"layout",label:(0,s.jsx)(m.x6,{id:"nTZNkL"})},{key:"animations",category:"animations",label:(0,s.jsx)(m.x6,{id:"HgWdP3"})},{key:"import_speed",category:"performance",label:(0,s.jsx)(m.x6,{id:"YJPN3F"})},{key:"too-similar",category:"layout",label:(0,s.jsx)(m.x6,{id:"R5upbf"})}],l2=e=>{let{docId:t,isDark:i,generationType:n,interactionId:r}=e,o=(0,v.useMemo)(()=>{let e=n===ik.xbH.UploadPptV2?l6:l0;return lq()(lQ()(l$()(lQ()(e),"category"))).concat([l1])},[n]),l=(0,v.useCallback)(e=>{(0,tU.xN)({rating:e,doc_id:t,interactionId:r,generationType:n})},[t,n,r]),a=(0,v.useCallback)((e,i,s)=>{(0,tU.EQ)({feedback:i,tags:s,rating:e,doc_id:t,generationType:n,interactionId:r})},[t,n,r]);return(0,s.jsx)(lZ.No,{feedbackTags:o,trackRating:l,trackFeedback:a,isDark:i})};var l5=i(98841),l4=i(52077),l3=i(69768);let l8=e=>{let[t]=(0,v.useState)(()=>(0,D.sF)()[e]);return(0,v.useEffect)(()=>{setTimeout(()=>{(0,l3.g5)({query:{...(0,D.sF)(),[e]:void 0},emitChange:!1})})},[]),t},l7=e=>{var t,i,n,s;let{editor:r}=e,o=r&&null!=(n=null==(t=(0,r6.lI)(r))?void 0:t.generateInfo)?n:{},l=l8("source"),a=(0,eu.GV)((0,ec.A0)(null==r?void 0:r.gammaDocId)),d=null,{user:c}=(0,et.ur)(),u=null==c||null==(i=c.settings)?void 0:i.needsEditorOnboarding;return(0,v.useEffect)(()=>{u&&l===l4.MH&&M.emit("triggerOnboarding",{reason:"aiGenerate"})},[u,l]),l===l4.MH?a&&("complete"===a.status||"error"===a.status)&&(d=a.id):l===l5.p&&(d=null!=(s=o.interactionId)?s:null),{interactionId:d}},l9=(0,v.memo)(e=>{var t,i;let{interactionId:n}=e,l=(0,eu.GV)(eO.Jo),d=(0,R.u)("insertWidgetBottom"),c=(0,ee.rd)(),u=null==l||null==(i=l.docGenerateInput)||null==(t=i.docGeneration)?void 0:t.generationType,x=d?lO.PX:lO.C9,[h,p]=(0,v.useState)(!1),g=(0,v.useCallback)(()=>{p(!0)},[]),j=c?{background:"gray.800",color:"white",borderTop:"2px solid var(--chakra-colors-whiteAlpha-200)"}:{background:"white",color:void 0,borderTop:"2px solid var(--chakra-colors-blackAlpha-200)"};return l?(0,s.jsx)(J.L8,{isDark:c,children:(0,s.jsx)(r.s,{className:"chakra-dont-set-collapse","data-doc-wizard-footer":!0,w:"100%",mt:(0,_.Xb)()?void 0:"-".concat(x),children:(0,s.jsx)(o5.S,{in:!h,style:{width:"100%"},unmountOnExit:!0,children:(0,s.jsx)(r.s,{pt:[10,10,20],pb:[4,4,8],w:"100%",position:"relative",...j,children:(0,s.jsx)(iL.m,{maxW:"450px",children:(0,s.jsxs)(o.B,{spacing:8,children:[(0,s.jsx)(lK,{doc:l}),(0,s.jsx)(l2,{docId:l.id,isDark:c,interactionId:n,generationType:u}),(0,s.jsx)(U.o,{pt:[0,0,4],w:"100%",children:(0,s.jsx)(a.$,{size:"sm",onClick:g,variant:"text",colorScheme:"blackAlpha",children:(0,s.jsx)(m.x6,{id:"vLyv1R"})})})]})})})})})}):null});l9.displayName="DocWizardFooterInner";let ae=e=>{let{editor:t}=e,{interactionId:i}=l7({editor:t});return i?(0,s.jsx)(l9,{interactionId:i}):null};var at=i(49405);let ai=e=>{let{onCloneClick:t,onSignupClick:i,isLoggedIn:n}=e;return(0,s.jsx)(d.a,{bg:"white",border:"0.5px solid var(--chakra-colors-gray-50)",borderRadius:"md",shadow:"md",display:"column",p:4,position:"relative",children:n?(0,s.jsxs)(e8.z,{children:[(0,s.jsxs)(l.E,{me:1,children:[(0,s.jsx)(m.x6,{id:"HMsJrS",values:{GAMMA_ARTIFACT_PROPER_NOUN:ej.TP},components:{0:(0,s.jsx)("strong",{})}})," ","\uD83D\uDE0D"]}),(0,s.jsx)(a.$,{variant:"solid",onClick:t,children:(0,s.jsx)(m.x6,{id:"he3ygx"})})]}):(0,s.jsxs)(e8.z,{children:[(0,s.jsxs)(l.E,{me:1,children:[(0,s.jsx)(m.x6,{id:"FEyEJk",values:{GAMMA_ARTIFACT_PROPER_NOUN:ej.TP,GAMMA_PROPER_NOUN:ej.On},components:{0:(0,s.jsx)("strong",{})}})," ","\uD83D\uDE0D"]}),(0,s.jsx)(a.$,{as:b(),href:"/signup",onClick:i,variant:"solid",textDecoration:"none !important",children:(0,s.jsx)(m.x6,{id:"e+RpCP"})})]})})},an=e=>{let t=!(0,_.Xb)(),{user:i}=(0,et.ur)(),n=(0,iI.d)(),s=(0,v.useRef)(),r=(0,at.Z)(),o=(0,v.useCallback)(()=>{e&&(null===Z.zS||void 0===Z.zS||Z.zS.track(Z.VV.EXAMPLE_SIGNUP_CLICKED,{doc_id:e.id,title:e.title}))},[e]),l=(0,v.useCallback)(()=>{r({docId:null==e?void 0:e.id,docTitle:null==e?void 0:e.title,source:"example_deck_clone_toast"})},[e,r]);(0,v.useEffect)(()=>()=>{s.current&&n.close(s.current)},[n]);let a=t&&e,d=!!i;(0,tX.Vg)(()=>{s.current&&n.close(s.current),a&&(s.current=n({position:"bottom",render:()=>ai({onCloneClick:l,isLoggedIn:d,onSignupClick:o}),isClosable:!0,duration:null}))},[e,t,l,o,a,i,n,d],[a,d])};var as=i(86932),ar=i(27196),ao=i(10955);let al="sessionId1",aa=tp.YY.create({addStorage:()=>({user:{}}),addCommands(){return{user:e=>()=>{let t=(0,eu.KA)();return this.storage.user=iN()({},this.storage.user,e),t.dispatch((0,ex.vK)({sessionId:al})),t.dispatch((0,ex._)({collaborators:[this.storage.user]})),!0}}}}),ad=e=>{var t;let{docId:i,snapshotId:n,scrollingParentSelector:o,onCreate:l}=e,a=(0,eu.GV)(eO.Jo);an(a);let[c]=(0,v.useState)(()=>[t9.Q,ar.Li.configure({scrollerSelector:o}),aa,as.wg]),{user:u,anonymousUser:x,isUserLoading:h,color:m}=(0,et.ur)(),[p,g]=(0,v.useState)(),{data:j,loading:f,error:b}=(0,ik.YDl)({variables:{docId:i,snapshotId:n},skip:!n});(0,v.useEffect)(()=>{!h&&p&&p.commands.user({id:(null==u?void 0:u.id)||x.id,color:m.value,sessionId:al,idleSince:null,name:(null==u?void 0:u.displayName)||x.displayName||"",profileImageUrl:(null==u?void 0:u.profileImageUrl)||"",isReady:!h})},[p,u,m,h,x]);let y=j&&void 0!==j.snapshot&&!f&&a;return(0,s.jsxs)(d.a,{"data-testid":"example-static-editor-wrapper",flex:"1",height:"100%",children:[!y||b?(0,s.jsxs)(r.s,{direction:"column",height:"100%",flex:"1",bg:"gray.50",alignItems:"center",justifyContent:"center",children:[!y&&(0,s.jsx)(t4.y,{}),b&&(0,s.jsxs)(U.o,{h:"100%",children:["There was an error loading this ",ej.TP,":"," ",b.message]})]}):(0,s.jsx)(d.a,{"data-testid":"example-static-editor-wrapper-inner",transitionProperty:"common",transitionDuration:"750ms",transitionTimingFunction:"ease-out",opacity:+!!y,children:(0,s.jsx)(td.bw,{doc:a,editorId:"main",docId:i,extensions:c,onCreate:e=>{let{editor:t}=e;g(t),setTimeout(()=>{l&&l(t)},10)},readOnly:!0,initialContent:null==(t=j.snapshot)?void 0:t.content.default,scrollingParentSelector:o})}),(0,s.jsx)(ao.d,{forceShow:!0,abuseReportingEnabled:!1})]})},ac=e=>{let t=(0,et.IM)();return(0,eu.GV)(i=>{let n=(0,eO.nU)(i);return!!n&&t.can(e,n)})};var au=i(69138),ax=i(83550),ah=i(85595),am=i(343),ap=i(8139),ag=i(53505);let aj=()=>{let e=(0,am.$)(),t=(0,at.Z)(),{push:i}=(0,e9.useRouter)();return(0,v.useCallback)(async n=>{let s,{title:r,titleEdited:o,path:l,file:a,isSite:d=!1,sourceDocId:c,format:u,docSettings:x}=n;if(!a)return;if(c)await t({docId:c,source:ik.ALe.SitesDuplicatePage,fileId:null==a?void 0:a.id,path:l,onSuccess:e=>{s=e}});else{let t=d?ap.S9.webpage_fluid.docSettings():ap.S9.deck_default.docSettings(),i={settings:{...x||t},format:u||(d?"webpage":"deck")},n=l||(0,ag.X)({path:"/untitled-page",file:a}),{docId:c}=await e({title:r,titleEdited:o,path:n,file:a,source:"file_add_page",documentAttributes:i});s=c}if(!s)return;let h=(0,D.pF)({docId:s});await i(h,void 0,{shallow:!0})},[e,t,i])},af=e=>{let{isOpen:t,onClose:i}=e;return(0,s.jsx)(J.L8,{isDark:!1,children:(0,s.jsxs)(J._s,{isOpen:t,placement:"bottom",onClose:i,isFullHeight:!0,children:[(0,s.jsx)(J.QP,{}),(0,s.jsxs)(J.zj,{h:"calc(var(--100vh) - 24px)",p:0,children:[(0,s.jsx)(J.s1,{zIndex:"sticky"}),(0,s.jsx)(J.ys,{p:0,children:(0,s.jsx)(lW,{onGenerateSuccess:i,webpageOnly:!1})})]})]})})};var ab=i(2241);let av=e=>{let{pageTitle:t,pageTitleEdited:i,path:n,useMonoFont:r,onEditSubmit:a,setIsEditing:d,isEditing:c,isSelected:u,...x}=e,[h,p]=(0,v.useState)(t||""),[g,j]=(0,v.useState)(!!i),f=a&&d,b=(u||c)&&f,y=(0,V.dU)("gray.600","gray.500"),w=(0,v.useRef)(null);return(0,v.useEffect)(()=>{c&&w.current&&w.current.focus()},[c]),(0,s.jsxs)(o.B,{spacing:1,alignItems:"flex-start",justifyContent:"flex-start",...x,children:[c&&f?(0,s.jsx)(iX.p,{ref:w,value:h,variant:"outline",size:"xs",ps:1,bg:"inherit",_focus:{bg:"inherit"},_hover:{bg:"inherit"},fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",onBlur:e=>null==a?void 0:a(e.target.value,g),onChange:e=>{let t=e.target.value;p(t),j(!!t)},onKeyDown:e=>{if("Escape"===e.key){e.stopPropagation(),d(!1),p(t||"");return}"Enter"!==e.key||e.shiftKey||e.metaKey||(e.preventDefault(),a(h,g),d(!1))}}):(0,s.jsx)(l.E,{textAlign:"start",ps:1,noOfLines:1,maxW:"100%",whiteSpace:"normal",onClick:()=>{b&&d(!0)},children:h||(0,s.jsx)(m.x6,{id:"kveQAJ"})}),n&&(0,s.jsx)(l.E,{ps:1,color:y,textAlign:"start",noOfLines:1,fontFamily:r?"mono":void 0,fontSize:"xs",whiteSpace:"normal",wordBreak:"break-all",children:(0,s.jsx)(ab.B.span,{dir:r?"ltr":void 0,children:n})})]})},ay=e=>{let{isMainPage:t=!1,hasChanges:i=!1,isLoading:n=!1,isSelected:r=!1}=e,o=r?tA.A4h:u.A4h,l=r?tA.muz:u.muz,a=r?tA.Eur:u.Eur;return n?(0,s.jsx)(t4.y,{size:"xs"}):t?(0,s.jsx)(x.g,{icon:l,fixedWidth:!0}):i?(0,s.jsx)(x.g,{icon:a,fixedWidth:!0}):(0,s.jsx)(x.g,{icon:o,fixedWidth:!0})};var aw=i(45460),aC=i(8527);let ak=(0,aw.R)((e,t)=>{let{isSelected:i,children:n,...r}=e,{tab:o}=(0,aC.o)("Tabs",{variant:"soft-rounded",size:"sm"});return(0,s.jsx)(e8.z,{ref:t,__css:o,spacing:2,"aria-selected":i,...r,children:n})});var aE=i(47867);let aS=e=>{let{onRenamePageClick:t,page:i,...n}=e,r=aj(),o=(0,eu.GV)(eO.nU),l=(0,v.useCallback)(()=>{o&&r({file:o,title:i.title,path:(0,ag.X)({path:i.path,file:o}),sourceDocId:i.id})},[r,o,i]);return(0,s.jsxs)(sC.c,{maxW:"sm",...n,children:[(0,s.jsx)(ah.D,{icon:(0,s.jsx)(x.g,{icon:u.MT7,fixedWidth:!0}),onClick:t,children:(0,s.jsx)(m.x6,{id:"2wxgft"})}),(0,s.jsx)(sS.N,{}),(0,s.jsx)(ah.D,{icon:(0,s.jsx)(x.g,{icon:u.$3n,fixedWidth:!0}),onClick:l,children:(0,s.jsx)(m.x6,{id:"OjVdwX"})})]})},aI=e=>{let{onRenamePageClick:t,page:i,...n}=e;return(0,s.jsx)(sy.W,{modifiers:[{name:"flip",enabled:!0,options:{fallbackPlacements:["end"]}}],children:e=>{let{isOpen:r}=e;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(sw.I,{"data-id":"sidebar-item-menu-button",ms:3,as:H.K,variant:"ghost",size:"xs",icon:(0,s.jsx)(d.a,{transitionProperty:"common",transitionDuration:"normal",_groupHover:{opacity:1},_hover:{opacity:1},_active:{opacity:1},opacity:+!!r,children:(0,s.jsx)(x.g,{icon:u.Dwc,fixedWidth:!0})}),...n}),(0,s.jsx)(N.Z,{children:(0,s.jsx)(aS,{"data-id":"sidebar-item-menu-list",onRenamePageClick:t,page:i})})]})}})},aT=e=>{let{page:t,isMainPage:i,isSelected:n,showPath:r,canEdit:o}=e,l=null==t?void 0:t.id,a=(0,D.pF)({docId:l}),c=(0,v.useRef)(null),[u,x]=(0,v.useState)(!1),h=(0,iI.d)(),[p]=(0,ik.cGn)(),g=(0,v.useCallback)((e,t)=>{x(!1),p({variables:{id:l,title:e,titleEdited:t}}).catch(e=>{let t=e instanceof Error&&e.message;h({title:t?(0,s.jsx)(m.x6,{id:"Ty2/Ny",values:{errMessage:t}}):(0,s.jsx)(m.x6,{id:"cxcrLk"}),position:"top",status:"error"})})},[l,h,p]);(0,v.useEffect)(()=>{if(!n||!(null==c?void 0:c.current))return;let{inView:e}=(0,aE.cH)(c.current)||{};e||c.current.scrollIntoView()},[n]);let j=n?{}:{as:n?void 0:b(),href:a,shallow:!0};return(0,s.jsx)(d.a,{...j,onClick:e=>{e.target instanceof Element&&(e.target.closest('[data-id="sidebar-item-menu-button"]')&&e.preventDefault(),e.target.closest('[data-id="sidebar-item-menu-list"]')&&(e.preventDefault(),e.stopPropagation()))},children:(0,s.jsxs)(ak,{ref:c,isSelected:n,alignItems:r?"start":"center",justifyContent:r?"flex-start":"center",role:"group",children:[(0,s.jsx)(d.a,{children:(0,s.jsx)(ay,{isMainPage:i,hasChanges:!1,isLoading:!1,isSelected:n})}),(0,s.jsx)(av,{pageTitle:t.title,path:r?i?(0,s.jsx)(m.x6,{id:"i0qMbr"}):t.path:void 0,useMonoFont:r&&!i,isEditing:u,pageTitleEdited:t.titleEdited,setIsEditing:o?x:void 0,onEditSubmit:o?g:void 0,isSelected:!!n}),o&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(tT.h,{}),(0,s.jsx)(J.Tz,{label:(0,s.jsx)(m.x6,{id:"ipYK1+"}),placement:"top",children:(0,s.jsx)(d.a,{children:(0,s.jsx)(aI,{isSelected:n,page:t,onRenamePageClick:()=>{x(!0)},alignSelf:"center"})})})]})]})})},aA=e=>{let{file:t,isSite:i}=e,{isOpen:n,onClose:r,onOpen:a}=(0,iF.E)({id:"add-page-ai-modal"}),d=(0,eu.GV)(ex.zu),c=aj(),[h,g]=(0,v.useState)(!1),j=(0,v.useCallback)(()=>{a()},[a]),f=(0,v.useCallback)(()=>{g(!0),c({path:"/untitled-page",title:p.Ru._({id:"kveQAJ"}),titleEdited:!1,file:t,isSite:i,format:d.format||void 0,docSettings:(0,r6.gX)(d)}).then(()=>{g(!1)})},[c,d,t,i]);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(sy.W,{children:[(0,s.jsx)(J.Tz,{label:(0,s.jsx)(m.x6,{id:"yLRlZm"}),children:(0,s.jsx)(sw.I,{as:H.K,isRound:!0,size:"xs",isLoading:h,onFocus:e=>e.preventDefault(),"data-testid":"add-page",icon:(0,s.jsx)(x.g,{icon:u.QLR})})}),(0,s.jsx)(N.Z,{children:(0,s.jsx)(sC.c,{maxW:80,zIndex:"tooltip",children:(0,s.jsxs)(ax.r,{title:p.Ru._({id:"yLRlZm"}),children:[(0,s.jsx)(ah.D,{icon:(0,s.jsx)(x.g,{icon:u.QLR,fixedWidth:!0}),onClick:f,children:(0,s.jsxs)(o.B,{spacing:0,children:[(0,s.jsx)(l.E,{children:(0,s.jsx)(m.x6,{id:"SSZKB9"})}),(0,s.jsx)(l.E,{fontSize:"xs",color:"gray.500",children:(0,s.jsx)(m.x6,{id:"S65lUr"})})]})}),(0,s.jsx)(ah.D,{icon:(0,s.jsx)(x.g,{icon:tA.p7g,fixedWidth:!0}),onClick:j,children:(0,s.jsxs)(e8.z,{align:"flex-start",children:[(0,s.jsxs)(o.B,{spacing:0,children:[(0,s.jsx)(l.E,{children:(0,s.jsx)(m.x6,{id:"OppH33"})}),(0,s.jsx)(l.E,{fontSize:"xs",color:"gray.500",children:(0,s.jsx)(m.x6,{id:"P/o+t+"})})]}),(0,s.jsx)(tT.h,{}),(0,s.jsx)(i4.E,{h:"fit-content",colorScheme:"deepocean",ms:2,children:(0,s.jsx)(m.x6,{id:"jsQZMk"})})]})})]})})})]}),(0,s.jsx)(af,{isOpen:n,onClose:r})]})},aR=e=>{let{onClose:t,file:i,currentPageId:n}=e,r=(0,eu.GV)(eO.hB),l=ac("edit"),a=(0,eu.GV)(eO.lh);return i?(0,s.jsxs)(o.B,{spacing:2,w:"100%",children:[(0,s.jsxs)(e8.z,{children:[(0,s.jsx)(J._x,{textAlign:"start",flex:1,children:(0,s.jsx)(m.x6,{id:"wRR604"})}),l&&(0,s.jsx)(aA,{isSite:r,file:i}),(0,s.jsx)(J.Tz,{label:(0,s.jsx)(m.x6,{id:"PJfMyC"}),children:(0,s.jsx)(tS.J,{onClick:t})})]}),(0,s.jsx)(o.B,{spacing:1,children:a.map(e=>(0,s.jsx)(aT,{page:e,isMainPage:e.id===i.mainPageId,isSelected:e.id===n,showPath:r,canEdit:l},e.id))})]}):null},aO=e=>{let{onPanelClose:t,file:i,currentPageId:n}=e;return(0,s.jsx)(aR,{onClose:t,file:i,currentPageId:n})},a_=e=>{let{closePanel:t}=e,i=(0,ee.rd)(),n=(0,eR.u)("multipageEditor"),r=(0,eu.GV)(eO.nU),o=(0,eu.GV)(eO.Vs);return(0,s.jsx)(J.L8,{isDark:i,children:(0,s.jsx)(tO.Z,{bg:i?"gray.900":"white",borderRight:"1px solid",borderColor:i?"gray.800":"gray.200","data-panelid":"pages-panel",overflowX:"hidden",px:4,pt:4,children:n&&r&&(0,s.jsx)(aO,{onPanelClose:t,file:r,currentPageId:null==o?void 0:o.id})})})};a_.panelPosition="left",a_.panelName="pages";let aD=e=>{let{togglePanel:t,isPanelOpen:i}=(0,eq.ww)(a_,e),n=(0,eu.GV)(ex.wC),s=(0,eu.GV)(eO.d_),r=ac("edit"),o=!!(e&&s&&r);return(0,au.V)(()=>{o&&t({override:"open",disableTransition:!1})},[t,o],[o]),(0,v.useEffect)(()=>{n!==tb.w.DOC_VIEW&&t({override:"closed",disableTransition:!0})},[n,t]),{togglePagesPanel:t,isPagesPanelOpen:i}};var aP=i(96990),az=i(3844);let aM=[{transform:"translateX(0px)"},{transform:"translateX(10px)"},{transform:"translateX(0px)"},{transform:"translateX(-10px)"},{transform:"translateX(0px)"},{transform:"translateX(10px)"},{transform:"translateX(0px)"},{transform:"translateX(-10px)"},{transform:"translateX(0px)"}],aN={duration:400,easing:"ease-in-out"},aF=e=>{var t;let{docId:i}=e,{onClose:n}=(0,ez.j)(),{onPasswordSubmitted:d}=(0,tE.m)(),[c,h]=(0,v.useState)(!1),[g,j]=(0,v.useState)(""),[f,b]=(0,v.useState)(!1),[y,w]=(0,v.useState)(""),C=(0,v.useRef)(null),[k,{data:E}]=(0,ik.tS1)();(0,v.useEffect)(()=>{k({variables:{docId:i}})},[i,k]);let S=(0,v.useCallback)(()=>{f||null==d||d(g).then(e=>{let{data:t}=e;(null==t?void 0:t.doc)?b(!0):(C.current&&C.current.animate(aM,aN),w(p.Ru._({id:"jvNV6s",values:{GAMMA_ARTIFACT_PROPER_NOUN:ej.TP}})))})},[g,f,w,b,d]);return(0,s.jsxs)(i0.aF,{isOpen:!0,onClose:n,isCentered:!0,size:"xl",children:[(0,s.jsx)(i1.m,{}),(0,s.jsxs)(i6.$,{ref:C,p:8,children:[(0,s.jsx)(iR.r,{children:(0,s.jsxs)(o.B,{alignItems:"center",children:[(0,s.jsx)(aP.e,{src:(null==E||null==(t=E.publicDoc)?void 0:t.logoUrl)||az.A.src,size:"lg"}),(0,s.jsx)(B.D,{children:(0,s.jsx)(m.x6,{id:"GZ6qi2"})}),(0,s.jsx)(l.E,{fontSize:"md",letterSpacing:"normal",fontWeight:"500",children:(0,s.jsx)(m.x6,{id:"rp/zfh"})})]})}),(0,s.jsx)(i_.c,{display:"flex",flexDirection:"column",alignItems:"center",children:(0,s.jsx)(o.B,{as:"form",spacing:4,onSubmit:e=>{e.preventDefault(),g.length&&S()},w:"100%",children:(0,s.jsxs)(no.MJ,{isInvalid:!!y,children:[(0,s.jsx)(nl.l,{children:(0,s.jsx)(m.x6,{id:"8ZsakT"})}),(0,s.jsxs)(nB.M,{children:[(0,s.jsx)(iX.p,{type:c?"text":"password",placeholder:"Enter the password",value:g,onChange:e=>{j(e.target.value)},borderColor:y?"red":"gray.200"}),(0,s.jsx)(nU.t,{children:(0,s.jsx)(H.K,{variant:"ghost",size:"sm",onClick:()=>h(!c),"aria-label":p.Ru._({id:"tniYMG"}),icon:c?(0,s.jsx)(x.g,{icon:u.k6j}):(0,s.jsx)(x.g,{icon:u.pS3}),_focus:{outline:"none"}})})]}),y&&(0,s.jsx)(nX.Wt,{children:y}),!y&&(0,s.jsx)(no.eK,{color:"gray.600",children:(0,s.jsx)(m.x6,{id:"tSTf2H",values:{GAMMA_ARTIFACT_PROPER_NOUN:ej.TP}})})]})})}),(0,s.jsx)(i2.j,{flex:1,w:"100%",children:(0,s.jsx)(r.s,{flex:1,align:"center",justify:"center",textAlign:"center",children:(0,s.jsx)(a.$,{w:"100%",variant:"solid",isDisabled:!g.length,onClick:S,children:(0,s.jsx)(m.x6,{id:"xGVfLh"})})})})]})]})};var aL=i(33612),aV=i.n(aL),aW=i(80911);let aG=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"body",i=(0,eu.jL)(),n=(0,Q.O2)("editor"),s=(0,eq.t3)(),r=(0,eu.GV)(ex.kn,tz()),o=(0,eu.GV)(ex.FI,tz()),l=!!(null==o?void 0:o.pos);(0,v.useEffect)(()=>{if(!e)return;let t=ts()(()=>{r&&i((0,ex.mF)({attached:!1}))},500,{leading:!0}),n=(0,ei.Ei)({topOffset:100,requiredCookie:"spotlightScrollDebug=true"});return document.addEventListener("wheel",t,!0),()=>{n(),t.cancel(),document.removeEventListener("wheel",t,!0)}},[e,i,r,l,t]);let a=(0,eu.GV)(ex.e4,tz());(0,v.useEffect)(()=>{if(!e||a)return;let t=ts()(()=>{if(n.inProgress)return;let t=(0,sP.MY)(e,100,s);if(!t)return void console.debug("[useHandleScrollAndSelectionChange][handleScroll] Unable to find topPosPct.");i((0,ex.m7)(t))},250,{trailing:!0,maxWait:500}),r=ts()(()=>{if(e.state.selection instanceof aW.J)return;let t=document.querySelector(n.scrollSelector||""),s=null==t?void 0:t.getBoundingClientRect(),r=e.state.selection.from,o=(0,sP.jB)(e,r);if(!t||!s||!o)return void console.debug("[useHandleScrollAndSelectionChange][handleSelectionChange] missing data",{domNodeToUse:o});let l=o.getBoundingClientRect(),a=parseFloat(((e.view.coordsAtPos(r).top-l.y)/l.height).toFixed(2));i((0,ex.m7)({pos:r,pct:a}))},250,{trailing:!0,maxWait:500});return t(),e.on("selectionUpdate",r),window.addEventListener("scroll",t,!0),()=>{e.off("selectionUpdate",r),window.removeEventListener("scroll",t,!0)}},[e,i,n,a,s])},aB=()=>{let e=(0,iI.d)(),t=(0,eu.jL)();return(0,v.useCallback)(i=>{let{collaborator:n,localIsFollowing:o,localIsAttached:a}=i,d={attached:!0};o?a?d.following=null:e.closeAll():(d.following=n.sessionId,e.closeAll(),e({duration:2e3,position:"bottom",render:function(){return(0,s.jsxs)(r.s,{bg:"gray.50",p:3,px:6,align:"center",borderRadius:"md",shadow:"md",children:[(0,s.jsx)(aP.e,{size:"sm",src:n.profileImageUrl,border:"solid 2px ".concat(n.color),color:aV()(n.color).isDark()?"white":"black",bg:n.color}),(0,s.jsx)(l.E,{ml:2,children:(0,s.jsx)(m.x6,{id:"lULvWe",values:{0:n.name}})})]})}})),console.debug("[CollaboratorsPanel] Clicked on collaborator ".concat(n.name,". Setting following to ").concat(d)),t((0,ex.mF)(d))},[e,t])},aU=e=>{let{editor:t,collaborators:i,user:n}=e,s=(0,v.useRef)(!1),r=aB(),o=new URLSearchParams(window.location.search),l=o.get("following_id"),a=o.get("follow_on_start");(0,v.useEffect)(()=>{if(s.current||!a||(null==n?void 0:n.id)===l||!t)return;let e=i.find(e=>e.id===l);e&&(r({collaborator:e,localIsAttached:!1,localIsFollowing:!1}),s.current=!0)},[l,a,t,i,n,r])},aH="sessionId1",aK=tp.YY.create({addStorage:()=>({user:{}}),addCommands(){return{user:e=>()=>{let t=(0,eu.KA)();return this.storage.user=iN()({},this.storage.user,e),t.dispatch((0,ex.vK)({sessionId:aH})),t.dispatch((0,ex._)({collaborators:[this.storage.user]})),!0}}}}),aJ=e=>{var t;let{docId:i,snapshotId:n,scrollingParentSelector:o,onCreate:l,theme:a,hideMadeWithGammaBadge:c=!1}=e,[u]=(0,v.useState)(()=>[t9.Q,ar.Li.configure({scrollerSelector:o}),aK,as.wg]),{user:x,isUserLoading:h,anonymousUser:m,color:p}=(0,et.ur)(),[g]=(0,eh.M)(em.E.gammaDocPasswords,{}),[j,f]=(0,v.useState)(),{data:b,loading:y,error:w}=(0,ik.YDl)({variables:{docId:i,snapshotId:n,password:g[i]},skip:!n}),C=(0,eu.GV)(eO.Jo);(0,v.useEffect)(()=>{!h&&j&&j.commands.user({id:(null==x?void 0:x.id)||m.id,color:p.value,sessionId:aH,idleSince:null,name:(null==x?void 0:x.displayName)||m.displayName||"",profileImageUrl:(null==x?void 0:x.profileImageUrl)||"",isReady:!h})},[j,x,p,h,m]);let k=b&&void 0!==b.snapshot&&!y&&C;return(0,s.jsxs)(d.a,{"data-testid":"public-static-editor-wrapper",flex:"1",height:"100%",children:[!k||w?(0,s.jsxs)(r.s,{direction:"column",height:"100%",flex:"1",bg:"gray.50",alignItems:"center",justifyContent:"center",children:[!k&&(0,s.jsx)(t4.y,{}),w&&(0,s.jsxs)(U.o,{h:"100%",children:["There was an error loading this ",ej.TP,":"," ",w.message]})]}):(0,s.jsx)(d.a,{"data-testid":"public-static-editor-wrapper-inner",transitionProperty:"common",transitionDuration:"750ms",transitionTimingFunction:"ease-out",opacity:+!!k,children:(0,s.jsx)(td.bw,{doc:C,editorId:"main",docId:i,theme:a||void 0,extensions:u,onCreate:e=>{let{editor:t}=e;f(t),setTimeout(()=>{l&&l(t)},10)},readOnly:!0,initialContent:null==(t=b.snapshot)?void 0:t.content.default,scrollingParentSelector:o})}),j&&(0,s.jsx)(tw,{editor:j,backoffFactor:2}),!c&&(0,s.jsx)(ao.d,{docWorkspace:null==C?void 0:C.organization})]})};var aq=i(88507);let aY={[tb.w.DOC_VIEW]:"doc",[tb.w.SLIDE_VIEW]:"present",[tb.w.DOC_PREVIEW]:"preview"},a$=Object.fromEntries(Object.entries(aY).map(e=>{let[t,i]=e;return[i,t]})),aX=e=>{let t=(0,y.wA)(),i=(0,D.sF)().mode,n=(0,eu.GV)(ex.wC),s=(0,v.useCallback)(e=>{let t=e||n,{mode:i}=(0,D.sF)(),s=aY[t];i!==s&&(0,l3.g5)({query:{...(0,D.sF)(),mode:s},emitChange:!1})},[n]);(0,aq.w)(s,[n]),(0,v.useEffect)(()=>l3.uE.on("changed",()=>s()),[s]),(0,tX.Vg)(function(){if(!e)return;let n=a$[i],{cardId:r}=(0,D.$9)();n===tb.w.SLIDE_VIEW&&(r?(console.debug("[useQuerySync] initializeModeFromQuery - Entering slide view -> spotlightCardById:",r),e.commands.spotlightCardById(r)):(console.debug("[useQuerySync] initializeModeFromQuery - Entering slide view -> spotlightCurrentCard"),e.commands.spotlightCurrentCard())),n&&t((0,ex.iY)({mode:n})),s(n)},[e,t,i,s],[e])};var aQ=i(50333),aZ=i.n(aQ),a0=i(61385),a1=i(74677);let a6=(e,t)=>e.docChanged?(0,a1.A)(e).flatMap(i=>{let n={from:i.newStart,to:i.newEnd};return function(e,t,i){let n=[];if(t.from===t.to){let i=e.nodeAt(t.from);i&&n.push({node:i,pos:t.from})}return e.nodesBetween(t.from,t.to,(e,t)=>{i(e)&&n.push({node:e,pos:t})}),n}(e.doc,n,t)}):[];var a2=i(67200);let a5="disable-card-size-animations",a4=()=>{let e=(0,eu.GV)(ex.yh),t=(0,eu.GV)(ex.We),i=(0,eu.GV)(ex.Uu),n=(0,iI.d)(),{min:r}=sL(),[o,l]=(0,v.useState)(null),[a,d]=(0,v.useState)(null);return(0,v.useEffect)(()=>{t<=r&&i.scaleContentToFit&&(a&&n.close(a),l(n({title:(0,s.jsx)(m.x6,{id:"IxUcyZ"}),description:(0,s.jsx)(m.x6,{id:"v9rGLj"}),status:"info",position:"top",duration:3e3})))},[t,i.scaleContentToFit,r,n,a]),(0,v.useEffect)(()=>{if(o&&t>r&&i.scaleContentToFit){n.close(o);let e=n({title:(0,s.jsx)(m.x6,{id:"oWpmCA"}),description:(0,s.jsx)(m.x6,{id:"S0DQn7"}),status:"success",position:"top",duration:3e3});l(null),d(e)}},[o,i.scaleContentToFit,r,n,t]),!e||t<=r},a3=e=>{let{editor:t}=e,i=(0,eu.CU)(),n=(0,sA.t)(),s=a4(),r=(0,v.useCallback)(e=>{var r;let{transaction:o}=e;if(!o.docChanged||o.getMeta("scaleContentToFit")||(0,a2.he)(o)||s||o.getMeta("rearrangeCards"))return;let l=null==(r=(0,r6.iS)(o.doc))?void 0:r.attrs.settings;if(!l||!(null==l?void 0:l.scaleContentToFit))return;if(o.steps.some(e=>"attr"in e&&"settings"===e.attr&&l.scaleContentToFit&&"fluid"!==l.cardDimensions)||(0,a2.Xq)(o)){let e=(0,tp.Nx)(o.doc,{from:0,to:o.doc.lastChild.nodeSize},tf.jg);requestAnimationFrame(()=>{e.forEach(e=>{let{node:s}=e;a8({id:s.attrs.id,editor:t,cardFontScale:s.attrs.fontScale,isTopLayout:"top"===s.attrs.layout,docSettingsFromTransaction:l,viewportScaleFactor:n,store:i})})});return}let a=a6(o,tf.jg);a.length&&a.forEach(e=>{let{node:s}=e;a7({id:s.attrs.id,editor:t,cardFontScale:s.attrs.fontScale,isTopLayout:"top"===s.attrs.layout,docSettingsFromTransaction:l,viewportScaleFactor:n,store:i})})},[t,i,n,s]);return(0,v.useEffect)(()=>{if(t&&!t.isThumbnail)return t.on("update",r),()=>{t.off("update",r)}},[t,r]),null},a8=async e=>{let{id:t,editor:i,cardFontScale:n,isTopLayout:s,docSettingsFromTransaction:r,viewportScaleFactor:o,store:l}=e;if(!i)return;let a=(0,tf.W0)(i,t);if(!a)return;let d=(0,sP.jB)(i,a.pos);if(!d)return;let c=a9({cardElt:d,cardFontScale:n,isTopLayout:s,docSettingsFromTransaction:r,viewportScaleFactor:o,store:l});c!==n&&i.chain().updateAttributesAtPos(a.pos,{fontScale:c}).setMeta("scaleContentToFit",!0).setMeta("addToHistory",!1).run()},a7=eL()(a8,250,{leading:!0}),a9=e=>{let{cardElt:t,cardFontScale:i,isTopLayout:n,docSettingsFromTransaction:s,viewportScaleFactor:r,store:o}=e,l=(0,ex.We)(o.getState()),a=(0,ex.SJ)(o.getState()),d=1,c=null==t?void 0:t.querySelector("[data-card-id]"),u=null==t?void 0:t.querySelector("[data-card-body]"),x=de({docSettingsFromTransaction:s,zoomLevel:l,viewportScaleFactor:r,theme:a});if(!c||!u||!x)return i||d;if(Math.abs(x-function(e,t){let i=e.querySelector('[data-layout-item-id="body"]'),n=null==i?void 0:i.querySelector("[data-node-view-content]"),s=e.querySelector('[data-layout-item-id="accent"]');if(t&&s){let e=s.clientHeight,t=null==n?void 0:n.clientHeight;return t?t+e:0}return(null==n?void 0:n.clientHeight)||0}(t,n))<1.01*x-x/1.01)return i;for(document.body.classList.add(a5),d+=.05;d>a0.o5&&(d=aZ()(d-.05,2),c.style.setProperty("--card-font-scale",d.toString()),!(u.scrollHeight<=1.01*x)););return document.body.classList.remove(a5),requestAnimationFrame(()=>{c.style.removeProperty("--card-font-scale")}),d},de=sT()(function(e){let{docSettingsFromTransaction:t,zoomLevel:i,viewportScaleFactor:n,theme:s}=e,r=null==t?void 0:t.cardDimensions,o=r?h.EXPORT_ASPECT_RATIOS[r]:16/9;if(o)return sD({zoomLevel:i,docSettingsFontSize:null==t?void 0:t.fontSize,defaultContentWidth:null==t?void 0:t.defaultContentWidth,viewportScaleFactor:n,theme:s})/o});var dt=i(55252),di=i(40556);let dn=e=>{var t;let{onClose:i,isOpen:n,site:d}=e,{replace:c}=(0,e9.useRouter)(),u=(0,iI.d)(),[x,{data:h,loading:p}]=(0,ik.GBQ)(),g=null==h||null==(t=h.archiveSite)?void 0:t.archived,j=(0,v.useCallback)(async()=>{if(null==d?void 0:d.id)try{await x({variables:{id:null==d?void 0:d.id}}),i()}catch(e){console.error("[DeleteGammaModal] Failed to archive site",e.message),u({title:(0,s.jsx)(m.x6,{id:"aBvGpM"}),description:(0,s.jsx)(m.x6,{id:"DVB9Jq"}),status:"error",duration:5e3,isClosable:!0,position:"top"})}},[x,null==d?void 0:d.id,u]);return((0,v.useEffect)(()=>{g&&(i(),c("/#sites"),u({title:(0,s.jsx)(m.x6,{id:"oGP1Fe"}),description:(0,s.jsx)(m.x6,{id:"sqh0jP"}),status:"success",duration:5e3,isClosable:!0,position:"top"}))},[g,i,c,u,d]),p||g)?(0,s.jsx)(N.Z,{children:(0,s.jsx)(r.s,{w:"100%",h:"100%",zIndex:"overlay",position:"absolute",top:"0",left:"0",background:"whiteAlpha.800",flex:1,children:(0,s.jsx)(iY.Y,{})})}):(0,s.jsxs)(i0.aF,{onClose:i,isOpen:n,size:"lg",children:[(0,s.jsx)(i1.m,{}),(0,s.jsxs)(i6.$,{children:[(0,s.jsx)(iR.r,{children:(0,s.jsx)(m.x6,{id:"cw2uO1",values:{GAMMA_ARTIFACT_PROPER_NOUN:ej.TP}})}),(0,s.jsx)(iO.s,{isDisabled:p}),(0,s.jsx)(i_.c,{children:(0,s.jsxs)(o.B,{spacing:4,children:[(0,s.jsx)(l.E,{children:(0,s.jsx)(m.x6,{id:"87gjhX",values:{GAMMA_ARTIFACT_PROPER_NOUN:ej.TP}})}),(0,s.jsx)(l.E,{children:(0,s.jsx)(m.x6,{id:"tOGRxi",values:{0:(null==d?void 0:d.name)?'"'.concat(null==d?void 0:d.name,'"'):""}})}),(0,s.jsx)(l.E,{children:(0,s.jsx)(m.x6,{id:"MluQ97",values:{GAMMA_ARTIFACT_PROPER_NOUN_PLURAL:ej.Ix},components:{0:(0,s.jsx)(i7.N,{color:"trueblue.500",colorScheme:"trueblue",href:"/#trash",textDecoration:"underline",isExternal:!0}),1:(0,s.jsx)(nG.p,{mx:"2px"})}})})]})}),(0,s.jsx)(i2.j,{children:(0,s.jsxs)(e7.e,{children:[(0,s.jsx)(a.$,{variant:"ghost",onClick:i,children:(0,s.jsx)(m.x6,{id:"dEgA5A"})}),(0,s.jsx)(a.$,{variant:"hazardous",onClick:j,isLoading:p,children:(0,s.jsx)(m.x6,{id:"cnGeoo"})})]})})]})]})},ds=e=>{let{site:t}=e,{isOpen:i,onOpen:n,onClose:r}=(0,ez.j)({id:"trash-site-modal"}),[o]=(0,ik.BL9)(),l=(0,iW.Gx)(),a=null==t?void 0:t.archived,d=(0,v.useCallback)(()=>{(null==t?void 0:t.id)&&o({variables:{id:t.id},optimisticResponse:{unarchiveSite:{id:t.id,__typename:"Site"}}})},[null==t?void 0:t.id,o]);return l&&t?a?(0,s.jsx)(ah.D,{icon:(0,s.jsx)(x.g,{fixedWidth:!0,icon:tA.ub2}),onClick:d,children:(0,s.jsx)(m.x6,{id:"yKu/3Y"})}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(ah.D,{color:"red.500",icon:(0,s.jsx)(x.g,{fixedWidth:!0,icon:u.yLS}),onClick:()=>{n()},children:(0,s.jsx)(m.x6,{id:"NOLglc",values:{GAMMA_ARTIFACT_PROPER_NOUN:ej.TP}})}),i&&(0,s.jsx)(dn,{isOpen:i,onClose:r,site:t})]}):(0,s.jsx)(s.Fragment,{})},dr=e=>({[tb.w.DOC_VIEW]:{buttonLabel:"present"===e?(0,s.jsx)(m.x6,{id:"eZb+lw"}):(0,s.jsx)(m.x6,{id:"rdUucN"}),shortcutIcon:tA.ijD,shortcutKeys:(0,J.lp)("Mod+Enter"),shortcutLabel:"present"===e?(0,s.jsx)(m.x6,{id:"MF+p5R"}):(0,s.jsx)(m.x6,{id:"V76CPb"})},[tb.w.SLIDE_VIEW]:{buttonLabel:(0,s.jsx)(m.x6,{id:"ydzS9x"}),shortcutIcon:tA.APi,shortcutKeys:"Esc",shortcutLabel:(0,s.jsx)(m.x6,{id:"IkakN2"})},[tb.w.DOC_PREVIEW]:{buttonLabel:(0,s.jsx)(m.x6,{id:"ydzS9x"}),shortcutIcon:tA.APi,shortcutKeys:"Esc",shortcutLabel:(0,s.jsx)(m.x6,{id:"nN6ipi"})}});var dl=i(59190),da=i(6845),dd=i(53891),dc=i(10995);let du=(0,rf.Ay)("mod+Enter"),dx=(0,rf.Ay)("Esc"),dh=(0,rf.Ay)("mod+Esc"),dm=(0,rf.Ay)("shift+mod+Enter"),dp=e=>function(t){t((0,ex.mF)({attached:!1})),t((0,ex.iY)({mode:e}))},dg=(e,t)=>{let i=document.querySelector(t);if(!i)return;let n=i.getBoundingClientRect();e.commands.scrollToNodeWithPin(document.elementFromPoint(n.width/2,100),100)},dj=e=>{let{editorWrapperEl:t,scrollingParentSelector:i,forceToolbarShownBecauseOnboarding:n}=e,s=(0,eu.jL)(),[r,o]=(0,v.useState)(!1),[l,a]=(0,v.useState)(!1),{editor:d}=(0,t5.mi)(),c=(0,eu.GV)(ex.wC),u=(0,v.useRef)(c);(0,v.useEffect)(()=>{u.current=c},[c]);let x=(0,eu.GV)(ex.Zi),h=(0,eu.GV)(ex.QF),m=(0,dc.x)(),p=(0,Z.st)(),g=(0,v.useCallback)(e=>{d&&!d.isDestroyed&&(e===tb.w.SLIDE_VIEW?((0,da.jL)(d.state.doc,s),(0,dd.Hy)(d,!1),d.commands.spotlightCurrentCard()):(d.commands.turnOffSpotlight(!0),dg(d,i)),s(dp(e)))},[s,d,i]),j=(0,v.useCallback)(()=>{let e=()=>{setTimeout(()=>{document.activeElement&&document.activeElement instanceof HTMLElement&&document.activeElement.blur()})};try{var t,i,n,s;if(null==(t=document.body)?void 0:t.requestFullscreen){null==(n=document.body)||n.requestFullscreen(),e();return}(null==(i=document.body)?void 0:i.webkitRequestFullscreen)&&(null==(s=document.body)||s.webkitRequestFullscreen(),e())}catch(e){console.debug("[PresentBlock] Error entering fullscreen:",e)}},[]),f=(0,v.useCallback)(()=>{try{if(document.fullscreenElement)return void document.exitFullscreen();document.webkitCurrentFullScreenElement&&document.webkitExitFullscreen&&document.webkitExitFullscreen()}catch(e){console.debug("[PresentBlock] Error exiting fullscreen:",e)}},[]),b=(0,R.u)("realUserMetrics"),{recordExitSlideModePerformance:y,recordEnterSlideModePerformance:w}=(0,dl.td)(b),C=(0,v.useCallback)(e=>{let{fullscreen:t=!1,presentAction:i="present"}=e;u.current!==tb.w.SLIDE_VIEW&&(g("preview"===i?tb.w.DOC_PREVIEW:tb.w.SLIDE_VIEW),t&&j(),null==p||p.trackDocEvent(Z.VV.PRESENT_MODE_ENTERED,{presentAction:i}),w({isFullscreen:t}),s((0,ex.Ye)({zoomLevel:1})),setTimeout(()=>{document.activeElement&&document.activeElement instanceof HTMLElement&&document.activeElement.blur()}))},[g,j,p,w,s]),k=(0,v.useCallback)(()=>{u.current!==tb.w.DOC_VIEW&&(g(tb.w.DOC_VIEW),r&&f(),n&&requestAnimationFrame(()=>{T.R.emit("toggleOpen",{behavior:"open",skipTracking:!0})}),null==p||p.trackDocEvent(Z.VV.PRESENT_MODE_EXITED),y({isFullscreen:r}))},[g,r,f,y,u,p,n]);return(0,v.useEffect)(()=>{let e=()=>{null!==document.fullscreenElement||l||k(),null!==document.webkitCurrentFullScreenElement||l||k(),o(e=>!e),a(!1)};return document.addEventListener("fullscreenchange",e),document.addEventListener("webkitfullscreenchange",e),document.addEventListener("mozfullscreenchange",e),()=>{document.removeEventListener("fullscreenchange",e),document.removeEventListener("webkitfullscreenchange",e),document.removeEventListener("mozfullscreenchange",e)}},[l,k,f]),(0,aq.w)(()=>{d&&!d.isDestroyed&&c===tb.w.DOC_VIEW&&requestAnimationFrame(()=>{let e=d.state.selection;e instanceof aW.J&&d.commands.command(t=>{let{tr:i}=t;return i.setSelection(e.createSelectionNear()),!0})})},[d,c]),(0,v.useEffect)(()=>eY.WC.on("keydown","PRESENT_BLOCK",e=>{let t=u.current===tb.w.SLIDE_VIEW,i=u.current===tb.w.DOC_VIEW;if(dh(e)&&t)return k(),!0;if(!m(e)){if(du(e))return e.preventDefault(),C({fullscreen:!1}),!0;if(dm(e))return e.preventDefault(),C({fullscreen:!0}),!0;if(dx(e)&&!i&&!x&&!h)return k(),!0}}),[C,k,j,x,h,t,m]),{enterSlideView:C,exitSlideView:k,enterFullscreen:j,exitFullscreen:f,exitedFullscreenByClick:l,isFullscreen:r,setIsFullscreen:o,setExitedFullscreenByClick:a}},df=e=>{let{editorWrapperEl:t,scrollingParentSelector:i}=e,n=(0,eu.GV)(ex.wC),r=(0,R.u)("presentFullScreen"),{shortcutIcon:o,shortcutKeys:l,buttonLabel:a}=dr("present")[n],{enterSlideView:d,exitSlideView:c}=dj({editorWrapperEl:t,scrollingParentSelector:i});return(0,s.jsx)(ah.D,{icon:(0,s.jsx)(x.g,{icon:o,fixedWidth:!0}),command:l,onClick:()=>{n===tb.w.SLIDE_VIEW?c():d({fullscreen:r,presentAction:"present"})},children:a})};var db=i(46091),dv=i(39247);let dy=(0,v.createContext)({isLoading:!1,loadPage:()=>{throw Error("Context not initialized")}}),dw=function(e,t){var i,n,s;let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o="card"===e.type,l=null==(i=e.attrs)?void 0:i.id;if(!["doc","document","card","cardLayoutItem"].includes(null!=(s=e.type)?s:""))return r;if(o){if(!l)return r;let i=t[l];if(r[l]=(0,sJ.getCardTitle)(e),!i||!Object.values(i).length)return r;t=i}return null==(n=e.content)||n.forEach(e=>{dw(e,t,r)}),r},dC=e=>{let{initialDoc:t,file:i,children:n}=e,[r,o]=(0,v.useState)(),[l,a]=(0,v.useState)(),[d,{data:c,loading:u}]=(0,ik.gto)({nextFetchPolicy:"cache-only"}),[x,{loading:h}]=(0,ik.XWf)(),m=c?c.doc:t,p=(0,eu.CU)();(0,v.useEffect)(()=>{if(!(null==m?void 0:m.id))return;let e=p.getState();if((t=>{let i=(0,eO.Jo)(e);return!!i&&i.id===t})(m.id)){let t=(0,dv.rZ)(e).reduce((e,t)=>(e[t.id]=t.title,e),{});o((0,ex.Ev)(e)),a(t);return}x({variables:{id:m.id}}).then(e=>{var t,i,n;let{data:s}=e,r=null==s||null==(n=s.doc)||null==(i=n.currentSnapshot)||null==(t=i.content)?void 0:t.default;if(!r)return;let l=(0,sJ.generateCardIdMapFromJSONContent)(r),d=dw(r,l.cardIdMap.tree);o(l.cardIdMap),a(d)})},[null==m?void 0:m.id,x,p]);let g=(0,v.useCallback)(e=>{d({variables:{id:e.id}})},[d]);return(0,s.jsx)(dy.Provider,{value:{loadPage:g,doc:m,file:i,isLoading:u||h,cardIdMap:r,cardTitleMap:l},children:n})};var dk=i(41781),dE=i(74003);let dS="gray.600",dI=e=>{let{error:t,refetch:i,...n}=e;return(0,s.jsx)(d.a,{px:6,py:4,...n,children:(0,s.jsxs)(iP.F,{p:6,status:"error",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",textAlign:"center",children:[(0,s.jsx)(iz._,{mr:0,boxSize:"30px",alignSelf:"center"}),(0,s.jsx)(rk.X,{mt:4,mb:2,fontSize:"md",children:(0,s.jsx)(m.x6,{id:"uNQm3r"})}),(0,s.jsx)(rE.T,{maxWidth:"md",children:t.message}),(0,s.jsx)(a.$,{mt:4,onClick:()=>i(),children:(0,s.jsx)(m.x6,{id:"6gRgw8"})})]})})};var dT=i(40162);let dA={slide:{enter:{visibility:"visible",opacity:1,scaleY:1,transition:{duration:.2,ease:[.4,0,.2,1]}},exit:{transitionEnd:{visibility:"hidden"},opacity:0,scaleY:.1,transition:{duration:.1,easings:"easeOut"}}}},dR=(0,aw.R)((e,t)=>{var i;let{file:n,selectedPageId:r,onPageSelected:o,getMenuItemProps:d,children:c,animation:h,matchWidth:g=!0,...j}=e,f=n.pages.find(e=>e.id===r);return(0,s.jsxs)(sy.W,{isLazy:!0,matchWidth:g,children:[(0,s.jsx)(sw.I,{textAlign:"start",as:a.$,variant:"plain",rightIcon:(0,s.jsx)(x.g,{icon:u.tdl}),leftIcon:(0,s.jsx)(ay,{isMainPage:(null==f?void 0:f.id)===n.mainPageId}),ref:t,...j,children:null!=c?c:(0,s.jsx)(l.E,{noOfLines:1,fontSize:["xs","sm"],children:null!=(i=null==f?void 0:f.title)?i:(0,s.jsx)(m.x6,{id:"wtrAUY"})})}),(0,s.jsx)(sC.c,{maxWidth:g?void 0:"sm",motionProps:h?{variants:dA[h]}:void 0,children:(0,s.jsx)(sk.i,{type:"radio",value:r,title:p.Ru._({id:"wRR604"}),onChange:e=>{o(n.pages.find(t=>t.id===e))},children:n.pages.map(e=>{var t;return(0,s.jsx)(sE.k,{fontSize:"sm",value:e.id,...null!=(t=null==d?void 0:d(e))?t:{},children:(0,s.jsxs)(l.E,{as:"span",display:"inline-flex",gap:4,alignItems:"center",children:[(0,s.jsx)(ay,{isMainPage:e.id===n.mainPageId,isSelected:e.id===r}),(0,s.jsx)(l.E,{noOfLines:1,children:e.title})]})},e.id)})})})]})}),dO=()=>{let{doc:e,file:t,loadPage:i}=(0,v.useContext)(dy),n=(0,eu.GV)(eO.d_);return t&&e&&n?(0,s.jsx)(dR,{maxW:"md",file:t,animation:"slide",selectedPageId:e.id,onPageSelected:i}):null},d_=()=>p.Ru._({id:"QbrUIo"}),dD=()=>p.Ru._({id:"FbBkvL"}),dP=e=>{let{isAnalyticsLoading:t,hasError:i,view:n,setView:o,description:d}=e;return i?(0,s.jsx)(iR.r,{children:(0,s.jsx)(m.x6,{id:"ZlwDi6"})}):(0,s.jsxs)(r.s,{direction:"column",flex:1,children:[(0,s.jsx)(iR.r,{children:t?(0,s.jsx)(dz,{}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(m.x6,{id:"ZlwDi6"}),(0,s.jsxs)(tI.T,{align:"stretch",spacing:4,children:[(0,s.jsx)(l.E,{color:"gray.500",fontSize:"sm",fontWeight:"normal",letterSpacing:"normal",children:d}),(0,s.jsx)(dO,{}),(0,s.jsxs)(dT.B,{children:[(0,s.jsx)(dT.Q,{children:(0,s.jsx)(a.$,{leftIcon:(0,s.jsx)(x.g,{icon:tA.q9c,"aria-label":d_()}),variant:"ghost",fontWeight:"600",bg:"deckView"===n?"trueblue.50":"transparent",color:"deckView"===n?"trueblue.500":dS,onClick:()=>o("deckView"),children:d_()})}),(0,s.jsx)(dT.Q,{children:(0,s.jsx)(a.$,{leftIcon:(0,s.jsx)(x.g,{icon:tA.Mkm,"aria-label":dD()}),variant:"ghost",fontWeight:"600",bg:"cardEngagement"===n?"trueblue.50":"transparent",color:"cardEngagement"===n?"trueblue.500":dS,onClick:()=>o("cardEngagement"),children:dD()})})]})]})]})}),(0,s.jsx)(iO.s,{})]})},dz=()=>(0,s.jsxs)(tI.T,{align:"stretch",spacing:4,children:[(0,s.jsx)(dk.E,{h:12,width:"30%"}),(0,s.jsx)(dk.E,{h:4,width:"80%"})]});var dM=i(41633);let dN=e=>{let{degree:t,alpha:i=1,startColor:n="#ECC94B",endColor:s="#38A169"}=e;if(Number.isNaN(t))return aV()("#e5e0df").toHex8String();let r=aV()(n).toHsl(),o=aV()(s).toHsl();return aV()({h:(0,dM.Cc)(r.h,o.h,t),s:(0,dM.Cc)(r.s,o.s,t),l:(0,dM.Cc)(r.l,o.l,t),a:i}).toHex8String()},dF=(e,t)=>e.reduce((e,i)=>(e[i.cardId]=i[t],e),{}),dL=(e,t)=>{let i=0;for(let s in e){var n;i+=null!=(n=t[s])?n:0,i+=dL(e[s],t)}return i},dV=(e,t)=>{let i=0;for(let s in e){var n;i=Math.max((null!=(n=t[s])?n:0)+dL(e[s],t),i)}return i};var dW=i(22348),dG=i.n(dW);let dB=e=>{let{cardsViewed:t,totalCards:i}=e,n=dN({degree:t/i}),o=i>0;return(0,s.jsxs)(e8.z,{spacing:3,children:[(0,s.jsxs)(r.s,{flex:1,position:"relative",children:[(0,s.jsx)(ed.k,{h:4,flex:1,borderRadius:"sm",value:t,max:o?i:void 0,bg:"gray.200",sx:{"> div":{bg:n}}}),o&&t===i&&(0,s.jsx)(dH,{top:0,right:0,transform:"translate(50%,-50%)",position:"absolute"})]}),(0,s.jsx)(l.E,{w:{base:10,lg:12},fontSize:"sm",whiteSpace:"nowrap",textAlign:"left",children:o?"".concat(t,"/").concat(i):(0,s.jsx)(m.x6,{id:"8Va3Pt"})})]})},dU=e=>{let{cardCount:t}=e,i=(0,v.useMemo)(()=>dG()(1,t),[t]);return(0,s.jsxs)(e8.z,{spacing:3,filter:"blur(3px)",children:[(0,s.jsx)(r.s,{flex:1,position:"relative",children:(0,s.jsx)(ed.k,{h:4,flex:1,borderRadius:"sm",value:i,max:t,bg:"gray.300",sx:{"> div":{bg:"gray.300"}}})}),(0,s.jsxs)(l.E,{w:{base:10,lg:12},fontSize:"sm",whiteSpace:"nowrap",textAlign:"left",color:"gray.600",children:[i,"/",t]})]})},dH=e=>{let{...t}=e;return(0,s.jsx)(n9.j,{bg:"green.500",size:"18px",border:"2px solid white",color:"white",...t,children:(0,s.jsx)(x.g,{icon:tA.e68,"aria-label":p.Ru._({id:"y886Ns"}),size:"xs"})})},dK=e=>t=>(0,dM.Cc)(0,100,t/e),dJ=e=>{let{cards:t,isColorized:i=!1,scaleToMax:n=!1,includeChildren:r,showViewersPercent:o=!1,leftLabel:l,rightLabel:a,tooltipLabel:c,cardLookupTable:u,onAnalyticsPanelClose:x}=e,h=dK(r?dV(t,u):Math.max(...Object.values(u))),m=(0,v.useCallback)(e=>h(e),[h]);return(0,s.jsxs)(d.a,{mt:6,mb:4,children:[(0,s.jsxs)(e8.z,{mb:3,children:[(0,s.jsx)(e8.z,{children:(0,s.jsx)(J._x,{children:l})}),(0,s.jsx)(tT.h,{}),(0,s.jsx)(e8.z,{children:(0,s.jsx)(J.Tz,{placement:"top",label:c,children:(0,s.jsx)(e8.z,{children:(0,s.jsx)(J._x,{borderBottom:"0.125em dashed",borderBottomColor:"gray.400",children:a})})})})]}),(0,s.jsx)(d.a,{width:"100%",children:Object.entries(t).map(e=>{var t;let[l,a]=e;return(0,s.jsx)(dq,{id:l,childCards:a,percentage:null!=(t=u[l])?t:0,calculatePercentageScale:m,isColorized:i,cardLookupTable:u,scaleToMax:n,includeChildren:r,showViewersPercent:o,onAnalyticsPanelClose:x},l)})})]})},dq=e=>{let{id:t,cardLookupTable:i,childCards:n,percentage:a,calculatePercentageScale:c,isColorized:h,scaleToMax:p,includeChildren:g,showViewersPercent:j,onAnalyticsPanelClose:f}=e,[b,y]=(0,v.useState)(!1),w=(0,v.useCallback)(()=>{y(!b)},[b]),{cardTitleMap:C}=(0,v.useContext)(dy),k=null==C?void 0:C[t],E=Object.values(n).length>0,S=0===a,I=g?a+dL(n,i):a,T=b?I:0,A=p?c(I):Math.min(100,T),R=b?a:I,O=p?c(R):Math.min(100,R),_={startColor:"#F6AD55",endColor:"#68D391"},D=h?dN({degree:A/100,..._}):"trueblue.50",P=h?dN({degree:O/100,..._}):"trueblue.100";return(0,s.jsxs)(o.B,{children:[(0,s.jsx)(r.s,{direction:"column",children:(0,s.jsxs)(r.s,{h:8,px:2,bg:"gray.50",borderRadius:"md",position:"relative",overflow:"hidden",alignItems:"center",_focusWithin:{shadow:"outline"},children:[(0,s.jsxs)(e8.z,{pos:"absolute",zIndex:1,children:[E&&(0,s.jsx)(H.K,{"aria-label":"expand-card",size:"xs",variant:"ghost",isRound:!0,colorScheme:"blackAlpha",icon:(0,s.jsx)(x.g,{icon:u.XkK}),transform:b?"rotate(90deg)":"",onClick:w,_focus:{shadow:"none"}}),!E&&(0,s.jsx)(r.s,{w:6,justifyContent:"center",alignItems:"center",children:S?(0,s.jsx)(J.Tz,{label:(0,s.jsx)(m.x6,{id:"s+PDNe"}),children:(0,s.jsx)(d.a,{color:"blackAlpha.500",children:(0,s.jsx)(x.g,{icon:tA.k6j,size:"sm"})})}):(0,s.jsx)(d.a,{color:"blackAlpha.300",fontSize:"xx-small",children:(0,s.jsx)(x.g,{icon:tA.ZPt,size:"sm"})})}),(0,s.jsx)(l.E,{color:S?"blackAlpha.500":void 0,noOfLines:1,children:k||(0,s.jsx)(m.x6,{id:"wja8aL"})})]}),(0,s.jsxs)(d.a,{position:"absolute",w:"100%",height:"100%",top:0,left:0,pointerEvents:"none",children:[(0,s.jsx)(d.a,{position:"absolute",h:"100%",bg:S?"blackAlpha.200":D,w:"".concat(A,"%")}),(0,s.jsx)(d.a,{transitionProperty:"all",transitionDuration:"normal",position:"absolute",h:"100%",bg:S?"blackAlpha.300":P,w:"".concat(O,"%")})]}),h&&100===a&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(tT.h,{}),(0,s.jsx)(dH,{alignSelf:"center",zIndex:1})]})]})}),(0,s.jsx)(d.a,{pl:8,children:E&&Object.entries(n).map(e=>{var t;let[n,r]=e;return(0,s.jsx)(o5.S,{in:b,children:(0,s.jsx)(dq,{id:n,childCards:r,percentage:null!=(t=i[n])?t:0,cardLookupTable:i,calculatePercentageScale:c,scaleToMax:p,isColorized:h,includeChildren:g,showViewersPercent:j,onAnalyticsPanelClose:f})},n)})})]})},dY=()=>(0,s.jsx)(o.B,{spacing:2,children:(0,s.jsx)(m.x6,{id:"QXJTby",components:{0:(0,s.jsx)(l.E,{}),1:(0,s.jsx)(l.E,{}),2:(0,s.jsx)(l.E,{})}})}),d$=e=>{let{timeInMS:t}=e;return void 0===t?(0,s.jsx)(s.Fragment,{}):(0,s.jsx)(m.x6,{id:"yXHI9B",values:{timeInSeconds:t/1e3}})},dX=(e,t)=>"viewTimePercent"===e?{chartDescription:(0,s.jsx)(m.x6,{id:"dpTE1c",values:{viewerCount:t}}),leftLabel:(0,s.jsx)(m.x6,{id:"ml51m3"}),rightLabel:(0,s.jsx)(m.x6,{id:"8R7bfR"})}:{chartDescription:(0,s.jsx)(m.x6,{id:"b2VMTo",values:{viewerCount:t}}),leftLabel:(0,s.jsx)(m.x6,{id:"kTgCTO"}),rightLabel:(0,s.jsx)(m.x6,{id:"AKDcmS"})},dQ=e=>{let{docId:t,viewerFilter:i,currentViewerFilterCount:n,onAnalyticsPanelClose:r}=e,{cardIdMap:o}=(0,v.useContext)(dy),{data:l,error:c,loading:h,refetch:p}=(0,ik.NI5)({variables:{docId:t}}),[g,j]=(0,v.useState)("viewTimePercent"),{chartDescription:f,rightLabel:b,leftLabel:y}=dX(g,n),w="viewersOnly"===i?"viewers":"everyone",C=(0,R.u)("cardViewedThreshold"),k=(0,v.useMemo)(()=>{var e;return(null==l||null==(e=l.docCardsStats)?void 0:e[w])||[]},[null==l?void 0:l.docCardsStats,w]),E=(0,v.useMemo)(()=>dF(k,g),[k,g]),S=(0,v.useCallback)(()=>j("viewTimePercent"),[]),I=(0,v.useCallback)(()=>j("viewersPercent"),[]);return(0,s.jsxs)(d.a,{children:[(0,s.jsxs)(e8.z,{my:4,children:[(0,s.jsx)(a.$,{leftIcon:(0,s.jsx)(x.g,{icon:u.a$,"aria-label":"Time spend"}),variant:"ghost",fontWeight:"600",bg:"viewTimePercent"===g?"trueblue.50":"transparent",color:"viewTimePercent"===g?"trueblue.500":dS,onClick:S,children:(0,s.jsx)(m.x6,{id:"XyvAeS"})}),(0,s.jsx)(a.$,{leftIcon:(0,s.jsx)(x.g,{icon:tA.Bi7,"aria-label":"Percent viewed"}),variant:"ghost",fontWeight:"600",bg:"viewersPercent"===g?"trueblue.50":"transparent",color:"viewersPercent"===g?"trueblue.500":dS,onClick:I,children:(0,s.jsx)(m.x6,{id:"vXtpAZ"})})]}),(0,s.jsx)(d0,{description:f}),c&&(0,s.jsx)(dI,{error:c,refetch:p}),(h||!o)&&!c&&(0,s.jsx)(dZ,{}),!h&&!c&&o&&(0,s.jsx)(dJ,{cards:o.tree,cardLookupTable:E,scaleToMax:"viewTimePercent"===g,isColorized:"viewersPercent"===g,includeChildren:"viewTimePercent"===g,showViewersPercent:"viewersPercent"===g,rightLabel:b,leftLabel:y,tooltipLabel:"viewTimePercent"===g?(0,s.jsx)(dY,{}):(0,s.jsx)(d$,{timeInMS:C}),onAnalyticsPanelClose:r})]})},dZ=e=>{let{includeDescription:t=!1}=e;return(0,s.jsx)(r.s,{direction:"column",mt:6,mb:4,children:(0,s.jsxs)(tI.T,{align:"stretch",children:[t&&(0,s.jsx)(dk.E,{h:5,mb:3,w:"70%"}),[void 0,void 0,void 0,void 0,void 0].map((e,t)=>(0,s.jsx)(dk.E,{h:8},t))]})})},d0=e=>{let{description:t}=e;return(0,s.jsx)(l.E,{color:dS,children:t})};var d1=i(30742),d6=i(96414),d2=i(4192),d5=i(21157),d4=i.n(d5),d3=i(26194),d8=i.n(d3);let d7=e=>{let{uniqueViewers:t,docCreatedDate:i}=e,n=(0,R.u)("cardViewedThreshold");return(0,s.jsx)(nE.d,{children:(0,s.jsxs)(nS.Tr,{children:[(0,s.jsx)(d9,{label:(0,s.jsx)(m.x6,{id:"LZHJAq",values:{uniqueViewers:t}}),tooltip:(0,s.jsx)(m.x6,{id:"aaiIlJ",values:{docCreatedDate:i}}),width:"40%"}),(0,s.jsx)(d9,{label:(0,s.jsx)(m.x6,{id:"pRGfP3"}),width:"35%"}),(0,s.jsx)(d9,{label:(0,s.jsx)(m.x6,{id:"QfqHuz"}),tooltip:(0,s.jsx)(d$,{timeInMS:n}),width:"25%"})]})})},d9=e=>{let{label:t,width:i,tooltip:n}=e,r=(0,s.jsx)(nI.Th,{w:i,children:(0,s.jsx)(l.E,{display:"inline",borderBottom:n?"0.125em dashed":void 0,borderBottomColor:n?"gray.400":void 0,children:t})});return n?(0,s.jsx)(J.Tz,{placement:"top",label:n,children:r}):r},ce=["Yesterday at 11:02 am","Today at 12:55 pm","Dec 12, 2020, 10:19 pm","Apr 14, 2023, 4:30 pm","Jan 1, 2021, 12:03 am","Dec 7, 1984, 12:03 am","May 14, 2002, 3:56 pm"],ct=e=>{let{viewers:t,currentViewerFilterCount:i,docCreatedDate:n,creatorId:r,contributors:o,cardCount:a,handleTableRowClick:d,hasIndividualAnalytics:c}=e,{user:u}=(0,et.ur)(),x=c?t:d8()(t,e=>{var t;return[+((null==(t=e.user)?void 0:t.id)!==(null==u?void 0:u.id)),-e.lastOpened]}).slice(0,3);return(0,s.jsx)(d6.K,{children:(0,s.jsxs)(nk.X,{colorScheme:"blackAlpha",children:[(0,s.jsx)(d7,{uniqueViewers:i,docCreatedDate:n}),(0,s.jsx)(nT.N,{children:x.map((e,i)=>{let{user:n,lastOpened:x,visitorId:h}=e,m=(null==n?void 0:n.id)===r,g=o.some(e=>e.user.id===(null==n?void 0:n.id)),j=n?n.displayName+(n.id===(null==u?void 0:u.id)?" "+p.Ru._({id:"dDUgzP"}):"")||"":p.Ru._({id:"VmjbJY"}),f=x?d4()((0,rl.OG)(x)):p.Ru._({id:"/JO3xr"}),b={name:j,id:(null==n?void 0:n.id)||h||"",email:null==n?void 0:n.email,isCreator:m,isContributor:g,profileImg:null==n?void 0:n.profileImageUrl,lastOpened:f},v=i===t.length-1,y=(null==n?void 0:n.id)===(null==u?void 0:u.id),w=!c&&!y;return(0,s.jsxs)(nS.Tr,{cursor:"pointer",onClick:()=>d(b),_hover:{bg:"blackAlpha.50"},borderBottom:"none",children:[(0,s.jsx)(nA.Td,{borderBottom:v?"0 none":void 0,children:(0,s.jsx)(ci,{name:j,email:null==n?void 0:n.email,profileImg:null==n?void 0:n.profileImageUrl,isContributor:g,isCreator:m,isAnonymous:!n})}),(0,s.jsx)(nA.Td,{borderBottom:v?"0 none":void 0,children:w?(0,s.jsx)(l.E,{fontSize:"sm",filter:"blur(3px)",color:"gray.600",children:ce[i%ce.length]}):(0,s.jsx)(l.E,{fontSize:"sm",children:f})}),(0,s.jsx)(nA.Td,{borderBottom:v?"0 none":void 0,children:w?(0,s.jsx)(dU,{cardCount:a}):(0,s.jsx)(dB,{cardsViewed:e.cardsViewed||0,totalCards:a||0})})]},(null==n?void 0:n.id)||h)})})]})})},ci=e=>{let{name:t,profileImg:i,email:n="",isCreator:r=!1,isContributor:a=!1,isAnonymous:d=!1,...c}=e;return(0,s.jsxs)(e8.z,{...c,children:[(0,s.jsx)(aP.e,{size:"sm",name:t,src:i}),(0,s.jsxs)(o.B,{spacing:.5,children:[(0,s.jsxs)(l.E,{children:[t,d&&(0,s.jsx)(J.qT,{label:(0,s.jsx)(m.x6,{id:"VHgG8W",values:{GAMMA_ARTIFACT_PROPER_NOUN:ej.TP}}),ml:2})]}),(0,s.jsxs)(e8.z,{mt:1,children:[(0,s.jsx)(l.E,{fontSize:"sm",color:"gray.500",children:n}),(r||a)&&(0,s.jsx)(d2.vw,{size:"sm",transform:"translate(0, 1.5px)",children:r?(0,s.jsx)(m.x6,{id:"UE2beD"}):(0,s.jsx)(m.x6,{id:"3L51iw"})})]})]})]})},cn=e=>{var t,i,n,r;let{user:o,onBackClick:l,docId:c,onAnalyticsPanelClose:u}=e,{cardIdMap:x}=(0,v.useContext)(dy),{data:h,error:p,loading:g,refetch:j}=(0,ik.NI5)({variables:{docId:c,userId:o.id},skip:!c||!o.id,pollInterval:9e5,notifyOnNetworkStatusChange:!0}),f=null!=(r=null==h||null==(i=h.docCardsStats)||null==(t=i.everyone)?void 0:t.length)?r:0,b=null==h||null==(n=h.docCardsStats)?void 0:n.cardCount,y=(0,v.useMemo)(()=>{var e;return(null==h||null==(e=h.docCardsStats)?void 0:e.everyone)||[]},[null==h?void 0:h.docCardsStats]),w=(0,v.useMemo)(()=>dF(y,"viewTimePercent"),[y]);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(iR.r,{children:(0,s.jsx)(a.$,{"aria-label":"Back",leftIcon:(0,s.jsx)(d1.g,{}),variant:"ghost",onClick:l,children:(0,s.jsx)(m.x6,{id:"iH8pgl"})})}),(0,s.jsx)(iO.s,{}),(0,s.jsx)(iD.c,{}),(0,s.jsx)(i_.c,{children:(0,s.jsxs)(d.a,{children:[(0,s.jsx)(cs,{user:o,showLastOpened:!0}),b&&(0,s.jsx)(d0,{description:(0,s.jsx)(m.x6,{id:"YJOrjl",values:{cardsViewed:f,totalCards:b}})}),g&&!p&&(0,s.jsx)(dZ,{includeDescription:!0}),p&&(0,s.jsx)(dI,{error:p,refetch:j}),!p&&!g&&x&&(0,s.jsx)(dJ,{cards:x.tree,scaleToMax:!0,includeChildren:!0,leftLabel:(0,s.jsx)(m.x6,{id:"ml51m3"}),rightLabel:(0,s.jsx)(m.x6,{id:"8R7bfR"}),cardLookupTable:w,tooltipLabel:(0,s.jsx)(dY,{}),onAnalyticsPanelClose:u})]})})]})},cs=e=>{let{user:t,showLastOpened:i}=e;return(0,s.jsxs)(e8.z,{align:"center",my:6,children:[(0,s.jsx)(ci,{name:t.name,profileImg:t.profileImg,email:t.email,isCreator:t.isCreator,isContributor:t.isContributor,width:i?"50%":void 0}),i&&(0,s.jsxs)(tI.T,{align:"flex-start",spacing:0,children:[(0,s.jsx)(J._x,{children:(0,s.jsx)(m.x6,{id:"pRGfP3"})}),(0,s.jsx)(l.E,{children:t.lastOpened})]})]})},cr=(e,t,i)=>"everyone"===e?p.Ru._({id:"1IE7uf",values:{everyone:t}}):"viewersOnly"===e?p.Ru._({id:"r/tA4Y",values:{viewersOnly:i}}):p.Ru._({id:"V9JX7d"}),co={everyone:tA.USd,viewersOnly:tA.pS3,accessLinkOnly:tA.wic},cl=e=>{let{selected:t,handleMenuItemChange:i,everyoneCount:n,viewersOnlyCount:o}=e;return(0,s.jsxs)(sy.W,{children:[(0,s.jsx)(sw.I,{leftIcon:(0,s.jsx)(x.g,{size:"xs",icon:co[t]}),as:a.$,size:"md",rightIcon:(0,s.jsx)(x.g,{size:"xs",icon:u.Jt$}),children:cr(t,n,o)}),(0,s.jsx)(sC.c,{zIndex:2,maxW:"380px",children:(0,s.jsxs)(sk.i,{defaultValue:t,value:t,onChange:e=>{Array.isArray(e)||i(e)},children:[(0,s.jsx)(sE.k,{value:"everyone",isDisabled:0===n,children:(0,s.jsxs)(r.s,{align:"center",children:[(0,s.jsx)(x.g,{icon:co.everyone,size:"xs"}),(0,s.jsxs)(d.a,{ml:3,children:[(0,s.jsx)(l.E,{children:cr("everyone",n,o)}),(0,s.jsx)(l.E,{fontSize:"sm",color:"gray.500",children:(0,s.jsx)(m.x6,{id:"c5ESvc",values:{GAMMA_ARTIFACT_PROPER_NOUN:ej.TP}})})]})]})}),(0,s.jsx)(sE.k,{value:"viewersOnly",isDisabled:0===o,children:(0,s.jsxs)(r.s,{align:"center",children:[(0,s.jsx)(x.g,{icon:co.viewersOnly,size:"xs"}),(0,s.jsxs)(d.a,{ml:3,children:[(0,s.jsx)(l.E,{children:cr("viewersOnly",n,o)}),(0,s.jsx)(l.E,{fontSize:"sm",color:"gray.500",children:(0,s.jsx)(m.x6,{id:"5hKO48",values:{GAMMA_ARTIFACT_PROPER_NOUN:ej.TP}})})]})]})}),!1]})})]})};var ca=i(77126),cd=i(96784),cc=i(19034),cu=i(66490),cx=i(8995),ch=i(59557),cm=i(14974),cp=i(1860),cg=i(23275),cj=i(26658),cf=i(88678),cb=i(25927),cv=i(54772),cy=i(40149);let cw={top:55,right:20,bottom:40,left:24},cC=e=>Math.round(e).toString(),ck=e=>Math.max(...e.map(e=>(0,cf.A)(e.toString(),{fontFamily:"body",fontSize:"var(--chakra-fontSizes-sm)",fontWeight:"600"})||0)),cE={backgroundColor:"var(--chakra-colors-blackAlpha-800)",color:"var(--chakra-colors-gray-50)",fontFamily:"var(--chakra-fonts-body)",boxShadow:"var(--chakra-shadows-4)",fontSize:"var(--chakra-fontSizes-xs)",borderRadius:"var(--chakra-radii-sm)",fontWeight:"var(--chakra-fontWeights-semibold)",borderWidth:"1px",borderColor:"black",paddingRight:"var(--chakra-space-1-5)",paddingLeft:"var(--chakra-space-1-5)",paddingTop:"var(--chakra-space-0-5)",paddingBottom:"var(--chakra-space-0-5)",zIndex:"var(--chakra-zIndex-tooltip)",minWidth:"60px",lineHeight:"var(--chakra-lineHeights-base)"},cS="var(--chakra-colors-gray-500)",cI="var(--chakra-colors-gray-200)",cT=e=>e.map(e=>e.x),cA=e=>e.map(e=>e.y),cR=e=>{let{width:t,height:i,margin:n=cw,chartData:r,TooltipInner:o,showZero:l,shouldRoundYValues:a,showMaxAndMiddle:c,barColor:u,customTooltipStyles:x,onClick:h=()=>{}}=e,{showTooltip:m,tooltipOpen:p,tooltipLeft:g,tooltipTop:j,tooltipData:f,hideTooltip:b}=(0,cb.A)(),y=(0,v.useRef)(),w=(0,v.useRef)();(0,v.useEffect)(()=>()=>{y.current&&clearTimeout(y.current),w.current&&clearTimeout(w.current)},[]);let C=cA(r),k=Math.max(...C),E=[k,Math.round(k/2)],S=ck(c?E:C),I=n.left+S,T=t-I-n.right,A=i-n.top-n.bottom,R={...cv.k,...cE,...x},O=(0,v.useMemo)(()=>(0,cm.A)({range:[0,T],domain:cT(r),padding:.3}),[T,r]),_=(0,v.useMemo)(()=>(0,cp.A)({range:[A,0],round:!0,domain:[0,k]}),[A,k]),D=l?_(Math.min(...C.filter(e=>0!==e))):A,P=l&&A-D>6;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(d.a,{children:(0,s.jsxs)("svg",{width:t,height:i,children:[(0,s.jsx)("rect",{x:0,y:0,rx:4,width:t,height:i,fill:"var(--chakra-colors-gray-50)"}),(0,s.jsx)(cx.A,{top:n.top,left:I,children:r.map(e=>{var t,i;let n=e.y,r=e.x,o="bar-".concat(r,"-").concat(n),a=O.bandwidth(),d=A-(null!=(t=_(n))?t:0),c=P&&0===d?6:d,x=null!=(i=O(r))?i:0,p=A-c;return(0,s.jsxs)(cx.A,{children:[(0,s.jsx)(cg.A,{x:x,y:p,width:a,height:c,radius:5,topLeft:!0,topRight:!0,fill:l&&0===n?cI:u,onMouseLeave:()=>{y.current=window.setTimeout(()=>{b()},300)},onMouseMove:t=>{y.current&&clearTimeout(y.current);let i=(0,cu.A)(t);m({tooltipData:e,tooltipTop:null==i?void 0:i.y,tooltipLeft:null==i?void 0:i.x})},onClick:t=>h(t,e)}),(0,s.jsx)(cj.A,{x:x,y:0,width:a,height:Math.max(0,A-c),opacity:0,onMouseLeave:()=>{w.current=window.setTimeout(()=>{b()},300)},onMouseMove:t=>{w.current&&clearTimeout(w.current);let i=(0,cu.A)(t);m({tooltipData:e,tooltipTop:null==i?void 0:i.y,tooltipLeft:null==i?void 0:i.x})}})]},o)})}),(0,s.jsx)(cd.A,{top:n.top,left:I,scale:_,stroke:cI,strokeWidth:2,tickValues:c?E:void 0,numTicks:c?void 0:2,hideZero:!0,tickFormat:a?cC:void 0,tickLength:6,tickStroke:cI,tickLabelProps:()=>({fill:cS,textAnchor:"end",fontFamily:"var(--chakra-fonts-body)",fontSize:"var(--chakra-fontSizes-sm)",fontWeight:"600",dy:"0.33em",dx:-4})}),(0,s.jsx)(cc.A,{top:A+n.top,left:I,scale:O,stroke:cI,numTicks:4,tickStroke:cI,tickLabelProps:()=>({fill:cS,textAnchor:"middle",fontFamily:"var(--chakra-fonts-body)",fontSize:"var(--chakra-fontSizes-sm)",fontWeight:"600",dy:4}),strokeWidth:2,tickLength:6})]})}),p&&f&&(0,s.jsx)(cy.A,{top:j,left:g,style:R,children:(0,s.jsx)(o,{x:f.x,y:f.y})})]})},cO=e=>{let{chartTitle:t,TooltipInner:i,showZero:n=!0,shouldRoundYValues:r=!0,showMaxAndMiddle:o=!0,data:a,barColor:c="var(--chakra-colors-trueblue-200)",customTooltipStyles:u,onClick:x=()=>{},...h}=e;return(0,s.jsxs)(d.a,{position:"relative",height:"300px",...h,children:[(0,s.jsx)(l.E,{size:"xs",color:"gray.500",fontWeight:"600",position:"absolute",top:3,left:"50%",transform:"translateX(-50%)",children:t}),(0,s.jsx)(ch.A,{children:e=>{let{width:t,height:l}=e;return t<10?null:(0,s.jsx)(cR,{width:t,height:l,showZero:n,chartData:a,barColor:c,customTooltipStyles:u,onClick:x,TooltipInner:i,shouldRoundYValues:r,showMaxAndMiddle:o})}})]})},c_=(e,t)=>{let i="LLL d",n=new Date;n.setDate(n.getDate()-t+1);let s=[];for(let r=0;r<t;r++){let t=new Date(n);t.setDate(t.getDate()+r);let o=(0,ca.A)(t,{representation:"date"}),l=e.find(e=>e.date===o);l?s.push({x:(0,iU.Yq)(l.date,i),y:l.uniqueVisitors?l.uniqueVisitors:0}):s.push({x:(0,iU.Yq)(o,i),y:0})}return s},cD=e=>{let{viewData:t,dayCount:i}=e,n=c_(t,i);return(0,s.jsx)(cO,{data:n,my:3,chartTitle:(0,s.jsx)(m.x6,{id:"mSEibf"}),TooltipInner:cP})},cP=e=>{let{x:t,y:i}=e;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(l.E,{children:t}),(0,s.jsx)(l.E,{children:(0,s.jsx)(m.x6,{id:"6MKtHx",values:{y:i}})})]})},cz=e=>e.every(e=>0===e.uniqueVisitors),cM=(e,t)=>t&&t.dailyViews?"everyone"===e?t.dailyViews.everyone?t.dailyViews.everyone:[]:"viewersOnly"===e&&t.dailyViews.viewers?t.dailyViews.viewers:[]:[],cN=(e,t,i)=>{var n,s,r;if(!i)return 0;let o=null!=(s=i.uniqueViewers)?s:0,l=null!=(r=null==(n=e.editors)?void 0:n.length)?r:0;return"everyone"===t?o:"viewersOnly"===t?Math.max(0,o-l):0},cF=e=>{var t,i;let{doc:n,handleSharePanelOpen:l,onAnalyticsPanelClose:d,canShare:c}=e,{loading:u,data:x,error:h,refetch:g}=(0,ik.Y0k)({variables:{memoId:n.id},skip:!n.id,pollInterval:9e5,notifyOnNetworkStatusChange:!0}),{user:j}=(0,et.ur)(),[f,b]=(0,v.useState)("deckView"),[y,w]=(0,v.useState)(null),[C,k]=(0,v.useState)("everyone"),E=(0,iU.Yq)(n.createdTime,"PPP"),S=n.title||(0,s.jsx)(m.x6,{id:"wja8aL"}),I=(null==x?void 0:x.memoStats.viewers)||[],T=(null==x||null==(t=x.memoStats.dailyViews)?void 0:t.dayCount)||0,A=cM(C,null==x?void 0:x.memoStats),R=(0,eK.ez)("individual_analytics",n.organization),{openUpsellModal:O}=(0,dE.I)(),_=cz(A),D=I.filter(e=>{var t;return"everyone"===C||!(null==(t=n.editors)?void 0:t.some(t=>{var i,n;return(null==(i=e.user)?void 0:i.id)===(null==(n=t.user)?void 0:n.id)}))}),P=cN(n,C,null==x?void 0:x.memoStats),z=(0,v.useCallback)(e=>{k(e)},[]),M=(0,v.useCallback)(e=>{b(e)},[]),N=(0,v.useCallback)(e=>{if(!R&&e.id!==(null==j?void 0:j.id))return void O({segmentEvent:Z.VV.GAMMA_PRO_UPSELL_SUBSCRIPTION_INDIVIDUAL_ANALYTICS});w(e)},[O,R,j]),F=(0,v.useCallback)(()=>{w(null)},[]),L=void 0!==h;return(0,s.jsxs)(s.Fragment,{children:[y&&(0,s.jsx)(cn,{user:y,onBackClick:F,docId:n.id,onAnalyticsPanelClose:d}),!y&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(dP,{hasError:L,isAnalyticsLoading:u,setView:M,view:f,description:(0,s.jsx)(m.x6,{id:"uEtUah",values:{docTitle:S,docCreatedDate:E}})}),L&&(0,s.jsx)(dI,{error:h,refetch:g}),!L&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(iD.c,{}),(0,s.jsxs)(i_.c,{children:[u&&(0,s.jsx)(cL,{}),!u&&I.length<=1&&c&&(0,s.jsx)(cV,{handleSharePanelOpen:l}),!u&&(0,s.jsxs)(o.B,{direction:"column",mt:4,spacing:4,children:[(0,s.jsxs)(r.s,{direction:"row",justify:"space-between",align:"center",children:[(0,s.jsx)(B.D,{as:"h2",size:"md",children:"cardEngagement"===f?dD():d_()}),(0,s.jsx)(cl,{selected:C,handleMenuItemChange:z,everyoneCount:cN(n,"everyone",null==x?void 0:x.memoStats),viewersOnlyCount:cN(n,"viewersOnly",null==x?void 0:x.memoStats)})]}),"deckView"===f&&_&&(0,s.jsx)(cW,{handleSharePanelOpen:l,dayCount:T}),"deckView"===f&&!_&&(0,s.jsx)(cD,{viewData:A,dayCount:T}),"cardEngagement"===f&&(0,s.jsx)(dQ,{docId:n.id,viewerFilter:C,currentViewerFilterCount:P,onAnalyticsPanelClose:d}),(0,s.jsx)(ct,{creatorId:(null==(i=n.createdBy)?void 0:i.id)||"",viewers:D,currentViewerFilterCount:P,docCreatedDate:E,contributors:n.editors||[],cardCount:(null==x?void 0:x.memoStats.cardCount)||0,handleTableRowClick:N,hasIndividualAnalytics:R}),D.length>3&&!R&&(0,s.jsx)(a.$,{variant:"ghost",size:"sm",color:"gray.600",colorScheme:"gray",onClick:()=>O({segmentEvent:Z.VV.GAMMA_PRO_UPSELL_SUBSCRIPTION_INDIVIDUAL_ANALYTICS}),children:(0,s.jsx)(m.x6,{id:"BKBX4n",values:{0:D.length-3}})}),!R&&(0,s.jsx)(iQ.c,{title:(0,s.jsx)(m.x6,{id:"h5AmZ4"}),segmentEvent:Z.VV.GAMMA_PRO_UPSELL_SUBSCRIPTION_INDIVIDUAL_ANALYTICS,description:p.Ru._({id:"GYgPBy"}),targetFeature:"individual_analytics"})]})]})]})]})]})},cL=()=>(0,s.jsxs)(r.s,{direction:"column",py:2,children:[(0,s.jsx)(dk.E,{h:10,width:"40%",mb:4}),(0,s.jsx)(dk.E,{h:40,mb:4}),(0,s.jsx)(tI.T,{align:"stretch",children:[void 0,void 0,void 0].map((e,t)=>(0,s.jsx)(dk.E,{h:12},t))})]}),cV=e=>{let{handleSharePanelOpen:t}=e;return(0,s.jsx)(r.s,{p:3,px:4,mt:2,bg:"gray.50",color:dS,borderRadius:"base",children:(0,s.jsxs)(r.s,{align:"baseline",fontSize:"sm",children:[(0,s.jsx)(d.a,{pr:2,children:(0,s.jsx)(x.g,{icon:tA.X46,"aria-label":"user-icon",size:"sm"})}),(0,s.jsx)(l.E,{children:(0,s.jsx)(m.x6,{id:"FNMh4I",components:{0:(0,s.jsx)(l.E,{as:"button",onClick:t,textDecoration:"underline",fontWeight:"600",color:"gray.700"})}})})]})})},cW=e=>{let{handleSharePanelOpen:t,dayCount:i}=e;return(0,s.jsxs)(iP.F,{my:4,p:6,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",textAlign:"center",colorScheme:"gray",children:[(0,s.jsx)(n9.j,{size:"30px",bg:"gray.500",children:(0,s.jsx)(x.g,{icon:tA.Vf1,color:"white"})}),(0,s.jsx)(rk.X,{mt:4,mb:2,fontSize:"md",children:(0,s.jsx)(m.x6,{id:"2OzAI5"})}),i>0&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(rE.T,{maxWidth:"sm",children:(0,s.jsx)(m.x6,{id:"qQLmo7",values:{dayCount:i}})}),(0,s.jsx)(a.$,{mt:4,onClick:t,children:(0,s.jsx)(m.x6,{id:"6Jkfdh",values:{GAMMA_ARTIFACT_PROPER_NOUN:ej.TP}})})]})]})},cG=e=>{var t,i,n,r,o,a;let{doc:c,onAnalyticsPanelClose:u}=e,{cardIdMap:x}=(0,v.useContext)(dy),{user:h}=(0,et.ur)(),{data:p,error:g,loading:j,refetch:f}=(0,ik.NI5)({variables:{docId:c.id,userId:null==h?void 0:h.id},skip:!(null==h?void 0:h.id),pollInterval:9e5,notifyOnNetworkStatusChange:!0}),b=null!=(a=null==p||null==(i=p.docCardsStats)||null==(t=i.everyone)?void 0:t.length)?a:0,y=null==p||null==(n=p.docCardsStats)?void 0:n.cardCount,w=(0,v.useMemo)(()=>{var e;return(null==p||null==(e=p.docCardsStats)?void 0:e.everyone)||[]},[null==p?void 0:p.docCardsStats]),C=(0,v.useMemo)(()=>dF(w,"viewTimePercent"),[w]);if(!h)return null;let k=h.id===(null==(r=c.createdBy)?void 0:r.id),E=null==(o=c.editors)?void 0:o.some(e=>e.user.id===h.id),S={name:h.displayName,id:h.id,profileImg:h.profileImageUrl,email:h.email,isContributor:E,isCreator:k};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(iR.r,{children:[(0,s.jsx)(m.x6,{id:"ZlwDi6"}),(0,s.jsx)(l.E,{fontSize:"sm",fontWeight:"normal",letterSpacing:"normal",color:"gray.500",noOfLines:1,children:c.title||(0,s.jsx)(m.x6,{id:"wja8aL"})}),(0,s.jsx)(dO,{})]}),(0,s.jsx)(iO.s,{}),(0,s.jsx)(iD.c,{}),(0,s.jsx)(i_.c,{children:(0,s.jsxs)(d.a,{children:[(0,s.jsx)(cs,{user:S}),void 0!==y&&(0,s.jsx)(d0,{description:(0,s.jsx)(m.x6,{id:"YJOrjl",values:{cardsViewed:b,totalCards:y}})}),j&&!g&&(0,s.jsx)(dZ,{includeDescription:!0}),g&&(0,s.jsx)(dI,{error:g,refetch:f,px:0}),!g&&!j&&x&&(0,s.jsx)(dJ,{cards:x.tree,scaleToMax:!0,includeChildren:!0,leftLabel:(0,s.jsx)(m.x6,{id:"ml51m3"}),rightLabel:(0,s.jsx)(m.x6,{id:"8R7bfR"}),cardLookupTable:C,tooltipLabel:(0,s.jsx)(dY,{}),onAnalyticsPanelClose:u}),(0,s.jsxs)(iP.F,{children:[(0,s.jsx)(iz._,{}),(0,s.jsx)(m.x6,{id:"Znuvj3",values:{GAMMA_PROPER_NOUN:ej.On,GAMMA_ARTIFACT_PROPER_NOUN:ej.TP}})]})]})})]})},cB=e=>{let{mode:t,isAnalyticsPanelOpen:i,onAnalyticsPanelClose:n,onSharePanelOpen:o}=e,l=(0,eQ.h5)({base:"sm",md:"2xl",lg:"4xl"}),d=!!o&&"full"==t,{doc:c}=(0,v.useContext)(dy),h=(0,v.useCallback)(()=>{o&&(o(),n())},[o,n]);return c?(0,s.jsx)(J.L8,{isDark:!1,children:(0,s.jsxs)(i0.aF,{onClose:n,isOpen:i,size:l,blockScrollOnMount:!1,children:[(0,s.jsx)(i1.m,{}),(0,s.jsxs)(i6.$,{mx:2,minW:0,children:["full"===t?(0,s.jsx)(cF,{doc:c,handleSharePanelOpen:h,onAnalyticsPanelClose:n,canShare:d}):(0,s.jsx)(cG,{doc:c,onAnalyticsPanelClose:n}),(0,s.jsx)(iD.c,{my:4}),(0,s.jsx)(i2.j,{children:(0,s.jsxs)(r.s,{justifyContent:d?"space-between":"flex-end",flex:1,children:[d&&(0,s.jsx)(a.$,{leftIcon:(0,s.jsx)(x.g,{icon:u.t5Z}),variant:"ghost",onClick:h,children:(0,s.jsx)(m.x6,{id:"6Jkfdh",values:{GAMMA_ARTIFACT_PROPER_NOUN:ej.TP}})}),(0,s.jsx)(a.$,{variant:"solid",onClick:n,children:(0,s.jsx)(m.x6,{id:"DPfwMq"})})]})})]})]})}):null},cU=(0,db.A)(e=>{let{doc:t,file:i,...n}=e,r=(0,R.u)("multipageEditor");return(0,s.jsx)(dC,{initialDoc:t,file:r?i:void 0,children:(0,s.jsx)(cB,{...n})})}),cH=e=>{let{doc:t,file:i,mode:n}=e,r=(0,Z.st)(),{isOpen:o,onClose:l,onOpen:a}=(0,iF.E)({id:"analyticsPanelDisclosure"}),d=(0,v.useCallback)(()=>{null==r||r.track(Z.VV.DOC_ANALYTICS_VIEWED,{docId:null==t?void 0:t.id,source:"toolbar_doc_menu",type:"personal",device:(0,_.ZI)()}),a()},[r,null==t?void 0:t.id,a]);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(ah.D,{icon:(0,s.jsx)(x.g,{icon:u.q9c,fixedWidth:!0}),onClick:d,children:(0,s.jsx)(m.x6,{id:"ZlwDi6"})}),t&&o&&(0,s.jsx)(cU,{file:i,doc:t,isAnalyticsPanelOpen:o,onAnalyticsPanelClose:l,mode:n})]})},cK=e=>{let{toggleCommentsPanel:t}=e;return(0,s.jsx)(ah.D,{icon:(0,s.jsx)(x.g,{icon:u.DN2,fixedWidth:!0}),onClick:t,children:(0,s.jsx)(m.x6,{id:"VbyRUy"})})};var cJ=i(78481);let cq=(0,v.memo)(e=>{let{isOpen:t,onClose:i,editor:n}=e,r=(0,cJ.N)(n),{bodyStart:o}=(0,eu.GV)(ex.BP),l=(0,v.useCallback)(e=>{null==n||n.commands.updateNestedAttributesAtPos(0,{customCode:{bodyStart:e}})},[n]);return(0,s.jsx)(J.L8,{isDark:!1,children:(0,s.jsxs)(iT._s,{returnFocusOnClose:!1,isOpen:t,placement:"right",onClose:i,size:"lg",children:[(0,s.jsx)(i1.m,{background:"none"}),(0,s.jsxs)(iA.z,{onKeyDown:r,"data-testid":"custom-code-drawer",motionProps:{variants:{enter:{x:"0%",transition:{duration:.2}},exit:{x:"100%",transition:{duration:.1}}}},children:[(0,s.jsx)(iO.s,{}),(0,s.jsx)(iR.r,{children:(0,s.jsx)(m.x6,{id:"E16GGw"})}),(0,s.jsx)(i_.c,{overflowX:"hidden",children:(0,s.jsx)(nZ,{label:p.Ru._({id:"fC5kYg"}),helperText:p.Ru._({id:"0AZNtw"}),initialValue:o,updateValue:l,language:"html",height:"600px"})}),(0,s.jsx)(i2.j,{children:(0,s.jsx)(a.$,{w:"100%",variant:"solid",onClick:i,children:(0,s.jsx)(m.x6,{id:"DPfwMq"})})})]})]})})});cq.displayName="CustomCodeDrawer";let cY=e=>{let{editor:t}=e,{isOpen:i,onOpen:n,onClose:r}=(0,iF.E)({id:"codeEditor"});return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(ah.D,{icon:(0,s.jsx)(x.g,{icon:u.jTw,fixedWidth:!0}),onClick:n,children:(0,s.jsxs)(e8.z,{children:[(0,s.jsx)(m.x6,{id:"cnlGIm"}),(0,s.jsx)(tT.h,{}),(0,s.jsx)(i4.E,{colorScheme:"green",ml:2,children:(0,s.jsx)(m.x6,{id:"YBt9YP"})})]})}),(0,s.jsx)(cq,{editor:t,isOpen:i,onClose:r})]})},c$=e=>{let{doc:t}=e,[i]=(0,ik.fQ5)(),[n]=(0,ik.u6W)(),r=(0,v.useCallback)(e=>()=>{if(!t.id)return;let s={id:t.id};e?i({variables:s,optimisticResponse:{archiveDoc:{...s,archived:e,__typename:"Doc"}}}):n({variables:s,optimisticResponse:{unarchiveDoc:{...s,archived:e,__typename:"Doc"}}})},[i,t.id,n]);return t.archived?(0,s.jsx)(ah.D,{icon:(0,s.jsx)(x.g,{icon:u.IbX,fixedWidth:!0}),onClick:r(!1),children:(0,s.jsx)(m.x6,{id:"yKu/3Y"})}):(0,s.jsx)(ah.D,{"data-testid":"doc-menu-trash-button",color:"red.500",icon:(0,s.jsx)(x.g,{icon:u.yLS,fixedWidth:!0}),onClick:r(!0),children:(0,s.jsx)(m.x6,{id:"NOLglc",values:{GAMMA_ARTIFACT_PROPER_NOUN:ej.TP}})})};var cX=i(59426),cQ=i(79958);let cZ=e=>{var t,i;let{doc:n}=e,r=(null==n?void 0:n.createdTime)&&(0,cX.A)((0,ni.A)(n.createdTime),"PPP"),o=(0,cQ.B)(null==n?void 0:n.title);return(0,s.jsxs)(d.a,{px:4,py:2,maxW:"300px",children:[(0,s.jsx)(l.E,{noOfLines:6,children:o}),(0,s.jsx)(l.E,{fontSize:"sm",color:"gray.500",noOfLines:1,children:(0,s.jsx)(m.x6,{id:"jlWdji",values:{createdTime:r}})}),(0,s.jsx)(J.Tz,{label:null==n||null==(t=n.createdBy)?void 0:t.email,children:(0,s.jsx)(l.E,{display:"inline-block",fontSize:"sm",color:"gray.500",noOfLines:1,children:(0,s.jsx)(m.x6,{id:"t490IT",values:{0:null==n||null==(i=n.createdBy)?void 0:i.displayName}})})})]})},c0=e=>{let{doc:t,editor:i}=e,n=(0,at.Z)(),r=(0,v.useCallback)(()=>{if(!i)return;let e=i.getJSON();n({docId:t.id,initialContent:e,source:"editor_toolbar_doc_menu_duplicate",newWindow:!(0,_.sX)()})},[t.id,n,i]);return(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(ah.D,{icon:(0,s.jsx)(x.g,{icon:u.$3n,fixedWidth:!0}),onClick:r,children:(0,s.jsx)(m.x6,{id:"0Fcoqv",values:{GAMMA_ARTIFACT_PROPER_NOUN:ej.TP}})})})},c1=()=>(0,s.jsx)(ah.D,{icon:(0,s.jsx)(x.g,{icon:u.mHA,fixedWidth:!0}),onClick:()=>{iq.R.emit("openSharePanel",{view:"export"})},children:(0,s.jsx)(m.x6,{id:"U8WPSi"})});var c6=i(55023);let c2=e=>{let{editor:t,doc:i}=e,n=(0,eu.GV)(ex.SJ),[r]=(0,ik.bME)(),o=(0,eu.GV)(ex.Jq),l=(0,v.useCallback)(async()=>{var e;if(!t)return;let s=(0,tG.KC)(t,t.state.doc.firstChild.content,{disableBookmarks:!0}),l={...c6.Ij,imageProvider:R.of.get("aiGeneratorDefaultImageProvider"),contentTemplate:s,themeId:null==n?void 0:n.id,numCards:t.state.doc.firstChild.childCount},a=await r({variables:{input:{workspaceId:i.organization.id,generationType:ik.xbH.PasteText,input:{format:o,settings:l}}}});window.open("/generate/".concat(null==(e=a.data)?void 0:e.createDocGeneration.id),"_blank")},[t,r,i,n,o]);return(0,R.u)("generateDeckTemplate")?(0,s.jsx)(ah.D,{icon:(0,s.jsx)(x.g,{icon:u.S5R,fixedWidth:!0}),as:i7.N,textDecoration:"none !important",onClick:l,children:(0,s.jsx)(m.x6,{id:"Q31roh"})}):null},c5=e=>{let{site:t,path:i,domain:n}=e,r=n?(0,ta.bO)({domain:n,path:i}):(0,ta.jY)({site:t,path:i});return r?(0,s.jsx)(J.Tz,{label:(0,s.jsx)(m.x6,{id:"kcKqQj"}),placement:"top",children:(0,s.jsx)(H.K,{ms:-1,href:r,as:b(),target:"_blank","aria-label":p.Ru._({id:"WklWxF"}),variant:"ghost",color:"gray.500",size:"xs",icon:(0,s.jsx)(x.g,{icon:u.fLi}),pointerEvents:"auto",onClick:e=>{e.stopPropagation()}})}):null},c4=e=>{var t,i;let{doc:n,site:r,showCreatedInfo:o}=e,a=(0,cQ.B)(null==n?void 0:n.title),c=null==(t=r.routes)?void 0:t.find(e=>e.docId===n.id),u=(0,ta.SG)(n,r);return(0,s.jsxs)(d.a,{px:4,pb:2,maxW:"300px",children:[(0,s.jsxs)(e8.z,{align:"start",children:[(0,s.jsx)(l.E,{noOfLines:2,children:a}),u&&(0,s.jsx)(c5,{site:r,path:null==c?void 0:c.path})]}),c&&(0,s.jsx)(c3,{path:c.path}),o&&"createdTime"in n&&(0,s.jsx)(l.E,{fontSize:"sm",color:"gray.500",noOfLines:1,mt:2,children:(0,s.jsx)(m.x6,{id:"oJFw5Q",values:{0:(0,iU.Bo)(n.createdTime)}})}),"createdBy"in n&&o&&(0,s.jsx)(l.E,{display:"inline-block",fontSize:"sm",color:"gray.500",noOfLines:1,children:(0,s.jsx)(m.x6,{id:"t490IT",values:{0:null==n||null==(i=n.createdBy)?void 0:i.displayName}})})]})},c3=e=>{let{path:t}=e;return"/"===t?(0,s.jsx)(l.E,{fontSize:"sm",color:"gray.500",children:(0,s.jsx)(m.x6,{id:"wFCbbC"})}):(0,s.jsx)(l.E,{fontFamily:"mono",fontSize:"sm",color:"gray.500",children:t})},c8=e=>{let{onClick:t,icon:i,label:n}=e;return(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(ah.D,{icon:i||(0,s.jsx)(x.g,{icon:u.BH7,fixedWidth:!0}),onClick:t||(()=>{iq.R.emit("openPageSetup","cards")}),children:n||(0,s.jsx)(m.x6,{id:"Kx2GmY"})})})},c7=e=>{let{site:t}=e,i=(0,cX.A)((0,ni.A)(t.createdTime),"PPP");return(0,s.jsxs)(d.a,{px:4,pb:2,maxW:"300px",children:[(0,s.jsx)(l.E,{noOfLines:6,children:t.name}),(0,s.jsx)(l.E,{fontSize:"sm",color:"gray.500",noOfLines:1,children:(0,s.jsx)(m.x6,{id:"jlWdji",values:{createdTime:i}})})]})};var c9=i(89528);let ue=e=>{let{label:t=(0,s.jsx)(m.x6,{id:"sAalO9"}),showUpsellBadge:i,settingsTab:n="website"}=e,{openUpsellModal:r}=(0,dE.I)(),o=(0,v.useCallback)(()=>r({segmentEvent:Z.VV.GAMMA_PRO_UPSELL_SITE_ADD_CUSTOM_DOMAIN}),[r]),l=(0,v.useCallback)(()=>{iq.R.emit("openSiteSettings",n)},[n]);return(0,s.jsx)(ah.D,{icon:(0,s.jsx)(x.g,{icon:u.Bwz,fixedWidth:!0}),onClick:i?o:l,children:(0,s.jsxs)(e8.z,{justifyContent:"space-between",alignItems:"center",children:[t,i&&(0,s.jsx)(d.a,{children:(0,s.jsx)(c9.zL,{})})]})})};var ut=i(53984);let ui=e=>{let{doc:t}=e,{isOpen:i,onClose:n,onOpen:r}=(0,iF.E)({id:"snapshotsDrawer"});return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(ah.D,{icon:(0,s.jsx)(x.g,{icon:u.a$,fixedWidth:!0}),onClick:r,children:(0,s.jsx)(m.x6,{id:"6Z5x06"})}),t&&(0,s.jsx)(ut.d,{doc:t,isOpen:i,onClose:n})]})},un=()=>{let e=rC();return e?(0,s.jsx)(ah.D,{icon:(0,s.jsx)(x.g,{icon:u.LjI,fixedWidth:!0}),as:i7.N,textDecoration:"none !important",href:e,target:(0,_.sX)()?"_self":"_blank",children:(0,s.jsx)(m.x6,{id:"7U0bM7"})}):null},us=()=>(0,s.jsx)(ah.D,{icon:(0,s.jsx)(x.g,{icon:u.fyG,fixedWidth:!0}),onClick:()=>rn.LF.emit(rn.DN.OPEN_THEME_DRAWER,{}),children:(0,s.jsx)(m.x6,{id:"90/Rx7"})}),ur=e=>{let{editor:t}=e,i=(0,v.useCallback)(()=>{t&&t.commands.undo()},[t]);return(0,s.jsx)(ah.D,{icon:(0,s.jsx)(x.g,{icon:u.V3T,fixedWidth:!0}),onClick:i,command:(0,J.lp)("Mod+Z"),children:(0,s.jsx)(m.x6,{id:"9uI/rE"})})},uo=e=>{var t;let{doc:i,file:n,toggleCommentsPanel:r,editorWrapperEl:o,scrollingParentSelector:l}=e,{isConnected:a,isInOfflineMode:c}=(0,E.u)(),h=(0,R.u)("editDocAI"),{user:g}=(0,et.ur)(),j=(0,iI.d)(),f=(0,et.Iy)("view",i),b=(0,et.Iy)("comment",i),y=(0,et.Iy)("edit",i),w=(0,et.Iy)("manage",i),C=(0,eu.GV)(tr.Gd),k=(0,iW.zm)(),S=(0,eu.GV)(ex.wC)===tb.w.SLIDE_VIEW,{editor:I}=(0,tE.m)(),T=(0,eu.GV)(ex.nD),{favoriteDoc:A}=(0,di.I)({refetchQueries:["GetDoc"]}),O=(0,v.useCallback)(async e=>{g&&g.id&&i&&(await A(e,{id:i.id,docUser:i.docUser})(),j({title:e?p.Ru._({id:"pL78ec"}):p.Ru._({id:"Qh7QmR"}),status:"success",duration:2e3,position:"top",isClosable:!1}))},[i,A,g,j]),_=!!(null==(t=i.docUser)?void 0:t.favorited),D=!!h||!w,P=!!g&&D&&!i.site,z=!!h&&b,M=!!(g&&0!==g.workspaceMemberships.length&&!i.site),N=f&&!!g,F=(0,R.u)("docCustomCode")&&y,L=y&&I;if(!a){let e=L&&c&&!C,t=T&&c&&!C,n=z&&c&&!C,o=t||e||n;return(0,s.jsx)(ul,{children:(0,s.jsxs)(ax.r,{children:[C?(0,s.jsx)(d.a,{pt:2,children:(0,s.jsx)(c7,{site:C})}):(0,s.jsx)(cZ,{doc:i}),o&&(0,s.jsx)(sS.N,{}),t&&(0,s.jsx)(ur,{editor:I}),e&&(0,s.jsx)(c8,{}),n&&(0,s.jsx)(cK,{toggleCommentsPanel:r})]})})}let V=i.site?(0,s.jsx)(m.x6,{id:"gKmuNS"}):void 0;return(0,s.jsxs)(sC.c,{zIndex:"popover",maxH:"100vh",minW:"280px",maxW:"360px",overflow:"auto",children:[(0,s.jsxs)(ax.r,{children:[C?(0,s.jsx)(c4,{doc:i,site:C}):(0,s.jsx)(cZ,{doc:i}),(0,s.jsx)(sS.N,{}),T&&(0,s.jsx)(ur,{editor:I}),_?(0,s.jsx)(ah.D,{icon:(0,s.jsx)(d.a,{color:"yellow.400",children:(0,s.jsx)(x.g,{fixedWidth:!0,icon:tA.yy})}),onClick:()=>O(null),children:(0,s.jsx)(m.x6,{id:"T/pF0Z"})}):(0,s.jsx)(ah.D,{icon:(0,s.jsx)(x.g,{fixedWidth:!0,icon:u.yy}),onClick:()=>O(new Date),children:(0,s.jsx)(m.x6,{id:"pBsoKL"})}),y&&(0,s.jsx)(ui,{doc:i}),i.site&&(0,s.jsx)(df,{editorWrapperEl:o,scrollingParentSelector:l}),(0,s.jsx)(un,{}),k&&!S&&(0,s.jsx)(us,{}),L&&(0,s.jsx)(c8,{}),N&&(0,s.jsx)(c1,{}),F&&(0,s.jsx)(cY,{editor:I})]}),C?(0,s.jsx)(sS.N,{}):null,(0,s.jsxs)(ax.r,{children:[C&&(0,s.jsx)(c7,{site:C}),C?null:(0,s.jsx)(sS.N,{}),z&&(0,s.jsx)(cK,{toggleCommentsPanel:r}),P&&(0,s.jsx)(cH,{file:n,doc:i,mode:w?"full":"personal"}),w&&(0,s.jsx)(ue,{label:V}),M&&(0,s.jsx)(c0,{doc:i,editor:I}),(0,s.jsx)(c2,{doc:i,editor:I}),w&&(0,s.jsx)(ds,{site:C}),!i.site&&w&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(sS.N,{}),(0,s.jsx)(c$,{doc:i})]})]})]})},ul=e=>{let{children:t}=e;return(0,s.jsxs)(sC.c,{zIndex:"popover",maxH:"100vh",minW:"280px",maxW:"360px",overflow:"auto",children:[(0,s.jsx)(eJ.r,{description:(0,s.jsx)(m.x6,{id:"0CAvhs"}),isConnected:!1,maxWidth:"300px"}),t]})},ua=e=>{let{onSuccess:t,onError:i=()=>{}}=e,[n,s]=(0,v.useState)(()=>()=>Promise.resolve());return{setDoneFn:s,doActionIfVerified:(0,v.useCallback)(()=>{n().then(t,i)},[n,t,i])}};var ud=i(60120),uc=i(74709),uu=i(74231),ux=i(75570);let uh=e=>{let{onClose:t,onDiscard:i,onSave:n}=e;return(0,s.jsx)(J.L8,{isDark:!1,children:(0,s.jsxs)(i0.aF,{onEsc:t,onClose:t,closeOnOverlayClick:!0,isOpen:!0,isCentered:!0,children:[(0,s.jsx)(i1.m,{}),(0,s.jsxs)(i6.$,{children:[(0,s.jsx)(iR.r,{children:(0,s.jsx)(m.x6,{id:"fhv6Ac"})}),(0,s.jsx)(iO.s,{onClick:t}),(0,s.jsx)(i_.c,{children:(0,s.jsx)(l.E,{children:(0,s.jsx)(m.x6,{id:"dkIYZO"})})}),(0,s.jsx)(i2.j,{children:(0,s.jsxs)(o.B,{spacing:2,direction:"row",align:"center",children:[(0,s.jsx)(a.$,{onClick:i,children:(0,s.jsx)(m.x6,{id:"bzSI52"})}),(0,s.jsx)(a.$,{variant:"solid",onClick:n,children:(0,s.jsx)(m.x6,{id:"GkU8It"})})]})})]})]})})},um=(e,t)=>{var i;return null==e||null==(i=e.routes.find(e=>e.docId===t))?void 0:i.path},up=e=>{let{openOtherDocModal:t,registerDoneFn:i}=e,n=(0,V.dU)("gray.200","gray.600"),r=(0,iI.d)(),[c,u]=(0,v.useState)(!1),x=(0,iZ.Fd)(),h=(0,eu.GV)(eO.Jo),p=(0,eu.GV)(tr.Gd),[g,{loading:j}]=(0,ik.Imo)(),f=um(p,null==h?void 0:h.id),[b,y]=(0,v.useState)(()=>(0,ta.nx)(f||"")),[w,C]=(0,v.useState)(()=>(0,ta.nx)(f||"")),k=(0,ta.Gu)({routes:(null==p?void 0:p.routes)||[],path:(0,ta.wK)(b),docId:null==h?void 0:h.id}),E=!!k,S=w!==b&&!E,I=(0,v.useCallback)(()=>{y(w)},[w]),[T,A]=(0,v.useState)(new ux.c),R=(0,v.useCallback)(()=>{if(!S)return;if(!(null==p?void 0:p.id)||!(null==h?void 0:h.id))return void console.error("Missing site or doc");let e=(0,ta.GM)(b);g({variables:{input:{siteId:p.id,docId:h.id,path:e}},refetchQueries:["GetSite"]}).then(()=>{C((0,ta.nx)(e)),y((0,ta.nx)(e)),u(!0),T.resolve(),A(new ux.c)}).catch(e=>{r({status:"error",title:(0,s.jsx)(m.x6,{id:"dl5vwx"}),description:e.message}),T.reject(e),A(new ux.c),console.error("[UrlSlugForm] Error setting route",e.message)})},[S,null==h?void 0:h.id,b,g,null==p?void 0:p.id,r,T,A]),{isOpen:O,onClose:_,onOpen:D}=(0,iF.E)({id:"unsaved-page-metadata-modal"});return((0,v.useEffect)(()=>{i(()=>()=>(S?D():T.resolve(),T.promise))},[i,T,S,D]),x)?(0,s.jsxs)(o.B,{children:[(0,s.jsx)(o.B,{direction:"row",children:(0,s.jsxs)(l.E,{children:[(0,s.jsx)(m.x6,{id:"dq8+qI"})," "]})}),(0,s.jsx)(tT.h,{}),(0,s.jsx)(o.B,{spacing:2,children:(0,s.jsx)(e8.z,{spacing:1,children:(0,s.jsxs)(no.MJ,{as:"fieldset",isInvalid:E,children:[(0,s.jsx)(e8.z,{children:(0,s.jsxs)(nB.M,{children:[(0,s.jsx)(uc.G6,{children:"/"}),(0,s.jsx)(iX.p,{isDisabled:j,flex:2,value:b,onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),R())},onChange:e=>{y((0,na.Fw)(e.currentTarget.value))},borderColor:n}),(0,s.jsx)(uu.s,{in:S,unmountOnExit:!0,children:(0,s.jsx)(d.a,{ms:2,children:(0,s.jsxs)(e7.e,{w:"100%",children:[(0,s.jsx)(a.$,{variant:"solid",isLoading:j,isDisabled:E,onClick:R,children:(0,s.jsx)(m.x6,{id:"tfDRzk"})}),(0,s.jsx)(a.$,{onClick:I,children:(0,s.jsx)(m.x6,{id:"dEgA5A"})})]})})})]})}),k?(0,s.jsx)(nX.Wt,{justifyContent:"flex-end",alignItems:"flex-start",children:(0,s.jsx)(l.E,{fontSize:"xs",children:(0,s.jsx)(m.x6,{id:"DQaTdC",components:{0:(0,s.jsx)(i7.N,{textDecoration:"underline",onClick:()=>t&&t(k.docId)})}})})}):(0,s.jsxs)(o.B,{spacing:2,children:[(0,s.jsx)(no.eK,{fontSize:"sm",children:(0,s.jsx)(m.x6,{id:"ZMlbHK"})}),c&&(0,s.jsxs)(iP.F,{status:"warning",variant:"left-accent",fontSize:"sm",children:[(0,s.jsx)(iz._,{}),(0,s.jsx)(rE.T,{children:(0,s.jsx)(m.x6,{id:"ZyBxCy"})})]})]})]})})}),O&&(0,s.jsx)(uh,{onDiscard:()=>{_(),T.resolve(),A(new ux.c)},onClose:()=>{_(),T.reject(),A(new ux.c)},onSave:R})]}):(0,s.jsx)(s.Fragment,{})},ug=e=>{var t;let{inModal:i=!1,openOtherDocModal:n,setVerifyURLPathChangesDone:r}=e,{editor:l}=(0,tE.m)(),{isInOfflineMode:a}=(0,E.u)(),d=(0,v.useCallback)((e,t)=>{null==l||l.commands.updateNestedAttributesAtPos(0,{settings:{[e]:t}})},[l]),{metaDescription:c}=(0,eu.GV)(ex.Uu),u=(0,eu.GV)(eO.Jo),x=(0,eu.GV)((0,dv.Jn)(null==u?void 0:u.id)),h=(0,eu.GV)(dv.E5),[g,j]=(0,v.useState)(()=>(null==u?void 0:u.title)||""),[f,b]=(0,v.useState)(()=>c||""),y=u&&!!u.site&&(0,ta.dv)(u.site),[w]=(0,ik.cGn)(),C=(0,v.useCallback)(e=>{u&&w({variables:{id:u.id,title:e,titleEdited:!0}})},[u,w]),k=(0,tX.lW)(C,300),S=(0,v.useCallback)(e=>{j(e.target.value.substring(0,nO.tS)),k(e.target.value.substring(0,nO.tS))},[k]),I=(0,v.useCallback)(e=>{d("metaDescription",e)},[d]),T=(0,tX.lW)(I,300),A=null==u||null==(t=u.titleCard)?void 0:t.previewUrl,R=(0,eK.nk)(null==u?void 0:u.organization),O=(0,e_.E)(g||x,R),_=(0,e_.C)(f||h,R),D=(0,V.dU)("gray.200","gray.600");return(0,s.jsxs)(o.B,{spacing:4,children:[(0,s.jsxs)(no.MJ,{children:[(0,s.jsxs)(e8.z,{justifyContent:"center",children:[(0,s.jsx)(nl.l,{flex:"1",children:(0,s.jsx)(m.x6,{id:"MHrjPM"})}),(0,s.jsx)(ud.H,{length:g.length||0,idealLength:nO.GF,maxLength:nO.tS})]}),(0,s.jsx)(iX.p,{value:g,placeholder:x||p.Ru._({id:"bTzMt5"}),_placeholder:{opacity:1,color:"gray.500"},onKeyDown:e=>{"Enter"===e.key&&C(g)},onChange:S,isDisabled:a,"data-title-input":!0,borderColor:D})]}),(null==u?void 0:u.site)&&(0,s.jsx)(up,{openOtherDocModal:n,registerDoneFn:r}),(0,s.jsxs)(no.MJ,{children:[(0,s.jsxs)(e8.z,{justifyContent:"center",children:[(0,s.jsx)(nl.l,{flex:"1",pt:0,children:(0,s.jsx)(m.x6,{id:"Nu4oKW"})}),(0,s.jsx)(ud.H,{length:f.length||0,idealLength:nO.Od,maxLength:nO.Lj})]}),(0,s.jsx)(rA.T,{rows:i?2:4,value:f,placeholder:(null==h?void 0:h.trim())||p.Ru._({id:"2VBqT4"}),onChange:e=>{b(e.target.value.substring(0,nO.Lj)),T(e.target.value.substring(0,nO.Lj))},borderColor:D})]}),(0,s.jsx)(uj,{previewTitle:O,previewDescription:_,screenshotUrl:A,isInOfflineMode:a,isSiteOn:y,inModal:i}),!a&&(0,s.jsx)(nL.w,{label:(0,s.jsx)(m.x6,{id:"ebOoCq",values:{GAMMA_PROPER_NOUN:ej.On}}),segmentEvent:tJ.VV.GAMMA_PRO_UPSELL_PAGE_SETUP_REMOVE_WATERMARK,doc:u})]})},uj=e=>{let{previewTitle:t,previewDescription:i,screenshotUrl:n,isInOfflineMode:r,isSiteOn:a,inModal:d}=e,c=(0,V.dU)("gray.50","gray.700"),u=(0,V.dU)("gray.200","gray.600");return(0,s.jsxs)(o.B,{p:4,pt:3,bg:c,borderRadius:"md",direction:d?"row":"column",spacing:3,children:[(0,s.jsxs)(o.B,{spacing:2,flex:1,children:[(0,s.jsx)(l.E,{size:"sm",children:(0,s.jsx)(m.x6,{id:"h8sMnd"})}),(0,s.jsx)(uf,{title:t,description:i,screenshotUrl:n,isOffline:r})]}),a&&(0,s.jsxs)(o.B,{spacing:2,flex:1,ps:d?3:void 0,pt:d?void 0:3,borderStart:d?"1px solid":void 0,borderTop:d?void 0:"1px solid",borderColor:u,children:[(0,s.jsx)(l.E,{size:"sm",children:(0,s.jsx)(m.x6,{id:"d3xOlk"})}),(0,s.jsx)(ub,{title:t,description:i,screenshotUrl:n,isOffline:r}),(0,s.jsx)(l.E,{fontSize:"sm",color:"gray.500",children:(0,s.jsx)(m.x6,{id:"Ubf8D8"})})]})]})},uf=e=>{let{title:t,description:i,screenshotUrl:n,isOffline:r}=e,a=(0,V.dU)("gray.200","gray.600");return(0,s.jsxs)(d.a,{cursor:"not-allowed",bg:"white",border:"1px solid",borderColor:a,borderRadius:"md",overflow:"hidden",children:[(0,s.jsx)(sm.g,{ratio:1200/630,bg:"gray.300",borderBottom:"1px solid",borderColor:"gray.200",children:(0,s.jsx)(d.a,{bgColor:"gray.200",bgImage:"url(".concat(n,")"),backgroundSize:"cover",position:"relative",children:r&&(0,s.jsx)(x.g,{icon:u.seF,size:"lg"})})}),(0,s.jsxs)(o.B,{px:4,py:3,spacing:1,children:[(0,s.jsx)(l.E,{color:"gray.700",fontSize:"md",fontWeight:"bold",noOfLines:2,children:t}),(0,s.jsx)(l.E,{color:"gray.700",fontSize:"xs",noOfLines:2,children:i})]})]})},ub=e=>{let{title:t,description:i}=e;return(0,s.jsxs)(o.B,{cursor:"not-allowed",bg:"white",border:"1px solid",borderColor:"gray.200",borderRadius:"md",overflow:"hidden",px:4,py:3,spacing:1,pos:"relative",children:[(0,s.jsx)(l.E,{color:"blue.600",fontSize:"lg",lineHeight:1.3,noOfLines:2,children:t}),(0,s.jsx)(l.E,{color:"gray.600",fontSize:"sm",noOfLines:3,children:i})]})},uv=e=>{let{onPageMetadataModalClose:t,isPageMetadataModalOpen:i,openOtherDocModal:n}=e,r=(0,ee.rd)(),{setDoneFn:o,doActionIfVerified:l}=ua({onSuccess:t});return(0,s.jsx)(J.L8,{isDark:r,children:(0,s.jsxs)(i0.aF,{onEsc:l,isOpen:i,onClose:l,size:"3xl",returnFocusOnClose:!1,children:[(0,s.jsx)(i1.m,{}),(0,s.jsxs)(i6.$,{mx:2,children:[(0,s.jsx)(iR.r,{children:(0,s.jsx)(m.x6,{id:"aBZSpm"})}),(0,s.jsx)(iO.s,{onClick:e=>{e.preventDefault(),l()}}),(0,s.jsx)(iD.c,{}),(0,s.jsx)(i_.c,{children:(0,s.jsx)(ug,{inModal:!0,openOtherDocModal:n,setVerifyURLPathChangesDone:o})}),(0,s.jsx)(iD.c,{}),(0,s.jsx)(i2.j,{children:(0,s.jsx)(a.$,{onClick:e=>{e.preventDefault(),l()},variant:"solid",children:(0,s.jsx)(m.x6,{id:"DPfwMq"})})})]})]})})},uy=e=>{let{children:t,currentEditorDocId:i}=e,[n,r]=(0,v.useState)({docId:null,pendingOpenFn:null}),{push:o}=(0,e9.useRouter)();(0,v.useEffect)(()=>{let{docId:e,pendingOpenFn:t}=n;e===i&&t&&(t(),r({docId:null,pendingOpenFn:null}))},[i,n]);let l=async(e,t)=>{if(e!==i){let i=(0,D.pF)({docId:e});await o(i),r({docId:e,pendingOpenFn:t})}else t()};return(0,s.jsx)(s.Fragment,{children:t(l)})},uw=e=>{let{isDisabled:t,onClick:i,isPublishing:n}=e;return(0,s.jsx)(J.Tz,{placement:"top",label:(0,s.jsx)(m.x6,{id:"Bq2yPr"}),shouldWrapChildren:!0,isDisabled:!t,children:(0,s.jsx)(ah.D,{icon:(0,s.jsx)(d.a,{children:(0,s.jsx)(x.g,{icon:u.OFY,fixedWidth:!0})}),onClick:i,closeOnSelect:!1,isDisabled:n||t,children:(0,s.jsxs)(r.s,{direction:"row",w:"100%",justify:"space-between",align:"center",children:[(0,s.jsx)(m.x6,{id:"jNnwuI"}),n&&(0,s.jsx)(t4.y,{size:"xs"})]})})})},uC=e=>{let{title:t,path:i}=e;return(0,s.jsxs)(s.Fragment,{children:[t?"".concat(t," "):"",i&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(ne.C,{as:"span",fontFamily:"mono",children:i})," "]})]})},uk=e=>{let{onClose:t,doc:i,site:n,path:r}=e,{push:d}=(0,e9.useRouter)(),[c,{loading:u}]=(0,ik.QO)(),x=(0,iI.d)(),h=(0,eu.GV)(tr.le),p=null==i?void 0:i.title,g=(0,v.useCallback)(async()=>{if((null==i?void 0:i.id)&&n){if(await c({variables:{id:i.id},refetchQueries:["GetSite","GetDoc"]}),x({title:(0,s.jsx)(m.x6,{id:"oMgC5V"}),description:(0,s.jsx)(m.x6,{id:"gw6aHP",components:{0:(0,s.jsx)(uC,{title:p,path:r})}}),status:"success",duration:1e4,position:"top",isClosable:!0}),h===i.id){let e=(0,D.BV)({site:n,docId:i.id});e&&await d(e)}t()}},[null==i?void 0:i.id,p,n,h,c,x,r,t,d]);return(0,s.jsx)(J.L8,{isDark:!1,children:(0,s.jsxs)(i0.aF,{onClose:t,isOpen:!0,size:"xl",children:[(0,s.jsx)(i1.m,{}),(0,s.jsxs)(i6.$,{children:[(0,s.jsx)(iR.r,{children:(0,s.jsx)(m.x6,{id:"kbKU/5"})}),(0,s.jsx)(iO.s,{isDisabled:u}),(0,s.jsx)(i_.c,{children:(0,s.jsxs)(o.B,{spacing:4,children:[(0,s.jsx)(l.E,{children:r?(0,s.jsx)(m.x6,{id:"EzZlW2",values:{docTitle:p,path:r},components:{0:(0,s.jsx)(ne.C,{as:"span",fontFamily:"mono",colorScheme:"blackAlpha"})}}):(0,s.jsx)(m.x6,{id:"Ow0t6+",values:{docTitle:p}})}),(0,s.jsx)(l.E,{color:"red.500",children:(0,s.jsx)(m.x6,{id:"2xOCJW"})})]})}),(0,s.jsx)(i2.j,{children:(0,s.jsxs)(e7.e,{children:[(0,s.jsx)(a.$,{variant:"ghost",onClick:t,children:(0,s.jsx)(m.x6,{id:"dEgA5A"})}),(0,s.jsx)(a.$,{variant:"hazardous",onClick:g,isLoading:u,children:(0,s.jsx)(m.x6,{id:"O1M1zi"})})]})})]})]})})},uE=e=>{var t;let{site:i,doc:n,path:r}=e,{isOpen:o,onOpen:l,onClose:a}=(0,ez.j)({id:"confirm-remove-page-modal"}),c=(null==i?void 0:i.routes)&&(null==i||null==(t=i.routes)?void 0:t.length)>1;return(0,s.jsxs)(s.Fragment,{children:[o&&(0,s.jsx)(uk,{site:i,doc:n,path:r,onClose:a}),(0,s.jsx)(J.Tz,{placement:"top",isDisabled:c,label:(0,s.jsx)(m.x6,{id:"PBFhJK"}),shouldWrapChildren:!0,children:(0,s.jsx)(ah.D,{color:"red.500",isDisabled:!c,icon:(0,s.jsx)(d.a,{children:(0,s.jsx)(x.g,{icon:u.yLS,fixedWidth:!0})}),onClick:l,children:(0,s.jsx)(m.x6,{id:"cnGeoo"})})})]})},uS=e=>{let{site:t,doc:i,route:n,isTopToolbar:r=!1,hasChanges:o,onToggleOffline:l,...a}=e,c=(0,dt.U)(),{editor:h}=(0,tE.m)(),{replace:p}=(0,e9.useRouter)(),{isConnected:g}=(0,ik.utY)(),j=(null==i?void 0:i.id)&&(0,ta.OF)({site:t,docId:i.id}),{publishDoc:f,isPublishing:b}=iB({doc:i,site:t,path:j}),y=(0,ta.dv)(t),w=(0,eu.GV)(eO.Jo),C=(0,et.Iy)("edit",w),k=(0,et.Iy)("edit",w),E=(0,et.Iy)("manage",w),S=(0,iW.Gx)(),I=(0,eu.GV)(ex.nD),T=(0,v.useCallback)(()=>{(null==i?void 0:i.id)&&c({path:(0,ta.G9)({path:n.path,routes:t.routes}),siteId:t.id,routes:t.routes,sourceDocId:i.id})},[c,null==i?void 0:i.id,n.path,t.id,t.routes]),{isOpen:A,onClose:R,onOpen:O}=(0,iF.E)({id:"page-metadata-modal"});return g?(0,s.jsx)(N.Z,{children:i&&(0,s.jsx)(sC.c,{...a,zIndex:"popover",maxH:"100vh",minW:"280px",maxW:"380px",overflow:"auto",children:(0,s.jsx)(uy,{currentEditorDocId:null==w?void 0:w.id,children:e=>(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(c4,{doc:i,site:t,showCreatedInfo:!0}),(0,s.jsx)(sS.N,{}),k&&h&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(ah.D,{icon:(0,s.jsx)(x.g,{icon:u.n2$,fixedWidth:!0}),onClick:()=>e(n.docId,O),children:(0,s.jsx)(m.x6,{id:"aBZSpm"})}),(0,s.jsx)(uv,{isPageMetadataModalOpen:A,onPageMetadataModalClose:R,openOtherDocModal:t=>e(t,O)})]}),k&&h&&(0,s.jsx)(c8,{onClick:()=>e(n.docId,()=>iq.R.emit("openPageSetup","cards"))})," ",(0,s.jsx)(sS.N,{}),S&&!n.offline&&(o||b)&&(0,s.jsx)(uw,{onClick:f,isDisabled:!y,isPublishing:b}),(0,s.jsx)(ah.D,{icon:(0,s.jsx)(d.a,{children:(0,s.jsx)(x.g,{icon:tA.qtl,fixedWidth:!0})}),onClick:()=>{p((0,D.pF)({docId:i.id,preview:!0}),void 0,{shallow:!0})},children:(0,s.jsx)(m.x6,{id:"rdUucN"})}),!!l&&(0,s.jsx)(ah.D,{onClick:l,icon:(0,s.jsx)(d.a,{children:(0,s.jsx)(x.g,{icon:n.offline?u.A4h:u.buE,fixedWidth:!0})}),children:n.offline?(0,s.jsx)(m.x6,{id:"i/zQgj"}):(0,s.jsx)(m.x6,{id:"ySCSAn"})}),(0,s.jsx)(sS.N,{}),k&&h&&(0,s.jsx)(ah.D,{icon:(0,s.jsx)(x.g,{icon:u.jPR,fixedWidth:!0}),onClick:T,children:(0,s.jsx)(m.x6,{id:"IVskn1"})}),I&&r&&(0,s.jsx)(ur,{editor:h}),C&&r&&(0,s.jsx)(ui,{doc:i}),E&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(sS.N,{}),(0,s.jsx)(uE,{site:t,doc:i,path:j})]})]})})})}):(0,s.jsx)(ul,{})},uI=e=>{if(!e)return{path:"untitled-page",title:p.Ru._({id:"kveQAJ"})};if(0===e.filter(e=>e.path.startsWith("/untitled-page")).length)return{title:p.Ru._({id:"kveQAJ"}),path:"untitled-page"};let t=Math.max(...e.map(e=>{let[t,i]=e.path.match(/^\/untitled-page-?(\d+)/)||["","1"];return Number(i)}));return{title:p.Ru._({id:"kveQAJ"})+" "+String(t+1),path:"untitled-page-".concat(t+1)}},uT=e=>{let{site:t}=e,i=(0,dt.U)(),{isOpen:n,onClose:r,onOpen:a}=(0,iF.E)({id:"add-page-ai-modal"}),[d,c]=(0,v.useState)(!1),h=(0,v.useCallback)(()=>{a()},[a]),g=(0,v.useCallback)(()=>{let{path:e}=uI(null==t?void 0:t.routes);c(!0),i({path:(0,ta.GM)(e),siteId:null==t?void 0:t.id,routes:null==t?void 0:t.routes}).then(()=>{c(!1)})},[i,null==t?void 0:t.id,null==t?void 0:t.routes]);return(0,s.jsxs)(sy.W,{children:[(0,s.jsx)(J.Tz,{label:p.Ru._({id:"yLRlZm"}),placement:"bottom",children:(0,s.jsx)(sw.I,{as:H.K,isRound:!0,size:"xs",isLoading:d,onFocus:e=>e.preventDefault(),"data-testid":"add-page",icon:(0,s.jsx)(x.g,{icon:u.QLR}),sx:{span:{flexGrow:0}}})}),(0,s.jsx)(N.Z,{children:(0,s.jsx)(sC.c,{maxW:"350px",zIndex:"tooltip",children:(0,s.jsxs)(ax.r,{title:p.Ru._({id:"yLRlZm"}),children:[(0,s.jsx)(ah.D,{icon:(0,s.jsx)(x.g,{icon:tA.p7g,fixedWidth:!0}),onClick:h,children:(0,s.jsxs)(e8.z,{align:"flex-start",children:[(0,s.jsxs)(o.B,{spacing:0,children:[(0,s.jsx)(l.E,{children:(0,s.jsx)(m.x6,{id:"OppH33"})}),(0,s.jsx)(l.E,{fontSize:"xs",color:"gray.500",children:(0,s.jsx)(m.x6,{id:"P/o+t+"})})]}),(0,s.jsx)(tT.h,{}),(0,s.jsx)(i4.E,{h:"fit-content",colorScheme:"trueblue",ml:2,children:(0,s.jsx)(m.x6,{id:"jsQZMk"})})]})}),(0,s.jsx)(ah.D,{icon:(0,s.jsx)(x.g,{icon:u.QLR,fixedWidth:!0}),onClick:g,children:(0,s.jsxs)(o.B,{spacing:0,children:[(0,s.jsx)(l.E,{children:(0,s.jsx)(m.x6,{id:"SSZKB9"})}),(0,s.jsx)(l.E,{fontSize:"xs",color:"gray.500",children:(0,s.jsx)(m.x6,{id:"S65lUr"})})]})})]})})}),(0,s.jsx)(lG,{isOpen:n,onClose:r})]})},uA=e=>{if(!e)return{path:"untitled-page",title:p.Ru._({id:"kveQAJ"})};if(0===e.filter(e=>e.path.startsWith("/untitled-page")).length)return{title:p.Ru._({id:"kveQAJ"}),path:"untitled-page"};let t=Math.max(...e.map(e=>{let[t,i]=e.path.match(/^\/untitled-page-?(\d+)/)||["","1"];return Number(i)}));return{title:p.Ru._({id:"kveQAJ"})+" "+String(t+1),path:"untitled-page-".concat(t+1)}},uR=e=>{let{isOpen:t,onClose:i,site:n}=e,r=(0,dt.U)(),[d,c]=(0,v.useState)(()=>uA(null==n?void 0:n.routes).title),[u,x]=(0,v.useState)(()=>uA(null==n?void 0:n.routes).path),h=(0,v.useRef)(null),[g,j]=(0,v.useState)(!1),f=((null==n?void 0:n.routes.map(e=>e.path))||[]).includes("/".concat(u)),b=(0,V.dU)("gray.800","gray.50"),y=(0,v.useCallback)(()=>{g||f||(j(!0),r({title:d,path:(0,ta.GM)(u),siteId:null==n?void 0:n.id,routes:null==n?void 0:n.routes}).then(()=>{j(!1),i()}))},[r,f,g,i,u,null==n?void 0:n.id,null==n?void 0:n.routes,d]);return((0,v.useEffect)(()=>{t&&setTimeout(()=>{h.current&&h.current.select()},50)},[t]),n)?(0,s.jsxs)(i0.aF,{isOpen:t,onClose:i,size:"xl",children:[(0,s.jsx)(i1.m,{}),(0,s.jsxs)(i6.$,{color:b,children:[(0,s.jsx)(iR.r,{children:(0,s.jsxs)(o.B,{children:[(0,s.jsx)(l.E,{children:(0,s.jsx)(m.x6,{id:"yLRlZm"})}),(0,s.jsx)(l.E,{fontSize:"sm",color:"gray.500",fontWeight:"normal",letterSpacing:"normal",children:(0,s.jsx)(m.x6,{id:"7TUZvz"})})]})}),(0,s.jsx)(iO.s,{}),(0,s.jsx)(i_.c,{children:(0,s.jsxs)(o.B,{spacing:4,children:[(0,s.jsxs)(no.MJ,{children:[(0,s.jsxs)(e8.z,{justifyContent:"center",children:[(0,s.jsx)(nl.l,{flex:"1",children:(0,s.jsx)(m.x6,{id:"MHrjPM"})}),(0,s.jsx)(ud.H,{length:d.length||0,idealLength:nO.GF,maxLength:nO.tS})]}),(0,s.jsx)(iX.p,{ref:h,value:d,onChange:e=>{c(e.target.value),x((0,na.Fw)(e.target.value))},_placeholder:{opacity:1,color:"gray.500"},onKeyDown:e=>{"Enter"===e.key&&y()}})]}),(0,s.jsxs)(no.MJ,{isInvalid:f,children:[(0,s.jsx)(e8.z,{justifyContent:"center",children:(0,s.jsx)(nl.l,{flex:"1",children:(0,s.jsx)(m.x6,{id:"dq8+qI"})})}),(0,s.jsxs)(nB.M,{children:[(0,s.jsx)(uc.G6,{children:"/"}),(0,s.jsx)(iX.p,{fontFamily:"mono",value:u,onKeyDown:e=>{"Enter"===e.key&&y()},onChange:e=>{x((0,na.Fw)(e.target.value))},placeholder:p.Ru._({id:"bTzMt5"}),_placeholder:{opacity:1,color:"gray.500"}})]}),f&&!g&&(0,s.jsx)(nX.Wt,{children:(0,s.jsx)(m.x6,{id:"hw1fjn"})})]})]})}),(0,s.jsx)(i2.j,{children:(0,s.jsxs)(e7.e,{children:[(0,s.jsx)(a.$,{colorScheme:"gray",variant:"ghost",onClick:i,children:(0,s.jsx)(m.x6,{id:"dEgA5A"})}),(0,s.jsx)(a.$,{onClick:y,isDisabled:f,variant:"solid",isLoading:g,children:(0,s.jsx)(m.x6,{id:"yLRlZm"})})]})})]})]}):(0,s.jsx)(s.Fragment,{})},uO=e=>{let{site:t}=e,{isOpen:i,onClose:n,onOpen:r}=(0,ez.j)();return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(d.a,{bgColor:"gray.50",textAlign:"center",p:4,m:2,children:[(0,s.jsx)(l.E,{fontSize:"sm",children:(0,s.jsx)(m.x6,{id:"6TCEnS"})}),(0,s.jsx)(l.E,{fontSize:"sm",mt:2,fontWeight:"bold",children:(0,s.jsx)(i7.N,{color:"trueblue.600",href:"#",onClick:r,children:(0,s.jsx)(m.x6,{id:"S0WoXy"})})})]}),i&&(0,s.jsx)(uR,{isOpen:i,onClose:n,site:t})]})},u_=e=>{let{icon:t,isSelected:i,children:n,href:r}=e,l=(0,v.useRef)(null),c=(0,V.dU)("gray.600","gray.50"),u=(0,V.dU)("trueblue.50","whiteAlpha.100"),x=(0,V.dU)("gray.800","gray.50"),h=(0,V.dU)("blackAlpha.50","whiteAlpha.100"),m=(0,V.dU)("gray.600","gray.50"),p=(0,V.dU)("trueblue.400","trueblue.200");(0,v.useEffect)(()=>{if(!i||!(null==l?void 0:l.current))return;let{inView:e}=(0,Q.cH)(l.current)||{};e||l.current.scrollIntoView()},[i]);let g=(0,v.useCallback)(e=>{e.target.closest('[data-id="sidebar-item-menu-button"]')&&e.preventDefault(),e.target.closest('[data-id="sidebar-item-menu-list"]')&&e.stopPropagation()},[]);return(0,s.jsx)(b(),{href:r,passHref:!0,shallow:!0,children:(0,s.jsx)(a.$,{ref:l,onClick:g,variant:"secondary",justifyContent:"flex-start",fontWeight:"500",w:"100%",size:"sm",color:i?x:c,bgColor:i?u:"transparent",_hover:{bgColor:i?u:h,color:i?x:m},h:"auto",py:1.5,px:2,role:"group",children:(0,s.jsxs)(e8.z,{alignItems:"start",justify:"flex-start",w:"100%",spacing:2,children:[(0,s.jsx)(d.a,{color:i?p:c,mt:"0.2em",w:4,children:t}),(0,s.jsx)(o.B,{flex:1,direction:"row",minW:0,align:"start",justifyContent:"flex-start",children:n})]})})})},uD=e=>{let{title:t,children:i}=e;return(0,s.jsxs)(e8.z,{justify:"space-between",children:[(0,s.jsx)(l.E,{fontSize:"sm",fontWeight:"600",px:1,py:1.5,color:"gray.500",children:t}),i&&i]})},uP=(e,t,i)=>i?(0,s.jsx)(t4.y,{size:"xs"}):e?(0,s.jsx)(x.g,{icon:u.hLE,fixedWidth:!0}):t?(0,s.jsx)(x.g,{icon:u.Eur,fixedWidth:!0}):(0,s.jsx)(x.g,{icon:u.A4h,fixedWidth:!0}),uz=e=>{let{site:t,isSelected:i,doc:n,route:r,hasChanges:o,onToggleOffline:l}=e,a=(0,V.dU)("trueblue.50","whiteAlpha.200"),c=(0,V.dU)("trueblue.100","whiteAlpha.200");return(0,s.jsx)(sy.W,{modifiers:[{name:"flip",enabled:!0,options:{fallbackPlacements:["right"]}}],children:e=>{let{isOpen:h}=e;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(sw.I,{"data-id":"sidebar-item-menu-button",ml:3,as:H.K,isRound:!0,variant:"ghost",py:2,size:"xs",_hover:{bgColor:i?c:a},icon:(0,s.jsx)(d.a,{className:"ellipsis-icon",transitionProperty:"common",transitionDuration:"normal",_groupHover:{opacity:1},_hover:{opacity:1},_active:{opacity:1},opacity:+!!h,children:(0,s.jsx)(x.g,{icon:u.Dwc,fixedWidth:!0})})}),(0,s.jsx)(N.Z,{children:(0,s.jsx)(uS,{site:t,doc:n,route:r,hasChanges:o,"data-id":"sidebar-item-menu-list",onToggleOffline:l})})]})}})},uM=e=>{var t;let{route:i,isHome:n,isSelected:a}=e,{docId:d,doc:c}=i,u=(0,tX.En)(),x=(0,eu.GV)(tr.Gd),h=(0,eu.GV)((0,tr.B4)(d)),p=(0,v.useRef)(null),g=(0,eu.GV)(tr.le),[j,{loading:f}]=(0,ik.Imo)(),b=uP(n,h,f),y="currentColor",w=(0,V.dU)("gray.500","gray.400"),C=(0,V.dU)("trueblue.400","trueblue.200"),k=(0,v.useCallback)(async()=>{if(!(null==c?void 0:c.id)||!x)return;let e=!(null==i?void 0:i.offline);await j({variables:{input:{siteId:x.id,docId:c.id,offline:e,path:null==i?void 0:i.path}}})},[null==c?void 0:c.id,i,j,x]);(0,v.useEffect)(()=>{if(!p.current||g!==d)return;let{inView:e}=(0,Q.cH)(p.current)||{};e||p.current.scrollIntoView()},[g,d]);let E=(0,D.pF)({docId:d});return(0,s.jsxs)(u_,{icon:b,"data-sidebar-doc":d,isSelected:a,href:E,children:[(0,s.jsxs)(o.B,{flex:1,spacing:"3px",alignItems:"flex-start",justifyContent:"flex-start",w:"100%",minW:0,children:[(0,s.jsx)(l.E,{textAlign:"left",color:a?C:y,noOfLines:2,maxW:"100%",whiteSpace:"normal",children:(0,cQ.B)(null==(t=i.doc)?void 0:t.title)}),(0,s.jsxs)(e8.z,{color:w,children:[h&&!i.offline?(0,s.jsx)(J.Tz,{label:(0,s.jsxs)(o.B,{spacing:1,children:[(0,s.jsx)(l.E,{children:(0,s.jsx)(m.x6,{id:"cFW7WD"})}),(0,s.jsx)(l.E,{fontSize:"xs",color:"whiteAlpha.700",children:(0,s.jsx)(m.x6,{id:"qliBJ3"})})]}),placement:"top",children:(0,s.jsx)(r.s,{bg:a?C:y,minW:1.5,minH:1.5,borderRadius:"full"})}):null,(0,s.jsx)(l.E,{mt:"-1px",textAlign:"left",noOfLines:1,fontFamily:n?void 0:"mono",fontSize:"xs",whiteSpace:"normal",wordBreak:"break-all",dir:"ltr",children:n?(0,s.jsx)(m.x6,{id:"i0qMbr"}):i.path})]})]}),k&&u&&x&&(0,s.jsx)(uz,{site:x,doc:c,route:i,hasChanges:h,isSelected:a,onToggleOffline:k})]})},uN=()=>{let e=(0,eu.GV)(tr.Gd),{openSiteSettings:t}=(0,iS.ip)(),i=(0,eu.GV)(tr.le),{onlineRoutes:n,offlineRoutes:r}=(0,v.useMemo)(()=>{let t=((null==e?void 0:e.routes)?[...e.routes]:[]).sort(function(e,t){return e.path<t.path?-1:+(e.path>t.path)}).sort((e,t)=>"/"===e.path?-1:+("/"===t.path));return{onlineRoutes:t.filter(e=>!e.offline),offlineRoutes:t.filter(e=>e.offline)}},[null==e?void 0:e.routes]);return e?(0,s.jsxs)(o.B,{spacing:2,w:"100%",p:0,children:[(0,s.jsx)(iJ,{context:"pages",openSiteSettings:()=>t("website")}),(0,s.jsxs)(uD,{title:(0,s.jsx)(m.x6,{id:"wRR604"}),children:[(0,s.jsx)(tT.h,{}),(0,s.jsx)(uT,{site:e})]}),(0,s.jsxs)(o.B,{spacing:1,px:0,children:[0===n.length&&(0,s.jsx)(uO,{site:e}),n.map(e=>{let t=e.docId===i;return(0,s.jsx)(uM,{route:e,isHome:"/"===e.path,isSelected:t},e.id)}),r.length>0&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(uD,{title:(0,s.jsx)(m.x6,{id:"1DdXjE"})}),r.map(e=>{let t=e.docId===i;return(0,s.jsx)(uM,{route:e,isHome:"/"===e.path,isSelected:t},e.id)})]})]})]}):(0,s.jsx)(s.Fragment,{})},uF=()=>{let e=(0,ee.rd)();return(0,s.jsx)(J.L8,{isDark:e,children:(0,s.jsx)(tO.Z,{bg:e?"gray.800":"white",borderRight:"1px solid",borderColor:e?"gray.700":"gray.200","data-panelid":"pages-panel",overflowX:"hidden",px:6,pt:4,children:(0,s.jsx)(uN,{})})})};uF.panelPosition="left",uF.panelName="pages";let uL=e=>{let t=(0,iW.Gx)(),{togglePanel:i,isPanelOpen:n}=(0,eq.ww)(uF,e&&t),s=(0,y.d4)(ex.wC),r=(0,eu.GV)(tr.Gd),{editor:o}=(0,t5.mi)(),l=(0,eu.GV)(te.og),a=!!(r&&null===l&&r.routes.length>1&&o);return(0,tX.Vg)(()=>{a&&i({override:"open",disableTransition:!1})},[i,a],[a]),(0,v.useEffect)(()=>{s!==tb.w.DOC_VIEW&&i({override:"closed",disableTransition:!0})},[s,i]),{toggleSitePagesPanel:i,isSitePagesPanelOpen:n}};var uV=i(89122),uW=i(50861),uG=i(21699),uB=i(26886),uU=i(69764),uH=i(80180),uK=i(3083);let uJ=e=>{let{isOpen:t,onClose:i,onSaveSuccess:n,docId:r}=e,l=(0,iI.d)(),d=(0,v.useRef)(null),[c,u]=(0,v.useState)(""),[x,{loading:h}]=(0,ik.cGn)(),p=()=>{x({variables:{id:r,title:c}}).then(()=>{u(()=>""),n()}).catch(e=>{console.error(e),l({title:(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(m.x6,{id:"AToAqe",values:{0:e.message}})}),position:"top",status:"error"})})};return(0,s.jsxs)(i0.aF,{returnFocusOnClose:!1,onClose:i,closeOnOverlayClick:!0,isOpen:t,initialFocusRef:d,children:[(0,s.jsx)(i1.m,{}),(0,s.jsxs)(i6.$,{children:[(0,s.jsx)(iR.r,{children:(0,s.jsx)(m.x6,{id:"kq/0Sg",values:{GAMMA_ARTIFACT_PROPER_NOUN:ej.TP}})}),(0,s.jsx)(iO.s,{}),(0,s.jsx)(i_.c,{children:(0,s.jsx)(iX.p,{ref:d,value:c,required:!0,placeholder:(0,cQ.B)(),onChange:e=>u(e.target.value),onKeyDown:e=>{"Enter"===e.key&&p()}})}),(0,s.jsx)(i2.j,{children:(0,s.jsx)(o.B,{spacing:2,direction:"row",align:"center",children:(0,s.jsx)(a.$,{isLoading:h,isDisabled:h||!c||!c.length,onClick:()=>{p()},children:(0,s.jsx)(m.x6,{id:"tfDRzk"})})})})]})]})},uq=(0,v.memo)(e=>{let{doc:t,file:i}=e,n=(0,v.useCallback)(()=>iq.R.emit("openSharePanel",{view:"invite"}),[]),{isOpen:o,onClose:l,onOpen:a}=(0,iF.E)({id:"analyticsModalDisclosure"}),{isOpen:d,onOpen:c,onClose:h}=(0,iF.E)({id:"titleModalDisclosure"}),{isInOfflineMode:g}=(0,E.u)(),j=(0,Z.st)(),{user:f}=(0,et.ur)(),b=(0,et.Iy)("manage",t)&&!!f,y=(0,R.u)("editDocAI"),w=(0,v.useCallback)(()=>{t&&(t.title&&""!==t.title?n():c())},[t,n,c]),C=(0,v.useCallback)(e=>()=>{null==j||j.track(Z.VV.DOC_ANALYTICS_VIEWED,{docId:null==t?void 0:t.id,source:e,type:"full",device:(0,_.ZI)()}),a()},[j,null==t?void 0:t.id,a]);return b&&t&&!y?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(r.s,{children:(0,s.jsx)(J.Tz,{closeOnMouseDown:!1,closeOnClick:!1,label:(0,s.jsx)(m.x6,{id:"YaUqUV"}),children:(0,s.jsx)(uK.f,{"data-guider-highlight":"view-analytics-button","aria-label":p.Ru._({id:"YaUqUV"}),isDisabled:g,onMouseDown:uH.Fw,onClick:C("toolbar_analytics_block"),icon:(0,s.jsx)(x.g,{icon:u.q9c})})})}),d&&(0,s.jsx)(uJ,{onClose:h,isOpen:d,onSaveSuccess:()=>{h(),n()},docId:null==t?void 0:t.id}),o&&(0,s.jsx)(cU,{doc:t,file:i,onSharePanelOpen:w,onAnalyticsPanelClose:l,isAnalyticsPanelOpen:o,mode:"full"})]}):null});var uY=i(13427),u$=i(72104),uX=i(7312),uQ=i(16842),uZ=i(25273);let u0=()=>{let{user:e,anonymousUser:t}=(0,et.ur)(),i=(0,y.wA)(),n=(0,iI.d)(),{editor:o}=(0,t5.mi)(),{collaborators:d,followers:c}=(0,eu.GV)((0,ex.iH)((null==e?void 0:e.id)||t.id));aU({editor:o,collaborators:d,user:e});let u=(0,eu.GV)(ex.Kc),x=(0,eu.GV)(ex.ys),h=(0,eu.GV)(ex.kn),g=(0,eu.GV)(ex.Ji),j=(0,eu.GV)(ex.QF);(0,v.useEffect)(()=>{u.forEach(e=>{n({duration:2e3,position:"bottom",render:function(){return(0,s.jsxs)(r.s,{bg:"gray.50",p:3,px:6,align:"center",borderRadius:"md",shadow:"md",children:[(0,s.jsx)(aP.e,{size:"sm",src:e.profileImageUrl,border:"solid 2px ".concat(e.color),color:aV()(e.color).isDark()?"white":"black",bg:e.color,ignoreFallback:!0}),(0,s.jsx)(l.E,{ml:2,children:(0,s.jsx)(m.x6,{id:"DSaSKH",values:{0:e.name}})})]})}})})},[u,n]),(0,v.useEffect)(()=>{let e=!h&&g&&!j;if(!o||!e)return;n.closeAll();let t=n({id:"detached-toast",render:()=>(0,s.jsxs)(r.s,{bg:"gray.50",p:3,px:6,m:4,justify:"flex-end",align:"center",borderRadius:"md",shadow:"md",children:[(0,s.jsx)(l.E,{size:"sm",mr:6,children:(0,s.jsx)(m.x6,{id:"PjodLp"})}),(0,s.jsxs)(e7.e,{size:"sm",alignItems:"center",children:[(0,s.jsx)(a.$,{onClick:()=>{i((0,ex.mF)({attached:!0}))},variant:"solid",children:(0,s.jsx)(m.x6,{id:"f/C2ic"})}),(0,s.jsx)(J.Tz,{label:(0,s.jsx)(m.x6,{id:"5JWVnj"}),children:(0,s.jsx)(H.K,{isRound:!0,variant:"ghost",size:"xs","aria-label":p.Ru._({id:"5JWVnj"}),icon:(0,s.jsx)(u$.U,{}),onClick:()=>{i((0,ex.mF)({attached:!1,following:null}))}})})]})]}),position:"bottom",duration:null});return()=>{n.close(t)}},[o,h,g,j,n,i]),(0,v.useEffect)(()=>{g||o&&!o.isDestroyed&&i((0,ex.mF)({following:null}))},[o,g,i]);let f=(0,eQ.h5)({base:4,md:6,xl:8})||6,b=f/(c.length?2:1),w=f/(d.length?2:1);return(0,s.jsx)(r.s,{children:(0,s.jsxs)(e8.z,{divider:(0,s.jsx)(uX.G,{borderColor:"gray.200"}),children:[c.length&&(0,s.jsx)(u6,{type:"FOLLOWERS",collaborators:c,max:w,isEveryone:0===d.length,localCollaborator:x,localIsAttached:h}),d.length&&(0,s.jsx)(u6,{type:"COLLABORATORS",collaborators:d,max:b,isEveryone:0===c.length,localCollaborator:x,localIsAttached:h})]})})};var u1=function(e){return e.FOLLOWERS="FOLLOWERS",e.COLLABORATORS="COLLABORATORS",e}(u1||{});let u6=e=>{let{collaborators:t,localCollaborator:i,localIsAttached:n,type:o,max:a,isEveryone:d}=e,c=aB(),u="FOLLOWERS"===o,x=t.length>a,h=x?t.slice(0,a-1):t,g=x?t.length-a+1:0,j=e=>{let{localIsFollowing:t,collaborator:i}=e;u||c({localIsFollowing:t,localIsAttached:n,collaborator:i})};return(0,s.jsx)(uZ.o,{children:(0,s.jsxs)(uQ.Z,{size:"sm",spacing:u?-2:0,children:[u&&(0,s.jsx)(u2,{isEveryone:d}),h.map((e,t)=>{var o;let a=(null==i||null==(o=i.memoState)?void 0:o.following)===e.sessionId,d=!!e.idleSince,c=!u&&(x||h.length-1!==t);return(0,s.jsx)(J.Vc,{ignoreFallback:!0,name:e.name,label:(0,s.jsxs)(r.s,{direction:"column",justify:"center",align:"center",children:[(0,s.jsx)(l.E,{children:e.name}),(0,s.jsx)(l.E,{fontSize:"xs",children:u?(0,s.jsx)(m.x6,{id:"iRohzP"}):a&&n?(0,s.jsx)(m.x6,{id:"1QTvS5"}):(0,s.jsx)(m.x6,{id:"2Ldadb"})})]}),pointerEvents:d?"none":"auto",opacity:d?.4:1,transitionProperty:"common",transitionDuration:"normal",src:e.profileImageUrl,border:"solid 2px ".concat(e.color),nubbin:a&&n,bg:e.color,shadow:"base",color:aV()(e.color).isDark()?"white":"black",cursor:u?"":"pointer",boxProps:c?{marginEnd:-2}:{},onClick:()=>j({localIsFollowing:a,collaborator:e})},e.sessionId)}),g>0&&(0,s.jsxs)(J.oQ,{tooltipLabel:p.Ru._({id:"25VyZX"}),onClick:e=>{var n;let s=t.find(t=>t.id===e.id);j({localIsFollowing:!!(s&&(null==i||null==(n=i.memoState)?void 0:n.following)===s.sessionId),collaborator:s})},avatars:t,count:g,disabled:u,children:[(0,s.jsx)(l.E,{px:2,children:u?(0,s.jsx)(m.x6,{id:"vliZud",values:{0:t.length}}):(0,s.jsx)(m.x6,{id:"sC4bhw",values:{0:t.length}})}),!u&&(0,s.jsx)(l.E,{px:2,fontSize:"sm",color:"gray.500",children:(0,s.jsx)(m.x6,{id:"miJbY4"})}),(0,s.jsx)(sS.N,{})]})]})})},u2=e=>{let{isEveryone:t}=e,[i,n]=(0,v.useState)(!1),[r,o]=(0,v.useState)(!1),[l,a]=(0,v.useState)(!1);return((0,v.useEffect)(()=>{!i&&t&&(o(!0),n(!0),setTimeout(()=>{o(!1)},3e3))},[t,i]),t)?(0,s.jsx)(d.a,{fontSize:"sm",color:"",px:2,mr:2,children:(0,s.jsx)(J.Tz,{label:(0,s.jsx)(m.x6,{id:"w7dTyp"}),isOpen:l||r,children:(0,s.jsx)(d.a,{mr:2,px:1,bg:"green.300",color:"green.900",borderRadius:"full",onMouseEnter:()=>a(!0),onMouseLeave:()=>a(!1),children:(0,s.jsx)(x.g,{icon:u.pS3})})})}):(0,s.jsx)(d.a,{fontSize:"sm",color:"gray.600",pr:4,children:(0,s.jsx)(x.g,{icon:u.pS3})})};var u5=i(88136);let u4=(0,se.P)(d.a),u3=e=>{let{commentFeedItems:t,editor:i,doc:n,user:r}=e;return i&&r?(0,s.jsx)(o.B,{p:2,children:(0,s.jsx)(st.N,{initial:!1,children:t.map(e=>(0,s.jsx)(u4,{layout:!0,initial:{opacity:0,scale:.85},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.85},bg:"gray.50",borderColor:"gray.200",borderWidth:"1px",borderRadius:"md",shadow:"sm",children:(0,s.jsx)(rr.h,{comment:e,editor:i,selfUser:r,docId:n.id,userCanComment:!1,instanceType:"notification"},e.id)},e.id))})}):null};var u8=i(88974);let u7=e=>!!e.comment&&null!==e.timeout,u9=e=>{let{user:t,docId:i,docComments:n=[],pauseExiration:s=!1,duration:r=5e3}=e,o=(0,iI.d)(),l=null==t?void 0:t.id,a=(0,v.useMemo)(()=>{if(!l)return null;let e=new u8.default(A.$.KNOCK_PUBLIC_KEY);return e.authenticate(l),e},[l]),[d,c]=(0,v.useState)({}),u=(0,v.useRef)(!0),x=(0,v.useRef)(s);x.current=s,(0,v.useEffect)(()=>()=>{u.current=!1},[]);let h=(0,v.useCallback)(()=>c({}),[]),m=(0,v.useCallback)(e=>{c(t=>Object.entries(t).reduce((t,i)=>{let[n,s]=i;return(!0===e?-1===s.timeout:n===e)||(t[n]=s),t},{}))},[]);(0,v.useEffect)(()=>{s||m(!0)},[m,s]),(0,v.useEffect)(()=>{Object.entries(d).forEach(e=>{let[t,{entry:i,timeout:s}]=e;if(null===s){let e=i.data.commentId,s=null==n?void 0:n.find(t=>t.id===e);if(s){let e=setTimeout(()=>{u.current&&(x.current?c(e=>{let i={...e};return i[t].timeout=-1,i}):m(t))},r);c(n=>({...n,[t]:{entry:i,comment:s,timeout:e}}))}}})},[d,n,r,m]),(0,v.useEffect)(()=>{if(!a||!i)return;let e=a.feeds.initialize(A.$.KNOCK_FEED_ID,{source:"new-comment",status:"unseen"}),t=e.listenForUpdates();return e.on("messages.new",t=>{let{entries:n}=t,[s]=n;s.data.docId===i&&(c(e=>({...e,[s.id]:{entry:s,timeout:null}})),e.markAsSeen(s).then(()=>{console.debug("New notification marked as seen")}).catch(e=>{console.error("Unable to mark notification as seen",e)}))}),()=>{t()}},[i,o,a]);let{isConnected:p}=(0,E.u)();return(0,v.useEffect)(()=>{if(!a||!i)return;let e=a.client();p?e.connectSocket():e.disconnectSocket()},[i,p,a]),{reset:h,comments:Object.values(d).filter(u7).map(e=>e.comment)}},xe=e=>{var t;let{toggleCommentsPanel:i,isCommentsPanelOpen:n,doc:r,mode:o}=e,{user:l}=(0,et.ur)(),{editor:a}=(0,t5.mi)(),d=(0,R.u)("editDocAI"),[c,h]=(0,tX.Mk)(),{comments:m,reset:p}=u9({user:l,docId:null==r?void 0:r.id,docComments:null==r?void 0:r.comments,pauseExiration:h}),g=!!(a&&r&&r.comments);(0,v.useEffect)(()=>{if(!g)return;let{commentId:e}=(0,D.$9)();e&&rn.LF.emit(rn.DN.OPEN_POPUP_COMMENT,{commentId:e,highlightComment:!0})},[g]),(0,v.useEffect)(()=>{(n||o===tb.w.SLIDE_VIEW)&&p()},[n,p,o]);let j=!!m.length&&!n&&o!==tb.w.SLIDE_VIEW,f=(null==r||null==(t=r.comments)?void 0:t.filter(e=>e.status===ik.EB6.Open).length)||0;return d&&0===f?null:(0,s.jsxs)(F.A,{isLazy:!0,lazyBehavior:"keepMounted",returnFocusOnClose:!1,isOpen:j,placement:"bottom",children:[(0,s.jsx)(ea.W,{children:(0,s.jsx)(uK.I,{onMouseDown:uH.Fw,onClick:i,icon:(0,s.jsx)(x.g,{icon:u.DN2}),isActive:n,"aria-label":n?"Hide comments":"Show comments",children:f})}),(0,s.jsx)(N.Z,{children:r&&(0,s.jsxs)(W.h,{bg:"white",shadow:"lg",border:"none",ref:c,children:[(0,s.jsx)(u5.R,{bg:"white"}),(0,s.jsx)(u3,{editor:a,user:l,commentFeedItems:m,doc:r})]})})]})},xt=()=>{let{isInOfflineMode:e}=(0,E.u)();return(0,s.jsx)(r.s,{children:(0,s.jsx)(J.Tz,{closeOnMouseDown:!1,closeOnClick:!1,label:(0,s.jsx)(m.x6,{id:"EVnzPs"}),children:(0,s.jsx)(uK.f,{"data-guider-highlight":"design-partner-button","aria-label":"Edit with AI",variant:"plain",isDisabled:e,onClick:()=>{ry.R.emit("toggle",{})},icon:(0,s.jsx)(x.g,{icon:u.p7g})})})})};var xi=i(51684),xn=i(65012),xs=i(65009);let xr=(e,t)=>{let i=e.querySelector(".chakra-progress__indicator");if(!i)return;let n=(null!=t?t:0)/100,s=(null!=n?n:0)*264,r="".concat(s," ").concat(264-s);i.setAttribute("stroke-dasharray",r)},xo=e=>{let{duration:t=10,onClose:i,onMouseEnter:n,enabled:r,...o}=e,l=(0,v.useRef)(null),a=(0,V.dU)("gray.200","gray.600"),c=(0,V.dU)("trueblue.400","trueblue.300"),h=(0,V.dU)("var(--chakra-colors-gray-600)","var(--chakra-colors-gray-300)");return(0,v.useEffect)(()=>{let e,n,s=l.current;if(!s||!r)return;xr(s,0);let o=r=>{e||(e=r);let l=Math.min(100,(r-e)/(10*t));xr(s,l),l<100?n=requestAnimationFrame(o):null==i||i()};return n=requestAnimationFrame(o),()=>{cancelAnimationFrame(n)}},[i,r,t]),(0,s.jsx)(d.a,{ref:l,onMouseEnter:n,cursor:"pointer",sx:{".chakra-progress__indicator":{transition:"none !important",opacity:1,display:r?"block":"none",stroke:c},".chakra-progress__track":{display:r?"block":"none",stroke:a}},...o,children:(0,s.jsx)(xn.P,{display:"block",size:"24px",thickness:"10px",onClick:i,children:(0,s.jsx)(xs.n,{children:(0,s.jsx)(x.g,{icon:u.Jyw,fontSize:"14px",style:{color:h,borderRadius:"6px"}})})})})};var xl=i(42926),xa=i(81807),xd=i(41),xc=i(87790),xu=i(13559),xx=i(11390),xh=i(40094),xm=i(89481);let xp=e=>{let{editor:t}=e,i=(0,eu.GV)(eO.Jo),n=(0,eu.CU)(),s=(0,eu.GV)(s2.xI),r=(0,r6.lI)(t);(0,r6.zK)(r);let{imageProvider:o,imageOptions:l}=(0,o0.V)(),a=(0,R.u)("buddyEdit"),d=(0,v.useCallback)(async e=>{let{instructions:s="",inputHtml:r,operation:a}=e;if(!i||!i.organization)throw Error("Doc or organization not found");let d=(0,tU.$F)(),c=performance.now(),u=(0,xu.h)(t,n),x={interface:"edit-card-parallel",interactionId:d,inputContent:r,inputMessage:s,inputData:{custom:!!a,operation:null==a?void 0:a.key,operationGroup:null==a?void 0:a.group,imageProvider:o,...u},product:(0,xx.A4)(i.organization),docId:i.id};try{let e=(null==a?void 0:a.key)==="edit.translate",t=await (0,tB.K8)({promptKey:"EditCardParallel",variables:{inputHtml:r,request:s,imageOptions:l,imageProvider:o,model:R.of.get("editCardModel"),reasoningEffort:R.of.get("editCardReasoningEffort"),basePromptKey:e?"TranslateCard":R.of.get("editCardParallelPrompt"),...u},interactionId:d,workspaceId:i.organization.id,opts:{maxRetries:0}});(0,tU.rl)(x),console.log("[EditCardParallel] Response",t);let n=(0,xa.dg)(t);return console.log("[EditCardParallel] Parsing HTML",n),{output:n.map(r1.dE),interactionId:d}}catch(e){throw(0,tU.tB)({...x,errorMessage:e.message,errorCode:e.code,errorName:e.name,outputMessage:"Error editing doc",latency:performance.now()-c}),e}},[i,n,o,l,t]),c=(0,v.useCallback)(async e=>{let{instructions:i,operation:s}=e,r=(0,tf.aJ)(t.state.doc);if(!r)return;if(a){var o;let e=i||(null==s||null==(o=s.instructionsTrans)?void 0:o.call(s));e?rn.LF.emit("queueBuddyEditMessage",{message:p.Ru._({id:"khFKeH",values:{userInstructions:e}})}):console.error("useEditDocWithAI: no instructions for buddy edit");return}let l=i||(null==s?void 0:s.instructions);if(l)try{n.dispatch((0,s2.Tn)(!0));let e=[];r.forEach(i=>{var r;n.dispatch((0,s2.Ic)({cardId:i.node.attrs.id,suggestions:{status:"loading",loadingMessage:null==s||null==(r=s.loadingMessage)?void 0:r.call(s),variants:[]}})),e.push((0,tG.KC)(t,i.node))});let i=e.join();console.log("[EditCardParallel] Input HTMLParts",e);let{output:o,interactionId:a}=await d({instructions:l,operation:s,inputHtml:i});if(console.log("[EditCardParallel] New cards",o),o.length!==r.length)throw Error("[EditCardParallel] Mismatch in number of cards");let c={};r.forEach((e,t)=>{var i;let r=o[t];r.attrs=(0,xm.p5)(e.node.attrs,r.attrs),c[e.node.attrs.id]=r,n.dispatch((0,s2.Ic)({cardId:e.node.attrs.id,suggestions:{status:"done",interactionId:a,selected:"v1",operation:s,instructions:l,variants:[{label:p.Ru._({id:"HxF6Fk"}),isOriginal:!0,id:"original",card:e.node.toJSON()},{label:(null==s||null==(i=s.variationName)?void 0:i.call(s))||p.Ru._({id:"YledUl"}),isOriginal:!1,id:"v1",card:r}]}}))}),xj(t,c,a)}catch(e){console.error("[EditCardParallel] Error regenerating card",e),r.forEach(e=>{n.dispatch((0,s2.Ic)({cardId:e.node.attrs.id,suggestions:{status:"error",variants:[]}}))})}finally{n.dispatch((0,s2.Tn)(!1))}},[t,d,n,a]),u=(0,v.useRef)();return(0,v.useEffect)(()=>xd.R.on("translate",async e=>{let{type:i,language:n}=e,s=xh.Jz.find(e=>"edit.translate"===e.key);if("doc"===i&&s){if(a){let e=n.displayNameLocalized();await c({instructions:p.Ru._({id:"BYaniG",values:{languageName:e}}),operation:s})}else await c({instructions:"".concat(n.englishName," (").concat(n.key,")"),operation:s});u.current=(0,r6.nM)(t.state.doc),(0,r6.lR)(t,n.key)}}),[c,t,a]),{editDoc:c,acceptAll:(0,v.useCallback)(()=>{n.dispatch((0,s2.YB)({})),u.current=void 0},[n]),rejectAll:(0,v.useCallback)(()=>{xg(t,n.getState(),!0),n.dispatch((0,s2.YB)({})),(0,r6.lR)(t,u.current),u.current=void 0},[t,n]),status:s}},xg=(e,t,i)=>{let n=(0,s2.yL)(t),s=e.chain();return Object.entries(n).forEach(t=>{let[n,r]=t,o=(0,tf.W0)(e,n),l=r.variants.find(e=>!!e.isOriginal===i);o&&l&&l.id!==r.selected&&s.command(t=>{let{tr:i}=t,n=sH.bP.fromJSON(e.schema,l.card),s=i.mapping.map(o.pos);return i.replaceWith(s,s+o.node.nodeSize,n),!0})}),s.run()},xj=(e,t,i)=>{let n=(0,tf.aJ)(e.state.doc);if(!n)return;let s=n.map(n=>{let s=t[n.node.attrs.id];if(!s)return void console.warn("[useGenerateCard] Card not found. It may have been deleted while generating.");let r=(0,ex.SJ)((0,eu.KA)().getState());return(0,k.Sg)({editor:e,content:s,theme:r,interactionId:i}),s}).filter(e=>!!e);console.log("[replaceDocWithCardVariants] content",s),e.chain().setMeta("isEditCardVariant",!0).setMeta("cardNotesHandled",!0).insertContentAt({from:1,to:e.state.doc.nodeSize-2},s).run()},xf=()=>{let e=!!(0,eu.GV)(tr.Gd),{isOpen:t,onClose:i,onOpen:n}=(0,iF.E)({id:"TranslateDocDisclosure"}),r=(0,v.useCallback)(e=>{xd.R.emit("translate",{type:"doc",language:e}),i()},[i]);return{translateDocModal:t?(0,s.jsx)(xc.Q,{isSite:e,isFullDoc:!0,onClose:i,startTranslation:r}):null,onTranslateDocOpen:n}};var xb=i(85443);let xv=(0,se.P)(tI.T),xy=e=>{let{editor:t}=e,{isInOfflineMode:i}=(0,E.u)(),{openUpsellModal:n}=(0,dE.I)(),{editDoc:o,status:l,acceptAll:a,rejectAll:d}=xp({editor:t}),c=(0,ee.rd)(),u=(0,v.useRef)(null),h=(0,v.useRef)(null),g=(0,R.u)("editCard2"),[j,f]=(0,v.useState)(),b=(0,v.useCallback)(()=>f(void 0),[]),{isGammaAdminUser:y}=(0,xb.u)(),w=(0,eK.ez)("edit_doc_ai")||y,{translateDocModal:C,onTranslateDocOpen:k}=xf(),S=(0,R.u)("buddyEdit"),I="loading"===l,T=(0,v.useCallback)(e=>{var t;return w?(a(),f(e.operation||"Editing"),(null==(t=e.operation)?void 0:t.key)==="edit.translate")?void k():void o(e):void n({segmentEvent:Z.VV.GAMMA_PRO_UPSELL_CALLOUT_EDIT_DOC_AI})},[a,w,o,k,n]);return g?(0,s.jsxs)(J.L8,{isDark:c,children:[(0,s.jsx)(sy.W,{placement:"bottom-end",isLazy:!0,initialFocusRef:h,onOpen:()=>{f(void 0)},children:e=>{let{onClose:n}=e;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(r.s,{direction:"column",children:[(0,s.jsx)(J.Tz,{label:(0,s.jsx)(m.x6,{id:"nIHiKm"}),placement:"bottom",children:(0,s.jsx)(sw.I,{as:uK.f,position:"relative","aria-label":p.Ru._({id:"nIHiKm"}),isDisabled:I||i,icon:I?(0,s.jsx)(t4.y,{size:"sm"}):(0,s.jsx)(x.g,{icon:xi.p7g})})}),(0,s.jsx)(xC,{currentOperation:j,onConfirm:a,onReject:d,onClose:b})]}),(0,s.jsx)(N.Z,{children:(0,s.jsxs)(sC.c,{"data-doc-ai-menu":!0,minWidth:"320px",width:"fit-content",maxWidth:"min(360px, 80vw)",fontFamily:"body",fontSize:"md",border:"none",maxH:"90vh",overflowY:"auto",children:[(0,s.jsx)(xl.u,{firstItemRef:u,inputRef:h,editCardIfAllowed:T,onClose:n,isDisabled:I,opacityFadeUpsell:!w,groups:["writing"],showCreditCosts:!1,editor:t,title:p.Ru._({id:"nIHiKm"}),buddyEditEnabled:S}),!w&&(0,s.jsx)(iQ.c,{isNarrow:!0,mb:0,segmentEvent:Z.VV.GAMMA_PRO_UPSELL_CALLOUT_EDIT_DOC_AI,title:(0,s.jsx)(m.x6,{id:"mpbrVv",values:{GAMMA_PRO_PROPER_NOUN:ej.Ol}}),description:(0,s.jsx)(m.x6,{id:"gNaWbA",values:{GAMMA_ARTIFACT_PROPER_NOUN:ej.TP}}),targetFeature:"edit_doc_ai"})]})})]})}}),C]}):null},xw={initial:{opacity:0,y:10},animate:{opacity:1,transition:{duration:.4,ease:[.21,1.02,.73,1]},y:0},exit:{opacity:0,scale:.9},transition:{duration:.4,ease:[.06,.71,.55,1]}},xC=e=>{var t,i,n;let{currentOperation:o,onConfirm:d,onReject:c,onClose:h}=e,g=(0,eu.GV)(s2.pw),[j,f]=(0,v.useState)(!0),b="Edited"===o?o:"object"==typeof o?null==(t=o.completionMessage)?void 0:t.call(o):(0,s.jsx)(m.x6,{id:"MRZxAn"}),y=null!=(i=g.done)?i:0,w=null!=(n=g.error)?n:0,C=!!((y||w)&&o);(0,v.useEffect)(()=>{C||f(!0)},[C]);let k={activeColor:(0,V.dU)("trueblue.500","trueblue.300"),hoverColorCloseButton:(0,V.dU)(w?"red.200":"gray.50","whiteAlpha.200"),bg:(0,V.dU)("white","gray.800"),bgError:(0,V.dU)("red.100","red.700"),textColor:(0,V.dU)("blackAlpha.800","whiteAlpha.900"),textErrorColor:(0,V.dU)("red.500","red.100"),iconColor:(0,V.dU)("blackAlpha.800","whiteAlpha.800")};return(0,s.jsx)(st.N,{children:C&&(0,s.jsxs)(xv,{position:"absolute",bg:w?k.bgError:k.bg,borderRadius:"md",boxShadow:"md",overflow:"hidden",top:14,insetEnd:6,flexDirection:"row",spacing:2,p:2,onMouseEnter:()=>f(!1),...xw,children:[w>0?(0,s.jsxs)(e8.z,{spacing:0,children:[(0,s.jsx)(r.s,{mx:2,justifyContent:"center",alignItems:"center",color:k.textErrorColor,children:(0,s.jsx)(x.g,{icon:u.QJT,size:"lg"})}),(0,s.jsxs)(tI.T,{mx:2,spacing:0,alignItems:"flex-start",children:[(0,s.jsx)(l.E,{fontSize:"sm",color:k.textErrorColor,children:(0,s.jsx)(m.x6,{id:"nwtY4N"})}),(0,s.jsx)(l.E,{fontSize:"xs",color:k.textErrorColor,children:(0,s.jsx)(m.x6,{id:"xbrcey"})})]})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(tI.T,{spacing:0,alignItems:"flex-start",children:[(0,s.jsxs)(r.s,{mx:2,justifyContent:"center",alignItems:"center",children:[(0,s.jsx)(x.g,{icon:xi.p7g,color:"var(--chakra-colors-trueblue-400)"}),(0,s.jsx)(l.E,{fontSize:"sm",mx:2,color:k.textColor,children:b})]}),(0,s.jsx)(r.s,{mx:2,children:(0,s.jsx)(l.E,{fontSize:"sm",color:"gray.500",children:(0,s.jsx)(m.x6,{id:"Dj1qYd",values:{doneCount:y}})})})]}),(0,s.jsxs)(e7.e,{spacing:0,children:[(0,s.jsx)(J.Tz,{label:p.Ru._({id:"I1yW7+"}),placement:"top",children:(0,s.jsx)(H.K,{"aria-label":p.Ru._({id:"yWDjkv"}),variant:"ghost",colorScheme:"gray",size:"sm",mx:1,icon:(0,s.jsx)(x.g,{icon:u.U23}),onClick:c})}),(0,s.jsx)(J.Tz,{label:p.Ru._({id:"kOU1RP"}),placement:"top",children:(0,s.jsx)(a.$,{"aria-label":p.Ru._({id:"aIcRZZ"}),variant:"plain",size:"sm",mx:1,rightIcon:(0,s.jsx)(x.g,{icon:u.FK2}),onClick:d,children:(0,s.jsx)(m.x6,{id:"PHWHEO"})})})]})]}),(0,s.jsx)(r.s,{mt:-6,me:-1,children:(0,s.jsx)(J.Tz,{label:p.Ru._({id:"1QfxQT"}),placement:"top",shouldWrapChildren:!0,children:(0,s.jsx)(xo,{onClose:h,enabled:j&&!w,duration:30,borderRadius:"full",_hover:{bg:k.hoverColorCloseButton,color:k.textColor}})})})]},"confirm-edit-doc-toast")})};var xk=i(20746),xE=i(37869);let xS=e=>{let{file:t,currentPageId:i,showLongTitle:n,showTitleStack:r,currentPageTitle:o}=e,a=t.title||(0,s.jsx)(m.x6,{id:"wja8aL"}),c=r?o||(0,s.jsx)(m.x6,{id:"wja8aL"}):a,{textColor:u,secondaryTextColor:x}=(0,xE.l)(),h=(0,ir.A)({base:!1,sm:!0})&&r;return h?(0,s.jsxs)(dR,{flexGrow:0,flexShrink:1,maxWidth:n?500:300,as:uK.I,leftIcon:null,textAlign:"start",file:t,matchWidth:!1,selectedPageId:null!=i?i:t.mainPageId,onPageSelected:()=>{},getMenuItemProps:e=>({as:b(),shallow:!0,href:(0,D.pF)({docId:e.id})}),children:[h&&(0,s.jsx)(l.E,{noOfLines:1,fontSize:"2xs",color:x,children:a}),(0,s.jsx)(l.E,{noOfLines:1,fontSize:h?"xs":["xs","sm"],color:u,children:c})]}):(0,s.jsxs)(d.a,{flexGrow:0,flexShrink:1,maxWidth:n?500:300,children:[h&&(0,s.jsx)(l.E,{noOfLines:1,fontSize:"2xs",color:x,children:a}),(0,s.jsx)(l.E,{noOfLines:1,fontSize:h?"xs":["xs","sm"],color:u,children:c})]})},xI=e=>{let{file:t,canEditFile:i,currentDocTitle:n,currentPageId:o,isPagesPanelOpen:l,togglePagesPanel:a}=e,c=(0,X.fW)(),[h]=(0,xk.F)(em.E.lastHomeUrl,"/"),{user:m}=(0,nm.ur)(),{confirmNavigation:g}=(0,t5.mi)(),{push:j}=(0,e9.useRouter)(),f={as:b(),href:h||"/",passHref:!0,"data-testid":"toolbar-home-link"},{separatorColor:v}=(0,xE.l)(),y=(0,eu.GV)(eO.d_);return(0,s.jsx)(r.s,{flex:1,h:8,children:(0,s.jsxs)(e8.z,{w:"100%",spacing:[1,2],px:[2,3],alignItems:"center",children:[m&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(d.a,{...f,onClick:e=>{!e.shiftKey&&(e.metaKey||e.ctrlKey)||(e.preventDefault(),g().then(()=>{j(f.href)}))},marginInlineStart:[-2,-3],children:(0,s.jsx)(xE.Z,{boxProps:{boxSize:[6,8],p:["0.2rem","0.3rem"]}})}),(0,s.jsx)(d.a,{as:x.g,icon:c?u.Wzs:u.XkK,color:v,fontSize:["xs","sm"],mt:["0.2rem","0.125rem"]})]}),(i||y)&&(0,s.jsx)(uK.f,{"aria-label":p.Ru._({id:"NoSuez"}),onClick:()=>null==a?void 0:a(),isSelected:l,icon:(0,s.jsx)(x.g,{icon:u.aEb}),border:"none"}),(0,s.jsx)(xS,{file:t,currentPageId:o,showLongTitle:!i,showTitleStack:!l&&y,currentPageTitle:n})]})})},xT=(0,se.P)(d.a),xA=()=>{let e=(0,eu.GV)(ex.oz),t=(0,eu.GV)(ex.kn),i=e&&t;return(0,s.jsx)(st.N,{initial:!1,children:i&&(0,s.jsx)(xT,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},position:"absolute",pointerEvents:"none",borderTop:"solid ".concat(4,"px ").concat(e.color),top:0,left:0,bottom:0,right:0,height:"var(--100vh)"})})},xR=e=>{let{doc:t,file:i,toggleCommentsPanel:n,editorWrapperEl:r,scrollingParentSelector:o}=e;return(0,s.jsxs)(sy.W,{placement:"bottom-end","data-testid":"doc-toolbar-menu",modifiers:[{name:"flip",enabled:!0,options:{fallbackPlacements:["left"]}}],children:[(0,s.jsx)(sw.I,{as:uK.f,icon:(0,s.jsx)(x.g,{icon:u.vHW}),onMouseDown:uH.Fw,"data-testid":"doc-toolbar-menu-button"}),(0,s.jsx)(N.Z,{children:t&&(0,s.jsx)(uo,{file:i,doc:t,toggleCommentsPanel:n,scrollingParentSelector:o,editorWrapperEl:r})})]})},xO=e=>{let{docId:t,enabled:i,enterSlideView:n}=e,s=(0,eu.GV)(ex.ys),r=(0,v.useRef)(null),o=(0,iI.d)();return(0,v.useEffect)(()=>{!i&&r.current&&r.current.close()},[i]),(0,v.useEffect)(()=>{let e=()=>{var e;null==(e=r.current)||e.close()};return window.addEventListener("beforeunload",e),()=>{var t;window.removeEventListener("beforeunload",e),null==(t=r.current)||t.close()}},[]),{handlePresentViewClick:(0,v.useCallback)(()=>{if(!t||!(null==s?void 0:s.sessionId))return;let e=(0,D.WC)({docId:t,sessionId:s.sessionId}),i=window.open(e,"present-view","popup,left=0,top=0,width=720,height=580");i?r.current=i:(o({title:"Failed to open presenter view.",description:"Please allow popups for this site and try again.",status:"error",position:"top",duration:5e3}),console.error("[usePresenterViewToggle] Failed to open presenter view")),n({fullscreen:!1})},[t,n,null==s?void 0:s.sessionId,o])}};var x_=i(9329),xD=i(2362);function xP(){let e=(0,x_._)(["\n    0% { transform: scale(1.0); filter: brightness(1.0);  }\n    3% { transform: scale(1.0); filter: brightness(1.0);  }\n    8% {  transform: scale(0.90); filter: brightness(1.30);  }\n    18% { transform: scale(1.05); filter: brightness(1.0); }\n    30% { transform: scale(1.0); filter: brightness(1.0); }\n  "]);return xP=function(){return e},e}let xz=e=>({followOnStart:!0,followingId:e}),xM=e=>{switch(e){case"edit":return p.Ru._({id:"UZN1cZ"});case"comment":return p.Ru._({id:"jFTs0A"});case"view":return p.Ru._({id:"Ya6CJ0"});default:return p.Ru._({id:"Txd1qM"})}},xN=e=>{var t,i;let{isOpen:n,onClose:r,accessLinkUrl:c,onPlayClick:u}=e,h=(0,X.fW)(),{user:g}=(0,et.ur)(),{replace:j}=(0,e9.useRouter)(),f=xz(null==g?void 0:g.id),[b]=(0,v.useState)(f),y=(0,D.an)(c,b),{user:w,color:C}=(0,et.ur)(),k=(0,eu.GV)(eO.Jo),E=null==k||null==(i=k.accessLinks)||null==(t=i[0])?void 0:t.permission,S=(0,K.i7)(xP());return(0,s.jsx)(J.L8,{isDark:!1,children:(0,s.jsxs)(i0.aF,{isOpen:n,onClose:r,size:"lg",children:[(0,s.jsx)(i1.m,{}),(0,s.jsxs)(i6.$,{children:[(0,s.jsx)(iR.r,{children:(0,s.jsx)(m.x6,{id:"88XnIQ"})}),(0,s.jsx)(iO.s,{}),(0,s.jsx)(iD.c,{}),(0,s.jsx)(i_.c,{pt:"6",children:(0,s.jsxs)(o.B,{spacing:"4",children:[(0,s.jsx)(l.E,{children:(0,s.jsx)(m.x6,{id:"oYTLJe",values:{GAMMA_ARTIFACT_PROPER_NOUN:ej.TP,0:xM(E)},components:{0:(0,s.jsx)(l.E,{as:"span",fontWeight:"bold",borderBottom:"1px dashed",borderColor:"gray.400",display:"inline-block"}),1:(0,s.jsx)(J.Tz,{label:p.Ru._({id:"8LnpqL"}),placement:"top"})}})}),(0,s.jsx)(d.a,{mb:"2",children:(0,s.jsx)(xD.X,{url:y,variant:"solid",paddingLeft:h?20:void 0})}),(0,s.jsxs)(iP.F,{children:[(0,s.jsx)(iz._,{}),(0,s.jsxs)(e8.z,{flexBasis:"100%",alignItems:"top",children:[(0,s.jsx)(l.E,{fontSize:"sm",width:"100%",children:(0,s.jsx)(m.x6,{id:"EApNIe"})}),(0,s.jsxs)(d.a,{position:"relative",textShadow:"sm",children:[(0,s.jsx)(aP.e,{animation:"".concat(S," 2s infinite ease-out"),name:null==w?void 0:w.displayName,src:null==w?void 0:w.profileImageUrl,size:"md",border:"solid 3px ".concat(C.value),shadow:"lg"}),(0,s.jsx)(d.a,{position:"absolute",top:"1.75rem",left:"1.75rem",outline:"0 0 2px rgba(255,255,255,1.0)",sx:{path:{stroke:"white",strokeWidth:48}},color:"black",children:(0,s.jsx)(x.g,{icon:tA.eX_,fixedWidth:!0})})]})]})]})]})}),(0,s.jsx)(i2.j,{children:(0,s.jsxs)(e7.e,{children:[(0,s.jsx)(a.$,{variant:"ghost",colorScheme:"gray",onClick:()=>{r()},children:(0,s.jsx)(m.x6,{id:"DPfwMq"})}),(0,s.jsx)(a.$,{variant:"solid",onClick:()=>{r(),u(),j(y,y,{shallow:!0})},leftIcon:(0,s.jsx)(x.g,{icon:tA.ijD}),children:(0,s.jsx)(m.x6,{id:"tbDuNX"})})]})})]})]})})},xF=e=>{var t,i,n,a;let{doc:c,docEditorType:h,isCollaborativeEditor:g,enterSlideView:j,exitSlideView:f,setExitedFullscreenByClick:b,isFullscreen:y,enterFullscreen:w,exitFullscreen:C,shouldHide:k}=e,{onOpen:S,onClose:I,isOpen:T}=(0,iF.E)({id:"meetModal"}),{user:A}=(0,et.ur)(),O=(0,eu.GV)(ex.wC),_=(0,v.useRef)(O),{presentAction:D,secondaryPresentAction:P}=xL(h),z=(0,R.u)("docPreview");(0,v.useEffect)(()=>{_.current=O},[O]);let{shortcutLabel:M,shortcutIcon:F,shortcutKeys:L,buttonLabel:V}=dr(D)[O],W=null==c||null==(i=c.accessLinks)||null==(t=i[0])?void 0:t.url,G=!!(null==c||null==(a=c.accessLinks)||null==(n=a[0])?void 0:n.permission),B=(0,et.Iy)("comment",c||void 0),U=(0,et.Iy)("manage",c||void 0),H=g&&A&&W&&U,K=O===tb.w.SLIDE_VIEW,q=O===tb.w.DOC_VIEW,Y=B&&h!==t2.i.PUBLIC_STATIC,{isInOfflineMode:$}=(0,E.u)(),{handlePresentViewClick:X}=xO({docId:null==c?void 0:c.id,enabled:K,enterSlideView:j}),Q=(0,R.u)("presentFullScreen"),Z=["present"===P&&q&&(0,s.jsx)(ah.D,{icon:(0,s.jsx)(x.g,{icon:u.vGi,fixedWidth:!0}),onClick:()=>j({fullscreen:Q,presentAction:"present"}),isDisabled:$,children:(0,s.jsxs)(o.B,{spacing:"0",children:[(0,s.jsx)(l.E,{children:(0,s.jsx)(m.x6,{id:"hXFTMR"})}),(0,s.jsx)(l.E,{fontSize:"sm",color:"gray.600",children:(0,s.jsx)(m.x6,{id:"kNbT4w"})})]})},"other_ways_to_share_present"),"preview"===P&&q&&z&&(0,s.jsx)(ah.D,{icon:(0,s.jsx)(x.g,{icon:u.hZM,fixedWidth:!0}),onClick:()=>j({fullscreen:Q,presentAction:"preview"}),children:(0,s.jsxs)(o.B,{spacing:"0",children:[(0,s.jsx)(l.E,{children:(0,s.jsx)(m.x6,{id:"t7wjm2"})}),(0,s.jsx)(l.E,{fontSize:"sm",color:"gray.600",children:(0,s.jsx)(m.x6,{id:"oVzEKG"})})]})},"other_ways_to_share_preview"),H&&(0,s.jsxs)(v.Fragment,{children:[(0,s.jsx)(J.Tz,{isDisabled:G,label:(0,s.jsx)(m.x6,{id:"zk6wKo"}),children:(0,s.jsx)(d.a,{children:(0,s.jsx)(ah.D,{onClick:()=>{var e;(null==c||null==(e=c.accessLinks)?void 0:e[0].permission)&&S()},isDisabled:!G||$,icon:(0,s.jsx)(x.g,{icon:u.Gk0,fixedWidth:!0}),children:(0,s.jsxs)(o.B,{spacing:"0",children:[(0,s.jsx)(l.E,{children:(0,s.jsx)(m.x6,{id:"myjBJy"})}),(0,s.jsx)(l.E,{fontSize:"sm",color:"gray.600",children:(0,s.jsx)(m.x6,{id:"svQKXy"})})]})})})}),(0,s.jsx)(xN,{isOpen:T,onClose:I,accessLinkUrl:W,onPlayClick:()=>{j({fullscreen:!1,presentAction:D})}})]},"other_ways_to_share_meet_link")].filter(Boolean);return(0,s.jsxs)(r.s,{display:k?"none":"flex",children:[(0,s.jsxs)(e7.e,{isAttached:!0,size:"sm","data-guider-highlight":"present-button-group","data-editor-mode":K?"slide":"doc",children:[(0,s.jsx)(J.Tz,{closeOnMouseDown:!1,closeOnClick:!1,label:M,shortcut:L,children:(0,s.jsx)(uK.I,{fontWeight:"normal",size:"sm",variant:"solid",onClick:()=>{q?j({fullscreen:Q,presentAction:D}):f()},onMouseDown:uH.Fw,icon:(0,s.jsx)(x.g,{icon:F}),"data-present-button":!0,children:V})}),(0,s.jsxs)(sy.W,{children:[(0,s.jsx)(sw.I,{variant:"solid",as:uK.f,icon:(0,s.jsx)(x.g,{icon:u.Jt$})}),(0,s.jsx)(N.Z,{children:(0,s.jsxs)(sC.c,{zIndex:"popover",children:[q&&(0,s.jsxs)(ax.r,{title:"present"===D?p.Ru._({id:"tbDuNX"}):p.Ru._({id:"Mn9aLv"}),children:[(0,s.jsx)(ah.D,{icon:(0,s.jsx)(x.g,{icon:u.u0F,fixedWidth:!0}),command:(0,J.lp)("Mod+Enter"),onClick:()=>j({fullscreen:!1,presentAction:D}),children:(0,s.jsx)(m.x6,{id:"LRFe2O"})}),(0,s.jsx)(ah.D,{icon:(0,s.jsx)(x.g,{icon:u.ArK,fixedWidth:!0}),command:(0,J.lp)("Mod+Shift+Enter"),onClick:()=>j({fullscreen:!0,presentAction:D}),children:(0,s.jsx)(m.x6,{id:"OwIqiD"})}),Y&&(0,s.jsx)(ah.D,{icon:(0,s.jsx)(x.g,{icon:u.hZM,fixedWidth:!0}),onClick:X,isDisabled:$,children:(0,s.jsxs)(o.B,{spacing:"0",children:[(0,s.jsx)(l.E,{children:(0,s.jsx)(m.x6,{id:"T+GUKl"})}),(0,s.jsx)(l.E,{fontSize:"sm",color:"gray.600",children:(0,s.jsx)(m.x6,{id:"ACelDx"})})]})})]}),K&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(ah.D,{icon:(0,s.jsx)(x.g,{icon:tA.APi,fixedWidth:!0}),command:(0,J.lp)("Esc"),onClick:f,children:(0,s.jsx)(m.x6,{id:"5Rfo7J"})}),(Y||H)&&(0,s.jsx)(sS.N,{}),Y&&(0,s.jsx)(ah.D,{icon:(0,s.jsx)(x.g,{icon:u.hZM,fixedWidth:!0}),onClick:X,children:(0,s.jsxs)(o.B,{spacing:"0",children:[(0,s.jsx)(l.E,{children:(0,s.jsx)(m.x6,{id:"T+GUKl"})}),(0,s.jsx)(l.E,{fontSize:"sm",color:"gray.600",children:(0,s.jsx)(m.x6,{id:"ACelDx"})})]})})]}),Z.length>0&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(sS.N,{}),(0,s.jsx)(ax.r,{title:p.Ru._({id:"+w9NSz"}),children:Z})]})]})})]})]}),K&&(0,s.jsx)(r.s,{ms:2,children:(0,s.jsx)(J.Tz,{label:y?(0,s.jsx)(m.x6,{id:"IkOhTI"}):(0,s.jsx)(m.x6,{id:"q8ARHN"}),children:(0,s.jsx)(uK.f,{"aria-label":y?p.Ru._({id:"IkOhTI"}):p.Ru._({id:"q8ARHN"}),icon:(0,s.jsx)(x.g,{icon:y?u.gr3:u.oZK}),onClick:y?()=>{b(!0),C()}:w})})})]})},xL=e=>{let t=(0,R.u)("docPreview"),i=e===t2.i.COLLABORATIVE&&t,n=(0,eu.GV)(ex.sA).presentAction;i||"preview"!==n||(n="present");let s="present"===n?"preview":"present";return{presentAction:n,secondaryPresentAction:s}},xV=e=>{switch(e){case ik.mOX.Pending:return{icon:u.$Xz,label:p.Ru._({id:"JKsafh"})};case ik.mOX.Verified:return{icon:u.e68,label:p.Ru._({id:"DKrUGB"})};case ik.mOX.Failed:return{icon:u.S2b,label:p.Ru._({id:"ojSx8e"})}}},xW=e=>{let{domain:t,isLive:i,site:n,docId:r}=e,o=(0,ta.tO)({site:n,docId:r}),l=(0,v.useMemo)(()=>xV(t.status),[t.status]);return n&&r?(0,s.jsxs)(e8.z,{color:"gray.500",pointerEvents:"none",justifyContent:"flex-start",w:"full",children:[(0,s.jsx)(J.Tz,{label:l.label,placement:"left",children:(0,s.jsx)(H.K,{variant:"ghost",size:"xs",mx:-1,me:-2,color:"gray.500","aria-label":l.label,_hover:{bg:"transparent"},_active:{bg:"transparent"},children:(0,s.jsx)(x.g,{icon:l.icon,size:"xs",pointerEvents:"auto",fixedWidth:!0,spin:t.status===ik.mOX.Pending})})}),(0,s.jsx)(J.Tz,{label:t.name,placement:"top",openDelay:500,closeOnClick:!1,children:(0,s.jsx)(d.a,{fontSize:"xs",pointerEvents:"auto",children:xG(t.name,33)})}),i&&t.status===ik.mOX.Verified&&(0,s.jsx)(c5,{site:n,path:(0,ta.wK)(o),domain:t})]}):null},xG=(e,t)=>{if(e.length<=t)return e;let i=e.replace(/^https?:\/\//,"").split("."),n=i.slice(-2).join("."),s=i.slice(0,-2).join("."),r=t-n.length-3;if(r<=0)return n;let o=s.slice(0,r);return"".concat(o).concat("...").concat(n)},xB=e=>{let{onClick:t,doc:i,isLive:n}=e,r=null==i?void 0:i.site,o=(0,ta.H3)(null==r?void 0:r.domains),l=n?(0,s.jsx)(m.x6,{id:"3TQHDg",values:{0:o.length}}):(0,s.jsx)(m.x6,{id:"1EeNDU"});return(0,s.jsxs)(ah.D,{icon:(0,s.jsx)(x.g,{icon:u.MNJ,fixedWidth:!0}),onClick:t,alignItems:"baseline",children:[l,r&&(null==i?void 0:i.id)&&o.map(e=>(0,s.jsx)(xW,{domain:e,isLive:n,site:r,docId:i.id},e.id))]})},xU=e=>{let{doc:t}=e,{replace:i}=(0,e9.useRouter)(),{isInOfflineMode:n}=(0,ik.utY)(),a=(0,et.Iy)("manage",t),c=(0,eu.GV)(tr.Gd),h=null==t?void 0:t.id,g=(0,ta.tO)({site:c,docId:h}),{publishDoc:j,publishSite:f,isPublishing:b}=iB({doc:t,site:c,path:g}),{statusText:y,statusIcon:w,statusColor:C,lastPublishedTime:k,needsPublish:E,publishEnabled:S}=iK(b),I=c&&(0,ta.SG)(t,c),T=(0,v.useCallback)(()=>{h&&i((0,D.pF)({docId:h,preview:!0}),void 0,{shallow:!0})},[h,i]);if(!c)return null;let A=(0,eK.vT)("custom_domains");return(0,s.jsx)(r.s,{children:(0,s.jsxs)(e7.e,{isAttached:!0,size:"sm",children:[(0,s.jsx)(J.Tz,{closeOnMouseDown:!1,closeOnClick:!1,isDisabled:!S,label:E&&!b?(0,s.jsxs)(o.B,{children:[y,(0,s.jsx)(l.E,{color:"gray.400",children:(0,s.jsx)(m.x6,{id:"FmP7uY"})})]}):(0,s.jsx)(m.x6,{id:"o+bOqE"}),children:(0,s.jsx)(uK.I,{fontWeight:"normal",size:"sm",variant:"solid",onClick:f,onMouseDown:uH.Fw,isDisabled:!S||n,isLoading:b,icon:E?(0,s.jsx)(x.g,{icon:u.MNJ}):(0,s.jsx)(x.g,{icon:u.e68}),"data-publish-button":!0,children:E?(0,s.jsx)(m.x6,{id:"EEYbdt"}):(0,s.jsx)(m.x6,{id:"u3wRF+"})})}),(0,s.jsxs)(sy.W,{children:[(0,s.jsx)(sw.I,{variant:"solid",as:uK.f,isDisabled:!S||n,icon:(0,s.jsx)(x.g,{icon:u.Jt$})}),(0,s.jsx)(N.Z,{children:(0,s.jsxs)(sC.c,{zIndex:"popover",minW:"320px",maxW:"360px",children:[(0,s.jsx)(ax.r,{children:(0,s.jsxs)(tI.T,{alignItems:"flex-start",children:[(0,s.jsxs)(e8.z,{px:3,pt:2,alignItems:"center",color:C,children:[w&&(0,s.jsx)(d.a,{marginEnd:1.5,display:"inline-flex",children:w}),(0,s.jsx)(d.a,{children:(0,s.jsx)(l.E,{fontWeight:"semibold",children:y})})]}),k&&(null==t?void 0:t.site)&&(0,s.jsxs)(e8.z,{pb:2,mt:-1,children:[(0,s.jsx)(tT.h,{marginEnd:2,px:3,w:13}),(0,s.jsx)(l.E,{fontSize:"xs",color:"gray.500",children:I?k:(0,s.jsx)(m.x6,{id:"0bSVwO"})})]})]})}),a&&t&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(sS.N,{}),(0,s.jsxs)(ax.r,{title:p.Ru._({id:"1EeNDU"}),children:[(0,s.jsx)(xB,{onClick:f,doc:t,isLive:!!I}),(0,s.jsx)(ue,{label:(0,s.jsx)(m.x6,{id:"A/QS9E"}),showUpsellBadge:!A,settingsTab:"domains"})]})]}),(0,s.jsx)(sS.N,{}),(0,s.jsx)(ax.r,{title:p.Ru._({id:"Pf2dn/"}),children:(0,s.jsx)(ah.D,{icon:(0,s.jsx)(x.g,{icon:u.OFY,fixedWidth:!0}),onClick:j,alignItems:"baseline",children:(0,s.jsx)(m.x6,{id:"szmTdw"})})}),(0,s.jsx)(sS.N,{}),(0,s.jsx)(ax.r,{title:p.Ru._({id:"rdUucN"}),children:(0,s.jsx)(J.Tz,{label:(0,s.jsx)(m.x6,{id:"aChIoL"}),children:(0,s.jsx)(d.a,{children:(0,s.jsx)(ah.D,{onClick:T,icon:(0,s.jsx)(x.g,{icon:tA.qtl,fixedWidth:!0}),alignItems:"baseline",children:(0,s.jsx)(o.B,{spacing:"0",children:(0,s.jsx)(l.E,{children:(0,s.jsx)(m.x6,{id:"Klm31l"})})})})})})})]})})]})]})})};var xH=i(48561),xK=i(11525),xJ=i(72737),xq=i(43787);let xY=e=>{var t,i;let{doc:n,file:r,showAnalytics:o=!0,showSharePublic:a=!0,showEmbed:c=!0,showButton:u=!0}=e,{isOpen:x,onClose:h,onOpen:p}=(0,iF.E)({id:"analyticsModalDisclosure"}),{isSharePanelOpen:g,onSharePanelOpen:j,onSharePanelClose:f,view:b,setView:y}=(0,xK.R)(),{isInOfflineMode:w}=(0,E.u)(),{user:C,currentWorkspace:k}=(0,et.ur)(),{editor:S}=(0,t5.mi)(),I=(0,et.Iy)("view",n),T=(0,et.Iy)("edit",n),A=(0,et.Iy)("manage",n),R=(0,Z.st)(),[D,P]=(0,v.useState)(""),{query:z}=(0,e9.useRouter)();(0,O.o)("showAnalytics"),(0,v.useEffect)(()=>iq.R.on("openSharePanel",e=>{let{view:t,options:i}=e;j(),y(t),(null==i?void 0:i.cardRangesInput)&&P(i.cardRangesInput)}),[j,y]);let M=(0,v.useCallback)(()=>{null==R||R.track(Z.VV.DOC_ANALYTICS_VIEWED,{docId:null==n?void 0:n.id,source:"true"===z.showAnalytics?"query_param":"share_panel",type:A?"full":"personal",device:(0,_.ZI)()}),p()},[R,z,A,null==n?void 0:n.id,p]);if((0,v.useEffect)(()=>{(null==n?void 0:n.site)||"true"!==z.showAnalytics||M()},[z,n,M]),!I||!C||!n)return null;let N=n.collaborators||[],F=n.channels||[],L=(0,xq.e7)([...N].sort((e,t)=>e.user.id===C.id?-1:+(t.user.id===C.id)).map(e=>e.user.id===C.id?"You":e.user.displayName||"").concat(n.orgAccess?F.map(e=>{let{name:t}=e;return t||""}):[])),V=(0,xJ.ZP)(n,C),W=V?(0,xJ.bC)()[V]:null,G=(0,xJ.D5)(n,k);return null===W?(console.error("[SharePanel] Unknown VisibilityValue for doc",n),null):(0,s.jsxs)(s.Fragment,{children:[u&&(0,s.jsx)(J.Tz,{label:(0,s.jsxs)(s.Fragment,{children:[G&&(0,s.jsx)(l.E,{fontWeight:"bold",children:(0,s.jsx)(m.x6,{id:"OS9x6e",values:{GAMMA_ARTIFACT_PROPER_NOUN:ej.TP}})}),W.title(null==n||null==(t=n.organization)?void 0:t.name)?(0,s.jsx)(l.E,{children:W.title(null==n||null==(i=n.organization)?void 0:i.name)}):null,(0,s.jsx)(l.E,{fontSize:"xs",children:W.subtitle?W.subtitle(L||""):""})]}),children:(0,s.jsx)("span",{children:(0,s.jsx)(uK.I,{"data-guider-highlight":"share-button",onMouseDown:uH.Fw,icon:(0,s.jsx)(d.a,{children:(0,s.jsx)(xH.li,{visibility:W,isFromOtherOrg:G})}),isDisabled:!T||w,onClick:j,children:(0,s.jsx)(m.x6,{id:"Z8lGw6"})})})}),(0,s.jsx)(xH._j,{doc:n,editor:S,isSharePanelOpen:g,onSharePanelOpen:j,onSharePanelClose:f,onAnalyticsPanelOpen:M,view:b,setView:y,showAnalytics:o,showSharePublic:a,showEmbed:c,cardRangesInput:D,setCardRangesInput:P}),x&&(0,s.jsx)(cU,{doc:n,file:r,onSharePanelOpen:j,onAnalyticsPanelClose:h,isAnalyticsPanelOpen:x,mode:A?"full":"personal"})]})},x$=(0,v.memo)(e=>{let{doc:t,onClick:i}=e,{isConnected:n,isInOfflineMode:d}=(0,E.u)(),c=(null==t?void 0:t.title)||"";return(0,s.jsxs)(r.s,{flex:1,w:32,children:[(0,s.jsx)(J.Tz,{label:(0,s.jsxs)(o.B,{spacing:0,children:[(0,s.jsx)(l.E,{children:(0,s.jsx)(m.x6,{id:"g/+TNk"})}),(0,s.jsx)(l.E,{color:"gray.500",children:(0,s.jsx)(m.x6,{id:"ZfQLKw"})})]}),isDisabled:d,"aria-label":p.Ru._({id:"g/+TNk"}),children:(0,s.jsx)(a.$,{size:"sm",variant:"ghost",fontWeight:"normal",ms:"-0.675rem",leftIcon:(0,s.jsx)(x.g,{icon:u.Nnc}),onClick:i,isDisabled:d,children:(0,s.jsx)(l.E,{isTruncated:!0,whiteSpace:"nowrap",textOverflow:"ellipsis",w:"100%",children:c})})}),!n&&(0,s.jsx)(J.Tz,{label:(0,s.jsxs)(o.B,{spacing:0,children:[(0,s.jsx)(l.E,{children:(0,s.jsx)(m.x6,{id:"ysdDIA"})}),d&&(0,s.jsx)(l.E,{color:"gray.500",children:(0,s.jsx)(m.x6,{id:"+QNhGE"})})]}),"aria-label":p.Ru._({id:"IcHxhR"}),children:(0,s.jsx)(r.s,{color:"gray.500",alignItems:"center",me:2,children:(0,s.jsx)(x.g,{icon:u.seF})})})]})});x$.displayName="EditableDocTitle";let xX=e=>(0,s.jsx)(xQ,{...e}),xQ=(0,v.memo)(e=>{let{doc:t,togglePagesPanel:i}=e,n=(0,X.fW)(),[o]=(0,xk.F)(em.E.lastHomeUrl,"/"),a=(0,eu.GV)(tr.Gd),{confirmNavigation:c}=(0,t5.mi)(),{push:h}=(0,e9.useRouter)(),m={as:b(),passHref:!0,href:o||"/","data-testid":"toolbar-home-link"},{separatorColor:p,textColor:g}=(0,xE.l)();return(0,s.jsx)(e8.z,{flex:1,children:(0,s.jsxs)(e8.z,{spacing:3,divider:(0,s.jsx)(d.a,{border:"none",as:x.g,icon:n?u.Wzs:u.XkK,size:"sm",color:p}),w:"100%",children:[(0,s.jsx)(d.a,{...m,onClick:e=>{!e.shiftKey&&(e.metaKey||e.ctrlKey)||(e.preventDefault(),c().then(()=>{h(m.href)}))},children:(0,s.jsx)(xE.Z,{})}),a&&(null==a?void 0:a.routes.length)>1&&(0,s.jsx)(r.s,{flexGrow:0,flexShrink:1,textColor:g,children:(0,s.jsx)(l.E,{noOfLines:1,fontWeight:"normal",fontSize:"sm",children:null==a?void 0:a.name})}),(0,s.jsx)(x$,{doc:t,onClick:()=>{null==i||i()}})]})})});xQ.displayName="SitesBreadcrumbGroup";let xZ=e=>{let{spotlightingByBlock:t}=e,{editor:i}=(0,t5.mi)(),n=(0,v.useCallback)(()=>{t?null==i||i.commands.turnOffSpotlight():null==i||i.commands.spotlightNextBlock()},[i,t]);return(0,s.jsx)(r.s,{children:(0,s.jsx)(J.Tz,{closeOnMouseDown:!1,closeOnClick:!1,shortcut:"S",label:t?(0,s.jsx)(m.x6,{id:"CzYGrQ"}):(0,s.jsx)(m.x6,{id:"X1FNEK"}),children:(0,s.jsx)(uK.I,{isSelected:t,onClick:e=>{n(),e.target.blur()},icon:(0,s.jsx)(x.g,{icon:u.lnn}),children:(0,s.jsx)(m.x6,{id:"k04a2t"})})})})};var x0=i(41386),x1=i(87291),x6=i(84646),x2=i(5747);let x5=(0,v.memo)(e=>{let{closePanel:t}=e,i=(0,x1.d)(),n=(0,eu.GV)(ex.SJ),o=(0,v.useCallback)(()=>{null==t||t(),rn.LF.emit(rn.DN.OPEN_PAGE_SETUP,"background")},[t]);return(0,s.jsx)(J.L8,{isDark:!1,children:(0,s.jsx)(tO.Z,{bgColor:"white",w:"100%","data-panelid":"doc-theme-drawer",pt:4,position:"relative","data-doc-theme-drawer":!0,children:(0,s.jsxs)(r.s,{direction:"column","data-testid":"doc-theme-drawer",overflowX:"hidden",w:"100%",children:[(0,s.jsx)(r.s,{px:6,children:(0,s.jsx)(x2.D,{title:(0,s.jsx)(m.x6,{id:"FEr96N"}),description:(0,s.jsx)(l.E,{fontSize:"sm",fontWeight:"500",mt:"-2",letterSpacing:0,color:"gray.600",children:(0,s.jsx)(m.x6,{id:"S9uQm/"})}),closePanel:t,currentTheme:n,usePanelHeading:!0})}),(0,s.jsx)(r.s,{overflowY:"auto",direction:"column",h:"100%",flex:1,"data-theme-picker-scroll-container":!0,px:6,mt:4,children:(0,s.jsx)(x6.oz,{currentTheme:n,openBackgroundPanel:o,setTheme:i})})]})})})});x5.displayName="DocThemePanelMemoized";let x4=e=>{let{closePanel:t}=e;return(0,s.jsx)(x5,{closePanel:t})};x4.displayName="DocThemePanel",x4.panelPosition="right",x4.panelName="doc-theme-drawer";let x3=()=>{let{togglePanel:e,isPanelOpen:t}=(0,eq.ww)(x4);return(0,v.useEffect)(()=>{let t=()=>{e({override:"open"})},i=iq.R.on("toggleThemeBlock",t),n=rn.LF.on(rn.DN.OPEN_THEME_DRAWER,t);return()=>{i(),n()}},[e]),{toggleDocThemePanel:e,isDocThemePanelOpen:t}},x8=(0,v.memo)(()=>{x3();let{getCollaborativeEditorInstance:e}=(0,tE.m)(),t=(0,x1.d)();return(0,s.jsx)(r.s,{children:(0,s.jsx)(x0.n,{onThemeCreated:t,getCollaborativeEditorInstance:e})})}),x7=(0,v.memo)(()=>{let{isConnected:e}=(0,ik.utY)();return(0,s.jsx)(J.Tz,{label:e?(0,s.jsx)(m.x6,{id:"JkEyR8"}):(0,s.jsxs)(o.B,{children:[(0,s.jsx)(l.E,{children:(0,s.jsx)(m.x6,{id:"ysdDIA"})}),(0,s.jsx)(l.E,{color:"gray.300",children:(0,s.jsx)(m.x6,{id:"tyyf8W"})})]}),"aria-label":p.Ru._({id:"JkEyR8"}),children:(0,s.jsx)(d.a,{children:(0,s.jsx)(uK.I,{"data-guider-highlight":"toolbar-theme-button",onClick:()=>{iq.R.emit("toggleThemeBlock",!0)},isDisabled:!e,icon:(0,s.jsx)(x.g,{icon:u.fyG}),"data-testid":"toolbar-theme-button",children:(0,s.jsx)(m.x6,{id:"FEr96N"})})})})});x7.displayName="ThemeToolbarButton";let x9=()=>{let{isConnected:e}=(0,ik.utY)();return(0,s.jsxs)(s.Fragment,{children:[e&&(0,s.jsx)(x8,{}),(0,s.jsx)(x7,{})]})};x8.displayName="ThemeDrawers";var he=i(4007);let ht=[.5,.8,.9,1,1.1,1.2,1.5,2],hi=e=>"".concat((100*e).toFixed(0),"%"),hn=()=>{let e=(0,R.u)("presentZoom"),{editor:t}=(0,t5.mi)(),i=(0,Z.st)(),n=(0,y.wA)(),r=(0,eu.GV)(ex.eo),o=(0,v.useCallback)(e=>{n((0,ex.ed)({zoomLevel:e})),n((0,ex.i)({enabled:!1})),null==i||i.track(Z.VV.DOC_ZOOMED,{direction:"set",level:e})},[n,i]),d=(0,v.useCallback)(()=>{n((0,ex.i)({enabled:!0}))},[n]),c=(0,v.useCallback)(()=>{let e=Math.min(a0.ih,hs(r)+.1);n((0,ex.ed)({zoomLevel:e})),n((0,ex.i)({enabled:!1})),null==i||i.track(Z.VV.DOC_ZOOMED,{direction:"in",level:e})},[n,i,r]),h=(0,v.useCallback)(()=>{let e=Math.max(a0.At,hs(r)-.1);n((0,ex.ed)({zoomLevel:e})),n((0,ex.i)({enabled:!1})),null==i||i.track(Z.VV.DOC_ZOOMED,{direction:"in",level:e})},[n,i,r]),g=(0,v.useCallback)(()=>{let e=a0.vN;n((0,ex.ed)({zoomLevel:e})),n((0,ex.i)({enabled:!1})),null==i||i.track(Z.VV.DOC_ZOOMED,{direction:"reset",level:e})},[n,i]),j=(0,eu.GV)(he.AO),f=(0,sz.Lt)();return((0,v.useEffect)(()=>{if(e)return eY.WC.on("keydown","PRESENT_BLOCK",e=>{let i=e.target instanceof HTMLElement&&(0,ei.fg)(e.target);return!(j||!t||(0,sP.We)(t))&&!i&&((0,rf.Ay)("=")(e)?(c(),e.preventDefault(),!0):(0,rf.Ay)("-")(e)?(h(),e.preventDefault(),!0):(0,rf.Ay)("0")(e)?(g(),e.preventDefault(),!0):!!(0,rf.Ay)("9")(e)&&(d(),e.preventDefault(),!0))})},[j,e,t,c,h,g,d]),e)?(0,s.jsxs)(e7.e,{spacing:"0",size:"sm",variant:"ghost",isAttached:!0,borderWidth:"1px",borderRadius:"full",children:[(0,s.jsx)(J.Tz,{closeOnMouseDown:!1,closeOnClick:!1,shortcut:"-",label:p.Ru._({id:"FjkaiT"}),children:(0,s.jsx)(H.K,{"aria-label":p.Ru._({id:"FjkaiT"}),fontWeight:"normal",onClick:h,icon:(0,s.jsx)(x.g,{icon:u.EZy})})}),(0,s.jsxs)(sy.W,{closeOnSelect:!0,children:[(0,s.jsx)(J.Tz,{label:p.Ru._({id:"VZ3UQG"}),children:(0,s.jsx)(sw.I,{minW:20,as:a.$,variant:"ghost",fontWeight:"400",size:"sm",rightIcon:(0,s.jsx)(x.g,{icon:u.Jt$}),children:f?(0,s.jsx)(m.x6,{id:"R9Khdg"}):hi(r)})}),(0,s.jsxs)(sC.c,{maxW:"220px",children:[(0,s.jsx)(sk.i,{value:f?"auto":r.toString(),type:"radio",children:(0,s.jsx)(sE.k,{value:"auto",onClick:d,children:(0,s.jsxs)(e8.z,{children:[(0,s.jsxs)(l.E,{children:[(0,s.jsx)(m.x6,{id:"R9Khdg"})," ",(0,s.jsx)(l.E,{as:"span",color:"gray.500",children:(0,s.jsx)(m.x6,{id:"P9Cyl9"})})]}),(0,s.jsx)(tT.h,{}),(0,s.jsx)(l.E,{as:"span",opacity:"0.6",children:"9"})]})})}),(0,s.jsx)(sS.N,{}),(0,s.jsx)(sk.i,{value:f?"auto":r.toString(),type:"radio",children:ht.map(e=>(0,s.jsx)(sE.k,{value:(e/100).toString(),onClick:()=>{o(e)},children:(0,s.jsxs)(e8.z,{children:[(0,s.jsx)(l.E,{children:hi(e)}),(0,s.jsx)(tT.h,{}),e===a0.vN&&(0,s.jsx)(l.E,{as:"span",opacity:"0.6",children:"0"})]})},e))})]})]}),(0,s.jsx)(J.Tz,{closeOnMouseDown:!1,closeOnClick:!1,shortcut:"+",label:p.Ru._({id:"AWOSPo"}),children:(0,s.jsx)(H.K,{fontWeight:"normal","aria-label":p.Ru._({id:"AWOSPo"}),onClick:c,icon:(0,s.jsx)(x.g,{icon:u.QLR})})})]}):null},hs=e=>Math.round(10*e)/10,hr=(0,v.memo)(function(e){let{editor:t,scrollingParentSelector:n,toggleCommentsPanel:o,isCommentsPanelOpen:l,isSitePagesPanelOpen:a,toggleSitePagesPanel:d,isPagesPanelOpen:c,togglePagesPanel:u,editorWrapperEl:x,docEditorType:h,isDark:m}=e,[p]=(0,uB.U)(["(max-width: 840px)","(min-width: 841px)"]),g=(0,R.u)("editDocAI"),j=(0,eQ.h5)({base:!0,lg:!1}),f=(0,eu.GV)(ex.wC),b=(0,eu.GV)(eO.Jo),y=(0,eu.GV)(tr.Gd),{isGammaAdminUser:w}=(0,et.ur)(),C=(0,et.Iy)("comment",b),k=(0,iW.Gx)(),E=(0,iW.zm)(),{enabled:S}=(0,uU.k)(t),[I,A]=(0,v.useState)(void 0),O=(0,ta.dv)(y),D="SLIDE_VIEW"!==f,P="SLIDE_VIEW"===f,z=(0,eu.GV)(ex.nD),M=h===t2.i.COLLABORATIVE,N=(0,eu.GV)(ex.VJ),F=(0,eu.GV)((0,e1.DP)("left")),L=(0,eu.GV)((0,e1.DP)("right")),V=(0,R.u)("aiChat"),W=(0,eu.GV)(eO.nU),G=(0,R.u)("multipageEditor"),B=(0,et.Iy)("edit",W),{enterSlideView:U,exitSlideView:H,setExitedFullscreenByClick:K,isFullscreen:q,enterFullscreen:Y,exitFullscreen:$}=dj({editorWrapperEl:x,scrollingParentSelector:n,forceToolbarShownBecauseOnboarding:I});window.exportToPptx=async e=>{if(!t)return;let{exportToPptx:n}=await Promise.all([i.e(9685),i.e(6070),i.e(9935)]).then(i.bind(i,86897));return n(t,e)},(0,v.useEffect)(()=>T.R.on("isInOnboardingChecklist",e=>{A(e)}),[]);let X=(0,v.useRef)(null),Q=(0,v.useCallback)(()=>{var e;if(!X.current)return!1;let t=P&&(null==(e=X.current)?void 0:e.contains(document.activeElement));return!!(X.current.querySelector("[data-active]")||X.current.querySelector('[aria-expanded="true"]')||F||L||t)},[X,F,L,P]),Z=eG(e=>Q()||e.clientY<100,!N,5e3);(0,uV.j)({ref:X,handler:()=>{setTimeout(()=>{var e;P&&(null==(e=X.current)?void 0:e.contains(document.activeElement))&&document.activeElement instanceof HTMLElement&&document.activeElement.blur()},10)}});let ee=!N||N&&(Q()||Z)||I,ei=!(0,_.Xb)(),en=!1===g&&!p&&j&&M&&z&&V;return(0,s.jsx)(J.L8,{isDark:m,children:(0,s.jsxs)(r.s,{"data-editor-toolbar":!0,ref:X,bg:m?"elevation.3":"white",borderBottomWidth:"1px",borderBottomColor:m?"gray.700":"blackAlpha.100",zIndex:eX.$.toolbar,insetStart:0,insetEnd:0,py:1.5,alignItems:"center",p:2,pe:6,gap:2,transform:ee?void 0:"translateY(-100%)",pointerEvents:"none",sx:{"&:focus-within":{marginTop:0},"> *":{pointerEvents:"auto"},"> #toolbar-spacer":{pointerEvents:"none"}},transitionProperty:"transform",transitionDuration:"normal",transitionTimingFunction:"ease-in-out","data-print-hidden":!0,children:[(0,s.jsx)(xA,{}),(0,s.jsx)(e8.z,{flex:1,children:G&&W?(0,s.jsx)(xI,{file:W,canEditFile:B,currentDocTitle:null==b?void 0:b.title,currentPageId:null==b?void 0:b.id,togglePagesPanel:u,isPagesPanelOpen:c}):y?(0,s.jsx)(xX,{doc:b,pagesPanelEnabled:k,isPagesPanelOpen:a,togglePagesPanel:d}):(0,s.jsx)(uY.$x,{doc:b})}),(0,s.jsxs)(e8.z,{children:[!p&&(0,s.jsx)(u0,{}),!p&&!D&&(0,s.jsx)(hn,{}),!p&&!D&&(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(xZ,{spotlightingByBlock:S})}),!p&&M&&z&&E&&(0,s.jsx)(x9,{}),(M||w)&&(0,s.jsx)(xY,{doc:b,file:W,showButton:!p}),ei&&!O&&(0,s.jsx)(xF,{doc:b,isCollaborativeEditor:M,editorWrapperEl:x,scrollingParentSelector:n,enterSlideView:U,exitSlideView:H,setExitedFullscreenByClick:K,isFullscreen:q,enterFullscreen:Y,exitFullscreen:$,shouldHide:p,docEditorType:h}),ei&&O&&k&&(0,s.jsx)(xU,{doc:b}),M&&C&&(0,s.jsx)(xe,{doc:b,mode:f,isCommentsPanelOpen:l,toggleCommentsPanel:o}),g&&(z||w)?(0,s.jsx)(xy,{editor:t}):en?(0,s.jsx)(xt,{}):null,!p&&M&&!O&&(0,s.jsx)(uq,{doc:b,file:W}),!p&&(M||w)&&(0,s.jsx)(xR,{file:W,doc:b,toggleCommentsPanel:o,editorWrapperEl:x,scrollingParentSelector:n}),(0,s.jsx)(r.s,{children:(0,s.jsx)(iY.X,{showRing:!0})})]})]})})}),ho={src:"/_next/static/media/CustomCursorPointer.288ac219.svg"},hl=e=>!!(e.target&&e.target instanceof HTMLElement&&"IFRAME"===e.target.tagName),ha=(e,t)=>{var i;let n=Math.max((null==(i=t.posAtCoords(e))?void 0:i.inside)||-1);if(-1!=n)try{return t.state.doc.resolve(n)}catch(e){return}},hd=e=>"card"===e.type.name?!!(0,da.Wq)(e.attrs.id):!!((0,as.nf)(e)||["button","buttonGroup","tableOfContents","toggleSummary","docMention","cardMention"].includes(e.type.name)),hc=e=>!!(e.dataset.contentReference||e.dataset.zoomClickCapture),hu=(e,t)=>{if(!(null==t?void 0:t.nodeAfter))return!1;let i=t.nodeAfter;if("paragraph"===i.type.name)return!!(e.classList.contains("link")||e.closest(".link"));if(!(hd(i)||(0,tp.eL)(t,e=>hd(e))))return!1;if((0,uW.bi)(i.type)){let t=e.closest(".react-renderer");return!!t&&!!(hc(e)||(0,ei.xX)(e,t,hc))}return"gallery"!==i.type.name||!!e.closest(".gallery-content")},hx=(0,v.memo)(e=>{let{editor:t}=e,[i,n]=(0,v.useState)(!0),o=(0,v.useRef)({x:0,y:0}),l=(0,v.useRef)(null),a=(0,v.useRef)(null),c=(0,v.useRef)(null),u=(0,v.useRef)("none"),x=(0,eu.GV)(R.Gm),h=(0,eu.GV)(ex.uF),m=h[0],p=h[h.length-1],g=(0,eu.GV)(ex.$i),j=(0,v.useRef)("middle"),f=(0,eu.GV)(ex.eo),b=(0,eu.GV)(ex.G7),y=(0,eu.GV)(e=>{var t;return!!(null==(t=(0,ex.FI)(e))?void 0:t.pos)}),w=!1===b?Math.max(.75,f):1;j.current=g===m?"first":g===p?"last":"middle",(0,v.useEffect)(()=>{let e,i,s=e=>{l.current&&c.current&&(l.current.style.opacity=e?"1":"0",c.current.disabled=!e)},r=()=>{cancelAnimationFrame(e),e=requestAnimationFrame(()=>{if(!l.current||!a.current)return;let e=o.current.x-30*w/2,t=o.current.y-30*w/2;l.current.style.transform="translate(".concat(e,"px, ").concat(t,"px)"),"left"===u.current&&(l.current.style.transform+=" scaleX(-1)"),s("none"!==u.current)})},d=()=>{n(!0),clearTimeout(i),i=setTimeout(()=>{n(!1),r()},2e3)},x=e=>{d(),e&&(o.current={x:e.clientX,y:e.clientY});let i=o.current.x,n=o.current.y,s=null==e?void 0:e.target;if(!t||!l.current||!c.current||!s)return;if(e&&hl(e)){u.current="none",r();return}let a=i/window.innerWidth*100;if(a>20&&a<80||n<=51||!s.closest(".ProseMirror")||y||hu(s,ha({left:i,top:n},t.view))){u.current="none",r();return}u.current=a<=20?"left":"right",r()},h=()=>{u.current="none",r()},m=e=>{hl(e)&&(u.current="none",r())},p=e=>{if(d(),!t||e.button>1||(0,uG.Qj)(t.view))return;let i=(0,eu.KA)().getState(),n=!!(0,ex.YL)(i),s=(0,ex.nD)(i);n||s||["left","right"].includes(u.current)&&(e.preventDefault(),e.stopPropagation(),t.commands.spotlightNextCard("left"===u.current))};return x(),document.body.addEventListener("mousemove",x),document.body.addEventListener("mouseleave",h),document.body.addEventListener("mouseup",p),document.body.addEventListener("mouseover",m),()=>{document.body.removeEventListener("mousemove",x),document.body.removeEventListener("mouseleave",h),document.body.removeEventListener("mouseup",p),document.body.removeEventListener("mouseover",m),clearTimeout(i)}},[t,w,g,y]);let C="".concat(30*w,"px"),k="".concat(30*w,"px");return(0,s.jsxs)(N.Z,{children:[(0,s.jsx)("style",{ref:c,children:"html * { cursor: none!important}"}),(0,s.jsx)(hh,{position:"left",enabled:x}),(0,s.jsx)(hh,{position:"right",enabled:x}),(0,s.jsx)(r.s,{ref:l,position:"absolute",top:"0",left:"0",alignItems:"center",justifyContent:"center",className:"gamma-custom-cursor",width:C,height:k,pointerEvents:"none",willChange:"transform",verticalAlign:"middle",zIndex:"tooltip",filter:"drop-shadow(3px 1px 2px rgb(0 0 0 / 0.1))",outline:x?"2px solid pink":void 0,children:(0,s.jsx)(d.a,{ref:a,position:"absolute",width:C,height:k,sx:{"::before":{content:'""',opacity:+!!i,transition:"opacity 0.2s",display:"block",backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundImage:"url(".concat(ho.src,")"),width:"100%",height:"100%"}}})})]})}),hh=e=>{let{position:t,enabled:i}=e;return i?(0,s.jsx)(d.a,{position:"absolute",top:"0",bottom:"0",left:"left"===t?"calc(".concat(20,"% - 1px)"):void 0,right:"right"===t?"calc(".concat(20,"% - 1px)"):void 0,width:"2px",height:"100%",zIndex:"tooltip",pointerEvents:"none",borderLeft:"2px dashed red"}):null};var hm=i(32412);let hp=e=>{let t=(0,eu.GV)(ex.Er),i=(0,eu.GV)(ex.ys),{handlePresentNavigationEvent:n}=(0,hm.e)(tJ.Y2.PRESENTER_VIEW_POPUP);(0,v.useEffect)(()=>{if(!t)return;let s=t=>{let{payload:s}=t;if(e)try{let{payload:e}=JSON.parse(s),{action:t,eventKey:r,method:o,toSessionId:l,fromUserId:a}=e;if(l!==(null==i?void 0:i.sessionId)||a!==(null==i?void 0:i.id))return;switch(t){case"goToCard":{let{cardId:i}=e;if(!i)break;n({eventType:t,eventKey:r,method:o,payload:{cardId:i}});break}case"toggleSpotlight":case"arrowRight":case"arrowLeft":case"arrowDown":case"arrowUp":case"restart":case"toggleExpanded":case"cancelCurrentAction":n({eventType:t,eventKey:r,method:o});break;default:console.warn("[usePresenterViewMessages] Unknown message type",e)}}catch(e){console.error("[usePresenterViewMessages] Error parsing message",e)}};return t.on("stateless",s),()=>{t.off("stateless",s)}},[e,null==i?void 0:i.sessionId,null==i?void 0:i.id,n,t])},hg=e=>{let{editor:t,enabled:i}=e,n=(0,eu.jL)(),s=(0,v.useRef)(null),[r,o]=(0,v.useState)(!1),[l,a]=(0,v.useState)([0,0]),[d,c]=(0,v.useState)("bottom"),u=(0,eu.GV)(ex.YL),x=(0,v.useCallback)(()=>{o(!1)},[]),h=(0,v.useCallback)(()=>{a([0,0]),c("bottom")},[]),m=(0,v.useCallback)(e=>{o(!0),a(e)},[]),p=(0,v.useCallback)(e=>{var t;e.preventDefault(),m([e.clientX,e.clientY]);let i=null==(t=s.current)?void 0:t.offsetHeight;if(null==i)return;let n=window.innerHeight<e.clientY+i,r=e.clientY<i;n&&!r?c("top"):n&&r?c("center"):c("bottom")},[s,m]);(0,v.useEffect)(()=>{u||o(!1)},[u]),(0,v.useEffect)(()=>{if(t&&i)return rn.LF.on(rn.DN.OPEN_PRESENT_MODE_CONTEXT_MENU,e=>{let{e:t,pos:i,cardId:s}=e;p(t),n((0,ex.dd)({pos:i,cardId:s}))})},[t,i,p,n]);let g=(0,v.useMemo)(()=>{var e;let t=l[1],i=null==(e=s.current)?void 0:e.offsetHeight,n=i?window.innerHeight-(t+i+8):void 0,r="center"===d&&n?"translateY(".concat(n,"px)"):"top"===d?"translateY(-100%)":void 0;return{left:l[0],top:l[1],transform:r,transformOrigin:"top"}},[d,l]);return{menuRef:s,isPresentModeMenuOpen:r,onPresentModeMenuClose:x,handleContextMenu:p,menuRootStyles:g,clearPositioning:h}};var hj=i(41876),hf=i(40697),hb=i(4837);let hv=e=>{let{children:t,icon:i,onClick:n,shouldHide:r=!1,...o}=e;return r?null:(0,s.jsx)(ah.D,{icon:i,onClick:n,...o,children:t})},hy=(0,v.forwardRef)((e,t)=>{let{editor:i,isOpen:n,onClose:r,readOnly:o,clearPositioning:l,rootStyles:a}=e,[d,c]=(0,v.useState)(null),h=(0,hf.SV)(t,c),{pos:p,cardId:g}=(0,eu.GV)(ex.P$),{enabled:j}=(0,ar.kY)(i),{editCardInPresentMode:f}=(0,hb.V)({editor:i}),b=(0,ee.rd)(),y=(0,v.useCallback)(()=>{j?null==i||i.commands.turnOffSpotlight():p?null==i||i.commands.spotlightNodeAtPos(p):g&&(null==i||i.commands.spotlightNextBlock()),r()},[j,p,g,r,null==i?void 0:i.commands]);return(0,v.useEffect)(()=>{var e;null==d||null==(e=d.parentElement)||e.addEventListener("contextmenu",e=>{e.preventDefault(),e.stopPropagation()})},[d]),(0,s.jsx)(N.Z,{children:(0,s.jsx)(J.L8,{isDark:b,children:(0,s.jsx)(sy.W,{isOpen:n,closeOnBlur:!1,isLazy:!0,children:(0,s.jsxs)(sC.c,{onContextMenu:e=>{e.preventDefault(),e.stopPropagation()},zIndex:"popover",ref:h,rootProps:{style:a},w:"260px",overflowY:"auto",onTransitionEnd:()=>{n||l()},children:[(0,s.jsx)(hv,{"data-testid":"present-mode-menu-item-edit",command:(0,J.lp)("E"),shouldHide:o,icon:(0,s.jsx)(x.g,{fixedWidth:!0,icon:u.zLW}),onClick:f,children:(0,s.jsx)(m.x6,{id:"IkOuqb"})}),(0,s.jsx)(hv,{"data-testid":"present-mode-menu-item-spotlight",command:(0,J.lp)("S"),icon:(0,s.jsx)(x.g,{fixedWidth:!0,icon:u.lnn}),onClick:y,children:j?(0,s.jsx)(m.x6,{id:"CzYGrQ"}):p?(0,s.jsx)(m.x6,{id:"LoLA00"}):g?(0,s.jsx)(m.x6,{id:"X1FNEK"}):null})]})})})})});hy.displayName="PresentModeContextMenuComponent";let hw=(0,v.memo)(hy);var hC=i(84718),hk=i(26604),hE=i.n(hk),hS=i(1252),hI=i(33750),hT=i.n(hI);let hA={easeOutLinear:dM.GA,easeOutSine:dM.ED,easeOutCubic:dM.p_,easeOutCirc:dM.cY,easeOutQuad:dM.WD,easeOutQuart:dM.Mj,easeOutExpo:dM.lu,bezierCustom1:hE()(.13,.97,.035,.73),bezierCustom2:hE()(.105,1.15,.15,.355)},hR={UP:"up",DOWN:"down"},hO=e=>e?new Date-new Date(e):1/0,h_=(e,t)=>{let i=(0,v.useMemo)(()=>new hS.Lethargy(6,120,.3,150),[]),{easing:n="easeOutCubic",touchpadFactor:s=1.5,triggerThreshold:r=1200}=t||{},o=(0,Q.O2)("editor"),l=(0,eu.GV)(ex.$i),a=(0,v.useRef)(null),d=(0,v.useRef)(null),c=(0,v.useRef)(null),u=(0,v.useRef)(!1),x=(0,v.useRef)(null),h=(0,v.useRef)(null),[m,p]=(0,v.useState)(!1),[g,j]=(0,v.useState)(!1),f=(0,v.useRef)({counterTarget:0,counterCurrent:0,direction:hR.DOWN}),b=(0,v.useCallback)(()=>{var e;if(!a.current)return;let{counterTarget:t}=f.current,i=t/r*100,n=(null!=i?i:0)*2.64,s="".concat(n," ").concat(264-n),o=null==(e=a.current.querySelector(".chakra-progress"))?void 0:e.lastElementChild,l=a.current.querySelector(".chakra-progress__indicator");l&&l.setAttribute("stroke-dasharray",s),o&&(o.innerHTML="".concat(i.toFixed(0),"%"))},[r]),y=(0,v.useCallback)(()=>{let e=c.current,t=d.current;if(!t||!e)return;let i=e.querySelector(".chakra-progress__indicator"),s=t.querySelector(".chakra-progress__indicator");if(!i||!s)return;let o=f.current.counterCurrent/r,l=(550>hO(h.current)?1:null!=o?o:0)*264,a="".concat(l," ").concat(264-l),u=Math.max(56-56*hA[n](Math.min(o,1)),0);e.style.transform="translateY(".concat(u,"px)"),t.style.transform="translateY(-".concat(u,"px)"),s.setAttribute("stroke-dasharray",a),i.setAttribute("stroke-dasharray",a)},[n,r]),w=(0,v.useCallback)(()=>{let e;if(u.current)return;let t=i=>{let n=e?i-e:0;if(e=i,.1>Math.abs(f.current.counterTarget-f.current.counterCurrent)){f.current.counterCurrent=f.current.counterTarget,y(),u.current=!1;return}f.current.counterCurrent=(0,dM.Cc)(f.current.counterCurrent,f.current.counterTarget,hT()(60/(n?1e3/n:60)*.3,.3,1)),y(),requestAnimationFrame(t)};requestAnimationFrame(t)},[y]),C=(0,v.useCallback)(()=>{f.current.counterTarget=0,p(!1),j(!1),b(),w()},[w,b]);return(0,v.useEffect)(()=>{let t,n;if(!l||!e)return C();let a=document.querySelector((0,a0.OB)(l));if(!a)return C();let u=t=>{if(t.target.closest("[data-comments-wrapper]"))return;let l=i.check(t);if(null===c.current||null===d.current)return;let a=hO(x.current);if(a<500||a<1e3&&!1===l)return;let u=hO(h.current);if(u<500||u<1e3&&!1===l)return;let m=0===Math.abs(t.deltaY)?f.current.direction:t.deltaY>0?hR.DOWN:hR.UP;if(!("down"===m?o.isAtBottom():o.isAtTop()))return;clearTimeout(n);let g=t.wheelDeltaY?t.wheelDeltaY===-3*t.deltaY:0===t.deltaMode,v=Math.abs(void 0!==t.deltaY?t.deltaY:40)*(g?s:1);if(m!==f.current.direction){f.current.direction=m,C();return}j(m===hR.DOWN),p(m===hR.UP),f.current.counterTarget+=v,f.current.direction=m,f.current.counterTarget/r>=1?(e.commands.spotlightNextCard(m===hR.UP,m===hR.UP?"bottom":"top"),h.current=+new Date,setTimeout(()=>{C(),b()},250),setTimeout(()=>{h.current=null},1e3)):n=setTimeout(C,500),w(),b()},m=()=>{x.current=+new Date,clearTimeout(t),C(),t=setTimeout(()=>{x.current=null},1e3)};return a.addEventListener("scroll",m),a.addEventListener("wheel",u,{passive:!0}),b(),()=>{a.removeEventListener("scroll",m),a.removeEventListener("wheel",u)}},[e,i,w,n,s,r,o,b,y,C,l]),{debugRef:a,nextCardRef:c,prevCardRef:d,showNextCard:g,showPrevCard:m}},hD=e=>{let{editor:t}=e,i=(0,R.u)("debugLogging"),[n,r]=(0,v.useState)("easeOutExpo"),[o,l]=(0,v.useState)(1.5),[a,d]=(0,v.useState)(1200),{debugRef:c,nextCardRef:u,prevCardRef:x,showNextCard:h,showPrevCard:m}=h_(t,{easing:n,touchpadFactor:o,triggerThreshold:a}),{prevCard:p,nextCard:g}=(0,eu.GV)(e=>{let t=(0,ex.$i)(e)||"",i=(0,ex.Ev)(e),n=Object.keys((i.parents[t]||[]).reduce((e,t)=>e[t],i.tree)),s=null,r=null;return n.forEach((e,o)=>{if(e!==t)return;let l=i.parents[t];0===o?l.length&&(s={cardId:l[l.length-1],isSibling:!1}):s={cardId:n[o-1],isSibling:!0},o===n.length-1?l.length&&(r={cardId:l[l.length-1],isSibling:!1}):r={cardId:n[o+1],isSibling:!0}}),{prevCard:s,nextCard:r}},tz()),j=null==g?void 0:g.cardId,f=null==p?void 0:p.cardId,b=(0,v.useMemo)(()=>{let e=null,i=null;return t&&t.state.doc.descendants(t=>!(0,tf.jg)(t)||(t.attrs.id===f?e=t:t.attrs.id===j&&(i=t),!!(!e&&f)||!!(!i&&j))),{prev:e,next:i}},[t,j,f]);return(0,s.jsxs)(s.Fragment,{children:[i&&(0,s.jsx)(hP,{ref:c,setEasing:r,setTouchpadFactor:l,setTriggerThreshold:d}),(0,s.jsx)(hz,{ref:x,direction:"up",node:b.prev,enabled:m,offset:16}),(0,s.jsx)(hz,{ref:u,direction:"down",node:b.next,enabled:h,offset:24})]})},hP=v.forwardRef((e,t)=>{let{setEasing:i,setTouchpadFactor:n,setTriggerThreshold:o}=e;return(0,s.jsxs)(r.s,{position:"absolute",alignItems:"center",bg:"gray.50",left:2,bottom:16,zIndex:"overlay",borderRadius:"md",border:"solid 2px var(--chakra-colors-trueblue-300)",p:1,children:[(0,s.jsxs)(sy.W,{closeOnSelect:!1,children:[(0,s.jsx)(sw.I,{as:a.$,colorScheme:"trueblue",children:"Options"}),(0,s.jsxs)(sC.c,{minWidth:"240px",children:[(0,s.jsx)(J.Tz,{label:"How much total scrolling work do we need to do to trigger next/prev card?",placement:"right",children:(0,s.jsxs)(l.E,{color:"gray",fontSize:"sm",fontWeight:"600",ml:2,pb:2,children:["Scroll Threshold"," ",(0,s.jsxs)("i",{children:["(default=",1200,")"]})]})}),(0,s.jsxs)(hC.Q7,{defaultValue:1200,min:100,max:1e4,precision:0,step:100,onChange:(e,t)=>o(t),children:[(0,s.jsx)(hC.OO,{}),(0,s.jsxs)(hC.lw,{children:[(0,s.jsx)(hC.Q0,{}),(0,s.jsx)(hC.Sh,{})]})]}),(0,s.jsx)(sS.N,{}),(0,s.jsx)(J.Tz,{label:"How much extra weight do we give to touchpad scroll events?",placement:"right",children:(0,s.jsxs)(l.E,{color:"gray",fontSize:"sm",fontWeight:"600",ml:2,pb:2,children:["Touchpad Multiplier"," ",(0,s.jsxs)("i",{children:["(default=",1.5,")"]})]})}),(0,s.jsxs)(hC.Q7,{defaultValue:1.5,min:1,max:10,precision:1,step:.1,onChange:(e,t)=>n(t),children:[(0,s.jsx)(hC.OO,{}),(0,s.jsxs)(hC.lw,{children:[(0,s.jsx)(hC.Q0,{}),(0,s.jsx)(hC.Sh,{})]})]}),(0,s.jsx)(sS.N,{}),(0,s.jsxs)(sk.i,{defaultValue:"easeOutExpo",title:"Easing (of peek element)",type:"radio",onChange:e=>i(e),children:[(0,s.jsx)(sE.k,{value:"easeOutLinear",children:"easeOutLinear"}),(0,s.jsx)(sE.k,{value:"easeOutSine",children:"easeOutSine"}),(0,s.jsx)(sE.k,{value:"easeOutCubic",children:"easeOutCubic"}),(0,s.jsx)(sE.k,{value:"easeOutCirc",children:"easeOutCirc"}),(0,s.jsx)(sE.k,{value:"easeOutQuad",children:"easeOutQuad"}),(0,s.jsx)(sE.k,{value:"easeOutQuart",children:"easeOutQuart"}),(0,s.jsx)(sE.k,{value:"easeOutExpo",children:"easeOutExpo"}),(0,s.jsx)(sE.k,{value:"bezierCustom1",children:"bezierCustom1"}),(0,s.jsx)(sE.k,{value:"bezierCustom2",children:"bezierCustom2"})]})]})]}),(0,s.jsx)(r.s,{ref:t,direction:"column",alignItems:"center",width:"85px",ml:1,sx:{".chakra-progress__indicator":{transition:"none !important",opacity:1}},children:(0,s.jsx)(xn.P,{value:40,color:"trueblue.500",children:(0,s.jsx)(xs.n,{})})})]})});hP.displayName="PeekDebugger";let hz=v.forwardRef((e,t)=>{let{direction:i,enabled:n,node:o,offset:a}=e,[d,c]=(0,v.useState)(!1),[h,m]=(0,v.useState)(o);(0,v.useEffect)(()=>{c(!0);let e=setTimeout(()=>{c(!1),m(o)},550);return()=>{clearTimeout(e)}},[o]);let p=(0,v.useMemo)(()=>h?(0,sJ.getCardTitle)(h.toJSON()):"",[h]),g=!!h;return(0,s.jsx)(r.s,{ref:t,pointerEvents:"none",position:"absolute",justifyContent:"center",width:"100%",zIndex:"overlay",top:"up"===i?"".concat(a,"px"):"inherit",bottom:"down"===i?"".concat(a,"px"):"inherit",children:(0,s.jsxs)(r.s,{bg:"gray.50",borderRadius:"md",boxShadow:"md",h:"".concat(40,"px"),maxWidth:"450px",justifyContent:"center",opacity:+!!n,transition:"opacity ".concat(300,"ms ease-out"),textAlign:"center",alignItems:"center",direction:"row",px:2,sx:{".chakra-progress__indicator":{transition:"none !important",opacity:1}},children:[(0,s.jsx)(xn.P,{display:g?"block":"none",color:"trueblue.500",size:"20px",thickness:"16px",children:(0,s.jsx)(xs.n,{visibility:d?"visible":"hidden",children:(0,s.jsx)(x.g,{icon:u.QRE,fontSize:"14px",style:{color:"var(--chakra-colors-gray-50)",backgroundColor:"var(--chakra-colors-trueblue-500)",borderRadius:"10px"}})})}),g||"up"!==i?g||"down"!==i?null:(0,s.jsx)(x.g,{icon:u.uZL,size:"xs",color:"var(--chakra-colors-gray-600)"}):(0,s.jsx)(x.g,{icon:u.o9H,size:"xs",color:"var(--chakra-colors-gray-600)"}),(0,s.jsx)(r.s,{width:1}),(0,s.jsx)(l.E,{noOfLines:1,textOverflow:"ellipsis",overflowX:"hidden",fontSize:"md",color:g?"gray.700":"gray.600",px:2,children:g?p:"down"===i?"End of presentation":"Start of presentation"})]})})});hz.displayName="PeekCardTab";var hM=i(56760),hN=i(55670),hF=i(33201),hL=i(86034);let hV=()=>{let[e,t]=(0,v.useState)(["",[],{}]),i=(0,eu.CU)();return(0,v.useEffect)(()=>i.subscribe(()=>{let e=i.getState(),n=(0,ex.Ev)(e),s=(0,ex.$i)(e)||"",r=n.parents[s]||[],o={};Object.keys(n.tree).forEach(e=>{let t=[],i=e=>{Object.keys(e).forEach(n=>{t.push(n),i(e[n])})};i(n.tree[e]),o[e]=t}),t([s,r,o])}),[i]),e},hW=e=>{let{editor:t,isEditing:i}=e,[n,r,o]=hV(),l=(0,eu.GV)(dv.ow),a=Object.keys(o).filter(e=>{var t;return!(null==l||null==(t=l[e])?void 0:t.hidden)}),[c,u]=(0,v.useState)(null),[x,h]=(0,v.useState)(!1),m=(0,eu.GV)(ex.SJ),{content:p}=(0,hL.S)(t),g=(0,v.useRef)(null),j=eG(e=>window.innerHeight-e.clientY<50),f=(0,v.useRef)({}),{handlePresentNavigationEvent:b}=(0,hm.e)(),y=v.useMemo(()=>{let e=e=>{let{renderers:t}=e;return(0,s.jsx)(hB,{renderers:t,cardPreviewRefMap:f.current})};return e.displayName="PortalComponentWithRef",e},[]);return(0,v.useEffect)(()=>()=>{g.current&&clearTimeout(g.current)},[]),(0,s.jsxs)(e8.z,{position:"fixed",bottom:0,w:"100vw",zIndex:10,background:"blackAlpha.200",px:"6px",py:"2px",align:"end",spacing:"2px",opacity:+!!n,transitionProperty:"opacity, height",transitionDuration:"normal",h:j?"12px":"6px",children:[a.map((e,t)=>{let l=[...r,n][0],p=a.indexOf(l),v=o[l],y=0,w=100;return n&&v&&-1===a.indexOf(n)&&(y=(v.indexOf(n)+1)/v.length*100,w=1/v.length*100),(0,s.jsx)(hK,{cardId:e,state:t===p?"current":t<=p?"prev":"next",percent:y,unit:w,isMagnetized:j,isHovered:c===e,onHoverStart:()=>{u(e),g.current&&clearTimeout(g.current),g.current=setTimeout(()=>{h(!0)},200)},onHoverEnd:()=>{u(null),h(!1),g.current&&(clearTimeout(g.current),g.current=null)},onCardClick:()=>{e&&!i&&b({eventType:"goToCard",method:"buttonClick",payload:{cardId:e}})},children:(0,s.jsx)(d.a,{position:"absolute",transform:"translateY(calc(-100% - 6px))",w:"250px",h:"150px",bg:"white",borderRadius:"md",shadow:"lg",border:"1px solid",borderColor:"gray.200",pointerEvents:"none",overflow:"hidden",zIndex:11,display:c===e&&x?"block":"none",transitionProperty:"common",transitionDuration:"normal",transitionTimingFunction:"ease-in-out",children:(0,s.jsx)(hG,{cardId:e,cardPreviewRefMap:f.current,theme:m})},e)},e)}),(0,s.jsx)(sQ.s,{}),(0,s.jsx)(d.a,{w:"0",h:"0",position:"absolute",pointerEvents:"none",children:(0,s.jsx)(sX.S,{theme:m,content:p,isThumbnail:!0,portalComponent:y})})]})},hG=(0,v.memo)(e=>{let{cardId:t,cardPreviewRefMap:i,theme:n}=e,o=(0,hN.S)(n,!1);return(0,s.jsx)(r.s,{className:"progress-bar-card-preview",sx:sX.o,css:{"--editor-width":"".concat(250,"px"),"--editor-font-size":"calc(var(--editor-width) / ".concat(ix.s5,")"),"--thumbnail-min-height":"".concat(150,"px")},justifyContent:"center",overflow:"hidden",bg:"gray.50",w:"100%",h:"100%",userSelect:"none",children:(0,s.jsx)("div",{className:"ProseMirror",children:(0,s.jsx)(r.s,{className:"doc-content-wrapper",direction:"column",align:"center",sx:o,children:(0,s.jsx)("div",{style:{width:"100%"},ref:e=>{e&&(i[t]=e)}})})})})});hG.displayName="CardPreview";let hB=e=>{let{renderers:t,cardPreviewRefMap:i}=e;return(0,s.jsx)(s.Fragment,{children:Object.entries(t).map(e=>{let[t,n]=e,s=n.props.node;if("document"===s.type.name)return null;let r=(0,hF.jg)(s)?i[s.attrs.id]:null;return hM.createPortal(n.reactElement,r||n.element,t)})})},hU="var(--chakra-colors-deepocean-300)",hH="var(--chakra-colors-deepocean-100)",hK=e=>{let{children:t,cardId:i,state:n,percent:o,unit:l,isMagnetized:a,isHovered:d,onHoverStart:c,onHoverEnd:u,onCardClick:x}=e,h="linear-gradient(to right, ".concat(hU," 0% ").concat(o,"%, ").concat("var(--chakra-colors-deepocean-400)"," ").concat(o,"% ").concat(o+l,"%, ").concat(hH," ").concat(o+l,"% 100%)");return(0,s.jsx)(r.s,{flex:1,minW:0,borderRadius:"2px",h:a?"16px":"4px",transitionProperty:"all",transitionDuration:"normal",transitionTimingFunction:"ease-in-out",borderWidth:"1px",borderColor:d?"var(--chakra-colors-deepocean-400)":"transparent",onMouseEnter:e=>c(e.currentTarget),onMouseLeave:u,onClick:x,cursor:"pointer",bg:"current"===n?h:"prev"===n?hU:hH,justifyContent:"center",alignItems:"flex-start",children:t},i)},hJ=(0,rf.Ay)("Esc"),hq=e=>{let{editor:t,showNavigationControls:i}=e,[n,o]=(0,v.useState)(null),d=(0,y.d4)(ex.QF),c=(0,v.useRef)(d),u=(0,y.wA)(),x=(0,im.UT)("edit"),h=(0,eR.u)("presentModeCursor"),p=(0,hj.SQ)({enabled:!d,setActiveKey:o});hp(t);let{menuRef:g,isPresentModeMenuOpen:j,onPresentModeMenuClose:f,menuRootStyles:b,clearPositioning:w}=hg({editor:t,enabled:!0});return(0,v.useEffect)(()=>(u((0,ex._b)({isEditingInSlideView:!1})),()=>{u((0,ex._b)({isEditingInSlideView:!1}))}),[u]),c.current=d,(0,v.useEffect)(()=>eY.WC.on("keydown","SLIDE_VIEW",e=>!!(c.current&&hJ(e))&&(u((0,ex._b)({isEditingInSlideView:!1})),e.preventDefault(),!0)),[u]),(0,sz.FM)(),(0,uV.j)({ref:g,enabled:j,handler(e){e instanceof MouseEvent&&2!==e.button&&f()}}),(0,s.jsxs)(s.Fragment,{children:[t&&(0,s.jsx)(hw,{ref:g,editor:t,readOnly:!x,isOpen:j,onClose:f,clearPositioning:w,rootStyles:b}),(0,s.jsx)(hD,{editor:t}),(0,s.jsx)(hW,{editor:t,isEditing:d}),(0,s.jsx)(r.s,{position:"absolute",inset:0,width:"100%",height:"100%",pointerEvents:"none",justify:"flex-end",children:(0,s.jsxs)(r.s,{bg:"gray.50",position:"fixed",bottom:6,right:6,p:3,px:6,justify:"flex-end",align:"center",opacity:+!!d,pointerEvents:d?"auto":"none",transitionProperty:"opacity, transform",transitionDuration:"normal",transitionTimingFunction:"ease",transform:d?"translate(0,0)":"translate(0,100%)",borderRadius:"md",shadow:"md",zIndex:"overlay",children:[(0,s.jsx)(l.E,{size:"sm",marginEnd:3,children:(0,s.jsx)(m.x6,{id:"DjD/sG"})}),(0,s.jsx)(a.$,{size:"sm",variant:"solid",onClick:()=>u((0,ex._b)({isEditingInSlideView:!1})),children:(0,s.jsx)(m.x6,{id:"DPfwMq"})})]})}),h&&!d&&(0,s.jsx)(hx,{editor:t}),i&&(0,s.jsx)(hj.Lh,{activeKey:n,spotlightingByBlock:p})]})};var hY=i(65016),h$=i(39072),hX=i(94920);let hQ=eX.$.filmstrip,hZ=eX.$.filmstrip-1,h0={duration:.25,delay:.75},h1={duration:.25},h6="filmstrip-root",h2=".".concat(h6),h5="filmstrip-scroller",h4=".".concat(h5);var h3=i(41270),h8=i(23751);let h7=e=>{let{content:t,selection:i}=(0,hL.S)(e),n=!!(null==t?void 0:t.content),s=(0,v.useMemo)(()=>{var e;if(!n)return[];let i=t.content,s=(null==i?void 0:i[0].content)||[],r=null==(e=t.content)?void 0:e[0].attrs;return s.map(e=>{var t;return r&&(null==(t=e.attrs)?void 0:t.id)?{cardId:e.attrs.id,isDragging:!1,displayBehavior:"normal"}:null}).filter(e=>null!==e)},[t,n]),r=(0,eu.GV)(h8.j2,(e,t)=>tz()(e,t)).map(e=>s.find(t=>t.cardId===e.cardId)?{...e}:null).filter(e=>null!==e),o=(0,eu.GV)(h8.u9);return{isDragging:o,cards:o?r:s,editorContent:t,selection:i,isLoaded:n}};var h9=i(22115),me=i(81946),mt=i(60122),mi=i(32380),mn=i(34034),ms=i(65280),mr=i(69460),mo=i(69872),ml=i(43182),ma=i(17226),md=i(60277);let mc=(e,t)=>{let i=mt.Mj.getState(e.state).undoManager,n=i.undoStack[i.undoStack.length-1];n&&n.meta.set("filmstripState",t)},mu=e=>{let t=(0,eu.GV)(il.Mj),i=(0,eu.GV)(il.Nx),n=(0,eu.jL)(),r=(0,eu.CU)(),o=(0,iI.d)(),a=(0,ms.T)(),d=(0,v.useCallback)(i=>{if(!e)return;let n=(0,tf.V4)(e,t);if(!n.length)return;let r=sH.FK.from(n);if(!(0,ma.E)(r,e,i))return void o({title:i?(0,s.jsx)(m.x6,{id:"33a+2Q"}):(0,s.jsx)(m.x6,{id:"FntfNT"}),status:"error",duration:3e3,position:"top"});o({title:i?(0,s.jsx)(m.x6,{id:"VG4BD6",values:{0:n.length,1:n.length}}):(0,s.jsx)(m.x6,{id:"GtH+14",values:{0:n.length,1:n.length}}),status:"success",duration:3e3,position:"top"})},[e,t,o]),c=(0,v.useCallback)(()=>{d(!1)},[d]),u=(0,v.useCallback)(()=>{if(!e)return;let i=(0,tf.V4)(e,t);i.length&&a(i)},[e,a,t]),x=(0,v.useCallback)(function(){let i=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!e)return;let s=(0,il.zT)((0,eu.KA)().getState());n((0,il.Cj)()),e.commands.deleteCardsById(t,i),mc(e,s)},[n,e,t]),h=(0,v.useCallback)(()=>{if(!e||0===t.length)return;let i="";if(1===t.length){let n=(0,tf.W0)(e,t[0]);n&&(i=(0,mn.getCardTitle)(n.node.toJSON())||"")}x();let n=i?'"'.concat(i,'"'):p.Ru._({id:"FyJPFh"}),r=o({title:(0,s.jsxs)(e8.z,{children:[(0,s.jsx)(l.E,{noOfLines:1,children:(0,s.jsx)(m.x6,{id:"OJTPnC",values:{displayTitle:n,0:t.length,1:t.length}})}),(0,s.jsx)(i7.N,{textDecoration:"underline",onClick:()=>{(0,mi.tN)(e.state),o.close(r)},children:(0,s.jsx)(m.x6,{id:"9uI/rE"})})]}),status:"info",duration:3e3,position:"top"})},[x,e,t,o]),g=(0,v.useCallback)(()=>{0!==t.length&&(d(!0),x(!0))},[x,d,t]),j=(0,v.useCallback)(()=>{if(!e||0===t.length)return;let r=(0,tf.V4)(e,t);if(r.length){let t=(0,tf.W0)(e,i),l=t?t.pos+t.node.nodeSize:e.state.doc.content.size-1,a=r.map(e=>(0,to.RE)(r5()(e.toJSON()))).map(e=>(0,ml.iM)(e)),d=(0,il.zT)((0,eu.KA)().getState());e.chain().insertContentAt(l,a,{updateSelection:!1}).command(e=>{let{tr:t}=e,i=(0,r4.s)(t.doc.resolve(l));return i&&(t=t.setSelection(i)),t.setMeta(md._,!0),t.setMeta(mr.G,!0),!0}).scrollIntoView().run(),mc(e,d),n((0,il.B6)({beforeCardId:null==t?void 0:t.node.attrs.id,cardCount:a.length})),o({title:(0,s.jsx)(m.x6,{id:"ClnFsQ",values:{0:r.length,1:r.length}}),status:"success",duration:3e3,position:"top"})}},[n,e,i,o,t]);return{handleAddCard:(0,v.useCallback)(t=>{if(!e)return;let i=(0,il.Nx)((0,eu.KA)().getState());i||(i=(0,il.gM)((0,eu.KA)().getState()));let s=(0,tf.W0)(e,i);if(!s)return;let{pos:r}=s,o=e.view.state.doc.nodeAt(r);if(!o)return void console.error("[Filmstrip] Cannot append card. Node unknown");let l=r+o.nodeSize,{cardToAdd:a,command:d}=(0,mo.j)(t);(0,rz.Jb)(d,tJ.oU.FILMSTRIP_CARD_MENU);let c=(0,il.zT)((0,eu.KA)().getState());e.chain().insertContentAt(l,(0,ml.iM)(a),{updateSelection:!1}).command(e=>{let{tr:t}=e,i=(0,r4.s)(t.doc.resolve(l));return i&&(t=t.setSelection(i)),t.setMeta(md._,!0),t.setMeta(mr.G,!0),!0}).scrollIntoView().run(),e.commands.focus(),mc(e,c),n((0,il.B6)({beforeCardId:null==s?void 0:s.node.attrs.id,cardCount:1}))},[n,e]),handleCopy:c,handleCopyCardsToDeck:u,handleCut:g,handleDelete:h,handleDuplicate:j,handleExport:(0,v.useCallback)(()=>{if(!e||0===t.length)return;let i=(0,ex.uF)(r.getState()),n=t.map(e=>(i.indexOf(e)+1).toString());iq.R.emit("openSharePanel",{view:"export",options:{cardRangesInput:n.join(",")}})},[e,t,r])}},mx=e=>({backgroundColor:e?"gray.600":"gray.200",activeButtonColor:e?"gray.50":"trueblue.500",inactiveButtonColor:e?"gray.50":"gray.800",closeButtonColorScheme:e?"gray":"blackAlpha"}),mh=e=>{let{onClose:t,isDark:i,viewPreference:n,setViewPreference:o,editor:l,readOnly:c}=e,h="list"===n,{activeButtonColor:g,inactiveButtonColor:j,backgroundColor:f,closeButtonColorScheme:b}=mx(i),y=(0,Z.st)(),w=(0,v.useCallback)(e=>()=>{o(e),null==y||y.track(Z.VV.FILMSTRIP_TOGGLE_VIEW,{view:e})},[y,o]),{handleAddCard:C}=mu(l),{onContextMenu:k,menuProps:E}=(0,h9.EF)(),S=(0,v.useMemo)(()=>[{label:p.Ru._({id:"wTR0O5"}),icon:(0,s.jsx)(x.g,{icon:u.p7g}),key:"add-card-with-ai",onClick:()=>{E.onClose(),setTimeout(()=>{C("aiCardAfter")},100)}},{label:p.Ru._({id:"TL4TtA"}),icon:(0,s.jsx)(x.g,{icon:u.swh}),key:"add-card-from-template",items:[{key:"add-card-from-template-inner-menu",element:e=>(0,s.jsx)(d.a,{maxH:"50vh",overflowY:"scroll",w:"400px",p:0,borderRadius:"md","data-testid":"add-card-from-template-inner-menu",children:(0,s.jsx)(me.R,{editor:l,appendCard:t=>{null==e||e(),setTimeout(()=>{C(t)},100)}})})}]}],[C,E,l]),I=(0,v.useCallback)(e=>{e.stopPropagation(),e.preventDefault(),E.isOpen?E.onClose():(e.nativeEvent.stopImmediatePropagation(),k(e))},[E,k]);return(0,s.jsxs)(r.s,{flexDirection:"column",children:[(0,s.jsxs)(r.s,{p:"8px",pb:"2px",children:[(0,s.jsxs)(e8.z,{spacing:0,bg:f,p:.5,borderRadius:"3xl",children:[(0,s.jsx)(J.Tz,{label:(0,s.jsx)(m.x6,{id:"Rv+zkJ"}),children:(0,s.jsx)(a.$,{size:"xs",variant:h?"ghost":"plain",color:h?j:g,onClick:w("film"),"data-testid":"filmstrip-view-button",children:(0,s.jsx)(e8.z,{children:(0,s.jsx)(x.g,{icon:u.OxR})})})}),(0,s.jsx)(J.Tz,{label:(0,s.jsx)(m.x6,{id:"5NZpX8"}),children:(0,s.jsx)(a.$,{size:"xs",variant:h?"plain":"ghost",color:h?g:j,onClick:w("list"),"data-testid":"list-view-button",children:(0,s.jsx)(e8.z,{children:(0,s.jsx)(x.g,{icon:u.ITF})})})})]}),(0,s.jsx)(J.Tz,{label:(0,s.jsx)(m.x6,{id:"C8DFL7"}),shortcut:"Mod+\\",children:(0,s.jsx)(H.K,{variant:"ghost","aria-label":p.Ru._({id:"C8DFL7"}),"data-testid":"close-filmstrip-button",colorScheme:b,isRound:!0,size:"xs",icon:(0,s.jsx)(x.g,{icon:u.Jyw}),outlineOffset:"0px",marginInlineStart:"auto",onClick:e=>{e.stopPropagation(),t()},onMouseDown:uH.Fw})})]}),!c&&(0,s.jsxs)(r.s,{px:2,my:2,justify:"center",children:[(0,s.jsxs)(e7.e,{spacing:0,isAttached:!0,variant:"plain",size:"sm",flex:1,children:[(0,s.jsx)(J.Tz,{label:(0,s.jsx)(m.x6,{id:"bgN454"}),children:(0,s.jsx)(a.$,{fontSize:"xs",px:2,flex:1,leftIcon:(0,s.jsx)(x.g,{fixedWidth:!0,icon:u.QLR}),onClick:()=>C(),children:(0,s.jsx)(m.x6,{id:"isRobC"})})}),(0,s.jsx)(H.K,{"aria-label":p.Ru._({id:"xi7ic1"}),borderInlineStart:"none",onClick:I,width:"20px",icon:(0,s.jsx)(x.g,{fixedWidth:!0,icon:u.Jt$,size:"xs"})})]}),(0,s.jsx)(h9.tz,{menuItems:S,isOpen:E.isOpen,position:E.position,onClose:E.onClose,size:"small"})]})]})};var mm=i(48094),mp=i(11618),mg=i(95465);let mj=e=>{let{children:t,icon:i,onClick:n,shouldHide:r=!1,isDisabled:o=!1,...l}=e;return r?null:(0,s.jsx)(ah.D,{icon:i,onClick:n,isDisabled:o,...l,children:t})},mf=(0,v.memo)(e=>{let{isDark:t}=e;return(0,s.jsxs)(d.a,{as:"span",className:"fa-layers fa-fw",children:[(0,s.jsx)(x.g,{fixedWidth:!0,icon:u.vti}),(0,s.jsx)(x.g,{icon:tA.GEE,transform:"shrink-4 right-6 down-4",color:"var(--menu-bg, white)"}),(0,s.jsx)(x.g,{icon:tA.GEE,transform:"shrink-7 right-6 down-4"}),(0,s.jsx)(x.g,{icon:tA.QLR,color:t?"var(--chakra-colors-gray-700)":"var(--chakra-colors-gray-50)",transform:"shrink-10 right-6 down-4"})]})});mf.displayName="AddCardIcon";let mb=(e,t)=>{if(0===e.length||!t)return null;if(1===e.length){let i=(0,tf.W0)(t,e[0]);return i?(0,sJ.getCardTitle)(i.node.toJSON())||"Untitled card":null}return"Multiple cards selected"},mv=(0,v.forwardRef)((e,t)=>{let{editor:i,isOpen:n,onClose:r,readOnly:o,clearPositioning:a,rootStyles:d,isDark:c}=e,h=(0,eu.GV)(eO.Jo),g=(0,iI.d)(),j=(0,mm.rY)(i),f=(0,R.u)("copyCardsToDeck"),{handleCopy:b,handleDelete:y,handleCut:w,handleDuplicate:C,handleAddCard:k,handleExport:E,handleCopyCardsToDeck:S}=mu(i),I=(0,eu.GV)(il.Mj),T=(0,eu.GV)(il.R8),A=(0,eu.GV)(dv.NG),O=1===I.length,_=(0,v.useMemo)(()=>O?(0,D.Io)({cardId:I[0],docId:null==h?void 0:h.id,isPresentMode:!1}):"",[null==h?void 0:h.id,O,I]),{onCopy:P}=(0,l_.i)(_),z=(0,v.useCallback)(()=>{P(),g({title:(0,s.jsx)(m.x6,{id:"h5GS+N"}),status:"success",duration:3e3,position:"top"})},[P,g]),M=(0,mg.K)(),N=(0,v.useMemo)(()=>mb(I,i),[i,I]),F=(0,v.useMemo)(()=>c?{"--menu-bg":"var(--chakra-colors-gray-800)","&:focus":{"--menu-bg":"var(--chakra-colors-gray-700)"}}:{},[c]),L=(0,im.UT)("edit"),V=I.every(e=>null==A?void 0:A[e]),W=T.every(e=>null==A?void 0:A[e]),G=V&&W,B=(0,v.useCallback)(()=>{let e=!V;I.forEach(t=>{let n=(0,tf.W0)(i,t);n&&i.commands.updateAttributesAtPos(n.pos,{hidden:e})}),j()},[V,j,i,I]);return(0,s.jsx)(sy.W,{isOpen:n,onClose:r,children:(0,s.jsxs)(sC.c,{className:"filmstrip-card-menu",onContextMenu:e=>{e.preventDefault()},zIndex:"popover",ref:t,rootProps:{style:d},w:"260px",overflowY:"auto",onTransitionEnd:()=>{n||a()},children:[N&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(l.E,{ps:3,color:c?"gray.400":"gray.600",noOfLines:1,"data-testid":"filmstrip-card-menu-card-title",children:N}),(0,s.jsx)(sS.N,{})]}),(0,s.jsx)(mj,{"data-testid":"filmstrip-card-menu-item-cut",shouldHide:o,command:(0,J.lp)("Mod+X"),icon:(0,s.jsx)(x.g,{fixedWidth:!0,icon:u.XGd}),onClick:w,children:(0,s.jsx)(m.x6,{id:"cCd8Bs"})}),(0,s.jsx)(mj,{"data-testid":"filmstrip-card-menu-item-copy",shouldHide:o,command:(0,J.lp)("Mod+C"),icon:(0,s.jsx)(x.g,{fixedWidth:!0,icon:u.jPR}),onClick:b,children:(0,s.jsx)(m.x6,{id:"he3ygx"})}),(0,s.jsx)(mj,{"data-testid":"filmstrip-card-menu-item-duplicate",shouldHide:o,command:(0,J.lp)("Mod+D"),icon:(0,s.jsx)(x.g,{fixedWidth:!0,icon:u.$3n}),onClick:C,children:(0,s.jsx)(m.x6,{id:"euc6Ns"})}),f&&(0,s.jsx)(mj,{"data-testid":"filmstrip-card-menu-item-copy-to-deck",shouldHide:o,icon:(0,s.jsx)(x.g,{fixedWidth:!0,icon:u.Rvk,flip:"horizontal"}),onClick:S,children:(0,s.jsx)(m.x6,{id:"Ur0Ose",values:{0:I.length}})}),(0,s.jsx)(mj,{"data-testid":"filmstrip-card-menu-item-add-card",shouldHide:o,icon:(0,s.jsx)(mf,{isDark:c}),onClick:()=>{r(),setTimeout(()=>{k()},150)},sx:F,children:(0,s.jsx)(m.x6,{id:"90n2YU"})}),(0,s.jsx)(mj,{"data-testid":"filmstrip-card-menu-item-export-card",shouldHide:o,icon:(0,s.jsx)(x.g,{fixedWidth:!0,icon:u.mHA}),onClick:E,sx:F,children:1===I.length?p.Ru._({id:"xRJ+bN"}):p.Ru._({id:"eMDlJX",values:{0:I.length}})}),!o&&(0,s.jsx)(sS.N,{}),(0,s.jsx)(mj,{"data-testid":"filmstrip-card-menu-item-copy-link",shouldHide:!O,icon:(0,s.jsx)(mp.E,{isLocked:!M,isDark:c}),onClick:z,children:(0,s.jsx)(m.x6,{id:"F0YmUY"})}),(0,s.jsx)(mj,{"data-testid":"filmstrip-card-menu-item-hide-card",isDisabled:!(L&&(!W||G)),icon:(0,s.jsx)(x.g,{fixedWidth:!0,icon:V?u.pS3:u.k6j}),onClick:B,children:V?(0,s.jsx)(m.x6,{id:"lpNzZq",values:{0:I.length}}):(0,s.jsx)(m.x6,{id:"KflWc8",values:{0:I.length}})}),!o&&(0,s.jsx)(sS.N,{}),(0,s.jsx)(mj,{"data-testid":"filmstrip-card-menu-item-delete",color:"red.500",icon:(0,s.jsx)(x.g,{icon:u.yLS,fixedWidth:!0}),onClick:y,shouldHide:o,children:(0,s.jsx)(m.x6,{id:"cnGeoo"})})]})})});mv.displayName="FilmstripCardMenuComponent";let my=(0,v.memo)(mv);var mw=i(65950),mC=i(59824);let mk=(0,se.P)(d.a),mE=e=>{let{isEditorFocused:t,isFilmstripSelected:i,shouldHide:n,cardId:o,isDraggingCard:a,isDragInProgress:d,index:c,hidden:u}=e,x=(0,eu.GV)(ex.Uu),h=(0,mC.iI)(x.cardDimensions).aspectRatio;return(0,s.jsxs)(r.s,{boxShadow:i?"var(--fs-item-selected-box-shadow)":t?"var(--fs-item-focused-box-shadow)":"var(--fs-item-box-shadow)",transitionProperty:"common",transitionDuration:"normal",borderRadius:"sm",overflow:"hidden",display:n?"none":void 0,css:h?{aspectRatio:"".concat(h," / 1"),overflow:"hidden"}:void 0,children:[(0,s.jsx)(mw.N,{shouldFixHeight:!n&&d,cardId:o,hidden:u}),(0,s.jsx)(st.N,{children:!n&&!a&&(0,s.jsx)(mk,{position:"absolute",exit:{opacity:0},transition:{duration:.2},bottom:1,insetStart:1,px:1.5,borderRadius:"md",boxShadow:"base",borderWidth:"1px",borderColor:"var(--fs-item-card-number-border-color)",bg:"var(--fs-item-card-number-background-color)",color:"var(--fs-item-card-number-color)",fontWeight:600,fontSize:"xs",children:(0,s.jsx)(l.E,{children:c})},c)})]})},mS=e=>{let{cardId:t,index:i,isEditorFocused:n,isFilmstripSelected:o,editor:a,readOnly:c,hidden:h=!1}=e,{title:p}=(0,tM.d)({cardId:t,editor:a});return(0,s.jsxs)(r.s,{className:"filmstrip-nav-item-wrapper",w:"var(--editor-width)",justifyContent:"flex-start",fontSize:"xs",borderRadius:"sm",boxShadow:o?"var(--fs-text-item-selected-box-shadow)":n?"var(--fs-item-focused-box-shadow)":"var(--fs-item-box-shadow)",color:o?"trueblue.500":void 0,transitionProperty:"common",transitionDuration:"normal",_hover:{".filmstrip-text-item-number":{display:c?void 0:"none"},".filmstrip-text-drag-handle":{display:c?void 0:"block"}},children:[(0,s.jsxs)(r.s,{alignItems:"center",bg:o?"trueblue.100":"var(--fs-text-item-card-number-bg-color)",transitionProperty:"common",transitionDuration:"normal",children:[(0,s.jsx)(d.a,{className:"filmstrip-text-item-number",w:6,fontSize:i>=1e3?"0.6rem":void 0,textAlign:"center",overflow:"hidden",whiteSpace:"nowrap",children:i}),(0,s.jsx)(d.a,{className:"filmstrip-text-drag-handle",display:"none",textAlign:"center",w:6,fontSize:"md",_hover:{cursor:c?"default":"grab"},children:(0,s.jsx)(x.g,{icon:u.IMq})})]}),(0,s.jsx)(r.s,{"data-testid":"filmstrip-text-item-title",p:2,ps:"4px",flex:1,bg:o?"trueblue.50":"var(--fs-text-item-bg-color)",alignItems:"center",overflow:"hidden",transitionProperty:"common",transitionDuration:"normal",inert:"true",opacity:h?"0.4":"1.0",children:(0,s.jsx)(l.E,{noOfLines:1,children:p||(0,s.jsx)(m.x6,{id:"wja8aL"})})})]})},mI=e=>{let{filmstripItemRef:t,cardId:i,isFilmstripSelected:n,currentFocusedCard:s,isAnimating:r}=e,{editor:o}=(0,tE.m)(),l=(0,Q.O2)("filmstrip"),a=(0,eu.GV)(il.x7);(0,v.useEffect)(()=>{t.current&&i===s&&((null==o?void 0:o.isFocused)&&!r?l.scrollElementIntoView({element:t.current,offsetFromTop:120}):n&&i===a&&requestAnimationFrame(()=>{if(!t.current||!l.scroller)return;let e=l.scroller.getBoundingClientRect(),i=t.current.getBoundingClientRect(),n=i.top,s=i.bottom,r=i.height,o=0,a=t.current.closest(".reorder-item");if(a instanceof HTMLElement&&(o=a.offsetTop),s>=e.bottom){let e=l.scroller,t=Math.max(0,o+r-e.clientHeight+4);l.scrollTo({top:t})}else n<=e.top&&l.scrollTo({top:o})}))},[i,s,o,a,n,l,t,r])},mT=(0,se.P)(r.s),mA=e=>{let{card:t,index:i,isFirst:n,isEditorFocused:r,currentFocusedCard:o,isFilmstripSelected:a,readOnly:c,shouldHide:h,isDragInProgress:m,numberOfCardsDragging:p,onContextClick:g,editor:j,isAnimating:f,showTextOnly:b}=e,{cardId:y,isDragging:w}=t,C=(0,v.useRef)(null);mI({filmstripItemRef:C,cardId:y,isFilmstripSelected:a,currentFocusedCard:o,isAnimating:f});let k=(0,eu.jL)(),{previewWidth:E}=ih(),S=(0,X.fW)()?"50%":"-50%",I=(0,v.useCallback)(e=>{if(!y)return;let t=e.shiftKey,i=!t&&(e.metaKey||e.ctrlKey);if(t&&!c)k((0,il.cb)({id:y,currentFocusedCard:o}));else if(i&&!c)k((0,il.aw)({id:y}));else{if(m)return;k((0,il.o5)({id:y})),k((0,ex.mF)({attached:!1})),j&&(0,tV.OM)({cardId:y,editor:j})}},[y,c,k,o,m,j]),T=(0,eu.GV)(dv.NG),A=null==T?void 0:T[t.cardId];return(0,s.jsxs)(d.a,{className:"filmstrip-item","data-guider-highlight":"filmstrip-item",ref:C,pos:"relative",pt:b?void 0:1,mt:b?1.5:n?void 0:1,onClick:I,onContextMenu:g,cursor:"pointer",userSelect:"none",transitionProperty:"common",transitionDuration:"normal",display:h?"none":void 0,"data-filmstrip-selected":a,"data-filmstrip-view":b?"list":"filmstrip",css:{"--editor-width":"".concat(E,"px")},children:[A&&(0,s.jsx)(d.a,{pos:"absolute",top:"50%",insetInlineStart:b?"calc(100% - 1rem)":"50%",transform:"translate(".concat(S,", -50%)"),zIndex:"1",children:(0,s.jsx)(x.g,{opacity:.8,icon:u.k6j})}),(0,s.jsxs)(d.a,{children:[b&&(0,s.jsx)(mS,{cardId:y,index:i,isFilmstripSelected:a,isEditorFocused:r,editor:j,hidden:A,readOnly:c}),(0,s.jsx)(mE,{shouldHide:h||b,cardId:y,index:i,isDraggingCard:w,isDragInProgress:m,isFilmstripSelected:a,isEditorFocused:r,hidden:A}),(0,s.jsx)(st.N,{children:p&&(0,s.jsx)(d.a,{position:"absolute",bottom:0,insetInlineStart:0,transform:"translate(".concat(S,", 50%)"),children:(0,s.jsx)(mT,{initial:{scale:.5,opacity:0},exit:{scale:.5,opacity:0},animate:{scale:1,opacity:1},h:5,minW:5,px:1,borderRadius:"full",bg:"trueblue.300",color:"white",fontSize:"xs",fontWeight:600,boxShadow:"sm",justify:"center",align:"center",children:(0,s.jsx)(l.E,{children:p})},"badge-number")})})]})]})};var mR=i(12596),mO=i(87930),m_=i(95081),mD=i(41896),mP=i(20011);let mz=(0,v.forwardRef)(function(e,t){let{reduxData:i,...n}=e,r=(0,mP.F)(i);return(0,s.jsx)(y.Kq,{store:r,children:(0,s.jsx)(mM,{ref:t,...n})})}),mM=(0,v.forwardRef)(function(e,t){let{parent:i,theme:n,portalComponent:r,parentIsStreaming:o}=e,l=(0,v.useMemo)(()=>(0,t7.C)(),[]),a=(0,eu.jL)();(0,v.useEffect)(()=>{a((0,ex.Yl)({theme:n||null})),a((0,ex.kd)({isAllowedToEdit:!1})),a((0,ex.$j)({animationsEnabled:!1}))},[n,a]);let c=(0,mD.hG)({extensions:l,content:i.getJSON(),editable:!1});return t&&("function"==typeof t?t(c):t.current=c),c.isThumbnail=!0,(0,v.useEffect)(()=>{var e,t,n;let s=i.getJSON();if(!s||!c)return;let r=null==(t=i.state.selection)||null==(e=t.ranges)?void 0:e[0];c.commands.setContent(s),r&&c.commands.setTextSelection({from:r.$from.pos,to:r.$to.pos}),c.commands.command(()=>((0,da.jL)(c.state.doc,a),!0)),null==(n=mO.U.getState(c.state))||n.compute(c.state.doc).processChanges(a)},[i,c,a]),(0,mr.J)({sourceEditor:i,targetEditor:c,isStreaming:o}),(0,s.jsx)(d.a,{className:"editor-preview-root","data-variation-preview":!0,"data-testid":"editor-preview-root",width:"100px",position:"relative",sx:m_.q,children:(0,s.jsx)(mD.$Z,{editor:c,portalComponent:r,style:{width:"100%",height:"100%"},className:"highlight-mask"})})}),mN=(0,v.memo)((0,v.forwardRef)((e,t)=>{let[i,n]=(0,v.useState)(!1),r=(0,eu.GV)(eO.Jo);return((0,v.useEffect)(()=>{requestAnimationFrame(()=>{n(!0)})},[]),i)?(0,s.jsx)(mz,{...e,portalComponent:mR.m,ref:t,reduxData:{doc:r}}):null}));mN.displayName="TransactionalFilmstripPreviewEditor";let mF=(0,v.memo)(e=>{let{onClose:t,isDark:i,isResizing:n,setIsResizing:o,side:l}=e,{previewWidth:a}=ih(),c=(0,v.useRef)(null),u=(0,v.useRef)(a),x=(0,v.useRef)(null),h=(0,eu.jL)(),m=(0,v.useCallback)(e=>{if(e.preventDefault(),!c.current||!u.current||!x.current)return;let{width:i,x:n}=c.current,s=(e.clientX-n)*("left"===l?1:-1);if(i+s<=30)return void t();let r=hT()(i+s,90,200);r!==u.current&&(u.current=r,x.current.innerHTML="\n          .filmstrip-nav-item-wrapper {\n            --editor-width: ".concat(r,"px;\n          }"))},[t,l]),p=(0,en.wb)(m,30),g=(0,v.useCallback)(e=>{e.preventDefault(),c.current={x:e.clientX,width:u.current},o(!0);let t=()=>{c.current=null,x.current&&(x.current.innerHTML=""),h((0,il.TN)({width:u.current})),document.removeEventListener("mousemove",p),document.removeEventListener("mouseup",t),requestAnimationFrame(()=>{o(!1)})};document.addEventListener("mousemove",p),document.addEventListener("mouseup",t)},[h,o,p]);return(0,s.jsxs)(r.s,{className:"filmstrip-resizer",css:{"--resizer-width":"24px","--resizer-offset":"4px","--drag-handle-width":"4px"},pos:"absolute",top:0,bottom:0,insetInlineEnd:"calc(var(--resizer-width) * -1 + var(--resizer-offset))",opacity:0,w:"var(--resizer-width)",bg:i?"whiteAlpha.200":"blackAlpha.200",h:"100%",transitionProperty:"common",transitionDuration:"normal",transitionTimingFunction:"ease",justify:"center",alignItems:"center",borderTopEndRadius:"md",borderBottomEndRadius:"md",boxShadow:"md",_hover:{cursor:"ew-resize"},onMouseDown:g,zIndex:hZ,children:[(0,s.jsx)("style",{ref:x}),(0,s.jsx)(d.a,{position:"relative",insetInlineStart:"calc(var(--resizer-offset) - (var(--drag-handle-width) / 2))",bg:"white",borderRadius:"full",w:"var(--drag-handle-width)",h:"40px",opacity:n?1:.6,transitionProperty:"common",transitionDuration:"normal"})]})});mF.displayName="FilmstripResizer";let mL=e=>({"--fs-item-border-color":e?"var(--chakra-colors-whiteAlpha-300)":"var(--chakra-colors-gray-200)","--fs-text-item-selected-border-color":"var(--chakra-colors-trueblue-100)","--fs-item-box-shadow":"0 0 0 1px var(--fs-item-border-color)","--fs-item-focused-box-shadow":"0 0 0 2px var(--chakra-ring-color)","--fs-item-selected-box-shadow":"0 0 0 2px var(--chakra-colors-trueblue-300)","--fs-text-item-selected-box-shadow":"0 0 0 1px var(--fs-text-item-selected-border-color)","--fs-item-card-number-border-color":e?"var(--chakra-colors-gray-700)":"var(--chakra-colors-gray-200)","--fs-item-selected-text-color":e?"var(--chakra-colors-trueblue-200)":"var(--chakra-colors-trueblue-500)","--fs-item-card-number-color":e?"var(--chakra-colors-gray-50)":"var(--chakra-colors-gray-700)","--fs-item-card-number-background-color":e?"var(--chakra-colors-gradient-dark)":"var(--chakra-colors-gradient-light)","--fs-text-item-bg-color":e?"var(--chakra-colors-gray-700)":"var(--chakra-colors-gray-50)","--fs-text-item-card-number-bg-color":e?"var(--chakra-colors-gray-600)":"var(--chakra-colors-gray-200)"}),mV=(e,t)=>{if(!e||!t)return{id:null,pos:null};let{$from:i,from:n,to:s}=e,r=null,o=null;return i.doc.nodesBetween(n,s,(e,t)=>{let n=i.doc.resolve(t).depth;return!(!r&&(0,tf.jg)(e))||1!==n||(r=e.attrs.id,o=t,!1)}),{id:r,pos:o}},mW=()=>{var e;return!!(null==(e=document.activeElement)?void 0:e.closest(h2))},mG=()=>{let e=(0,X.fW)(),t=(0,v.useRef)(null),[i,n]=(0,v.useState)(!1),[s,r]=(0,v.useState)([0,0]),[o,l]=(0,v.useState)("bottom"),a=(0,eu.jL)(),d=(0,v.useCallback)(()=>{n(!1)},[]),c=(0,v.useCallback)(()=>{r([0,0]),l("bottom")},[]),u=(0,v.useCallback)(e=>{n(!0),r(e)},[]),x=(0,v.useCallback)(e=>i=>{var n;i.preventDefault(),a((0,il.dW)({id:e})),u([i.clientX,i.clientY]);let s=null==(n=t.current)?void 0:n.offsetHeight;if(null==s)return;let r=window.innerHeight<i.clientY+s,o=i.clientY<s;r&&!o?l("top"):r&&o?l("center"):l("bottom")},[a,t,u]),h=(0,v.useMemo)(()=>{var i;let n=s[1],r=null==(i=t.current)?void 0:i.offsetHeight,l=r?window.innerHeight-(n+r+8):void 0,a="center"===o&&l?"translateY(".concat(l,"px)"):"top"===o?"translateY(-100%)":void 0;return{insetInlineStart:e?window.innerWidth-s[0]:s[0],top:s[1],transform:a,transformOrigin:"top"}},[o,s,e]);return{menuRef:t,isFilmstripCardMenuOpen:i,onFilmstripCardMenuClose:d,handleContextMenu:x,menuRootStyles:h,clearPositioning:c}},mB=ts()(tV.OM,200),mU=e=>{let{isFocused:t,readOnly:i,firstFocusedCardId:n,editor:s,isDragging:r}=e,{handleCopy:o,handleDelete:l,handleCut:a,handleDuplicate:d}=mu(s),c=(0,eu.jL)(),u=(0,eu.CU)();(0,v.useEffect)(()=>h$.WC.on("keydown","FILMSTRIP",e=>{if(!t)return!1;switch(e.key){case"Escape":if(r)return c((0,h8.O)()),!0;return!1;case"Backspace":case"Delete":if(!i)return l(),!0;return!1;case"a":case"A":if(!i&&(e.ctrlKey||e.metaKey))return e.preventDefault(),c((0,il.Ub)({currentFocusedCard:n})),!0;return!1;case"c":case"C":if(!i&&(e.ctrlKey||e.metaKey))return o(),!0;return!1;case"d":case"D":if(!i&&(e.ctrlKey||e.metaKey))return e.preventDefault(),d(),!0;return!1;case"x":case"X":if(!i&&(e.ctrlKey||e.metaKey))return a(),!0;return!1;case"ArrowDown":{c((0,il.G2)({direction:"down",withShift:!i&&e.shiftKey,currentFocusedCard:n}));let t=(0,il.Mj)(u.getState())[0];return!e.shiftKey&&s&&t&&(mB({cardId:t,editor:s}),c((0,ex.mF)({attached:!1}))),!0}case"ArrowUp":{c((0,il.G2)({direction:"up",withShift:!i&&e.shiftKey,currentFocusedCard:n}));let t=(0,il.Mj)(u.getState())[0];return!e.shiftKey&&s&&t&&(mB({cardId:t,editor:s}),c((0,ex.mF)({attached:!1}))),!0}default:return!1}}),[c,n,t,r,l,o,d,a,i,s,u])};var mH=i(66607);let mK=e=>{let t=(0,eu.CU)(),i=(0,iI.d)(),n=(0,eu.jL)();(0,v.useEffect)(()=>{let r=r=>{let o=t.getState();if(!e||!mW()||!(0,ex.nD)(o))return;let l=(0,mH.B)(r,e);if(!l)return;let a=(l.content.content||[]).filter(e=>(0,hF.jg)(e)).map(e=>r5()(e.toJSON()));if(a.length){let t=(0,tf.W0)(e,(0,il.Nx)(o)),l=t?t.pos+t.node.nodeSize:e.state.doc.content.size-1,d=(0,il.zT)((0,eu.KA)().getState());e.chain().insertContentAt(l,a,{updateSelection:!1}).command(e=>{let{tr:t}=e;t.setMeta("annotationEvent",{type:"filmstrip-paste",insertPos:l});let i=(0,r4.s)(t.doc.resolve(l));return i&&(t=t.setSelection(i)),!0}).scrollIntoView().run(),r.preventDefault(),mc(e,d),n((0,il.B6)({beforeCardId:null==t?void 0:t.node.attrs.id,cardCount:a.length})),i({title:(0,s.jsx)(m.x6,{id:"3viq5b",values:{0:a.length,1:a.length}}),status:"success",duration:3e3,position:"top"})}};return document.addEventListener("paste",r),()=>{document.removeEventListener("paste",r)}},[n,e,t,i])};var mJ=i(67686);let mq=()=>{let e=(0,mJ.m)(),t=(0,v.useRef)(null),i=(0,v.useRef)(),n=(0,v.useRef)(),s=(0,v.useRef)(),r=(0,v.useCallback)(e=>{if(!s.current)return;let t=m$(s.current),r=e.target;if(!t||!r||void 0===i.current||void 0===n.current)return;let o=r.scrollTop-i.current.top;t.y=n.current-o},[]),o=(0,v.useCallback)((e,n)=>{var s,r;let o=t.current;if(!o)return;let l=o.getBoundingClientRect(),a=n.point.y,d=e.target;if(!(d instanceof Element))return;let c=d.closest("[draggable]"),u=null==c?void 0:c.parentElement;u&&(a<l.top+25&&(c!==u.firstElementChild||o.scrollTop>0)?o.scrollTop-=5:a>l.bottom-25&&o.scrollTop+l.height<(null!=(r=null==(s=i.current)?void 0:s.height)?r:o.scrollHeight)&&(o.scrollTop+=5))},[]),l=(0,v.useCallback)(()=>{let r=t.current,o=mY(e);if(!r||!o)return;s.current=o,i.current={top:r.scrollTop,height:r.scrollHeight};let l=m$(o);l&&(n.current=l.y)},[e]);return{scrollerRef:t,onScroll:r,dragControls:e,onDrag:o,onDragStart:l,onDragEnd:(0,v.useCallback)(()=>{i.current=void 0,n.current=void 0,s.current=void 0},[])}},mY=e=>{try{return Array.from(e.componentControls).find(e=>e.isDragging)}catch(e){console.error("[caught] findDraggingElementControls",e);return}},m$=e=>{try{return e.panSession.history[0]}catch(e){console.error("[caught] getDraggingElementStartPoint",e);return}},mX=(0,se.P)(r.s),mQ=(0,se.P)(d.a),mZ="data-".concat(im.rc),m0=(e,t)=>({initial:{x:e*("left"===t?-1:1)+("left"===t?-16:16)},animate:{x:0,transition:h0},exit:{x:e*("left"===t?-1:1),transition:h1}}),m1=e=>{let{onClose:t,editor:i,readOnly:n,side:o}=e,[l,a]=(0,v.useState)(null),[c,u]=(0,v.useState)(!1),[x,h]=(0,eh.M)(em.E.filmstripViewPreference,"film"),m=(0,v.useRef)(null),p=(0,eu.GV)((0,ec.pn)(null==i?void 0:i.gammaDocId)),{cards:g,isDragging:j,selection:f,isLoaded:b}=h7(null!=l?l:i),y=(0,im.UT)("comment"),w=(0,im.UT)("edit"),C=y&&!w,k=(0,eu.GV)(dv.ow),E=(0,v.useMemo)(()=>g.filter(e=>{var t;return!((null==k||null==(t=k[e.cardId])?void 0:t.hidden)&&C)}),[g,C,k]),{id:S}=(0,v.useMemo)(()=>mV(f,i),[i,f]),I=(0,eu.jL)(),T=(0,eu.GV)(il.Mj),A=(0,eu.GV)(h8.Kp),R=(0,eu.GV)(h8.eH),O=(0,eu.GV)(h8.$S),[_,D]=(0,v.useState)(!1),{menuRef:P,isFilmstripCardMenuOpen:z,onFilmstripCardMenuClose:M,clearPositioning:N,handleContextMenu:F,menuRootStyles:L}=mG(),W=(0,v.useCallback)(()=>{if(M(),c){var e;null==(e=m.current)||e.focus()}},[c,M]),{scrollerRef:G,onScroll:B,dragControls:U,onDrag:H,onDragStart:K,onDragEnd:J}=mq(),q=(0,v.useCallback)(e=>()=>{if(D(!0),K(),G.current){let e=G.current.getBoundingClientRect().height;G.current.style.height="".concat(e,"px")}let t=T.includes(e)?T:[e];I((0,il.IE)({selectedCardIdsToDrag:t})),I((0,h8.Em)({cardIds:E.map(e=>e.cardId),leaderCardId:e,selectedCardIds:t}))},[E,I,T,K,G]),Y=(0,v.useCallback)(()=>{i&&setTimeout(()=>{i.commands.rearrangeCardsById(E.map(e=>e.cardId),R,{viewPreference:x}),requestAnimationFrame(()=>{requestAnimationFrame(()=>{I((0,h8.O)()),J()})})},100)},[i,E,R,x,I,J]),$=(0,v.useCallback)(()=>{G.current&&(G.current.style.height=""),D(!1)},[G]);mK(i),mU({isFocused:c,readOnly:n,firstFocusedCardId:S,editor:i,isDragging:j}),(0,uV.j)({ref:m,handler(e){var t,i,n,s;P.current&&P.current.contains(e.target)||(null==(i=e.target)||null==(t=i.closest)?void 0:t.call(i,"[data-menu-item-key]"))||(null==(s=e.target)||null==(n=s.closest)?void 0:n.call(s,'[data-testid="add-card-from-template-inner-menu"]'))||(z&&M(),I((0,il.gE)()))}});let X=(0,eu.GV)(ex.SJ),Z=(0,V.dU)("whiteAlpha.600","whiteAlpha.100"),ee=(0,V.dU)("#F9FAFBDD","gray.800"),et=(0,V.dU)("gray.700","gray.200"),ei=(0,V.dU)("blackAlpha.400","whiteAlpha.500"),{colorMode:en}=(0,V.G6)(),es="dark"===en,er=(0,v.useMemo)(()=>mL(es),[es]),[eo,el]=(0,v.useState)(!1),{width:ea}=ih(),ed=m0(ea,o),ep=(0,v.useMemo)(()=>{let e=R.length;return j&&e>1?e:null},[j,R.length]),[eg,ej]=(0,v.useState)(!1),ef=(0,Q.O2)("filmstrip");(0,v.useEffect)(()=>{ef.setScrollSelector(h4)},[ef]);let eb=(0,iu.Tq)(),ev=(0,io.U)(),ey=!!eb.src&&!ev;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(r.s,{pointerEvents:"none",position:"absolute","data-guider-highlight":"filmstrip",direction:"column",top:14,bottom:ey?"".concat(eb.height+2*eb.paddingY,"px"):2,justifyContent:"center",color:et,insetInlineStart:2,children:[i&&(0,s.jsx)(mN,{parent:i,theme:X,parentIsStreaming:p,ref:a}),(0,s.jsxs)(d.a,{pos:"relative",pointerEvents:"auto",_hover:{".filmstrip-resizer":{opacity:+!eg}},maxHeight:"100%",children:[(0,s.jsxs)(mX,{ref:m,"data-guider-highlight":"filmstrip",className:h6,[mZ]:!0,pos:"relative",direction:"column",zIndex:hQ,...ed,onAnimationStart:()=>{ej(!0)},onAnimationComplete:()=>{ej(!1)},tabIndex:0,_focus:{outline:"none"},onFocus:()=>{u(!0),null==i||i.commands.blur()},onBlur:e=>{var t,i;m.current&&(null==(t=m.current)?void 0:t.contains(e.relatedTarget))||(null==(i=P.current)?void 0:i.contains(e.relatedTarget))||u(!1)},borderRadius:"md",bg:ee,borderWidth:"1px",borderColor:Z,shadow:"lg",backdropFilter:"blur(20px)",maxHeight:"100%",alignSelf:"flex-start",children:[(0,s.jsx)(mh,{isDark:es,onClose:t,viewPreference:x,setViewPreference:h,editor:i,readOnly:n}),(0,s.jsx)(mQ,{className:h5,"data-guider-highlight":"filmstrip-scroller",layoutScroll:!0,overflowY:"auto",position:"relative",sx:{"&::-webkit-scrollbar":{opacity:1,width:"5px"},"&::-webkit-scrollbar-track":{opacity:0,width:"5px"},"&::-webkit-scrollbar-thumb":{background:ei,borderRadius:"full"},...er},ref:G,onScroll:B,p:"8px",pt:0,children:(0,s.jsx)(h3._.Group,{onReorder:e=>{let t=e.map(e=>e.cardId);I((0,h8.je)({reorderedCardIds:t}))},values:E,axis:"y",children:l&&i&&b&&E.map((e,t)=>{let{cardId:r,displayBehavior:o}=e,a=T.includes(r),d=O===r;return(0,s.jsx)(h3._.Item,{drag:!n&&"y",value:e,onDragStart:q(r),onDragEnd:Y,onDragTransitionEnd:$,className:"reorder-item",dragControls:U,transition:{duration:0,ease:"linear"},onDrag:H,dragTransition:{bounceStiffness:2e3,bounceDamping:1e4},style:{position:"relative",listStyle:"none"},children:(0,s.jsx)(mA,{readOnly:n,editor:l,card:e,index:j&&void 0!==A[r]?A[r]:t+1,isFirst:0===t,shouldHide:"hidden"===o,isDragInProgress:_,isEditorFocused:S===r&&i.isFocused,isFilmstripSelected:!!a,currentFocusedCard:S,numberOfCardsDragging:d?ep:null,onContextClick:F(r),isAnimating:eg,showTextOnly:"list"===x})},r)})})})]}),(0,s.jsx)(mF,{onClose:t,isDark:es,isResizing:eo,setIsResizing:el,side:o})]})]}),i&&(0,s.jsx)(my,{ref:P,editor:i,readOnly:n,isOpen:z,onClose:W,clearPositioning:N,rootStyles:L,isDark:es})]})},m6=()=>{let e=(0,eu.jL)(),t=(0,eu.GV)(il.lh),i=(0,eq.t3)(),n=(0,eq.Wm)(),s=(0,eQ.h5)(i>0||n>0?{base:!1,xl:!0}:{base:!1,lg:!0})||!1,[r,o]=(0,v.useState)(!1),[l,a]=(0,v.useState)(!1),d=(0,v.useCallback)(()=>{e((0,il.$B)({isOpen:!1})),e((0,il.gE)()),a(!0)},[e]),c=(0,v.useCallback)(()=>{s||o(!0),e((0,il.$B)({isOpen:!0}))},[s,e]),u=!s&&r;return(0,v.useEffect)(()=>{let t=!s&&!r,i=s&&!l;t?e((0,il.$B)({isOpen:!1})):i&&e((0,il.$B)({isOpen:!0}))},[e,s,r,l]),{onClose:d,onOpen:c,isOpen:t&&(s||!s&&u)}},m2=(0,se.P)(a.$),m5=(0,v.memo)(()=>{let e=(0,X.fW)(),{editor:t}=(0,t5.mi)(),{isOpen:i,onClose:n,onOpen:o}=m6(),{isGammaAdminUser:l}=(0,xb.u)(),a=(0,im.UT)("edit"),d=(0,eu.GV)(ex.nD),c=(0,ee.rd)(),[h,p]=(0,v.useState)(!1),g=(0,v.useCallback)(()=>{p(!0),setTimeout(()=>{o()}),setTimeout(()=>{p(!1)},750)},[o]);return(0,v.useEffect)(()=>T.R.on("openFilmStrip",()=>{o()}),[o]),(0,v.useEffect)(()=>h$.WC.on("keydown","FILMSTRIP",e=>!!(0,rf.Ay)("Mod+\\")(e)&&(i?n():g(),!0)),[i,n,g]),(0,s.jsx)(hX.h,{children:(0,s.jsx)(J.L8,{isDark:c,children:(0,s.jsx)(st.N,{children:i?(0,s.jsx)(m1,{onClose:n,editor:t,readOnly:!l&&(!a||!d),side:e?"right":"left"},"filmstrip"):(0,s.jsx)(J.Tz,{placement:"top-end",label:(0,s.jsx)(m.x6,{id:"7ShgZt"}),isDisabled:h,shortcut:"Mod+\\",children:(0,s.jsxs)(m2,{initial:{opacity:0},animate:{opacity:1,transition:h1},exit:{opacity:0,transition:h0},zIndex:hQ,css:{"--trigger-height":"var(--chakra-sizes-14)"},tabIndex:-1,position:"fixed",insetInlineStart:2,top:"calc(50% - (var(--trigger-height) / 2) + var(--chakra-sizes-5))",borderRadius:"xl","data-guider-highlight":"filmstrip",h:"var(--trigger-height)",w:8,onClick:g,children:[(0,s.jsx)(hY.s,{children:(0,s.jsx)(m.x6,{id:"7ShgZt"})}),h?(0,s.jsx)(r.s,{children:(0,s.jsx)(t4.y,{size:"sm"})}):(0,s.jsx)(x.g,{icon:u.OxR})]},"filmstrip-opener")})})})})});m5.displayName="Filmstrip";var m4=i(49146),m3=i(23908),m8=i(36693),m7=i(20061),m9=i(3448),pe=i(99430),pt=i(36835),pi=i(36433),pn=i(84929),ps=i(97256),pr=i(51312),po=i(88720),pl=i(95197);let pa=e=>{let{editor:t}=e,{cardMarginSettings:i}=(0,eu.GV)(ex.Uu),{hideFromFirst:n,hideFromLast:r,...a}=i,d=(0,pl.Nk)(i),{isCardMarginsModalOpen:c,onOpenCardMarginsModal:u,onCloseCardMarginsModal:x,positionToHighlight:h,setPositionToHighlight:p}=(0,ps.g)(),g=(0,v.useCallback)(e=>()=>{p(e),u()},[p,u]);return(0,s.jsxs)(o.B,{dir:"ltr",minH:40,justifyContent:"space-between",p:2,bg:"gray.50",borderRadius:"md",cursor:"pointer",role:"group",_hover:{bg:"gray.200",color:"gray.800"},transitionProperty:"all",transitionDuration:"normal",color:"gray.600",onClick:g(void 0),children:[(0,s.jsx)(e8.z,{justifyContent:"space-between",h:8,children:["topLeft","topCenter","topRight"].map(e=>(0,s.jsx)(pd,{position:e,element:a[e],handleClick:g(e),hideFromFirst:!!n},e))}),(0,s.jsx)(l.E,{textAlign:"center",color:"gray.600",_groupHover:{color:"gray.700"},children:d?(0,s.jsx)(m.x6,{id:"Rl2UTZ"}):(0,s.jsx)(m.x6,{id:"ePK91l"})}),(0,s.jsx)(e8.z,{justifyContent:"space-between",h:8,children:["bottomLeft","bottomCenter","bottomRight"].map(e=>(0,s.jsx)(pd,{position:e,element:a[e],handleClick:g(e),hideFromFirst:!!n},e))}),c&&(0,s.jsx)(pn.v,{editor:t,isOpen:c,onClose:x,highlightPosition:h})]})},pd=e=>{var t,i;let{element:n,position:r,handleClick:o,hideFromFirst:a}=e,{logoSrc:c}=(0,pi.G)(),{flex:h,text:m}=(0,pl.o)(r),g=(null==n?void 0:n.type)==="image"&&(null==(t=n.imageAttrs)?void 0:t.uploadStatus)===nF.A.Error,j=!n||"text"===n.type&&!n.content||"image"===n.type&&!g&&!(null==(i=n.imageAttrs)?void 0:i.src),f=(0,X.fW)(),b=(0,pl._V)(n);return(0,s.jsx)(e8.z,{justifyContent:h,w:"100%",children:(0,s.jsx)(d.a,{borderRadius:"sm",children:j?(0,s.jsx)(H.K,{"aria-label":p.Ru._({id:"dBX3xu"}),icon:(0,s.jsx)(x.g,{icon:u.QLR,fontSize:"md"}),variant:"ghost",size:"sm",bg:"transparent",color:"gray.500",_hover:{bg:"blackAlpha.100",color:"black"},_groupHover:{color:"gray.600"},onClick:e=>{e.stopPropagation(),o()}}):(0,s.jsxs)(d.a,{px:2,py:1,children:["text"===n.type&&(0,s.jsx)(l.E,{color:"gray.800",fontSize:"xs",noOfLines:1,textAlign:m,dir:f?"rtl":void 0,children:n.content}),"cardNumbers"===n.type&&(0,s.jsx)(l.E,{color:"gray.800",fontSize:"xs",dir:f?"rtl":void 0,children:(0,pl.M0)(n.startIndex,n.startNumber,a)}),"image"===n.type&&(b?(0,s.jsx)(nz._,{src:b,h:4,maxW:"100%",objectFit:"contain"}):(0,s.jsx)(pr.d,{imageElement:n,isLoading:!1,isError:g,isCompact:!0})),"themeLogo"===n.type&&(c?(0,s.jsx)(nz._,{src:c,h:4,maxW:"100%",objectFit:"contain"}):(0,s.jsx)(po.V,{isCompact:!0}))]})})})};var pc=i(46875),pu=i(17192),px=i(84655);let ph=[{key:"sm",name:()=>p.Ru._({id:"4Revpc"}),buttonText:()=>p.Ru._({id:"ZQA8ce"}),description:()=>p.Ru._({id:"N0rIpR"})},{key:"md",name:()=>p.Ru._({id:"agPptk"}),buttonText:()=>p.Ru._({id:"Tmu3kA"}),description:()=>p.Ru._({id:"3JV7Yt"})},{key:"lg",name:()=>p.Ru._({id:"k7rCa/"}),buttonText:()=>p.Ru._({id:"SMwD6s"}),description:()=>p.Ru._({id:"edeEjW"})}],pm=e=>{let{fontSize:t,setFontSize:i}=e;return(0,s.jsx)(e7.e,{isAttached:!0,size:"sm",display:"flex",children:ph.map(e=>{let n=e.key===t?"trueblue.100":void 0;return(0,s.jsx)(J.Tz,{label:(0,s.jsx)(J.c8,{label:e.name(),description:e.description()}),placement:"top",children:(0,s.jsx)(a.$,{"aria-label":e.name(),px:"2.5",boxShadow:"none",variant:"plain",bg:n,onClick:()=>{i(e.key)},children:e.buttonText()})},e.key)})})};var pp=i(51808);let pg=e=>{let{hideExtraLines:t}=e;return(0,s.jsxs)(o.B,{w:"100%",py:2,px:2.5,children:[(0,s.jsx)(d.a,{w:20,h:1.5,bg:"gray.200"}),(0,s.jsxs)(e8.z,{flex:"1",alignItems:"flex-start",children:[(0,s.jsx)(sm.g,{ratio:4/3,color:"gray.600",w:12,bg:"gray.200",children:(0,s.jsx)(d.a,{fontSize:"lg",children:(0,s.jsx)(x.g,{icon:u.Cyq})})}),(0,s.jsxs)(o.B,{flex:"1",spacing:"1",children:[(0,s.jsx)(d.a,{h:1,bg:"gray.200"}),(0,s.jsx)(d.a,{h:1,bg:"gray.200"}),(0,s.jsx)(d.a,{h:1,bg:"gray.200"}),(0,s.jsx)(d.a,{w:t?"80%":"100%",h:1,bg:"gray.200"}),!t&&(0,s.jsx)(d.a,{w:"80%",h:1,bg:"gray.200"})]})]})]})},pj=e=>{let{cardDimensions:t,showBackdrop:i,isWide:n,label:a,scaleCardUp:c,alignment:u}=e,x={boxShadow:"".concat(i?"sm":""),w:"".concat(n?"85%":"65%"),mx:"auto",borderRadius:"sm",bg:"white",transform:"".concat(c?"scale(1.15)":"none")};return(0,s.jsxs)(o.B,{flex:"1",alignItems:"center",sx:{"*":{transition:"all 0.2s ease"}},spacing:1.5,maxW:"50%",mx:"auto",children:[(0,s.jsx)(r.s,{bg:i?"gray.200":"white",borderWidth:"1px",borderColor:"gray.200",width:"100%",minH:32,borderRadius:"sm",alignItems:"center",py:2,overflow:"hidden",children:t.aspectRatio?(0,s.jsx)(sm.g,{...x,ratio:t.aspectRatio,children:(0,s.jsx)(d.a,{display:"flex",alignItems:u,style:{alignItems:u},children:(0,s.jsx)(pg,{hideExtraLines:n})})}):(0,s.jsx)(o.B,{...x,children:(0,s.jsx)(pg,{hideExtraLines:n})})}),(0,s.jsx)(l.E,{fontSize:"xs",color:"gray.600",children:a})]})};var pf=i(8099);let pb=e=>{let{onClick:t,isSelected:i,icon:n,label:r,description:a,tooltip:c}=e,u=(0,s.jsxs)(o.B,{cursor:"pointer",onClick:t,p:"1.5",px:"2",alignItems:"center",spacing:"0",bg:i?"trueblue.50":"gray.50",borderWidth:"1px",borderColor:i?"trueblue.500":"gray.200",color:i?"trueblue.500":"black",borderRadius:"md",minW:"100px",justifyContent:"center",children:[(0,s.jsx)(d.a,{pb:"0",fontSize:"md",children:(0,s.jsx)(x.g,{icon:n})}),(0,s.jsx)(l.E,{fontSize:"xs",w:"100%",textAlign:"center",noOfLines:1,children:r}),a&&(0,s.jsx)(l.E,{fontSize:"xs",color:"blackAlpha.600",children:a})]});return c?(0,s.jsx)(pf.m,{label:c,placement:"top",children:u}):(0,s.jsx)(s.Fragment,{children:u})},pv=e=>{let{styleTemplateKeys:t,selectedStyleTemplateKey:i,onSelectNewStyle:n,onSelectCustomStyle:r}=e;return(0,s.jsxs)(s.Fragment,{children:[t.map(e=>{let t=ap.S9[e];return(0,s.jsx)(pb,{label:t.label(),icon:t.icon,isSelected:i===e,description:t.cardDimensionsDesc(),tooltip:t.recommendedFor(),onClick:()=>n(e)},e)}),(0,s.jsx)(pb,{label:p.Ru._({id:"8Tg/JR"}),icon:u._$s,isSelected:"custom"===i,onClick:r})]})},py=e=>{let{title:t,description:i,icon:n,customIcon:r,children:o,value:a,onChange:d,stackProps:c}=e;return(0,s.jsxs)(e8.z,{pb:5,...c,children:[n&&(0,s.jsx)(x.g,{icon:n,fixedWidth:!0}),r&&r,(0,s.jsx)(l.E,{ms:1,children:t}),i&&(0,s.jsx)(J.qT,{label:i}),(0,s.jsx)(tT.h,{}),o,d&&(0,s.jsx)(pe.d,{isChecked:a,onChange:e=>d(e.target.checked)})]})},pw=e=>{let{selectedStyleTemplateKey:t,newTemplateKey:i,savedVerticalAlign:n,savedDefaultContentWidth:s,savedFontSize:r,savedScaleContentToFit:o}=e,l="custom"===t?{}:ap.S9[t].docSettings(),a="custom"===i?{}:ap.S9[i].docSettings(),d="fluid"===l.cardDimensions;return{...a,verticalAlign:d?a.verticalAlign:n,defaultContentWidth:d&&"custom"!==t?s:a.defaultContentWidth,fontSize:null!=r?r:a.fontSize,scaleContentToFit:d||"fluid"===a.cardDimensions?a.scaleContentToFit:o}},pC=e=>{let{editor:t}=e,i=(0,v.useCallback)((e,i)=>{null==t||t.commands.updateNestedAttributesAtPos(0,{format:e,settings:i})},[t]),n=(0,v.useCallback)(e=>{null==t||t.commands.updateNestedAttributesAtPos(0,{settings:e})},[t]),r=(0,eu.GV)(ex.Uu),{animationsEnabled:c,defaultContentWidth:h,verticalAlign:g,presentBackdrop:j,fontSize:f,cardDimensions:b,defaultFullBleed:y,scaleContentToFit:w}=r,{format:C}=(0,eu.GV)(ex.zu),k=(0,R.u)("cardMarginElements")&&"webpage"!==C,E=(0,r6.Bi)(),S=C||"deck",I=(0,r6.zY)(S),T=(0,r6.Wu)(r,S)||"custom",A="fluid"===b,O="custom"===T;function _(e){e||t.commands.resetCardSettings({fontScale:void 0}),w!==e&&setTimeout(()=>{n({scaleContentToFit:e})})}let D=(0,pc.R)(),P="full"!==y||j;return(0,s.jsxs)(o.B,{spacing:5,divider:(0,s.jsx)(iD.c,{}),children:[(0,s.jsxs)(d.a,{w:"100%",children:[(0,s.jsx)(nl.l,{children:(0,s.jsx)(m.x6,{id:"kI1qVD"})}),(0,s.jsxs)(o.B,{spacing:4,children:[(0,s.jsxs)(sy.W,{children:[(0,s.jsx)(sw.I,{textAlign:"start",as:a.$,variant:"plain",size:"md",boxShadow:"none",minW:"120px",rightIcon:(0,s.jsx)(x.g,{icon:u.tdl}),leftIcon:(0,s.jsx)(x.g,{icon:I.icon}),w:"100%",children:I.name()}),(0,s.jsx)(sC.c,{children:(0,s.jsx)(sk.i,{title:"Format",children:E.map(e=>(0,s.jsxs)(ah.D,{onClick:()=>{let t=e.styleTemplates[0],n=ap.S9[t].docSettings();i(e.formatType,n),_(n.scaleContentToFit)},children:[(0,s.jsx)(x.g,{icon:e.icon,fixedWidth:!0}),(0,s.jsx)(d.a,{flex:1,ms:2,children:(0,s.jsx)(l.E,{children:e.name()})}),e.formatType===S&&(0,s.jsx)(x.g,{icon:u.e68})]},e.formatType))})})]}),(0,s.jsx)(dT.B,{children:(0,s.jsx)(pv,{styleTemplateKeys:I.styleTemplates,onSelectNewStyle:function(e){let{scaleContentToFit:t,...i}=pw({selectedStyleTemplateKey:T,newTemplateKey:e,savedVerticalAlign:g,savedDefaultContentWidth:h,savedFontSize:f,savedScaleContentToFit:w});n(i),_(t)},onSelectCustomStyle:function(){n({stylesDerivedFrom:"custom"})},selectedStyleTemplateKey:T})})]}),(0,s.jsxs)(d.a,{mt:5,children:[(0,s.jsx)(o5.S,{in:O,children:(0,s.jsx)(py,{title:p.Ru._({id:"iKM2jY"}),description:p.Ru._({id:"Q3Qdcd"}),icon:u.V4x,children:(0,s.jsx)(mC.uK,{cardDimensions:b,updateCardDimensions:e=>{let i="fluid"===e;n({cardDimensions:e,...i?{scaleContentToFit:!1}:{}}),i&&t.commands.resetCardSettings({fontScale:void 0})}})})}),(0,s.jsx)(o5.S,{in:O,children:(0,s.jsx)(py,{title:p.Ru._({id:"lsVq2Z"}),description:p.Ru._({id:"a1DIUk"}),icon:u.Cpz,value:"full"===y,onChange:e=>{n({defaultFullBleed:e?"full":void 0}),t.commands.resetCardSettings({cardSize:"default"})}})}),(0,s.jsx)(o5.S,{in:A||O,children:(0,s.jsx)(py,{title:p.Ru._({id:"cPp+Ef"}),icon:u.So7,children:(0,s.jsx)(pp.z,{contentWidth:h,setWidth:e=>{n({defaultContentWidth:e})},allowedWidths:"social"===C?["sm","md","lg"]:["md","lg"]})})}),(0,s.jsx)(py,{title:p.Ru._({id:"vUBA/H"}),description:p.Ru._({id:"n68eVZ"}),icon:u.ecg,children:(0,s.jsx)(px.c,{alignment:g,setAlignment:e=>{n({verticalAlign:e})}})}),(0,s.jsx)(py,{title:(0,s.jsx)(s.Fragment,{children:w?(0,s.jsx)(m.x6,{id:"heqtbT"}):(0,s.jsx)(m.x6,{id:"q3il6U"})}),icon:u.ACh,children:(0,s.jsx)(pm,{fontSize:f,setFontSize:e=>{n({fontSize:e})}})}),(0,s.jsx)(o5.S,{in:!A,children:(0,s.jsx)(py,{title:(0,s.jsx)(m.x6,{id:"+BgJPb"}),description:p.Ru._({id:"8uFsVy"}),icon:u.hLQ,children:(0,s.jsx)(pe.d,{isChecked:w,onChange:e=>{n({scaleContentToFit:e.target.checked}),e.target.checked||t.commands.resetCardSettings({fontScale:void 0})}})})}),P&&(0,s.jsx)(py,{title:p.Ru._({id:"7VfbQM"}),description:p.Ru._({id:"XZHPlI"}),icon:u.pt,children:(0,s.jsxs)(F.A,{placement:"top",trigger:"hover",openDelay:200,children:[(0,s.jsx)(ea.W,{children:(0,s.jsx)(pe.d,{isChecked:j,onChange:e=>n({presentBackdrop:e.target.checked})})}),(0,s.jsx)(W.h,{w:"260px",borderRadius:"md",boxShadow:"lg",children:(0,s.jsx)(G.e,{p:1,children:(0,s.jsxs)(e8.z,{alignItems:"flex-start",spacing:"2",children:[(0,s.jsx)(pj,{label:p.Ru._({id:"wl99H6"}),alignment:g,cardDimensions:mC.xs[b],isWide:"lg"===h,showBackdrop:"full"!==y,scaleCardUp:!1}),(0,s.jsx)(pj,{label:p.Ru._({id:"GWjDlt"}),alignment:g,cardDimensions:mC.xs[b],isWide:"lg"===h,showBackdrop:j&&"full"!==y,scaleCardUp:!j||"full"===y})]})})})]})}),(0,s.jsxs)(py,{title:p.Ru._({id:"HgWdP3"}),description:p.Ru._({id:"fkIS5+",values:{GAMMA_ARTIFACT_PROPER_NOUN:ej.TP}}),icon:u.xQp,stackProps:{pb:0},children:[(0,s.jsx)(pe.d,{isChecked:(0,pu.h)({animationsEnabled:c}),onChange:e=>n({animationsEnabled:e.target.checked})}),"value="]})]})]}),k&&(0,s.jsxs)(o.B,{spacing:4,pb:5,children:[(0,s.jsx)(py,{title:(0,s.jsxs)(e8.z,{spacing:"3",children:[(0,s.jsx)(m.x6,{id:"JQFgkZ"}),(0,s.jsx)(c9.Ch,{canUseFeature:D,productFeature:"card_margin_elements"})]}),description:(0,s.jsx)(m.x6,{id:"Lkq14t"}),customIcon:(0,s.jsx)(pt.m,{}),stackProps:{pb:0}}),(0,s.jsx)(pa,{editor:t})]})]})};var pk=i(75984),pE=i(52762);let pS=e=>{let{editor:t}=e,i=(0,eu.GV)(ex.SJ),n=(0,eu.GV)(ex.rv),r=(0,v.useCallback)(e=>{null==t||t.commands.updateNestedAttributesAtPos(0,e)},[t]);return(0,s.jsx)(pk.A,{editor:t,background:n,updateNestedAttributes:r,defaultMessage:(0,s.jsxs)(iP.F,{children:[(0,s.jsx)(iz._,{}),(0,s.jsx)(m.x6,{id:"dyXYfJ"})]}),defaultToNoBackgroundSource:n.type===pE.h.NONE,isDark:(0,sq.Mw)(i)})},pI=e=>{let{closePanel:t}=e,[i,n]=(0,v.useState)(0),{editor:o}=(0,tE.m)(),l=(0,eu.GV)(ex.sX),a=(0,cJ.N)(o),c=(0,v.useCallback)((e,t)=>{null==o||o.commands.updateNestedAttributesAtPos(0,{settings:{[e]:t}})},[o]),h=(0,ir.A)({base:"calc(100% - 1rem)",lg:"auto"}),{setDoneFn:p,doActionIfVerified:g}=ua({onSuccess:t});return o?(0,s.jsx)(J.L8,{isDark:!1,children:(0,s.jsx)(tO.Z,{bgColor:"white",w:"100%","data-panelid":"page-setup",pt:4,"data-page-setup":!0,children:(0,s.jsxs)(r.s,{direction:"column","data-testid":"page-setup-drawer",onKeyDown:a,h:h,overflowX:"hidden",w:"100%",children:[(0,s.jsxs)(r.s,{position:"relative",pb:4,px:6,children:[(0,s.jsx)(r.s,{flex:1,children:(0,s.jsx)(t_.N,{children:(0,s.jsx)(m.x6,{id:"fvaOtb"})})}),(0,s.jsx)(tS.J,{onClick:g})]}),(0,s.jsx)(r.s,{overflowY:"auto",direction:"column",h:"100%",flex:1,pt:5,children:(0,s.jsxs)(m4.t,{variant:"soft-rounded",size:"sm",isFitted:!0,isLazy:!0,index:i,onChange:n,px:4,children:[(0,s.jsxs)(m3.w,{children:[(0,s.jsxs)(m8.o,{children:[(0,s.jsx)(d.a,{marginInlineEnd:2,children:(0,s.jsx)(x.g,{icon:u.vGi})}),(0,s.jsx)(m.x6,{id:"Ccpbzh"})]}),(0,s.jsxs)(m8.o,{children:[(0,s.jsx)(d.a,{marginInlineEnd:2,children:(0,s.jsx)(x.g,{icon:u.pt})}),(0,s.jsx)(m.x6,{id:"GtJbUa"})]}),(0,s.jsxs)(m8.o,{children:[(0,s.jsx)(d.a,{marginInlineEnd:2,children:(0,s.jsx)(x.g,{icon:u.Bwz})}),(0,s.jsx)(m.x6,{id:"rdUucN"})]})]}),(0,s.jsxs)(m7.T,{children:[(0,s.jsx)(m9.K,{p:2,mt:4,children:(0,s.jsx)(pC,{editor:o},l)}),(0,s.jsx)(m9.K,{p:2,mt:4,children:(0,s.jsx)(pS,{editor:o,updateDocSetting:c},l)}),(0,s.jsx)(m9.K,{p:2,mt:4,children:(0,s.jsx)(ug,{setVerifyURLPathChangesDone:p},l)})]})]})})]})})}):null};pI.panelPosition="right",pI.panelName="page-setup",pI.minWidth=400;let pT=()=>{let{togglePanel:e,isPanelOpen:t}=(0,eq.ww)(pI);return(0,v.useEffect)(()=>{let t=()=>{e({override:"open"})},i=iq.R.on("openPageSetup",t),n=rn.LF.on(rn.DN.OPEN_PAGE_SETUP,t);return()=>{i(),n()}},[e]),{togglePageSetupPanel:e,isPageSetupPanelOpen:t}};var pA=i(19297),pR=i(56124);let pO=(0,rf.Ay)("mod+S"),p_=(0,rf.Ay)("mod+shift+O"),pD=()=>{let e=(0,iI.d)();(0,v.useEffect)(()=>{let t=t=>{pO(t)&&(t.preventDefault(),e.isActive("save_toast")||e({id:"save_toast",title:(0,s.jsx)(m.x6,{id:"w0nuvK",values:{GAMMA_PROPER_NOUN:ej.On}}),status:"success",duration:5e3,isClosable:!0}))},i=(0,ei.Ei)({requiredCookie:"cardCollapseDebug=true"});return window.addEventListener("keydown",t),()=>{null==i||i(),window.removeEventListener("keydown",t)}},[e])},pP=()=>{let e=(0,eu.CU)(),t=(0,eu.jL)(),{editor:i}=(0,t5.mi)();(0,v.useEffect)(()=>{if(!i)return;let n=n=>{if(!p_(n))return;n.preventDefault();let s=e.getState(),{cardIdMap:r,cardIds:o,memoState:{expandedCards:l}}=s.TipTap,a=(0,ex.$i)(s),{total:d,expanded:c,cardIds:u}=o.reduce((e,t)=>{let i=!0===l[t],n=r.parents[t]||[],s=n.length>0,o=!a||n.includes(a);return s&&o&&(e.cardIds.push(t),e.total++,e.expanded+=+!!i),e},{total:0,expanded:0,cardIds:[]});t((0,ex.VO)({disable:!0})),setTimeout(()=>{t((0,ex.VO)({disable:!1}))},100);let x=d===c;pz(i,100,!x),(0,da.wE)(u,x)};return window.addEventListener("keydown",n),()=>{window.removeEventListener("keydown",n)}},[t,e,i])},pz=(e,t,i)=>{let n,s=(0,Q.H1)("editor");for(let t=200;t>0;t-=25){var r;let i,o=(0,sP.ls)(e,s.scrollSelector,t);(null==(r=o.pos)?void 0:r.pos)&&(e.state.doc.nodeAt(o.pos.pos)?i=o.pos.pos:e.state.doc.nodeAt(o.pos.inside)&&(i=o.pos.inside),i&&(!n||i>n)&&(n=i))}if(!n)return void console.warn("[pinPageDuringAnimation] No result for getTopCenterIshNode");let o=pM(e,n,i);if(!o)return void console.warn("[pinPageDuringAnimation] No element for getElementToPin");(0,ei.BX)({element:o,requiredCookie:"cardCollapseDebug=true"});let l=+new Date,a=s.scroller.scrollTop,d=(0,ei.sR)(o,s.scrollSelector),c=a-d,u=c<0?0:Math.max(c+200,0),x=()=>{if(!o)return;let e=(0,ei.sR)(o,s.scrollSelector);s.scroller.scroll({top:a+(e-d-u)}),new Date-l<t&&requestAnimationFrame(x)};x()},pM=(e,t,i)=>{let n=e.state.doc.resolve(t),s=e.state.doc.nodeAt(t),r=(0,sP.jB)(e,t);if(!s)return void console.warn("[getElementToPin] nodeAt null for $pos",n);let o=(0,sP.TK)(n,()=>!0).reverse();for(o.push({start:n.start(n.depth+1),pos:t,depth:n.depth,node:s});o.length;){let t=o.shift();if(!t)continue;let n=(0,tf.jg)(t.node),s=(0,pA.X6)(t.node),l=(0,pR.hj)(t.node),a=n||t.node.isAtom?t.pos:t.start;if(r=(0,sP.jB)(e,a),!i&&n&&t.depth>2||s||l)break}for(;(null==r?void 0:r.offsetParent)===null&&r.parentElement;)r=r.parentElement;return r};var pN=i(91285),pF=i(73549),pL=i(12419),pV=i(74553),pW=i(34630),pG=i(85448),pB=i(95011),pU=i(73077);class pH extends pN.Rv{processAsyncNode(e){let{jsonNode:t,prosemirrorNode:i,processor:n,context:s,editor:r}=e;if(!n.detectNode(i))return!1;let o=n.getNodeId(i);return!!o&&(this.processedAttrs[o]?t.attrs=this.processedAttrs[o]:(this.originalAttrs[o]||(this.originalAttrs[o]={...t.attrs}),this.generatePromises[o]||(this.generatePromises[o]=this.processNode({nodeId:o,prosemirrorNode:i,processor:n,context:s,editor:r}))),!0)}async processNode(e){let t,{nodeId:i,prosemirrorNode:n,processor:s,context:r,editor:o}=e;try{t=await s.processNode(n,r)}catch(e){console.error("[AsyncNodeGenerator] Error processing ".concat(s.nodeType,".  This should not happen, AsyncNodeProcessors should handle error cases, reverting to originalAttrs"),e),t=this.originalAttrs[i]}this.streamingCardIndex===r.cardIndex?this.processedAttrs[i]=t:this.updateAsyncNodeAttrs(o,i,s,t)}updateAsyncNodeAttrs(e,t,i,n){requestAnimationFrame(()=>{let s=(0,tp.xe)(e.state.doc,e=>i.getNodeId(e)===t)[0];if(!s)return void console.error("[AsyncNodeGenerator] Could not find node with id=".concat(t));e.commands.updateAttributesAtPos(s.pos,n)})}constructor({editor:e,interactionId:t,docId:i,workspaceId:n,theme:s}){let r=new pB.t;super({transform:async(o,l)=>{if("data"!==o.event)return void l.enqueue(o);let{index:a,id:d}=o.data;this.streamingCardIndex=a,(0,pG.LS)(o.data.content,l=>{if("text"!==l.type)try{let o=sH.bP.fromJSON(e.schema,l);for(let c of this.processors)if(this.processAsyncNode({jsonNode:l,processor:c,prosemirrorNode:o,context:{docId:i,workspaceId:n,interactionId:t,cardIndex:a,cardId:d,theme:s,imageStore:r},editor:e}))break}catch(e){o.data.cardComplete&&console.error("[AsyncNodeGenerator] Error creating prosemirror node from jsonNode:",l,e)}}),o.data.cardComplete&&this.streamingCardIndex++,l.enqueue(o)}}),this.streamingCardIndex=0,this.generatePromises={},this.originalAttrs={},this.processedAttrs={},this.processors=(0,pU.i8)()}}var pK=i(1057);class pJ extends pN.Rv{constructor(e){super({transform:async(t,i)=>{if("data"!==t.event)return void i.enqueue(t);let{content:n}=t.data,s=n.attrs.id,r=n.content.find(e=>"cardAccentLayoutItem"===e.type);r&&!r.attrs.background&&(r.attrs.background=(0,pK.gN)(e,s),(0,r1.wJ)(n)),i.enqueue(t)}})}}var pq=i(57067);let pY=function(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(0===t.length)throw Error("Cannot have empty path");let s=[...t],r={...e},o=r,l=0;for(;t.length>0;){if(!o.content)throw Error("Can't surround a node with children");let e=s.shift();if(0===s.length){let t=o.content.slice(0,e);t.push(i),o.content=t;break}if(l<n){let t=o.content.slice(0);t.splice(e,1,{...t[e]}),o.content=t,o=o.content[e]}else{let t=o.content.slice(0,e+1);t.splice(e,1,{...t[e]}),o.content=t,o=o.content[e]}l++}return r};class p$ extends pN.Rv{constructor(e){super({transform:async(t,i)=>{if("done"===t.event||"cancel"===t.event)return void i.enqueue(t);let n=(0,eu.KA)(),s=null;for(let r of function* e(t){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];if("text"===t.type){if(!t.text)return;let e=t.text.startsWith(" "),r=t.text.split(" ").filter(e=>e.length>0);if(0===r.length)return;for(let t=0;t<r.length;t++){let o=r.slice(0,t+1).join(" ");e&&(o=" "+o);let l={type:"text",text:o};yield pY(n,s,l,i)}return}if(!t.content)return void(yield pY(n,s,t,i));let r=0;for(let o of t.content){for(let t of e(o,i,n,[...s,r]))yield t;r++}}(t.data.content,1)){if(!r)continue;s&&i.enqueue(s),s={id:t.id,event:"data",data:{...t.data,content:r,cardComplete:!1}};let o=(0,ec.qy)(e)(n.getState());await pX(o)}s&&i.enqueue({...s,data:{...s.data,cardComplete:!0}})}}),this.index=0,this.startTime=performance.now()}}let pX=e=>new Promise(t=>pq.wg(t,e));var pQ=i(7836);let pZ=e=>{let{enabled:t,type:i}=e,n=(0,aE.O2)(i),s=(0,v.useRef)(!0);(0,v.useEffect)(()=>{if(!t)return;let e=n.scroller;if(!e)return;let i=()=>{n.isAtBottom(40)?s.current=!0:s.current=!1},r=()=>{s.current=!1};return e.addEventListener("wheel",i,{passive:!0}),e.addEventListener("touchend",i,{passive:!0}),e.addEventListener("touchstart",r,{passive:!0}),e.addEventListener("touchmove",r,{passive:!0}),()=>{e.removeEventListener("wheel",i),e.removeEventListener("touchend",i),e.removeEventListener("touchstart",r),e.removeEventListener("touchmove",r)}},[n,t]);let r=(0,v.useCallback)(()=>{s.current&&(null==n||n.scrollToBottom({behavior:"auto"}))},[n]);return(0,en.wb)(r,100)};var p0=i(30188);let p1="[CONTENT_FILTER]",p6=()=>(0,s.jsxs)(iP.F,{status:"error",variant:"solid",children:[(0,s.jsx)(iz._,{}),(0,s.jsx)(rE.T,{children:(0,s.jsxs)(o.B,{children:[(0,s.jsx)("strong",{children:(0,s.jsx)(m.x6,{id:"7g5s/N"})}),(0,s.jsx)(l.E,{children:(0,s.jsx)(m.x6,{id:"Xp43Ei"})})]})})]}),p2=()=>(0,s.jsxs)(iP.F,{status:"loading",colorScheme:"gray",children:[(0,s.jsx)(t4.y,{size:"sm",me:2}),(0,s.jsxs)(rE.T,{children:[(0,s.jsx)("strong",{children:(0,s.jsx)(m.x6,{id:"n2cF1o"})})," ",(0,s.jsx)(m.x6,{id:"BFGwQA"})]})]}),p5=e=>{let{editor:t,content:i,cardId:n,cardIndex:s,cardComplete:r}=e,o=(0,tp.xe)(t.state.doc,e=>(0,hF.jg)(e))[0],l=(0,tp.xe)(t.state.doc,e=>(0,hF.jg)(e)&&e.attrs.id===n)[0];if(!o)throw Error("Doc does not have a first card");let a=l?{from:l.pos,to:l.pos+l.node.nodeSize}:0===s?{from:o.pos,to:o.pos+o.node.nodeSize}:t.state.doc.nodeSize-3;l&&(null==l?void 0:l.node.attrs.fontScale)&&(null==i?void 0:i.attrs)&&(i.attrs.fontScale=l.node.attrs.fontScale);try{if(t.commands.insertContentAt(a,i,{updateSelection:0===s}),r&&0===s){let e=(0,r4.s)(t.state.doc.resolve(o.pos));e&&t.commands.command(t=>{let{tr:i}=t;return i.setSelection(e),!0})}}catch(e){console.warn("[useCreateFromStream] ERROR updating card"),console.warn(e)}},p4=e=>{let{docId:t,aiOptions:i,store:n,generateInfo:s,editor:r}=e;if(!s.lastEventId||!s.streamId||!s.interactionId)return void console.error("Trying to resume stream for doc (id=".concat(t,") without lastEventId or streamId or interactionId"),{lastEventId:s.lastEventId,streamId:s.streamId,interactionId:s.interactionId});pV.B.trackRequestSent(n,{interface:"wizard",streaming:!0,interactionId:s.interactionId,isResuming:!0});let{stream:o}=(0,pL.yf)({interactionId:s.interactionId,lastEventId:s.lastEventId,streamId:s.streamId,retries:3}),l={preserveLayouts:!!i.preserveLayouts,imageOptions:i.imageOptions||{},docFormatKey:(0,r6.IZ)((0,r6.lI)(r)).formatType,theme:(0,ex.SJ)(n.getState())};return(0,pF.f6)({stream:o,docId:t,interactionId:s.interactionId,lastCompletedCardId:s.lastCompletedCardId,lastCompletedCardIndex:s.lastCompletedCardIndex,options:l,store:n})},p3=(e,t)=>{let i=(0,eu.GV)(ex.SJ),n=(0,eu.CU)(),s=(0,eu.jL)(),r=(0,eu.GV)(ex.aQ),o=(0,R.u)("streamResumingEnabled"),l=(0,v.useRef)(!1),{isStreaming:a,onStreamData:d,onStreamDone:c,onStreamError:u,onStreamStart:x,onAbortStream:h}=p8({docId:e}),m=pZ({enabled:a,type:"editor"}),p=(0,v.useCallback)(async s=>{let o,a;if(!t)return;x({editor:t});let h=p7({streamResponse:s,editor:t,store:n,theme:i,docId:e,workspaceId:r}).getReader();try{for(;!(o=await h.read()).done;)if(o.value){if(l.current){console.log("[AIStream] has aborted -- no longer reading stream");break}a=o.value,"data"===a.event&&(d({value:a.data,editor:t,streamResponse:s}),m())}}catch(e){u({err:e,streamResponse:s,editor:t});return}l.current||(a&&"done"!==a.event&&console.error('[AIStream] incomplete stream: last message received is not `event="done"`',{lastMessage:a}),c({editor:t,streamResponse:s}))},[e,r,t,d,c,u,x,m,n,i]);(0,au.V)(()=>{if(!t||!r||a||!e)return;let s=new URLSearchParams(window.location.search);if(s.get("mockStream"))return void p(function(e){let t,{docId:i,theme:n,store:s,editor:r}=e;console.log("[createMockStreamResponse] Creating mock visualization stream"),r.commands.setContent("");let o=(0,tU.$F)(),{stream:l,cancel:a}=(t=!1,{cancel:()=>{t=!0},stream:new pN.ZY({start(e){let i='\n<section>\n<custom-code>\n<h1>The Psychology of Decision-Making</h1>\n<p>\n\uD83E\uDD14 The psychology of decision-making is the study of how people make\ndecisions.\n</p>\n<img prompt="A beautiful sunset over a calm ocean" />\n</custom-code>\n</section>\n'.split("<section>").filter(e=>e.trim()).map(e=>"<section>"+e),n=1;(async()=>{for(let s of i){if(t)break;await new Promise(e=>setTimeout(e,800)),e.enqueue({id:n.toString(),event:"content",data:s.trim()}),n++}t||(await new Promise(e=>setTimeout(e,300)),e.enqueue({id:n.toString(),event:"done",data:"stop"})),e.close()})().catch(t=>{e.error(t)})}})});(0,pF.Ct)({stream:l,onCancel:a,interactionId:o,options:{preserveLayouts:!1,imageOptions:{provider:"aiGenerated",model:"flux-1-schnell",license:"All"},docFormatKey:"deck",theme:n,promptKey:"GenerateDeckWithLayout"},bufferCards:1,docId:i,store:s});let d=s.getState().AIStream.streams[o];if(!d)throw Error("Expected StreamResponse to be created by createWizardStream");return d}({docId:e,theme:i,store:n,editor:t}));let l=(0,ec.A0)(e)(n.getState()),d=(0,ec.kg)(n.getState());if(l){"running"===l.status&&p(l);return}if(!o||d)return;let{generateInfo:c,generateStatus:u,aiOptions:x}=(0,r6.lI)(t);if("streaming"!==u){if(s.get("restream")){let i=p4({docId:e,aiOptions:x,generateInfo:{...{interactionId:c.interactionId,streamId:c.streamId},lastEventId:"0",lastCompletedCardId:null,lastCompletedCardIndex:null},editor:t,store:n});i&&p(i)}return}let h=(0,eO.Jo)(n.getState());if((null==h?void 0:h.createdTime)&&Date.now()-new Date(h.createdTime).getTime()>36e5)return void t.commands.updateAttributesAtPos(0,{generateStatus:"done"});let m=p4({docId:e,generateInfo:c,editor:t,store:n,aiOptions:x});m&&p(m)},[e,t,n,r,x,u,d,c,o,p,a,s,i],[t,r]),(0,v.useEffect)(()=>()=>{let i=(0,ec.A0)(e)(n.getState());t&&i&&"running"===i.status&&(l.current=!0,h({editor:t,streamResponse:i}))},[s,e,h,t,n])},p8=e=>{let{docId:t}=e,i=(0,iI.d)(),n=(0,eu.jL)(),r=(0,eu.CU)(),[o,l]=(0,v.useState)(!1),a=(0,R.u)("debugLogging"),d=(0,v.useRef)(null);(0,v.useEffect)(()=>()=>{d.current&&(i.close(d.current),d.current=null)},[i]);let c=(0,v.useCallback)(()=>{d.current||(d.current=i({id:"ai-generating-toast",isClosable:!1,render:()=>p2(),position:"top",duration:null,onCloseComplete:()=>{d.current=null}}))},[i]),u=(0,v.useCallback)(e=>{let{editor:t}=e;t&&(l(!0),t.commands.setAIGenerationRunning(!0),c())},[c]),x=(0,v.useCallback)(e=>{let{editor:t,value:i,streamResponse:n}=e;if(!n||!t)return;let{id:s,cardComplete:r,index:o,content:l}=i;p5({editor:t,content:l,cardId:s,cardIndex:o,cardComplete:r})},[]),h=(0,v.useCallback)(e=>{var t,o,a;let{editor:c,streamResponse:u}=e;if(!c||!u)return;let x=u.id,{aiOptions:h}=(0,r6.lI)(c);l(!1),c.commands.setAIGenerationRunning(!1),c.commands.updateAttributesAtPos(0,{generateStatus:"done"}),n((0,ec.m7)({id:x,status:"complete"}));let p=(0,p0.b)(c),g=new TextEncoder().encode(JSON.stringify(c.state.doc.toJSON())),j=p?p/g.byteLength:void 0;pV.B.trackStreamComplete(r,x,{imageProvider:null==(t=h.imageOptions)?void 0:t.provider,ydocToJsonRatio:j});let f=(0,eO.Jo)(r.getState());f&&(null==(o=f.docGenerateInput)?void 0:o.id)?(0,tK.w)((null==(a=h.imageOptions)?void 0:a.provider)==="aiGenerated"?"generateV2WithImages":"generateV2",f.organization,x):(0,tK.w)("wizardCreation",null==f?void 0:f.organization,x),d.current&&i.update(d.current,{title:(0,s.jsx)(m.x6,{id:"nm7VEQ",values:{GAMMA_ARTIFACT_PROPER_NOUN:ej.TP}}),status:"success",position:"top",duration:3e3,isClosable:!0})},[n,r,i]);return{isStreaming:o,onStreamStart:u,onStreamData:x,onStreamError:(0,v.useCallback)(e=>{let{err:o,editor:c,streamResponse:u}=e,x=u.id,{errorMessage:h,errorCode:p}=(0,pW._D)(o);console.error("StreamError: ",{interactionId:x,errorMessage:h,errorCode:p,stack:o.stack}),a&&console.log("StreamError: (".concat(p,") - ").concat(h),o.stack),l(!1),c.commands.setAIGenerationRunning(!1),c.commands.updateAttributesAtPos(0,{generateStatus:"done"}),n((0,ec.m7)({id:x,status:"error"}));let g=(0,ec.U7)(x)(r.getState());if(g){let{latency:e,...i}=g;(0,tU.tB)({...i,errorName:"StreamError",errorMessage:h,errorCode:p,outputMessage:"",latency:e||performance.now()-i.startTime,isResuming:u.isResuming,docId:t})}d.current&&(h===p1?i.update(d.current,{render:p6,position:"top",duration:null,isClosable:!0}):(i.update(d.current,{title:(0,s.jsx)(m.x6,{id:"sbsGk/"}),status:"error",position:"top",duration:null,isClosable:!0}),(0,pQ.EJ)(o,{customErrorType:"useCreateFromStream"})))},[n,t,a,r,i]),onStreamDone:h,onAbortStream:(0,v.useCallback)(e=>{let{editor:t,streamResponse:i}=e,s=i.id;l(!1),t.commands.setAIGenerationRunning(!1),pV.B.trackStreamAbort(r,{interactionId:s,abortReason:"leave-editor"}),n((0,ec.l0)({id:s}))},[n,r])}},p7=e=>{let{streamResponse:t,editor:i,store:n,docId:s,workspaceId:r,theme:o}=e,{id:l,stream:a}=t,d=!0;return a.pipeThrough(new pJ(o)).pipeThrough(new p$(t.id)).pipeThrough(new pH({editor:i,interactionId:l,docId:s,workspaceId:r,theme:o})).pipeThrough(new pN.Rv({transform(e,t){if("done"===e.event&&"content_filter"===e.finishReason)return void t.error(Error(p1));t.enqueue(e)}})).pipeThrough((0,pF.po)(e=>{d&&"data"===e.event&&(pV.B.trackStreamStart(n,{interactionId:l,docId:s}),t.isResuming&&(i.commands.deleteCardsAfter(t.lastCompletedCardId||null),t.lastCompletedCardId&&(console.log("[AIStream] resumeIncompleteAsyncNodes",t.lastCompletedCardId),(0,k.FN)({editor:i,lastCompletedCardId:t.lastCompletedCardId,theme:o,interactionId:l}))),d=!1),"data"===e.event&&e.data.cardComplete&&i.commands.updateNestedAttributesAtPos(0,{generateInfo:{lastEventId:e.id,lastCompletedCardId:e.data.id,lastCompletedCardIndex:e.data.index}})}))},p9="doc_archived_warning",ge=(e,t)=>{let i=(0,iI.d)(),[n]=(0,ik.u6W)(),[r]=(0,ik.BL9)(),o=null==e?void 0:e.site;(0,v.useEffect)(()=>()=>{i.close(p9)},[]),(0,v.useEffect)(()=>{if(o&&!o.archived)return void i.close(p9);!e||e.site||e.archived||i.close(p9)});let a=(0,v.useCallback)(async()=>{if((null==o?void 0:o.id)&&await r({variables:{id:o.id},optimisticResponse:{unarchiveSite:{id:o.id,__typename:"Site"}}}),!(null==e?void 0:e.id))return;let t={id:e.id};await n({variables:t,optimisticResponse:{unarchiveDoc:{...t,archived:!1,__typename:"Doc"}}}),i({title:(0,s.jsx)(m.x6,{id:"o8va6N"}),status:"success",position:"top",isClosable:!0,duration:5e3})},[null==e?void 0:e.id,i,null==o?void 0:o.id,n,r]);(0,v.useEffect)(()=>{e&&t===t2.i.COLLABORATIVE&&((null==o?void 0:o.archived)||(null==e?void 0:e.archived))&&!i.isActive(p9)&&i({id:p9,title:(0,s.jsxs)(l.E,{"data-testid":"trash-confirmation-toast",children:[(0,s.jsx)(m.x6,{id:"fkHPZu"})," ",(0,s.jsx)(i7.N,{textDecoration:"underline",onClick:a,children:(0,s.jsx)(m.x6,{id:"7wfwc0"})})]}),status:"warning",position:"top",isClosable:!1,duration:null})},[e,t,a,o,i,n])};var gt=i(70744);let gi=e=>{let{togglePagesPanel:t,isPagesPanelOpen:i}=e,n=(0,eu.jL)(),s=(0,eu.CU)(),{asPath:r}=(0,e9.useRouter)(),o=(0,eu.GV)(te.og),l=(0,v.useRef)(i),a=(0,ta.jv)(r),d=(0,v.useRef)(t);d.current=t,(0,aq.w)(()=>{let e=(0,e1.iZ)("pages")(s.getState()),t=d.current;a&&e?(t({override:"closed",disableTransition:!1}),l.current=!0):a||t({override:l.current?"open":"closed",disableTransition:!1})},[a]),(0,v.useEffect)(()=>{let e=a?(0,_.Xb)()?"mobile":o||"desktop":null;n((0,te.ey)({previewSize:e}))},[n,a,o])};var gn=i(10945);let gs=e=>{let t=(0,gn.m)(),i=(0,eu.GV)((0,dv.Jn)(e));(0,v.useEffect)(()=>{i&&t.cache.updateQuery({query:iV.iVk,variables:{id:e}},e=>{if(!(null==e?void 0:e.doc))return e;let t=e.doc;return t.titleEdited?e:{doc:{...t,title:i}}})},[i,t,e])},gr=e=>{let{onDuplicateClick:t,loading:i}=e;return(0,s.jsxs)(iP.F,{status:"error",children:[(0,s.jsx)(iz._,{}),(0,s.jsxs)(o.B,{spacing:"0.5",children:[(0,s.jsxs)(rk.X,{fontSize:"md",children:["This ",(0,s.jsx)(m.x6,{id:"fqi2wk",values:{GAMMA_ARTIFACT_PROPER_NOUN:ej.TP}})]}),(0,s.jsx)(rE.T,{children:(0,s.jsxs)(tI.T,{align:"start",children:[(0,s.jsx)(m.x6,{id:"8NNo+O",values:{GAMMA_ARTIFACT_PROPER_NOUN:ej.TP},components:{0:(0,s.jsx)("br",{})}}),(0,s.jsx)(a.$,{size:"sm",mt:2,alignSelf:"flex-end",onClick:t,isLoading:i,rightIcon:(0,s.jsx)(x.g,{icon:u.Ju_}),children:(0,s.jsx)(m.x6,{id:"euc6Ns"})})]})})]})]})},go=e=>{let t=(0,iI.d)(),i=(0,eu.jL)(),[n,r]=(0,v.useState)(!1),[o,l]=(0,v.useState)(!1),a=(0,v.useRef)(null),d=(0,at.Z)(),c=(0,v.useCallback)(()=>{l(!0),d({docId:e,source:"editor_y_doc_too_large_duplicate",newWindow:!0}).finally(()=>{l(!1)})},[d,e]);(0,v.useEffect)(()=>rn.LF.on(rn.DN.Y_DOC_IS_TOO_LARGE,()=>{r(!0)}),[]),(0,v.useEffect)(()=>{if(!n)return;i((0,ig.wm)({docEditorType:t2.i.PUBLIC_STATIC}));let e=()=>(0,s.jsx)(gr,{onDuplicateClick:c,loading:o});a.current?t.update(a.current,{render:e}):a.current=t({render:e,position:"top",duration:null})},[n,t,i,c,o])};var gl=i(2031);let ga=(e,t)=>{let{isUnauthorized:i}=(0,tE.m)();(0,Z.JQ)(n=>{!0!==i&&void 0!==i&&(n.track(Z.VV.DOC_VIEWED,{doc_id:e}),t===t2.i.EXAMPLE_STATIC&&n.track(Z.VV.EXAMPLE_VIEWED,{doc_id:e}))},[e,t,i]),(0,gl.t)();let n=(0,R.u)("realUserMetrics"),s=t===t2.i.COLLABORATIVE&&n,r=(0,R.u)("rumKeystrokeSampleRate");(0,dl.Br)(s,r)},gd=e=>{let t=(0,y.wA)(),i=(0,Z.st)();(0,v.useEffect)(()=>{let n,s=()=>{let s=(0,eu.KA)().getState();n=(0,ex.vy)(s),(0,da.nO)(e),t((0,ex.B6)({isEditingDisabled:!0})),null==i||i.trackDocEvent(Z.VV.DOC_PRINTED)},r=()=>{t((0,ex.B6)({isEditingDisabled:!1})),t((0,ex.x0)({expandedCardsMap:n}))};return window.addEventListener("beforeprint",s),window.addEventListener("afterprint",r),()=>{window.removeEventListener("beforeprint",s),window.removeEventListener("afterprint",r)}},[t,e,i])},gc="doc-root",gu=(0,v.memo)(function(e){let{isConnected:t}=e;return(0,s.jsx)(r.s,{flex:1,alignItems:"center",justifyContent:"center",color:"gray.500",children:t?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(o.B,{spacing:"4",children:[(0,s.jsx)(l.E,{fontSize:"2xl",children:(0,s.jsx)(m.x6,{id:"svObPT",values:{GAMMA_ARTIFACT_PROPER_NOUN:ej.TP}})}),(0,s.jsx)(a.$,{as:b(),href:"/",variant:"plain",alignSelf:"center",size:"lg",leftIcon:(0,s.jsx)(x.g,{icon:u.v02}),children:(0,s.jsx)(m.x6,{id:"RWLG6K"})})]}),(0,s.jsx)(eD.x,{children:(0,s.jsx)(eP.P,{showShortcuts:!1})})]}):(0,s.jsx)(eJ.r,{isConnected:!1,description:(0,s.jsx)(m.x6,{id:"BBDdvg",values:{GAMMA_ARTIFACT_PROPER_NOUN:ej.TP}}),size:"lg",bg:"none"})})}),gx=e=>{let{doc:t,user:i,docEditorType:n,editor:r,editorWrapperDiv:o,aspectRatioValue:l}=e,[a,d]=(0,v.useState)(!1),c=(0,S.h6)(t,i),u=(0,y.d4)(ex.wC),x=n===t2.i.COLLABORATIVE&&!c,h=x&&u===tb.w.SLIDE_VIEW,m=n===t2.i.COLLABORATIVE&&(!i||u===tb.w.DOC_PREVIEW);return(0,v.useEffect)(()=>T.R.on("isInOnboardingChecklist",e=>{d(e)}),[]),m?(0,s.jsx)(ao.d,{docWorkspace:null==t?void 0:t.organization}):h?(0,s.jsx)(eH,{forceShow:a}):x?(0,s.jsx)(sB,{editor:r,editorWrapperDiv:o,aspectRatioValue:l}):null},gh=(0,t5.VL)(e=>{var t;let{docEditorType:i}=e,n=(0,eu.jL)(),{docId:o,isUnauthorized:l,passwordRequired:a,setCollaborativeEditorInstance:u,editor:x}=(0,t5.mi)(),m=(0,eu.GV)(eO.Jo),g=(0,eu.GV)(ex.Uu),f="fluid"!==g.cardDimensions?h.EXPORT_ASPECT_RATIOS[g.cardDimensions]:void 0,b=(0,eu.GV)(tr.Gd),y=(0,eu.GV)(tr.df),{isConnected:T}=(0,E.u)(),A=(0,iS.mm)(null==m?void 0:m.id),[R,O]=(0,v.useState)(null),_=(0,eu.GV)(te.og),P=null!==_,z=(0,eu.GV)(ex.wC),M=(0,eu.GV)(ex.nD),N=(0,et.Iy)("manage",m),{user:F}=(0,et.ur)();ge(m,i),p3(o,R===o?x:void 0),gs(o),ga(o,i),tl(x,i===t2.i.COLLABORATIVE),(0,gt.K)(),pD();let{editorAnimationsClass:L,editorAnimationsCSSVars:V}=(0,tc.O)({editor:x,scrollingParentSelector:".".concat(gc),disabledOverride:P});pP(),aG(x,".".concat(gc)),aX(x),t6(),gd(x),(0,S.tr)(m,i===t2.i.COLLABORATIVE);let W=(0,v.useRef)(null),G=(0,ee.rd)(),B=(0,v.useMemo)(()=>(0,tu.Vx)(G),[G]),U=ij();console.debug("%c[DocEditorComponent] RENDER - ".concat(o),"background-color: gold");let H=(0,eR.u)("multipageEditor"),{toggleSitePagesPanel:K,isSitePagesPanelOpen:J}=uL(!H),{togglePagesPanel:q,isPagesPanelOpen:Y}=aD(H),{toggleCommentsPanel:$,isCommentsPanelOpen:X}=rj(),{isDesignPartnerPanelOpen:Q}=lT();pT(),t0(),go(o),(0,v.useEffect)(()=>()=>{n((0,e1.fi)()),n((0,tr.cL)())},[n]),gi({togglePagesPanel:K,isPagesPanelOpen:J});let Z=(0,ta.dv)(b)&&(null==b?void 0:b.navEnabled)&&!P&&z!==tb.w.SLIDE_VIEW,ei=(0,v.useCallback)(()=>!!(x&&x.state.selection.empty),[x]),{leftPanelLifecycle:en,rightPanelLifecycle:es,globalPanelLifecycle:er}=(0,eq.uR)(),eo=(0,eK.nk)(null==m?void 0:m.organization),el=(0,e_.E)(null==m?void 0:m.title,eo),ea=p.Ru._({id:"X6YCwz"}),ed=p.Ru._({id:"abr3hR"}),ec=ib(),eh=(0,v.useMemo)(()=>{let e=Z?{"--doc-padding-top":tx.D0}:void 0;return{...B,...ec,...e}},[B,ec,Z]),em=(null==m?void 0:m.disabled)||(null==m?void 0:m.archived)||(null==b?void 0:b.archived)||P,ep=!(0,D.fS)(window.location.href),eg=P&&y?(0,s.jsx)(tt,{docId:o}):ep&&x?(0,s.jsx)(hr,{isDark:G,editor:x,scrollingParentSelector:".".concat(gc),editorWrapperEl:W.current,docEditorType:i,isSitePagesPanelOpen:J,toggleSitePagesPanel:K,isPagesPanelOpen:Y,togglePagesPanel:q,isCommentsPanelOpen:X,toggleCommentsPanel:$}):null,ej=49*!!eg+63*(null!=m&&!!m.disabled),ef=null==F||null==(t=F.settings)?void 0:t.needsEditorOnboarding;return(0,s.jsx)(iS.Z0.Provider,{value:A,children:(0,s.jsx)(w.UU,{children:(0,s.jsxs)(r.s,{direction:"column",h:"100%",children:[(0,s.jsx)(lR,{disabled:null==m?void 0:m.disabled,docId:o}),(0,s.jsx)("style",{id:"editorStyleOverride",children:"body {overflow: hidden;}"}),(0,s.jsx)(j(),{children:(0,s.jsx)("title",{children:el})}),M&&(0,s.jsx)(a3,{editor:x}),(0,s.jsx)(ti.X2,{isEnabledFn:ei}),eg,a?(0,s.jsx)(aF,{docId:o}):l?(0,s.jsx)(gu,{isConnected:T}):(0,s.jsxs)(r.s,{id:"doc-main",direction:"row",w:"100%",h:"calc(100% - ".concat(ej,"px)"),sx:{"--editor-padding-top":"".concat(ej,"px")},"data-testid":"doc-editor-root",ref:W,children:[ef&&M&&(0,s.jsx)(eT,{editor:x}),(0,s.jsx)(e3,{panelLifecycle:en,editor:x}),(0,s.jsx)(r.s,{flex:"1",direction:"column",position:"relative",minWidth:"0",h:"100%",children:(0,s.jsxs)(d.a,{flex:"1",overflowY:"auto",overflowX:"hidden",pos:"relative",minWidth:"0",h:"100%",className:(0,c.cx)(gc,L,Q&&"design-partner-panel-open"),style:{"--ai-editing-label":"'".concat(ea,"'"),"--ai-generating-label":"'".concat(ed,"'"),...V},sx:eh,children:[P&&(0,s.jsx)(iw,{loading:o!==R,docId:o,editor:x,previewSize:_},"".concat(o,"__preview-editor")),i===t2.i.PUBLIC_STATIC?(0,s.jsx)(aJ,{docId:o,snapshotId:null==m?void 0:m.currentSnapshotId,scrollingParentSelector:".".concat(gc),onCreate:u}):i===t2.i.EXAMPLE_STATIC?(0,s.jsx)(ad,{docId:o,snapshotId:null==m?void 0:m.currentSnapshotId,scrollingParentSelector:".".concat(gc),onCreate:u}):(0,s.jsxs)(eZ.Y.Provider,{value:er,children:[(0,s.jsx)(td.H2,{doc:m,docId:o,readOnly:em,hideForPreview:P,onCreate:e=>{if(u(e),n((0,I.mO)({editor:e})),O(e.gammaDocId),N){let t=(0,ex.SJ)((0,eu.KA)().getState());(0,k.CP)({editor:e,rootNode:e.state.doc,theme:t,interactionId:(0,C.$)()})}e.on("destroy",()=>{O(null),n((0,I.mO)({editor:null}))})},scrollingParentSelector:".".concat(gc),animationsExtensionEnabled:!0},"".concat(o,"__collaborative-editor")),x&&(0,s.jsx)(tw,{editor:x})]}),Z&&(0,s.jsx)(iE,{}),!P&&(0,s.jsx)(ae,{editor:x},o)]})}),z===tb.w.SLIDE_VIEW&&(0,s.jsx)(hq,{editor:x}),(0,s.jsx)(e4,{panelLifecycle:es,editor:x}),(0,s.jsx)(th.A,{editorId:"main",children:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(gx,{doc:m,user:F,docEditorType:i,editor:x,editorWrapperDiv:W.current,aspectRatioValue:f}),U&&(0,s.jsx)(m5,{})]})})]}),(0,s.jsx)(rt,{doc:m,editor:x}),N&&m&&i===t2.i.COLLABORATIVE&&(0,s.jsx)(sc,{doc:m})]})})})});var gm=i(56570),gp=i(36062);let gg=e=>{let{theme:t,onClick:i,isChecked:n,index:r,startIndex:a}=e;return(0,s.jsxs)(d.a,{gridColumnStart:r+1-a,display:a>r?"none":"block",gridRow:1,as:gp.Q,p:2,transition:"all 0.2s ease-in-out",bgColor:n?"deepocean.100":"white",textAlign:"left",tabIndex:0,borderRadius:"md",transitionProperty:"common",transitionDuration:"normal",_focus:{boxShadow:n?void 0:"outline"},outline:"none",onClick:i,_hover:{bgColor:n?"deepocean.100":"deepocean.50"},onKeyDown:e=>{("Enter"===e.key||" "===e.key)&&i()},"data-theme-id":t.id,"data-testid":n?"current-theme-preview":void 0,cursor:"pointer",children:[(0,s.jsx)(lg.q,{theme:t}),(0,s.jsxs)(o.B,{direction:"row",spacing:1,pt:1,children:[n&&(0,s.jsx)(s4.S,{w:3,h:"auto",mr:1,color:"deepocean.700"}),(0,s.jsx)(l.E,{fontSize:"sm",noOfLines:1,"data-testid":"theme-name",color:n?"deepocean.700":void 0,children:t.name})]})]})};gg.displayName="DemoDocThemePreview";let gj="white",gf=e=>{let{templateTheme:t,setTheme:n,currentThemeId:l}=e,d=(0,y.d4)(ex.wC)===tb.w.SLIDE_VIEW,[c,h]=(0,v.useState)([]),[p,g]=(0,v.useState)(!1),[j,f]=(0,v.useState)(0),b=(0,eQ.h5)({base:3,md:4,lg:5})||3;(0,v.useEffect)(()=>{i.e(1147).then(i.bind(i,71147)).then(e=>{h(e.GLOBAL_THEMES)})},[]);let w=[...t?[t]:[],...c.filter(e=>e.id!==(null==t?void 0:t.id))],C=(0,v.useCallback)(e=>{1===e?f(e=>e+1):f(e=>e-1)},[]);return d?(0,s.jsx)(s.Fragment,{}):(0,s.jsx)(N.Z,{children:(0,s.jsxs)(r.s,{w:"100%",position:"absolute",bottom:0,left:0,bgColor:gj,zIndex:"sticky",direction:"column",borderTop:"3px solid var(--chakra-colors-trueblue-500)",minH:12,p:2,justifyContent:"center",children:[(0,s.jsx)(r.s,{alignItems:"flex-end",justify:"flex-end",children:(0,s.jsx)(a.$,{variant:"ghost",size:"sm",rightIcon:(0,s.jsx)(x.g,{icon:p?u.tdl:u.GF6}),onClick:()=>g(e=>!e),children:p?(0,s.jsx)(m.x6,{id:"yz7wBu"}):(0,s.jsx)(m.x6,{id:"x6tIe+"})})}),(0,s.jsx)(r.s,{justify:"flex-start",align:"flex-start",bgColor:gj,w:"100%",children:p&&(0,s.jsxs)(o.B,{direction:"row",align:"center",justify:"center",w:"100%",children:[(0,s.jsx)(H.K,{"aria-label":"Left",onClick:()=>C(-1),variant:"ghost",isDisabled:0===j,icon:(0,s.jsx)(x.g,{icon:u.Uec})}),(0,s.jsx)(gm.x,{w:"100%",flex:1,overflow:"hidden",padding:2,transition:"all 0.2s ease-in-out",templateColumns:["repeat(".concat(b,", calc(100% / ").concat(b," - 1em))")],gap:"0 1em",bgColor:gj,children:w.map((e,t)=>(0,s.jsx)(gg,{index:t,startIndex:j,isChecked:e.id===l,theme:e,onClick:()=>{n(e)}},e.id))}),(0,s.jsx)(H.K,{"aria-label":"Right",variant:"ghost",isDisabled:j+b>w.length,onClick:()=>C(1),icon:(0,s.jsx)(x.g,{icon:u.vmR})})]})})]})})};var gb=i(20591);let gv=[{description:(0,s.jsx)(m.x6,{id:"gtWy3j"}),shortcut:["←","→"]},{description:(0,s.jsx)(m.x6,{id:"UCxK2S"}),shortcut:["↑","↓"]},{description:(0,s.jsx)(m.x6,{id:"IkakN2"}),shortcut:"Esc"},{description:(0,s.jsx)(m.x6,{id:"CgmvBu"}),shortcut:"S"},{description:(0,s.jsx)(m.x6,{id:"rEj/lx"}),shortcut:"Enter"},{description:(0,s.jsx)(m.x6,{id:"dQU33K"}),shortcut:"Mod+Shift+O"},{description:(0,s.jsx)(m.x6,{id:"K0Oq/D"}),shortcut:"R"}],gy=e=>{let{editorWrapperEl:t,scrollingParentSelector:i}=e,{enterSlideView:n,exitSlideView:r,setExitedFullscreenByClick:o,isFullscreen:l,enterFullscreen:d,exitFullscreen:c}=dj({editorWrapperEl:t,scrollingParentSelector:i}),h=(0,eu.GV)(ex.wC),g=(0,v.useRef)(h);return(0,v.useEffect)(()=>{g.current=h},[h]),(0,s.jsxs)(e8.z,{children:[(0,s.jsxs)(e7.e,{isAttached:!0,size:"sm",children:[(0,s.jsx)(J.Tz,{label:h===tb.w.DOC_VIEW?(0,s.jsx)(m.x6,{id:"ek5OwP",values:{GAMMA_ARTIFACT_PROPER_NOUN:ej.TP}}):(0,s.jsx)(m.x6,{id:"43JI0J",values:{GAMMA_ARTIFACT_PROPER_NOUN:ej.TP}}),children:(0,s.jsx)(a.$,{variant:h===tb.w.DOC_VIEW?"solid":"plain",cursor:h===tb.w.SLIDE_VIEW?"pointer":"auto",onClick:()=>{h===tb.w.SLIDE_VIEW&&r()},leftIcon:(0,s.jsx)(x.g,{icon:u.h8M}),children:(0,s.jsx)(m.x6,{id:"7Zdnlq"})})}),(0,s.jsx)(J.Tz,{label:h===tb.w.SLIDE_VIEW?(0,s.jsx)(m.x6,{id:"Zfr5aa",values:{GAMMA_ARTIFACT_PROPER_NOUN:ej.TP}}):(0,s.jsx)(m.x6,{id:"rK6Cev",values:{GAMMA_ARTIFACT_PROPER_NOUN:ej.TP}}),children:(0,s.jsx)(a.$,{variant:h===tb.w.SLIDE_VIEW?"solid":"plain",cursor:h===tb.w.DOC_VIEW?"pointer":"auto",onClick:()=>{h===tb.w.DOC_VIEW&&n({fullscreen:!1})},leftIcon:(0,s.jsx)(x.g,{icon:u.UoT}),children:(0,s.jsx)(m.x6,{id:"FOoDGS"})})})]}),h===tb.w.SLIDE_VIEW&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(iD.c,{orientation:"vertical"}),(0,s.jsx)(J.Tz,{label:l?(0,s.jsx)(m.x6,{id:"IkOhTI"}):(0,s.jsx)(m.x6,{id:"q8ARHN"}),children:(0,s.jsx)(H.K,{size:"sm","aria-label":l?p.Ru._({id:"IkOhTI"}):p.Ru._({id:"q8ARHN"}),borderRadius:"md",icon:(0,s.jsx)(x.g,{icon:l?u.gr3:u.oZK}),onClick:l?()=>{o(!0),c()}:d})}),(0,s.jsxs)(F.A,{children:[(0,s.jsx)(ea.W,{children:(0,s.jsx)(a.$,{size:"sm",variant:"plain",fontWeight:"normal",children:(0,s.jsx)(m.x6,{id:"77Emn0"})})}),(0,s.jsxs)(W.h,{border:"1px solid #eee !important",children:[(0,s.jsx)(u5.R,{}),(0,s.jsx)(su.q,{}),(0,s.jsx)(G.e,{children:(0,s.jsx)(gb.c,{list:gv})})]})]})]})]})},gw=(0,v.memo)(function(e){let{scrollingParentSelector:t,editorWrapperEl:i}=e;(0,eu.GV)(eO.Jo);let n=(0,v.useRef)(null);return(0,s.jsx)(r.s,{ref:n,bg:"white",borderBottom:"3px solid var(--chakra-colors-trueblue-600)",position:"absolute",zIndex:"overlay",top:0,left:0,right:0,p:2,alignItems:"flex-start",justifyContent:"flex-start",pr:6,children:(0,s.jsx)(r.s,{direction:"column",w:"100%",children:(0,s.jsx)(gy,{editorWrapperEl:i,scrollingParentSelector:t})})})});var gC=i(90610),gk=i(16446);let gE=e=>{let{toggleToCPanel:t,initializeToCPanel:i,isToCPanelOpen:n}=e,{breakpoints:{xl:s}}=(0,gk.D)(),r=(0,eu.GV)(ex.wC),[o,l]=(0,v.useState)(r!==tb.w.SLIDE_VIEW),[a,d]=(0,v.useState)(!1),c=(0,y.wA)();(0,tX.Vg)(()=>{i()},[s,t,i,c],[]),(0,tX.Vg)(()=>{r===tb.w.SLIDE_VIEW?(l(n),t({disableTransition:!1,override:"closed"})):a&&r===tb.w.DOC_VIEW&&t({disableTransition:!1,override:o?"open":"closed"})},[t,n,o,r,a],[r])},gS="doc-root",gI=(0,t5.VL)(e=>{var t;let{docEditorType:i=t2.i.COLLABORATIVE}=e,{docId:n,setCollaborativeEditorInstance:o,editor:l}=(0,t5.mi)(),a=(0,eu.GV)(eO.Jo);ga(n,i),(0,gt.K)(),pD(),pP(),aG(l,".".concat(gS)),aX(l),t6(),gd(l),(0,S.tr)(a,i===t2.i.COLLABORATIVE);let c=(0,v.useRef)(null),u=null==a?void 0:a.theme,[x,h]=(0,v.useState)(()=>u),m=(0,eu.jL)(),p=(0,v.useRef)(!1),{data:g}=(0,ik.YDl)({variables:{docId:n,snapshotId:null==a?void 0:a.currentSnapshotId},skip:!(null==a?void 0:a.currentSnapshotId)}),f=null==g||null==(t=g.snapshot)?void 0:t.content.default;console.debug("%c[DemoDocEditorComponent] RENDER - ".concat(n),"background-color: gold"),(0,v.useEffect)(()=>{u&&!p.current&&(h(u),p.current=!0)},[u]),(0,v.useEffect)(()=>{if(!l)return;let e=null==x?void 0:x.config.accentBackgrounds;if(!e||0===e.length){f&&l.commands.setContent(f);return}l.commands.updateThemeAccentImages(e)},[l,x,f]);let{togglePanel:b,isPanelOpen:y,initPanel:w}=(0,eq.ww)(gC.g);gE({toggleToCPanel:b,isToCPanelOpen:y,initializeToCPanel:w}),(0,v.useEffect)(()=>()=>{m((0,e1.fi)())},[m]);let{leftPanelLifecycle:C}=(0,eq.uR)();return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("style",{id:"editorStyleOverride",children:"body {overflow: hidden;}"}),(0,s.jsx)(j(),{children:(0,s.jsxs)("title",{children:["".concat(a?(0,cQ.B)(a.title)+" | ":""),"Gamma"]})}),(0,s.jsxs)(r.s,{id:"doc-main",direction:"row",w:"100%",h:"100%","data-testid":"doc-editor-root",ref:c,children:[(0,s.jsx)(e3,{panelLifecycle:C}),(0,s.jsxs)(r.s,{flex:"1",direction:"column",position:"relative",minWidth:"0",h:"100%",children:[l&&(0,s.jsx)(gw,{scrollingParentSelector:".".concat(gS),editorWrapperEl:c.current,setTheme:h,currentThemeId:(null==x?void 0:x.id)||(null==u?void 0:u.id),templateTheme:u}),(0,s.jsxs)(d.a,{flex:"1",overflowY:"auto",overflowX:"hidden",minWidth:"0",h:"100%",className:gS,children:[(0,s.jsx)(aJ,{docId:n,snapshotId:null==a?void 0:a.currentSnapshotId,scrollingParentSelector:".".concat(gS),onCreate:o,theme:x,hideMadeWithGammaBadge:!0}),(0,s.jsx)(hq,{editor:l,showNavigationControls:!0})]})]}),(0,s.jsx)(gf,{setTheme:h,currentThemeId:(null==x?void 0:x.id)||(null==u?void 0:u.id),templateTheme:u})]})]})}),gT="body",gA=e=>{let t=(0,eu.GV)((0,ec.A0)(e)),[i,n]=(0,v.useState)(!1),s=(0,v.useCallback)(()=>{0===window.scrollY&&n(!0)},[]),r=(0,tX.wb)(s,100);return(0,v.useEffect)(()=>{if(!(0,_.Xb)()||(null==t?void 0:t.status)!=="complete"||i)return;let e=setTimeout(async()=>{window.scrollTo({top:0,behavior:"smooth"}),window.addEventListener("scroll",r)},1200);return()=>{clearTimeout(e),window.removeEventListener("scroll",r)}},[null==t?void 0:t.status,i,r]),i};var gR=i(93587);let gO=()=>{let[e,t]=(0,v.useState)("up");return(0,v.useEffect)(()=>{if(!window)return;let e=window.scrollY||0,i=t=>Math.abs(t-e)>0,n=t=>t>e&&!(e>0&&0===t)&&!(t>0&&0===e),s=()=>{let s=window.scrollY||0;i(s)&&(t(n(s)?"down":"up"),e=s>0?s:0)},r=eL()(()=>window.requestAnimationFrame(s),500,{leading:!0});return window.addEventListener("scroll",r),()=>window.removeEventListener("scroll",r)},[]),e};var g_=i(11818);let gD=(0,v.memo)(()=>(0,s.jsx)(d.a,{w:"100%",h:"1px",bg:"gray.200",my:2,mx:-2,_first:{display:"none"},_last:{display:"none"}}));gD.displayName="MenuDivider";let gP=(0,v.memo)(e=>{let{icon:t,children:i,...n}=e;return(0,s.jsx)(d.a,{as:"button",w:"100%",textAlign:"start",px:2,py:2,fontWeight:"500",color:"gray.600",transition:"all 0.2s",_hover:{bg:"gray.50"},_focus:{outline:"none"},_active:{bg:"gray.200"},borderRadius:"md",...n,children:(0,s.jsxs)(e8.z,{children:[t&&(0,s.jsx)(d.a,{children:t}),(0,s.jsx)(d.a,{children:i})]})})});gP.displayName="MenuItem";let gz=e=>{var t,i,n;let{isOpen:a,onClose:d,doc:c,file:h,editingEnabled:p,commentsEnabled:g,onCommentFeedOpen:j}=e,{user:f}=(0,et.ur)(),{isConnected:b}=(0,ik.utY)(),y=(0,at.Z)(),{editor:w}=(0,t5.mi)(),C=(0,cQ.B)(null==c?void 0:c.title),k=(null==c?void 0:c.createdTime)&&(0,cX.A)((0,ni.A)(c.createdTime),"PPP"),E=null==c?void 0:c.id,{isOpen:S,onClose:I,onOpen:T}=(0,iF.E)({id:"analyticsPanelDisclosure"}),[A]=(0,ik.fQ5)(),[O]=(0,ik.u6W)(),D=(0,Z.st)(),P=(0,et.Iy)("manage",c)&&!!f,z=(0,et.Iy)("manage",c)&&!!f,M=!!(f&&0!==f.workspaceMemberships.length),N=(0,R.u)("mobileSharePanel"),F=(null==c||null==(t=c.comments)?void 0:t.filter(e=>e.status===ik.EB6.Open).length)||0,L=!!f&&z,V=(0,v.useCallback)(async()=>{if(!w)return;let e=w.getJSON();await y({docId:E,initialContent:e,source:"editor_toolbar_doc_menu_duplicate",newWindow:!1}),d()},[E,y,w,d]),W=(0,v.useCallback)(()=>{null==D||D.track(Z.VV.DOC_ANALYTICS_VIEWED,{docId:E,source:"toolbar_doc_menu",type:"personal",device:(0,_.ZI)()}),T()},[D,E,T]),G=(0,v.useCallback)(e=>()=>{if(!E)return;let t={id:E};e?A({variables:t,optimisticResponse:{archiveDoc:{...t,archived:e,__typename:"Doc"}}}):O({variables:t,optimisticResponse:{unarchiveDoc:{...t,archived:e,__typename:"Doc"}}})},[A,E,O]),B=null==c||null==(i=c.createdBy)?void 0:i.displayName;return(0,s.jsxs)(s.Fragment,{children:[c&&(0,s.jsx)(J.mr,{isOpen:a,onClose:d,children:(0,s.jsxs)(r.s,{w:"100%",h:a?"100%":void 0,direction:"column",children:[(0,s.jsxs)(e8.z,{align:"flex-start",p:6,children:[(0,s.jsxs)(o.B,{spacing:0,children:[(0,s.jsx)(l.E,{fontSize:"2xl",fontWeight:"bold",letterSpacing:"tight",noOfLines:6,children:C}),(0,s.jsx)(l.E,{fontSize:"sm",color:"gray.500",noOfLines:1,children:(0,s.jsx)(m.x6,{id:"jlWdji",values:{createdTime:k}})}),(0,s.jsx)(J.Tz,{label:null==c||null==(n=c.createdBy)?void 0:n.email,children:(0,s.jsx)(l.E,{display:"inline-block",fontSize:"sm",color:"gray.500",noOfLines:1,children:(0,s.jsx)(m.x6,{id:"X5XWlK",values:{createdByDisplayName:B}})})})]}),(0,s.jsx)(tT.h,{}),(0,s.jsx)(tS.J,{mt:-2,onClick:e=>{e.stopPropagation(),d()}})]}),(0,s.jsxs)(o.B,{p:3,pt:0,children:[(0,s.jsx)(gD,{}),z&&!N&&(0,s.jsx)(gP,{icon:(0,s.jsx)(x.g,{icon:u.t5Z,fixedWidth:!0}),onClick:()=>{d(),iq.R.emit("openSharePanel",{view:"invite"})},children:(0,s.jsx)(m.x6,{id:"iyga2M"})}),g&&(0,s.jsx)(gP,{icon:(0,s.jsx)(x.g,{icon:u.DN2,fixedWidth:!0}),onClick:()=>{d(),j()},children:(0,s.jsxs)(e8.z,{spacing:2,children:[(0,s.jsx)(m.x6,{id:"VbyRUy"}),(0,s.jsx)(i4.E,{colorScheme:"gray",variant:"solid",borderRadius:"full",lineHeight:1,children:F})]})}),p&&(0,s.jsx)(gP,{icon:(0,s.jsx)(x.g,{icon:u.fyG,fixedWidth:!0}),onClick:()=>{d(),iq.R.emit("toggleThemeBlock",!0)},"data-testid":"mobile-theme-button",children:(0,s.jsx)(m.x6,{id:"W15e8B"})}),(0,s.jsx)(gD,{}),b&&(0,s.jsxs)(s.Fragment,{children:[L&&(0,s.jsx)(gP,{icon:(0,s.jsx)(x.g,{icon:u.q9c,fixedWidth:!0}),onClick:()=>{d(),W()},children:(0,s.jsx)(m.x6,{id:"qcxxQS"})}),M&&(0,s.jsx)(gP,{icon:(0,s.jsx)(x.g,{icon:u.jPR,fixedWidth:!0}),onClick:V,children:(0,s.jsx)(m.x6,{id:"euc6Ns"})}),P&&(0,s.jsx)(gP,{icon:(0,s.jsx)(x.g,{icon:u.mHA,fixedWidth:!0}),onClick:()=>{d(),iq.R.emit("openSharePanel",{view:"export"})},children:(0,s.jsx)(m.x6,{id:"U8WPSi"})}),z&&(0,s.jsx)(gD,{}),z?c.archived?(0,s.jsx)(gP,{icon:(0,s.jsx)(x.g,{icon:u.IbX,fixedWidth:!0}),onClick:G(!1),children:(0,s.jsx)(m.x6,{id:"yKu/3Y"})}):(0,s.jsx)(gP,{"data-testid":"doc-menu-trash-button",color:"red.500",icon:(0,s.jsx)(x.g,{icon:u.yLS,fixedWidth:!0}),onClick:G(!0),children:(0,s.jsx)(m.x6,{id:"1C/Yjq"})}):null]})]})]})}),c&&S&&(0,s.jsx)(cU,{doc:c,file:h,isAnalyticsPanelOpen:S,onAnalyticsPanelClose:I,mode:"full"}),p&&(0,s.jsx)(x8,{})]})},gM=e=>{let{doc:t,file:i,editor:n,commentsEnabled:r,editingEnabled:o,onCommentFeedOpen:a,onTocOpen:d,onEditClick:c}=e,[h]=(0,xk.F)(em.E.lastHomeUrl,"/"),{user:m}=(0,et.ur)(),p=(0,et.Iy)("manage",t),g=p||o,j=gO(),f=(0,y.d4)(ex.SJ),w=(0,g_.mm)(f),C=(0,sq.Mw)(f),k=C?"white":"gray.700",E=C?"deepocean.300":"deepocean.700",S=(0,v.useCallback)(()=>{n&&n.commands.undo()},[n]),{isOpen:I,onOpen:T,onClose:A}=(0,ez.j)();if(!t)return null;let R={color:k,_hover:{bg:"transparent",color:E},_active:{bg:"transparent",color:E}};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(gz,{doc:t,file:i,isOpen:I,onClose:A,editingEnabled:o,commentsEnabled:r,onCommentFeedOpen:a}),(0,s.jsxs)(e8.z,{p:1,px:2,bg:"gray.50",shadow:"lg",w:"100%",position:"fixed",top:0,transitionProperty:"common",transitionDuration:"normal",transform:"up"==j?"translate(0px,0px)":"translate(0px,-100%)",opacity:+("up"==j),zIndex:"sticky",sx:{...(0,g_.wL)(w,f,!0),border:"none",filter:"none",borderRadius:0},color:k,children:[m&&(0,s.jsx)(b(),{href:h,passHref:!0,children:(0,s.jsx)(xE.Z,{isDark:C,iconButtonProps:R})}),(0,s.jsx)(l.E,{flex:1,fontSize:"sm",noOfLines:1,ms:2,color:k,children:null==t?void 0:t.title}),(0,s.jsxs)(e7.e,{variant:"ghost",spacing:0,children:[p&&(0,s.jsx)(H.K,{...R,fontSize:"sm",onClick:c,icon:(0,s.jsx)(x.g,{icon:u.zLW}),"aria-label":"Edit"}),p&&m&&(0,s.jsx)(H.K,{...R,"aria-label":"Share",icon:(0,s.jsx)(x.g,{icon:u.t5Z}),onClick:()=>{iq.R.emit("openSharePanel",{view:"invite"})}}),o&&(0,s.jsx)(H.K,{...R,"aria-label":"Undo",onClick:S,icon:(0,s.jsx)(x.g,{icon:u.U23})}),!o&&(0,s.jsx)(H.K,{...R,"aria-label":"Open table of contents",onClick:d,icon:(0,s.jsx)(x.g,{icon:u.ITF})}),g&&(0,s.jsx)(H.K,{...R,"aria-label":"Open toolbar",onClick:T,icon:(0,s.jsx)(x.g,{icon:u.Dwc})})]})]})]})},gN="undefined"!=typeof navigator&&navigator.share,gF={logo:(0,s.jsx)(J.Fu,{w:"120px"}),title:(0,s.jsx)(m.x6,{id:"ytdpwT"}),image:{src:"/_next/static/media/open-on-desktop.c247900d.png",height:515,width:673,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAGCAMAAADJ2y/JAAAAbFBMVEVhkK+AmLjE1eZ7hscqesDOxspOiLhxg8WbosXldY+lpcfEzNbfg6g/aqoMgcrNtqwAar88e7e6scLY19fTxc1ghdB8kb/LobvycKTvdabga5/OjbDccKLh8PDTysqWo8CmwtdylNzdwM7kkbYLGm3dAAAAIHRSTlMBZ+H6Pvz8/vwd/X/1GPRmGPP+9+T9kf47/oWvnSOSPaadVQ4AAAAJcEhZcwAACxMAAAsTAQCanBgAAAA7SURBVHicBcGHAYAgEACxQ4EHxd4rqPvvaAKUs4oXoLNnEnPT1ikXsYqqS4VzVuPD2y/fttKYYTzO3f9BTgLGLDtB5QAAAABJRU5ErkJggg==",blurWidth:8,blurHeight:6},body:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(m.x6,{id:"w+pzcB",values:{GAMMA_PROPER_NOUN:ej.On}})," ",(0,s.jsx)("span",{role:"img","aria-label":"magic wand",children:"\uD83E\uDE84"})]}),helpText:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(m.x6,{id:"6Y8GST"})," ",(0,s.jsx)("span",{role:"img","aria-label":"email",children:"✉️"})]})},gL={edit:gF,editFromToolbar:{...gF,helpText:(0,s.jsx)(m.x6,{id:"b0JDPO"})}},gV=e=>{let{variant:t,onClose:i}=e,n=(0,X.fW)()?u.CeG:u.dmS,r=(0,eu.GV)(eO.Jo)||null,c=(0,Z.st)(),h=(0,v.useCallback)(async()=>{if(r)try{null==c||c.track(Z.VV.MOBILE_EDITOR_SWITCH_TO_DESKTOP_DRAWER_SHARE_BUTTON_TAPPED,{doc_id:r.id,doc_title:r.title,source:t});let e=(0,D.LN)({docId:r.id,docTitle:r.title,absolute:!0});await navigator.share({title:r.title,url:"".concat(A.$.FRONTEND_URL,"/signin?redirect_to=").concat(encodeURIComponent(e))})}catch(e){console.error("Error sharing doc",e)}},[r,t,c]);(0,v.useEffect)(()=>{null==c||c.track(Z.VV.MOBILE_EDITOR_SWITCH_TO_DESKTOP_DRAWER_VIEWED,{doc_id:null==r?void 0:r.id,doc_title:null==r?void 0:r.title,source:t})},[r,t,c]);let p=gL[t];return(0,s.jsxs)(o.B,{children:[(0,s.jsxs)(o.B,{spacing:2,alignItems:"center",children:[(0,s.jsxs)(o.B,{spacing:4,children:[p.logo&&p.logo,p.image&&(0,s.jsx)(d.a,{w:"100%",p:6,children:(0,s.jsx)(nz._,{src:p.image.src,alt:"Open on desktop"})})]}),(0,s.jsx)(B.D,{size:"md",variant:"fancy",textAlign:"center",children:p.title})]}),(0,s.jsx)(l.E,{textAlign:"center",children:p.body}),(0,s.jsxs)(o.B,{spacing:6,alignItems:"center",children:[p.helpText&&(0,s.jsx)(l.E,{fontSize:"sm",color:"gray.500",children:p.helpText}),(0,s.jsxs)(o.B,{spacing:2,w:"100%",children:[gN&&(0,s.jsx)(a.$,{width:"100%",onClick:h,size:"md",variant:"plain",leftIcon:(0,s.jsx)(x.g,{icon:u.Exz}),children:(0,s.jsx)(m.x6,{id:"Z8lGw6"})}),(0,s.jsx)(a.$,{width:"100%",onClick:i,size:"sm",variant:"ghost",colorScheme:"gray",rightIcon:(0,s.jsx)(x.g,{icon:n}),children:(0,s.jsx)(m.x6,{id:"xGe7OC"})})]})]})]})},gW=(0,v.memo)(e=>{let{isOpen:t,onClose:i,variant:n}=e;return(0,s.jsxs)(J.mr,{isOpen:t,onClose:i,drawerProps:{placement:"bottom",isFullHeight:!1},drawerContentProps:{h:"auto",w:"100%",p:6},children:[(0,s.jsx)(gV,{variant:n,onClose:i}),(0,s.jsx)(tS.J,{position:"absolute",insetEnd:3,top:3,onClick:i,"aria-label":"Close"})]})});gW.displayName="SwitchToDesktopDrawer";let gG=e=>{let{openDrawer:t,docId:i,hasScrolledToTop:n=!1}=e,{isFirstMobileDocGeneration:s}=(0,e9.useRouter)().query,r=(0,v.useRef)(!1),o=(0,eu.GV)((0,ec.A0)(i)),l=!s||(null==o?void 0:o.status)!=="complete"||!n||r.current,a=(0,v.useCallback)(()=>{window.scrollY/(document.documentElement.scrollHeight-window.innerHeight)*100>20&&(t(),r.current=!0)},[t]),d=(0,tX.wb)(a,100);(0,v.useEffect)(()=>{if(!l)return window.addEventListener("scroll",d),()=>{window.removeEventListener("scroll",d)}},[d,l])},gB=e=>{let{doc:t,file:i,docEditorType:n,commentsEnabled:o=!0}=e,[l,a]=(0,v.useState)(null),{docId:d,setCollaborativeEditorInstance:c,editor:u}=(0,t5.mi)(),{isOpen:x,onOpen:h,onClose:m}=(0,ez.j)({id:"mobile-comment-feed-panel-drawer"}),{isOpen:p,onOpen:g,onClose:j}=(0,ez.j)({id:"mobile-toc-drawer"}),[f,b]=(0,v.useState)(null),y=gA(d),{isOpen:C,onOpen:k,onClose:E}=(0,ez.j)({id:"switch-to-desktop-drawer"});gG({docId:d,openDrawer:k,hasScrolledToTop:y});let S=(0,v.useCallback)(()=>{k(),a("editFromToolbar")},[k]);console.debug("%c[MobileEditorWrapper] RENDER - ".concat(d),"background-color: gold");let I=(0,R.u)("mobileEditing"),T=(0,et.Iy)("edit",t),A=I&&T;return(0,s.jsx)(w.UU,{children:(0,s.jsxs)(r.s,{ref:(0,v.useCallback)(e=>b(e),[]),direction:"column",flex:1,mt:"48px",children:[(0,s.jsx)(gM,{doc:t,file:i,editor:u,onCommentFeedOpen:h,commentsEnabled:!A&&o,editingEnabled:A,onTocOpen:g,onEditClick:S}),n===t2.i.PUBLIC_STATIC?(0,s.jsx)(aJ,{docId:d,snapshotId:null==t?void 0:t.currentSnapshotId,scrollingParentSelector:gT,onCreate:c}):n===t2.i.EXAMPLE_STATIC?(0,s.jsx)(ad,{docId:d,snapshotId:null==t?void 0:t.currentSnapshotId,scrollingParentSelector:gT,onCreate:c}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(td.H2,{doc:t,docId:d,readOnly:!A,onCreate:c,scrollingParentSelector:gT}),u&&(0,s.jsx)(tw,{editor:u})]}),C&&(0,s.jsx)(gW,{isOpen:C,onClose:E,variant:null!=l?l:"edit"}),o&&x&&(0,s.jsx)(J.mr,{isOpen:x,onClose:m,drawerProps:{autoFocus:!1,returnFocusOnClose:!1},children:(0,s.jsx)(rp,{onClose:m,editor:u})}),p&&(0,s.jsx)(J.mr,{isOpen:p,onClose:j,drawerProps:{returnFocusOnClose:!1},children:(0,s.jsx)(gR.M,{rootElement:f,handleClose:j})}),(0,s.jsx)(xY,{doc:t,file:i,showButton:!1}),(0,s.jsx)(th.A,{children:(0,s.jsx)(ae,{editor:u})})]})})},gU=(0,t5.VL)(e=>{let{docEditorType:t}=e,{docId:i,isUnauthorized:n,passwordRequired:o,editor:l}=(0,t5.mi)();ga(i,t);let{editorAnimationsClass:a,editorAnimationsCSSVars:d}=(0,tc.O)({editor:l,scrollingParentSelector:gT});p3(i,l),(0,gt.K)();let c=(0,v.useRef)(null),u=(0,eu.GV)(eO.Jo);console.debug("%c[MobileDocViewerComponent] RENDER - ".concat(i),"background-color: gold");let x=t===t2.i.COLLABORATIVE;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(j(),{children:[(0,s.jsxs)("title",{children:["".concat(u?(0,cQ.B)(u.title)+" | ":""),"Gamma"]}),(0,s.jsx)("meta",{name:"viewport",content:"width=device-width, user-scalable=no"})]}),(0,s.jsx)(K.mL,{styles:{html:{overflowX:"hidden"},body:{overflow:"hidden scroll",WebkitOverflowScrolling:"touch"}}}),o?(0,s.jsx)(aF,{docId:i}):n?(0,s.jsxs)(r.s,{flex:1,alignItems:"center",justifyContent:"center",color:"gray.500",fontSize:"2xl",p:6,textAlign:"center",children:["It looks like you don't have access to this"," ",ej.TP,"."]}):(0,s.jsx)(r.s,{id:"doc-main",direction:"column",w:"100%",h:"100%","data-testid":"doc-editor-root",ref:c,flex:"1",className:a,style:{...d},children:(0,s.jsx)(gB,{doc:u,docEditorType:t,commentsEnabled:x})})]})})},31312:()=>{},31615:(e,t,i)=>{"use strict";i.d(t,{fH:()=>u,hw:()=>h,vj:()=>x});var n=i(6029),s=i(81278),r=i(6772),o=i.n(r),l=i(91938),a=i(11403),d=i(37028);let c=["/signin","/signup","/invitations/workspaces/[workspaceId]"],u=()=>{let e=(0,s.useRouter)().pathname;return!(0,a.En)()||c.includes(e)?null:(0,n.jsx)("style",{children:".grecaptcha-badge { visibility: hidden; }"})},x=()=>(0,n.jsx)(o(),{src:"https://www.google.com/recaptcha/enterprise.js?render=".concat(l.$.RECAPTCHA_SCORING_KEY),async:!0,defer:!0}),h=async e=>(await (0,d.f)(50,100)(()=>!!window.grecaptcha).catch(()=>{throw Error("Timed out waiting for grecaptcha")}),new Promise((t,i)=>{grecaptcha.enterprise.ready(async()=>{try{let i=await grecaptcha.enterprise.execute(l.$.RECAPTCHA_SCORING_KEY,{action:e});t(i)}catch(e){console.log(e),i(e)}})}))},32412:(e,t,i)=>{"use strict";i.d(t,{e:()=>p});var n=i(55729),s=i(26312),r=i(15342),o=i(85011),l=i(95889),a=i(86932),d=i(27196),c=i(60300),u=i(53891),x=i(43634),h=i(39162);let m=function(e,t){let i=!(arguments.length>2)||void 0===arguments[2]||arguments[2],n=(0,o.H1)("editor"),s=n.scroller;if(!s)return;e.commands.turnOffSpotlight();let r=s.scrollHeight-s.offsetHeight;if("down"===t){if(!(n.isAtBottom(90)&&i&&e.commands.spotlightNextCard(!1,"top"))){let e=s.scrollTop+.5*s.offsetHeight;e>r-150&&(e=r),n.scrollTo({top:e})}}else if(!(n.isAtTop(90)&&i&&e.commands.spotlightNextCard(!0,"bottom"))){let e=s.scrollTop-.5*s.offsetHeight;e<150&&(e=0),n.scrollTo({top:e})}},p=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l.Y2.MAIN_PRESENT_VIEW,{editor:t}=(0,h.m)(),i=(0,l.st)(),{enabled:o}=(0,d.kY)(t),p=(0,r.CU)();return{handlePresentNavigationEvent:(0,n.useCallback)(n=>{let{eventType:r,eventKey:o,method:d="keyboard",payload:h={}}=n;if(!t)return!1;let g=p.getState(),j=(0,x.FI)(g),f=null==j?void 0:j.pos,b=!!(t&&j&&(0,c.UE)(t,j)),v=Object.keys((0,x.Ev)(g).tree);switch(r){case"toggleSpotlight":return b?null==t||t.commands.turnOffSpotlight():null==t||t.commands.spotlightNextBlock(),p.dispatch((0,x.tB)()),!0;case"goToCard":{let{cardId:e}=h;if(!e)return!1;return t.commands.spotlightCardById(e,b),p.dispatch((0,x.mF)({attached:!1})),!0}case"arrowRight":if((0,s.up)(),p.dispatch((0,x.mF)({attached:!1})),null==i||i.trackDocEvent(l.VV.PRESENT_MODE_NAVIGATED,{direction:l.Fk.CARD_NEXT,method:"keyboard"===d?l.fG.KEYBOARD:l.fG.BUTTON_CLICK,source:e,...void 0!==o&&{key:o}}),b)return t.commands.spotlightNextBlock();return t.commands.spotlightNextCard();case"arrowLeft":if((0,s.up)(),p.dispatch((0,x.mF)({attached:!1})),null==i||i.trackDocEvent(l.VV.PRESENT_MODE_NAVIGATED,{direction:l.Fk.CARD_PREV,method:"keyboard"===d?l.fG.KEYBOARD:l.fG.BUTTON_CLICK,source:e,...void 0!==o&&{key:o}}),b)return t.commands.spotlightNextBlock(!0);return t.commands.spotlightNextCard(!0);case"arrowDown":if((0,s.up)(),p.dispatch((0,x.mF)({attached:!1})),!b){let e=(0,a.TX)(t.state.selection);return t.commands.goToNextExpandableNode()||m(t,"down",!e),!0}return null==i||i.trackDocEvent(l.VV.PRESENT_MODE_NAVIGATED,{direction:l.Fk.TELEPROMPTER_DOWN,method:"keyboard"===d?l.fG.KEYBOARD:l.fG.BUTTON_CLICK,source:e,...void 0!==o&&{key:o}}),t.commands.spotlightNextBlock();case"arrowUp":if((0,s.up)(),p.dispatch((0,x.mF)({attached:!1})),!b){let e=(0,a.TX)(t.state.selection);return t.commands.goToNextExpandableNode(!0)||m(t,"up",!e),!0}return null==i||i.trackDocEvent(l.VV.PRESENT_MODE_NAVIGATED,{direction:l.Fk.TELEPROMPTER_UP,method:"keyboard"===d?l.fG.KEYBOARD:l.fG.BUTTON_CLICK,source:e,...void 0!==o&&{key:o}}),t.commands.spotlightNextBlock(!0);case"restart":if(v[0])return(0,s.up)(),t.commands.spotlightCardById(v[0]),p.dispatch((0,x.mF)({attached:!1})),!0;return!1;case"cancelCurrentAction":{let e=b&&f;if(t.commands.spotlightCollapseNearestExpandableNode(e?f:null))return t.commands.reHighlightExpandableNode(),!0;if(b)return t.commands.turnOffSpotlight(),!0;return p.dispatch((0,x.mF)({attached:!1})),null==i||i.track(l.VV.CARD_COLLAPSED,{is_present_mode:!0,method:"escape_key"}),t.commands.ascendUpToParentCard(!1)}case"toggleExpanded":{let e=b&&f;if(t.commands.expandOrCollapseExpandableNode(e?f:null))return!0;if(e){let e=t.state.doc.resolve(f).parent;if(e&&(0,u.p8)(e))return(0,u.bG)(e.attrs.id,!1),t.commands.spotlightNextBlock(!0),!0;return t.commands.spotlightCollapseNearestExpandableNode(f)}return!1}default:return!1}},[i,t,e,p]),spotlightingByBlock:o}}},36679:(e,t,i)=>{"use strict";i.d(t,{FM:()=>h,Lt:()=>x,Ur:()=>u,Yi:()=>m});var n=i(33750),s=i.n(n),r=i(55729),o=i(68301),l=i(15342),a=i(61385),d=i(43634),c=i(28615);let u="disable-card-size-animations",x=()=>{let e=(0,o.u)("autoZoomToFit"),t=(0,l.GV)(d.G7);return(0,r.useEffect)(()=>{t||g()},[t]),null!=t?t:e},h=()=>{let e=(0,l.GV)(d.$i),t=(0,r.useRef)(),i=x(),n=!c.rS&&!c.GC&&i;(0,r.useEffect)(()=>{let i=!t.current;t.current=e,e&&n&&(document.body.classList.add(u),m(),requestAnimationFrame(()=>{document.body.classList.remove(u)}),i&&setTimeout(()=>{document.body.classList.add(u),m(),requestAnimationFrame(()=>{document.body.classList.remove(u)})},a.M2))},[e,n])},m=()=>{let e=document.documentElement.clientHeight,t=document.querySelector('[data-animate-value="presentCurrent"][data-card-scroll-element]');if(!t)return;let i=p(t,e,1);if(i<.9){let n=(1-i)/3;i=p(t,e,i+n)}(0,l.KA)().dispatch((0,d.ed)({zoomLevel:i}))},p=(e,t,i)=>{e.style.setProperty("--zoom-level",i.toString());let n=e.scrollHeight,r=s()(i*t/n,c.hQ?.5:a.bq,1);return e.style.setProperty("--zoom-level",r.toString()),r},g=()=>{document.querySelectorAll("[data-card-scroll-element]").forEach(e=>{e.style.removeProperty("--zoom-level")})}},37869:(e,t,i)=>{"use strict";i.d(t,{Z:()=>u,l:()=>c});var n=i(6029),s=i(24302),r=i(26420),o=i(77650),l=i(55729);let a=()=>(0,n.jsxs)("svg",{width:"100%",height:"100%",fill:"none",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 40 40",children:[(0,n.jsx)("g",{clipPath:"url(#a)",fill:"currentColor",children:(0,n.jsx)("path",{d:"M12.277 4.575a14.16 14.16 0 0 0-4.297 5.769c-.93 2.281-1.195 4.683-.809 7.145a13.256 13.256 0 0 0 2.97 6.542 14.11 14.11 0 0 0 5.866 4.165c2.317.88 4.791 1.122 7.338.712l10.308-1.63-2.631-16.62-11.962 1.895.918 5.77 5.636-.894.749 4.695-3.79.604a7.214 7.214 0 0 1-3.887-.423 7.673 7.673 0 0 1-3.126-2.293 7.383 7.383 0 0 1-1.581-3.585 7.492 7.492 0 0 1 .398-3.898 7.744 7.744 0 0 1 2.27-3.15c1.025-.858 2.22-1.389 3.56-1.606l10.115-1.605L29.344 0 19.036 1.63c-2.547.398-4.828 1.4-6.759 2.945ZM29.85 36.608c-.639-.519-1.448-.796-2.232-1.026-1.907-.53-3.887-.736-5.866-.748-1.98 0-3.96.217-5.866.748-.785.23-1.593.507-2.233 1.026-1.183 1.05.277 1.968 1.231 2.306 2.185.808 4.55 1.074 6.868 1.086 2.317 0 4.683-.278 6.868-1.086.953-.338 2.414-1.256 1.23-2.306Z"})}),(0,n.jsx)("defs",{children:(0,n.jsx)("clipPath",{id:"a",children:(0,n.jsx)("path",{fill:"#fff",d:"M0 0h40v40H0z"})})})]});var d=i(3083);let c=e=>({separatorColor:(0,s.dU)(e?"whiteAlpha.600":"gray.200","whiteAlpha.600"),borderHoverColor:(0,s.dU)(e?void 0:"deepocean.200",void 0),textColor:(0,s.dU)(e?"gray.50":"gray.800","gray.50"),secondaryTextColor:(0,s.dU)(e?"gray.400":"gray.600","gray.400"),editedTextColor:(0,s.dU)(e?"gray.200":"gray.950","gray.200"),lastItemColor:(0,s.dU)(e?"gray.500":"gray.400","gray.500")}),u=(0,l.memo)(e=>{let{isDark:t,iconButtonProps:i,boxProps:s}=e,{separatorColor:l,borderHoverColor:u}=c(t);return(0,n.jsx)(d.f,{"aria-label":o.Ru._({id:"i0qMbr"}),role:"group",borderRadius:"md",border:"none",icon:(0,n.jsx)(r.a,{boxSize:8,border:"1px solid",borderColor:l,p:"0.3rem",transitionProperty:"border-color",transitionDuration:"normal",_groupHover:{borderColor:u},borderRadius:"md",...s,children:(0,n.jsx)(a,{})}),...i})});u.displayName="GammaHomeButton"},39099:(e,t,i)=>{"use strict";i.d(t,{z:()=>b});var n=i(6029),s=i(40452),r=i(26420),o=i(77650),l=i(55729),a=i(75074),d=i(15342),c=i(45373),u=i(6046),x=i(23664),h=i(63255),m=i(39659);let p={fontFamily:"var(--chakra-fonts-body) !important",fontWeight:"500",lineHeight:"1.5 !important",textTransform:"none",letterSpacing:"normal !important",textAlign:"start !important",margin:"0 !important",color:"gray.700 !important",background:"none !important",border:"0 none !important",padding:"0 !important",content:'""'},g={".block-paragraph,.block-heading,.block-title,.block-todo,.block-numbered,.block-bullet":{...p,margin:0,my:"0.75em",":first-child":{mt:"0px !important"},":last-child":{mb:"0px !important"}},".block-paragraph":{fontSize:"1em"},".block-heading,.block-title":{fontWeight:"bold",lineHeight:{fontSize:"1.25"},'.heading[level="1"]':{fontSize:"1.5em"},'.heading[level="2"]':{fontSize:"1.25em"},'.heading[level="3"]':{fontSize:"1.125em"},'.heading[level="4"]':{fontSize:"1em"}},".block-title":{".title":{fontSize:"1.75em"},'.title[level="1"]':{fontSize:"1.75em"},'.title[level="2"]':{fontSize:"2em"},'.title[level="3"]':{fontSize:"2.25em"}},a:{...p,color:"var(--chakra-colors-blue-500) !important","&:hover":{textDecoration:"underline"},'&[href=""]':{textDecorationStyle:"dashed"},cursor:"pointer"},".mention":{bgColor:"trueblue.50",whiteSpace:"break-spaces"},code:{backgroundColor:"var(--chakra-colors-trueblue-50)",color:"var(--body-color)",...m.w}},j={".block-paragraph,.block-heading,.block-title,.block-todo,.block-numbered,.block-bullet":{...p,margin:0,my:"0.75em",":first-child":{mt:"0px !important"},":last-child":{mb:"0px !important"},color:"white"},code:{backgroundColor:"var(--chakra-colors-whiteAlpha-100)",color:"var(--chakra-colors-gray-200)",...m.w},".block-todo label.chakra-checkbox .chakra-checkbox__control[data-checked]":{backgroundColor:"var(--chakra-colors-whiteAlpha-100)",color:"var(--chakra-colors-white)"}},f=e=>{let{isDark:t=!1}=e;return{".ProseMirror":{height:"100%"},...g,...h.X0,"--box-border-radius":"var(--chakra-radii-sm)","--link-color":t?"var(--chakra-colors-trueblue-100)":"var(--chakra-colors-trueblue-500)",".block-todo label.chakra-checkbox .chakra-checkbox__control:not([data-checked])":{borderColor:t?"whiteAlpha.300":"gray.200"},"--body-color-inverted":t?"black":"white",...t?j:{},".is-selecting-node":{"[data-selection-ring]":{_before:{content:'""',position:"absolute",inset:0,borderRadius:"inherit",outline:"2px solid",outlineColor:t?"trueblue.100":"trueblue.300",pointerEvents:"none",zIndex:1}},'[data-selection-ring="padded"]':{_before:{outlineOffset:"0.25em"}}}}},b=(0,l.memo)(e=>{var t;let{isEditable:i,notesSx:h,canShowEditHint:m=!1,isDark:p=!1}=e,[g,j]=(0,l.useState)(null),{destroyEditor:b,mountEditor:v}=(0,d.GV)(a.rd),y=(0,l.useRef)(!1);(0,l.useEffect)(()=>(v&&j(v()),()=>{null==b||b(),j(null)}),[b,v]),(0,l.useEffect)(()=>{g&&i&&!y.current&&(g.commands.focus("end"),y.current=!0)},[i,g]),(0,l.useEffect)(()=>{if(g){if(g.shouldUseLiteMenus=!0,i&&!g.isEditable)return void g.setEditable(!0);if(!i&&g.isEditable)return void g.setEditable(!1)}},[i,g]);let w=i?o.Ru._({id:"fnNtuR"}):"Double click to edit",C=m&&(null==(t=null==g?void 0:g.isEmpty)||t),k=f({isDark:p});return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(s.s,{className:"card-notes-editor",overflowY:"auto",border:"1px solid",borderColor:p?"gray.600":"gray.200",borderRadius:"md",flex:1,p:4,wordBreak:"break-word",sx:{".block.block-paragraph.first-block.last-block.is-empty::before":{...x.sx,content:'"'.concat(w,'"')},...k,...h,_before:C?{...x.sx,top:4,left:4,height:"auto",width:"auto",content:'"'.concat(o.Ru._({id:"CvH5f/"}),'"')}:{}},pos:"relative",children:(0,n.jsx)(s.s,{flex:1,flexDirection:"column",children:g&&(0,n.jsx)(u.$,{editor:g,className:"highlight-mask",style:{height:"100%"}})})}),g&&i&&(0,n.jsx)(r.a,{children:(0,n.jsx)(c.Ht,{editor:g,appendToSelector:"[data-card-notes-bubble-menu-target]"})})]})});b.displayName="CardNotesEditor"},40556:(e,t,i)=>{"use strict";i.d(t,{I:()=>x});var n=i(6029),s=i(46898),r=i(48810),o=i(80314),l=i(19564),a=i(55729),d=i(88586),c=i(99038),u=i(82927);let x=e=>{let{refetchQueries:t}=e,{user:i}=(0,u.ur)(),x=(0,s.d)(),[h]=(0,d.fQ5)({refetchQueries:t}),[m,{loading:p}]=(0,d.UpM)({refetchQueries:t}),[g]=(0,d.u6W)({refetchQueries:t}),[j]=(0,d.D7K)({refetchQueries:t}),f=(0,a.useCallback)((e,t)=>()=>{if(!i||!t)return;let n={input:{docId:t.id,userId:null==i?void 0:i.id,favorited:e}};return j({variables:n,update:(e,i)=>{let{data:n}=i;e.writeFragment({id:"Doc:".concat(t.id),fragment:d.pfv,data:{docUser:null==n?void 0:n.updateDocUser}})},optimisticResponse:{updateDocUser:{...t.docUser,favorited:n.input.favorited,__typename:"DocUser"}}})},[j,i]),b=(0,a.useCallback)(e=>{let t={id:e};g({variables:t,optimisticResponse:{unarchiveDoc:{...t,archived:!1,__typename:"Doc"}}}).then(()=>{x({title:(0,n.jsx)(l.x6,{id:"nRyNMz"}),status:"success",duration:1e4,position:"top"})})},[g,x]),v=(0,a.useCallback)(e=>{let t={id:e};h({variables:t,optimisticResponse:{archiveDoc:{...t,archived:!0,__typename:"Doc"}}}).then(()=>{x({title:(0,n.jsxs)(r.E,{children:[(0,n.jsx)(l.x6,{id:"i3Wq9L",values:{GAMMA_ARTIFACT_PROPER_NOUN:c.TP}})," ",(0,n.jsx)(o.N,{textDecoration:"underline",onClick:()=>b(e),children:(0,n.jsx)(l.x6,{id:"9uI/rE"})})]}),status:"success",duration:3e3,position:"top",isClosable:!0})})},[h,b,x]);return{favoriteDoc:f,restoreDoc:b,trashDoc:v,permanentlyDeleteDoc:(0,a.useCallback)(e=>m({variables:{id:e},update:t=>{t.evict({id:t.identify({__typename:"Doc",id:e})}),t.gc()},optimisticResponse:{deleteDoc:e}}).then(()=>{x({title:(0,n.jsx)(l.x6,{id:"sOg7tZ",values:{GAMMA_ARTIFACT_PROPER_NOUN:c.TP}}),position:"top",status:"success",duration:3e3})}).catch(()=>{x({title:(0,n.jsx)(l.x6,{id:"SlfejT"}),description:(0,n.jsx)(l.x6,{id:"fWsBTs"}),status:"error",duration:3e3,position:"top",isClosable:!0})}),[m,x]),isPermanentlyDeletingDoc:p}}},41386:(e,t,i)=>{"use strict";i.d(t,{n:()=>nH});var n=i(6029),s=i(67909),r=i(36071),o=i(54731),l=i(3674),a=i(91106),d=i(55729),c=i(69768),u=i(22445),x=i(15342),h=i(17920),m=i(40691),p=i(48810),g=i(16426),j=i(61204),f=i(49611),b=i(19564);let v=e=>{let{isOpen:t,onClose:i,onConfirm:a}=e;return(0,n.jsxs)(s.aF,{isOpen:t,onClose:i,children:[(0,n.jsx)(r.m,{}),(0,n.jsxs)(o.$,{children:[(0,n.jsx)(h.r,{children:(0,n.jsx)(b.x6,{id:"sCTlv5"})}),(0,n.jsx)(l.s,{}),(0,n.jsx)(m.c,{children:(0,n.jsx)(p.E,{children:(0,n.jsx)(b.x6,{id:"nvyKWT"})})}),(0,n.jsx)(g.j,{children:(0,n.jsxs)(j.e,{flexWrap:"wrap",gap:"3",justifyContent:"flex-end",spacing:"0",children:[(0,n.jsx)(f.$,{variant:"ghost",onClick:i,children:(0,n.jsx)(b.x6,{id:"4OjqAQ"})}),(0,n.jsx)(f.$,{variant:"hazardous",onClick:a,children:(0,n.jsx)(b.x6,{id:"a7JgI7"})})]})})]})]})};var y=i(91792),w=i(4950),C=i(91264),k=i(72386),E=i(70006),S=i(9620),I=i(40452),T=i(29810),A=i(26385),R=i(26420),O=i(33787),_=i(99492),D=i(48621),P=i(82927),z=i(58959),M=i(27828),N=i(45143);let F=e=>{let{children:t}=e,i=(0,N.h5)({base:"var(--chakra-sizes-sm)",lg:"var(--chakra-sizes-xl)",xl:"var(--chakra-sizes-2xl)","2xl":"var(--chakra-sizes-3xl)"})||"var(--chakra-sizes-md)";return(0,n.jsx)(I.s,{"data-config-pane":!0,direction:"column",height:"100%",w:i,children:t})},L=e=>{let{children:t}=e;return(0,n.jsx)(p.E,{textAlign:"center",w:"100%",fontSize:"lg",fontWeight:"semibold",children:t})},V=e=>{let{children:t,onClick:i,leftIcon:s}=e;return(0,n.jsx)(f.$,{position:"absolute",left:"2",top:"2.5",color:"gray.800",variant:"ghost",onClick:i,leftIcon:(0,n.jsx)(D.g,{icon:s}),children:t})},W=e=>{let{children:t}=e;return(0,n.jsx)(R.a,{children:(0,n.jsx)(z.z,{p:"4",minH:"14",w:"100%",alignItems:"center",justifyContent:"center",children:t})})},G=e=>{let{children:t,stackProps:i}=e;return(0,n.jsx)(R.a,{p:"4",borderTop:"1px solid",borderColor:"gray.200",children:(0,n.jsx)(z.z,{justifyContent:"space-between",position:"relative",...i,children:t})})},B=e=>{let{children:t}=e;return(0,n.jsx)(R.a,{flex:"1",p:4,w:"100%",overflowY:"auto",children:(0,n.jsx)(M.m,{maxW:"container.md",mx:"auto",children:t})})},U=e=>{let{children:t}=e;return(0,n.jsx)(I.s,{direction:"column",height:"100%",flex:1,minW:0,pos:"relative",children:t})};var H=i(34807),K=i(3276),J=i(83004),q=i(95695),Y=i(42726),$=i(74127),X=i(71128);let Q="theme-editor-root",Z=(0,d.memo)(e=>{let{theme:t,setEditor:i}=e,s=(0,d.useMemo)(()=>(0,Y.t)(),[]),r=(0,H.A)(q.H4),o=(0,H.A)(X.OA),l=t?(0,X.qh)(t,o):null,[a,c]=(0,d.useState)(!1);return((0,d.useEffect)(()=>{if(a)return;let e=setTimeout(()=>{c(!0)},500);return()=>clearTimeout(e)},[a]),a&&t)?(0,n.jsxs)(I.s,{className:Q,css:{"--editor-width":"100%",...l?{"--doc-padding-left":"".concat(l.width+l.paddingX/2,"px")}:{},"--editor-font-size":r,"*":{transitionProperty:"color, background-color, border-color, fill, stroke",transitionDuration:"50ms",transitionTimingFunction:"ease-out"}},overflowY:"scroll",children:[(0,n.jsx)(J.mL,{styles:{"#doc-main":{display:"none"}}}),(0,n.jsx)(I.s,{w:"100%","data-testid":"custom-theme-preview-editor",className:"disable-card-size-animations",pointerEvents:"none",children:(0,n.jsx)($.u,{onCreate:e=>{null==i||i(e.editor)},initialContent:s,theme:t,scrollingParentSelector:".".concat(Q),isInsideDrawer:!0,animationsEnabled:!1})})]}):(0,n.jsx)(I.s,{direction:"column",height:"100%",flex:1,minW:0,w:"100%",align:"center",justify:"center",bg:"gray.50",children:(0,n.jsx)(K.y,{size:"sm"})})});Z.displayName="PreviewPaneEditor";var ee=i(7312);let et=e=>{let{children:t}=e;return(0,n.jsx)(z.z,{flex:1,spacing:0,h:"100%",divider:(0,n.jsx)(ee.G,{}),children:t})};var ei=i(46898),en=i(88586),es=i(95889);let er=e=>{let{onComplete:t,flow:i}=e,[s,{loading:r}]=(0,en.if9)(),[o,{loading:l}]=(0,en.p2Z)(),{currentWorkspace:a}=(0,P.ur)(),c=(0,es.st)(),u=(0,ei.d)(),h=(0,d.useCallback)(e=>{let{id:r,...o}=e;return s({variables:{input:o},update:(e,t)=>{let{data:i}=t;(null==i?void 0:i.createTheme)&&e.writeQuery({query:en.a83,variables:{workspaceId:a.id,archived:!1},data:{themes:[i.createTheme]}})},optimisticResponse:{createTheme:{__typename:"Theme",...e,archived:!1,createdTime:new Date().toISOString(),updatedTime:new Date().toISOString()}}}).then(s=>{let{data:r}=s;if(null==r?void 0:r.createTheme){var o;null==c||c.track(es.VV.THEME_CREATED,{theme_id:null==r||null==(o=r.createTheme)?void 0:o.id,type:"new",flow:i}),null==t||t(r.createTheme)}return u({position:"top",title:(0,n.jsx)(b.x6,{id:"c1Vll8",values:{0:e.name}}),status:"success",duration:5e3,isClosable:!0}),w.R.emit("closeThemeConfiguration",{}),null==r?void 0:r.createTheme}).catch(e=>{if(e.graphQLErrors&&e.graphQLErrors.length>0&&"duplicate_theme_name"===e.graphQLErrors[0].code)return void u({position:"top",title:(0,n.jsx)(b.x6,{id:"9RJBro"}),status:"error",duration:5e3,isClosable:!0});u({position:"top",title:(0,n.jsx)(b.x6,{id:"y47vGS"}),status:"error",duration:5e3,isClosable:!0})})},[s,a,u,c,i,t]),m=(0,d.useCallback)(e=>{o({variables:{input:e},update:(e,t)=>{let{data:i}=t;(null==i?void 0:i.updateTheme)&&e.writeQuery({query:en.a83,variables:{workspaceId:a.id,archived:!1},data:{themes:[i.updateTheme]}})},optimisticResponse:{updateTheme:{__typename:"Theme",...e,archived:!1,createdTime:new Date().toISOString(),updatedTime:new Date().toISOString()}}}).then(e=>{let{data:s}=e;if(null==s?void 0:s.updateTheme){var r;null==c||c.track(es.VV.THEME_UPDATED,{theme_id:null==s||null==(r=s.updateTheme)?void 0:r.id,flow:i}),null==t||t(s.updateTheme)}u({position:"top",title:(0,n.jsx)(b.x6,{id:"iZRx4V"}),status:"success",duration:5e3,isClosable:!0}),w.R.emit("closeThemeConfiguration",{})}).catch(e=>{if(e.graphQLErrors&&e.graphQLErrors.length>0&&"duplicate_theme_name"===e.graphQLErrors[0].code)return void u({position:"top",title:(0,n.jsx)(b.x6,{id:"9RJBro"}),status:"error",duration:5e3,isClosable:!0});u({position:"top",title:(0,n.jsx)(b.x6,{id:"y47vGS"}),status:"error",duration:5e3,isClosable:!0})})},[o,a,u,c,i,t]),p=(0,d.useCallback)(()=>{let e=(0,C.s0)(null==a?void 0:a.id)((0,x.KA)().getState());(null==e?void 0:e.id)==="new"?h(e):m(e)},[h,m,null==a?void 0:a.id]);return{createTheme:h,persistTheme:p,isThemeSaving:r||l}},eo=e=>{let t=(0,x.jL)();(0,d.useEffect)(()=>(t((0,C.kD)({flow:e})),()=>{t((0,C.kD)({flow:null}))}),[t,e])};var el=i(92699),ea=i(99038),ed=i(96500),ec=i(53996),eu=i(16491),ex=i(91938),eh=i(95918),em=i(96259),ep=i(69164);let eg=e=>{let t=(0,d.useCallback)(async(t,i)=>{var n;if(i.mimeType!==eh.M.GOOGLE_SLIDES)return;null==(n=e.onImportStarted)||n.call(e,i.id);let s=await (0,ep.m)({token:t,fileId:i.id,mimeType:eh.M.PPTX,filename:"".concat(i.name,".pptx")});e.onImportComplete(s)},[e]),{initiateGoogleImport:i}=(0,em.MB)({onSelect:t,pickers:{docs:!1,slides:!0}});return{initiateGoogleImport:i}};var ej=i(35816),ef=i(27695),eb=i(8859);let ev=()=>{let[e]=(0,en.oF7)();return(0,d.useCallback)(async t=>{var i,n;let{fileUrl:s,interactionId:r}=t;if(!s)throw Error("fileUrl is required");let o=await e({variables:{input:{workspaceId:(0,P.gx)(),fileUrl:s,interactionId:r}}});if(!(null==(i=o.data)?void 0:i.generateImportPptTheme))throw Error("Failed to generate theme");return null==(n=o.data)?void 0:n.generateImportPptTheme},[e])},ey=()=>{let e=(0,x.jL)(),t=(0,es.st)(),i=(0,ei.d)(),{fontsMap:s}=(0,y.II)(),r=ev(),o=(0,x.CU)(),l=(0,d.useRef)(null),a=(0,d.useRef)(0),c=(0,d.useCallback)(t=>{a.current=performance.now(),e((0,S.Gh)({fileId:t})),l.current=t},[e]),u=(0,d.useCallback)(async d=>{let c=(0,S.IX)(o.getState());if(l.current!==c||!c)return;let u=o.getState();e((0,S.pr)({inputFile:d}));try{let i=await r({fileUrl:d.fileUrl,interactionId:(0,S.f9)(u)});i&&(e((0,S.o6)({themeSuggestions:i.theme,thumbnails:i.thumbnails,fontsMap:s})),null==t||t.track(es.VV.THEME_IMPORTED,{source:"PptxUpload",latency:performance.now()-a.current,src:d.fileUrl,filename:d.filename}))}catch(t){e((0,S.QJ)()),console.error(t),i({title:(0,n.jsx)(b.x6,{id:"jK6rIX"}),description:t.message,status:"error",duration:null,isClosable:!0,position:"top"})}},[t,e,s,r,i,o]),h=(0,d.useCallback)(i=>{e((0,S.QJ)()),null==t||t.track(es.VV.THEME_IMPORT_FAILED,{source:"PptxUpload",latency:performance.now()-a.current,message:i.message})},[t,e]);(0,d.useCallback)(()=>{e((0,S.QJ)())},[e]);let{uppyInstance:m}=eC({onStarted:c,onComplete:u,onError:h});return(0,n.jsx)(eu.G_,{clientId:ex.$.GOOGLE_DRIVE_IMPORT_CLIENT_ID,children:(0,n.jsxs)(A.B,{children:[(0,n.jsx)(eb.j,{uppyInstance:m}),(0,n.jsxs)(R.a,{position:"relative",py:"3",children:[(0,n.jsx)(ed.c,{}),(0,n.jsx)(ec.R,{bg:"white",px:"4",children:(0,n.jsx)(p.E,{color:"gray.600",children:(0,n.jsx)(b.x6,{id:"BzEFor"})})})]}),(0,n.jsx)(ew,{uppyInstance:m})]})})},ew=e=>{let{uppyInstance:t}=e,[i,s]=(0,d.useState)(!1),{initiateGoogleImport:r}=eg({onImportStarted:(0,d.useCallback)(()=>{s(!0)},[]),onImportComplete:(0,d.useCallback)(async e=>{try{t.addFile({name:e.name,type:e.type,data:e}),await t.upload()}catch(e){}finally{s(!1)}},[t])});return(0,n.jsx)(f.$,{variant:"plain",color:"gray.700",onClick:r,isLoading:i,leftIcon:(0,n.jsx)(O._,{src:ej.A.src,boxSize:4,alt:"Google Drive"}),children:(0,n.jsx)(b.x6,{id:"5nN3Wd"})})},eC=e=>{let t=(0,ei.d)();return{uppyInstance:(0,d.useMemo)(()=>(0,ef.ib)().maxNumberOfFiles(1).maxFileSize(0xc800000).orgId((0,P.gx)()).templateId(ex.$.TRANSLOADIT_FILE_TEMPLATE_ID).allowedFileTypes([eh.M.PPTX]).onRestrictionFailed((e,i)=>{t({title:(0,n.jsx)(b.x6,{id:"SlfejT"}),description:(0,n.jsx)(b.x6,{id:"cHJvHu",values:{0:null==e?void 0:e.name}}),status:"error",duration:5e3,isClosable:!0,position:"top"})}).onError(t=>{var i;null==(i=e.onError)||i.call(e,t)}).onFileAdded(t=>{var i;null==(i=e.onStarted)||i.call(e,t.id)}).onTransloaditComplete(t=>{let i=t.results[":original"];if(!i){var n;null==(n=e.onError)||n.call(e,Error("No results for original file"));return}let s={fileUrl:i[0].url,filename:i[0].original_name};e.onComplete(s)}).build(),[])}},ek=(0,d.memo)(()=>(0,n.jsx)(M.m,{p:6,children:(0,n.jsxs)(A.B,{spacing:4,children:[(0,n.jsx)(p.E,{children:(0,n.jsx)(b.x6,{id:"aVYU1Z",values:{GAMMA_PROPER_NOUN:ea.On}})}),(0,n.jsx)(p.E,{fontSize:"sm",color:"gray.600",children:(0,n.jsx)(b.x6,{id:"fLNR+e"})}),(0,n.jsx)(ey,{})]})}));ek.displayName="InitialStep";var eE=i(58297),eS=i(64268),eI=i(83638),eT=i(25223),eA=i(38036),eR=i(80314),eO=i(78140),e_=i(36999),eD=i(41283),eP=i(37930),ez=i(48478),eM=i(6760),eN=i(404),eF=i(69413),eL=i(89528),eV=i(89942),eW=i(85443),eG=i(92382),eB=i(90221),eU=i(55597);let eH=e=>{let{label:t,description:i,labelColor:s="black",fontFamily:r,fontStyle:o="normal",fontWeight:l=400}=e,a=(0,n.jsxs)(z.z,{alignItems:"baseline",children:[(0,n.jsx)(R.a,{color:"yellow.400",children:(0,n.jsx)(D.g,{icon:eU.QJT})}),(0,n.jsx)(p.E,{textAlign:"start",color:s,fontWeight:l,fontSize:"lg",fontFamily:r,fontStyle:o,children:t})]});return i?(0,n.jsxs)(R.a,{children:[a,(0,n.jsx)(p.E,{fontSize:"xs",color:"gray.500",children:i})]}):a},eK=e=>{let{value:t,updateValue:i,onFontUploadClick:s,weight:r="regular",defaultFont:o,fonts:l,customFontsEnabled:c=!0,...u}=e,{workspaceFonts:x,globalFonts:h}=l,[m,g,j]=(0,d.useMemo)(()=>{let e=[...x,...h],i=e.find(e=>e.id===t);return[i,(0,eG.vt)(e,t),(0,eG.vt)(e,t,!1)]},[h,x,t]),v=c&&x.filter(e=>!e.archived||e.id===(null==m?void 0:m.id)).length>0,w=!1,C="normal",k="bold"===r?700:400;if(m&&null!==m.workspaceId){w=!0===m.archived;let e=[...m.fontFiles||[]];C=(0,eF.Q3)(e)?"italic":"normal";let t=(0,eF.Eu)(e);k=(0,eF.g9)(t,"bold"===r?700:400)||400}let{currentWorkspace:E}=(0,eW.u)(),{allThemeFonts:S}=(0,y.II)(),I=(0,eV.ez)("custom_fonts",E);return(0,n.jsxs)(eO.W,{matchWidth:!0,isLazy:!0,strategy:"fixed",children:[(0,n.jsx)(e_.I,{size:"lg",as:f.$,borderRadius:"md",rightIcon:(0,n.jsx)(D.g,{icon:_.Jt$,transform:"shrink-6"}),variant:"toolbar",px:4,h:10,w:"100%",border:"1px solid",borderColor:"gray.200",...u,children:c&&w?(0,n.jsx)(eH,{label:j||"",fontFamily:'"'.concat(g,'"'),labelColor:t?"gray.700":"gray.400",fontStyle:C,fontWeight:k}):(0,n.jsx)(p.E,{textAlign:"start",fontFamily:'"'.concat(g||o,'"'),fontWeight:k,color:t?"gray.700":"gray.400",fontStyle:C,children:j||(0,n.jsx)(b.x6,{id:"Ff/YaY",values:{defaultFont:o,GAMMA_PROPER_NOUN:ea.On}})})}),(0,n.jsxs)(eD.c,{maxH:"40vh",overflow:"auto",zIndex:"dropdown",children:[(0,n.jsx)(eB.J,{fonts:S}),(0,n.jsxs)(eP.i,{type:"radio",value:t||"",onChange:e=>i(e||void 0),children:[v&&(0,n.jsx)(a._x,{m:2,children:(0,n.jsx)(b.x6,{id:"syCKVA"})}),v&&x.map(e=>{var i;let s=e.id!==t,o=e.archived&&s,l=(null==(i=e.fontFiles)?void 0:i.length)===0&&s;if(!e.fontFiles||l||o)return null;let a=(0,eF.Q3)(e.fontFiles)?"italic":"normal";return w&&e.id===t?(0,n.jsx)(ez.k,{value:e.id,disabled:!0,children:(0,n.jsx)(eH,{fontFamily:e.name,label:e.name,fontStyle:a,description:(0,n.jsx)(b.x6,{id:"FZBl16"})})},e.id):(0,n.jsx)(ez.k,{value:e.id,children:(0,n.jsx)(p.E,{fontFamily:'"'.concat(e.name,'"'),fontSize:"lg",fontWeight:r,fontStyle:a,children:e.name})},e.id)}),v&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(eM.N,{}),(0,n.jsx)(a._x,{m:2,children:(0,n.jsx)(b.x6,{id:"Z/0bkt"})})]}),(0,n.jsx)(ez.k,{value:"",children:(0,n.jsx)(p.E,{fontFamily:o,fontSize:"lg",fontWeight:r,color:"gray.400",children:(0,n.jsx)(b.x6,{id:"WWU1RA",values:{GAMMA_PROPER_NOUN:ea.On}})})}),h&&h.map(e=>(0,n.jsx)(ez.k,{value:e.id,children:(0,n.jsx)(p.E,{fontFamily:(0,eG.rO)(e.id)?'"'.concat(e.id,'"'):'"'.concat(e.name,'"'),fontSize:"lg",fontWeight:r,children:e.name})},e.id))]}),c&&(0,n.jsx)(eN.N,{label:(0,n.jsx)(b.x6,{id:"vNYIdl"}),leftIcon:(0,n.jsx)(D.g,{icon:_.MNJ,fixedWidth:!0}),badge:I?void 0:(0,n.jsx)(eL.zL,{product:"pro"}),onClick:s,isSticky:!0})]})]})};var eJ=i(74771),eq=i(74907);let eY=e=>{var t,i,s;let{font:r,value:o,defaultWeight:l,updateValue:a,...c}=e,u=(0,d.useCallback)(e=>{let t=Number(e);Number.isNaN(t)||a(t)},[a]),x=(null==o?void 0:o.toString())||"",h=(0,eq.w)()[l],{weightOptions:m,isDeletedFontWeight:g}=(0,d.useMemo)(()=>{let e=(0,eG.yi)(r),t=void 0!==o&&!e.includes(o);return t&&o?{isDeletedFontWeight:t,weightOptions:[...e,o].sort((e,t)=>e-t)}:{isDeletedFontWeight:t,weightOptions:e}},[r,o]),j=r&&(null==r?void 0:r.workspaceId)!==null,v=j&&(null==(t=r.fontFiles)?void 0:t.length)===0,y=g&&j,w=(0,E.Zi)();return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(eO.W,{matchWidth:!0,isLazy:!0,strategy:"fixed",children:[(0,n.jsx)(e_.I,{size:"lg",as:f.$,borderRadius:"md",rightIcon:(0,n.jsx)(D.g,{icon:_.Jt$,transform:"shrink-6"}),variant:"toolbar",px:4,h:10,w:"100%",border:"1px solid",borderColor:"gray.200",isDisabled:m.length<=1,...c,children:g?(0,n.jsx)(eH,{label:v?(0,n.jsx)(b.x6,{id:"EqUVJs"}):null!=(i=(0,eq.w)()[x])?i:h,labelColor:o?"gray.700":"gray.400"}):(0,n.jsx)(p.E,{textAlign:"start",color:o?"gray.700":"gray.400",fontWeight:400,children:null!=(s=(0,eq.w)()[x])?s:h})}),(0,n.jsx)(eD.c,{maxH:"320px",overflow:"auto",zIndex:"dropdown",children:(0,n.jsx)(eP.i,{type:"radio",value:x,onChange:u,children:m.map(e=>{var t,i;return g&&o===e?(0,n.jsx)(ez.k,{value:e.toString(),disabled:!0,children:(0,n.jsx)(eH,{label:null!=(t=(0,eq.w)()[e])?t:h,description:y?(0,n.jsx)(b.x6,{id:"KFmni+"}):(0,n.jsx)(b.x6,{id:"mGTUJj"})})},e):(0,n.jsx)(ez.k,{value:e.toString(),children:(0,n.jsx)(p.E,{fontSize:"lg",children:null!=(i=(0,eq.w)()[e])?i:h})},e)})})})]}),y&&(0,n.jsx)(p.E,{fontSize:"xs",mt:1.5,children:(0,n.jsxs)(eR.N,{href:w,textDecoration:"underline",isExternal:!0,children:[(0,n.jsx)(b.x6,{id:"RUO69p"}),(0,n.jsx)(eJ.p,{ms:1})]})})]})};var e$=i(57405),eX=i(77650),eQ=i(87996),eZ=i(59230),e0=i(21982),e1=i(43634),e6=i(80180),e2=i(60908);let e5=e=>{let{value:t,updateValue:i,onLogoUploadStart:s,onLogoUploadFail:r}=e,[o,l]=(0,d.useState)(null),[a,c]=(0,d.useState)(null),u=(0,x.GV)(e1.aQ),{currentWorkspace:h}=(0,P.ur)(),m=u||(null==h?void 0:h.id);return m?t||a?(0,n.jsxs)(e$.T,{align:"flex-start",spacing:4,children:[(0,n.jsxs)(R.a,{position:"relative",w:"100%",background:"gray.50",p:2,children:["placeholder"==a?(0,n.jsx)(e0.Pf,{w:"100%",height:"200px"}):(0,n.jsx)(O._,{w:"100%",src:t||a||void 0,alt:"",onMouseDown:e6.Fw}),o==eZ.A.Uploading&&(0,n.jsx)(e0.Td,{}),o==eZ.A.Error&&(0,n.jsx)(e0.Hy,{})]}),(0,n.jsx)(f.$,{onClick:()=>{i(null),l(null)},mt:2,w:"100%",children:(0,n.jsx)(b.x6,{id:"VlT9ID"})})]}):(0,n.jsx)(eQ.Zc,{orgId:m,uploadType:"image",editType:"icon",dropHereText:eX.Ru._({id:"cmRkd1",values:{0:"%{browse}"}}),customHeight:"250px",customFontSize:"sm",onUploadStart:e=>{let{file:t,tempUrl:i}=e;l(eZ.A.Uploading),s&&s(),t.type&&(0,e2.aI)(t.type)?c("placeholder"):c(i)},onUploadSuccess:e=>{l(eZ.A.Done),i(e),c(null)},onUploadFailed:e=>{l(eZ.A.Error),r&&r()}}):null};var e4=i(26779),e3=i(62452),e8=i(16595),e7=i(56143);let e9=()=>{let e=(0,es.st)(),t=(0,x.GV)(S.f9),i=(0,d.useCallback)(i=>{null==e||e.track(es.VV.THEME_RATED,{rating:i,method:"import",interactionId:t})},[e,t]),s=(0,d.useCallback)((i,n,s)=>{null==e||e.track(es.VV.THEME_FEEDBACK,{feedback:n,tags:s,rating:i,method:"import",interactionId:t})},[e,t]);return(0,n.jsx)(e7.No,{feedbackTags:te,trackRating:i,trackFeedback:s})},te=[{key:"wrong-colors",label:(0,n.jsx)(b.x6,{id:"VqNHwM"})},{key:"wrong-fonts",label:(0,n.jsx)(b.x6,{id:"zwod6v"})},{key:"missing-logo",label:(0,n.jsx)(b.x6,{id:"HRiDli"})},{key:"not-enough-options",label:(0,n.jsx)(b.x6,{id:"XsRFrT"})},{key:"other",label:(0,n.jsx)(b.x6,{id:"/IX/7x"})}],tt=e=>{let{children:t}=e;return(0,n.jsx)(p.E,{fontSize:"md",fontWeight:"semibold",color:"gray.600",children:t})},ti="200px",tn=e=>{var t;let{color:i,isSelected:s,onClick:r}=e;return(0,n.jsx)(a.Tz,{label:(0,n.jsxs)(A.B,{spacing:"0",children:[(0,n.jsx)(p.E,{textAlign:"center",fontSize:"xs",color:"gray.200",children:(0,n.jsx)(b.x6,{id:"nyQWMb"})}),(0,n.jsx)(p.E,{textAlign:"center",children:null==(t=i.color)?void 0:t.toUpperCase()})]}),placement:"top",children:(0,n.jsx)(eE.j,{transitionProperty:"background",transitionDuration:"normal",size:"9",cursor:"pointer",_hover:{bg:s?"trueblue.200":"gray.50"},bg:s?"trueblue.200":"white",onClick:r,children:(0,n.jsx)(eE.j,{size:"7",bg:i.color,border:"1px solid",borderColor:s?"transparent":"gray.300"})})})},ts=e=>{let{logo:t,onClick:i,isSelected:s}=e;return(0,n.jsx)(R.a,{py:1,px:1,as:"button",borderRadius:"md",boxShadow:"sm",bg:"gray.50",onClick:i,cursor:s?"default":"pointer",border:"3px solid",borderColor:s?"trueblue.200":"transparent","aria-pressed":s,"aria-label":"Select logo ".concat(t.url),tabIndex:0,_hover:{border:"3px solid",borderColor:"trueblue.200"},children:(0,n.jsx)(O._,{src:t.url,maxHeight:"40px",draggable:!1,width:"auto",marginRight:"2"})},t.url)},tr=()=>{let{globalFonts:e,workspaceFonts:t,fontsMap:i}=(0,y.II)(),s=(0,x.GV)(S.ly),r=(0,x.jL)(),o=(0,d.useCallback)(e=>{r((0,S.qv)({name:e.target.value}))},[r]),l=(0,d.useCallback)(e=>{r((0,S.hi)({color:e}))},[r]),a=(0,d.useCallback)(e=>{r((0,S.fB)({color:e}))},[r]),c=(0,e3.VH)(s),u=(0,x.GV)(S.O5),h=(0,x.GV)(S.Ob),m=(0,e3.fQ)(s),g=(0,x.GV)(S.Yd),j=(0,x.GV)(S.wd),f=(0,e3.Lz)(s),v=(0,x.GV)(S.sY),w=(0,e3.Tn)(s),C=(0,e3.H7)(s),k=(0,x.GV)(S.OH),{suggestedBodyFont:O,suggestedHeadingFont:_}=(0,x.GV)(S.gi),D=i[s.bodyFont||q.z8.bodyFont]||i[q.z8.bodyFont],P=i[s.headingFont||q.z8.headingFont]||i[q.z8.headingFont],N=(0,x.GV)(S.Hs),F=(0,d.useCallback)(e=>{r((0,S.ds)({color:e}))},[r]),L=(0,d.useCallback)(()=>{let e=(0,E.Zi)();window.open(e,"_blank")},[]),V=(0,d.useCallback)(e=>{r((0,S.Fl)({font:e,fontsMap:i}))},[r,i]),W=(0,d.useCallback)(e=>{r((0,S.zs)({weight:e}))},[r]),G=(0,d.useCallback)(e=>{r((0,S.lc)({font:e,fontsMap:i}))},[r,i]),B=(0,d.useCallback)(e=>{r((0,S.lm)({weight:e}))},[r]),U=(0,d.useCallback)(e=>{r((0,S.jY)({color:e}))},[r]),H=(0,d.useCallback)(e=>{r((0,S.do)({color:e}))},[r]),K=(0,d.useCallback)(e=>{r((0,S.uQ)({logo:e}))},[r]),J=(0,d.useMemo)(()=>({globalFonts:e,workspaceFonts:t}),[e,t]);return(0,n.jsxs)(M.m,{children:[(0,n.jsx)(A.B,{p:6,spacing:"5",pt:"0",w:"100%",children:(0,n.jsx)(eS.F,{colorScheme:"gray",children:(0,n.jsx)(p.E,{children:(0,n.jsx)(b.x6,{id:"ISK5qv",components:{0:(0,n.jsx)("span",{role:"img","aria-label":"thumbs up"})}})})})}),(0,n.jsxs)(A.B,{spacing:8,children:[(0,n.jsxs)(eI.MJ,{children:[(0,n.jsx)(eT.l,{children:(0,n.jsx)(tt,{children:(0,n.jsx)(b.x6,{id:"HZ7fEu"})})}),(0,n.jsx)(eA.p,{type:"text",value:s.name,onChange:o})]}),(0,n.jsxs)(A.B,{spacing:2,children:[(0,n.jsx)(tt,{children:(0,n.jsx)(b.x6,{id:"1HfW/F"})}),(0,n.jsxs)(eI.MJ,{children:[(0,n.jsx)(eT.l,{children:(0,n.jsx)(b.x6,{id:"Udsgl4"})}),(0,n.jsxs)(I.s,{direction:"row",justify:"space-between",w:"100%",children:[(0,n.jsx)(R.a,{w:ti,children:(0,n.jsx)(e4.Wv,{theme:s,color:c,updateColor:F,palette:"none"})}),(0,n.jsx)(A.B,{direction:"row",spacing:0,ml:2,children:u.map(e=>(0,n.jsx)(tn,{color:e,isSelected:(0,e3.Gw)(c,e),onClick:()=>{F(e)}},e.color))})]})]}),(0,n.jsxs)(eI.MJ,{children:[(0,n.jsx)(eT.l,{children:(0,n.jsx)(b.x6,{id:"ihFuMH"})}),(0,n.jsxs)(I.s,{direction:"row",justify:"space-between",w:"100%",children:[(0,n.jsx)(R.a,{width:ti,children:(0,n.jsx)(e4.a9,{color:w,theme:s,updateColor:l,palette:"none"})}),(0,n.jsx)(A.B,{direction:"row",spacing:0,ml:2,children:h.map(e=>(0,n.jsx)(tn,{color:e,isSelected:(0,e3.Gw)(w,e),onClick:()=>{l(e)}},e.color))})]})]}),(0,n.jsxs)(eI.MJ,{children:[(0,n.jsx)(eT.l,{children:(0,n.jsx)(b.x6,{id:"ErggF8"})}),(0,n.jsxs)(I.s,{direction:"row",justify:"space-between",w:"100%",children:[(0,n.jsx)(R.a,{width:ti,children:(0,n.jsx)(e4.a9,{color:C,theme:s,updateColor:a,palette:"none"})}),(0,n.jsx)(A.B,{direction:"row",spacing:0,ml:2,children:k.map(e=>(0,n.jsx)(tn,{color:e,isSelected:(0,e3.Gw)(C,e),onClick:()=>{a(e)}},e.color))})]})]})]}),(0,n.jsxs)(A.B,{spacing:2,children:[(0,n.jsx)(tt,{children:(0,n.jsx)(b.x6,{id:"7OvVwW"})}),_&&_.suggested===s.headingFont&&_.suggested!==_.original&&(0,n.jsxs)(p.E,{fontSize:"xs",color:"gray.600",children:[(0,n.jsx)("span",{role:"img","aria-label":"warning",children:"⚠️"})," ","We substituted ",_.suggested," for"," ",_.original,". You can"," ",(0,n.jsx)(eR.N,{href:(0,E.Zi)(),isExternal:!0,children:"upload"})," ",_.original," later."]}),(0,n.jsx)(eK,{fonts:J,value:s.headingFont,updateValue:V,onFontUploadClick:L,weight:"bold",defaultFont:q.z8.headingFont,"data-testid":"theme-importer-heading-font-picker",my:0}),(0,n.jsx)(eY,{font:P,value:s.headingFontWeight,defaultWeight:700,updateValue:W,my:0}),(0,n.jsxs)(z.z,{children:[(0,n.jsx)(R.a,{width:ti,children:(0,n.jsx)(e4.Wv,{color:f,theme:s,updateColor:H,palette:"accent"})}),(0,n.jsx)(T.h,{}),(0,n.jsx)(A.B,{direction:"row",spacing:0,ml:2,children:v.map(e=>(0,n.jsx)(tn,{color:e,isSelected:(0,e3.Gw)(f,e),onClick:()=>{H(e)}},e.color))})]})]}),(0,n.jsxs)(A.B,{spacing:2,children:[(0,n.jsx)(tt,{children:(0,n.jsx)(b.x6,{id:"B4QCf7"})}),O&&O.suggested===s.bodyFont&&O.suggested!==O.original&&(0,n.jsxs)(p.E,{fontSize:"xs",color:"gray.600",children:[(0,n.jsx)("span",{role:"img","aria-label":"warning",children:"⚠️"})," ","We substituted ",O.suggested," for"," ",O.original,". You can"," ",(0,n.jsx)(eR.N,{href:(0,E.Zi)(),isExternal:!0,children:"upload"})," ",O.original," later."]}),(0,n.jsx)(eK,{fonts:J,value:s.bodyFont,updateValue:G,onFontUploadClick:L,weight:"bold",defaultFont:q.z8.bodyFont,"data-testid":"theme-importer-body-font-picker",my:0}),(0,n.jsx)(eY,{font:D,value:s.bodyFontWeight,defaultWeight:400,updateValue:B,my:0}),(0,n.jsxs)(z.z,{children:[(0,n.jsx)(R.a,{width:ti,children:(0,n.jsx)(e4.a9,{color:m,theme:s,updateColor:U,palette:"accent"})}),(0,n.jsx)(T.h,{}),(0,n.jsx)(A.B,{direction:"row",spacing:0,ml:2,children:g.map(e=>(0,n.jsx)(tn,{color:e,isSelected:(0,e3.Gw)(m,e),onClick:()=>{U(e)}},e.color))})]})]}),(0,n.jsxs)(A.B,{spacing:2,children:[(0,n.jsx)(tt,{children:(0,n.jsx)(b.x6,{id:"iG7KNr"})}),j.length>0&&(0,n.jsx)(z.z,{alignItems:"start",spacing:2,justifyContent:"start",role:"group","aria-label":"Logo selection",children:j.map(e=>(0,n.jsx)(ts,{logo:e,onClick:()=>K(e),isSelected:N===e.url},e.url))}),(0,n.jsx)(R.a,{maxW:"min(100%, 300px)",children:(0,n.jsx)(e5,{value:N,onLogoUploadStart:()=>{r((0,S.QZ)())},updateValue:e=>{if(!e)return void r((0,S.Zw)());r((0,S.$k)({logoImage:(0,e8.yK)({result:e,isError:!1})}))},onLogoUploadFail:()=>{r((0,S.UY)())}})})]}),(0,n.jsx)(e9,{})]})]})};var to=i(65092),tl=i(91613),ta=i(78801),td=i(62070),tc=i(61461),tu=i(13271),tx=i(77940),th=i(90211);let tm=()=>[{title:(0,n.jsx)(b.x6,{id:"bGa3Fk"}),duration:1e3},{title:(0,n.jsx)(b.x6,{id:"a+mYi4"}),duration:1e3},{title:(0,n.jsx)(b.x6,{id:"Zc41Kf"}),duration:1e3},{title:(0,n.jsx)(b.x6,{id:"DaFziV"}),duration:null}],tp=()=>{let e=(0,x.GV)(S.Cq),t=tm(),[i,s]=(0,d.useState)(0);(0,d.useEffect)(()=>{"parsing"===e&&i<t.length-1&&setTimeout(()=>{s(i+1)},5e3)},[i,t.length,e]);let r=(0,x.jL)(),o=(0,ei.d)(),l=(0,d.useCallback)(()=>{r((0,S.QJ)()),o({title:(0,n.jsx)(b.x6,{id:"GfnBRU"}),status:"info",isClosable:!0,position:"top"})},[r,o]);return(0,n.jsxs)(A.B,{p:6,spacing:"8",pt:"0",children:[(0,n.jsx)(eS.F,{colorScheme:"gray",children:(0,n.jsx)(p.E,{children:(0,n.jsx)(b.x6,{id:"olO1VR"})})}),(0,n.jsx)(to.C,{index:i,orientation:"vertical",height:"400px",gap:"0",children:t.map((e,t)=>(0,n.jsxs)(tl.p,{children:[(0,n.jsxs)(z.z,{alignItems:"top",children:[(0,n.jsx)(ta.S,{children:(0,n.jsx)(td.x,{complete:(0,n.jsx)(tc.W,{}),incomplete:(0,n.jsx)(tu.Q,{}),active:(0,n.jsx)(tu.Q,{})})}),(0,n.jsx)(tx.J,{style:{paddingTop:4},children:(0,n.jsxs)(z.z,{children:[(0,n.jsx)(p.E,{maxW:"100%",children:e.title})," ",i===t&&(0,n.jsx)(K.y,{size:"sm",color:"trueblue.400"})]})})]}),(0,n.jsx)(th.m,{})]},t))}),(0,n.jsx)(f.$,{onClick:l,variant:"hazardous",children:(0,n.jsx)(b.x6,{id:"dEgA5A"})})]})},tg=(0,d.memo)(e=>{let{onTabChange:t,currentTab:i}=e;return(0,n.jsxs)(j.e,{p:2,position:"absolute",top:"3",insetInlineStart:"50%",transform:"translateX(-50%)",zIndex:"sticky",bg:"white",size:"sm",variant:"ghost",borderRadius:"md",boxShadow:"md",children:[(0,n.jsx)(f.$,{borderRadius:"md",bg:"thumbnails"===i?"trueblue.50":"transparent",color:"thumbnails"===i?"trueblue.500":"gray.600",onClick:()=>{t("thumbnails")},children:(0,n.jsx)(b.x6,{id:"l3s5ri"})}),(0,n.jsx)(f.$,{borderRadius:"md",bg:"editor"===i?"trueblue.50":"transparent",color:"editor"===i?"trueblue.500":"gray.600",onClick:()=>{t("editor")},children:(0,n.jsx)(b.x6,{id:"FEr96N"})})]})});tg.displayName="PreviewTabSwitcher";let tj=()=>{let{currentWorkspace:e}=(0,P.ur)(),t=null==e?void 0:e.id,i=(0,x.jL)(),{createTheme:s,isThemeSaving:r}=er({flow:"import"});eo("import");let o=(0,x.GV)(S.ly),l=(0,x.GV)(S.jp),c=(0,x.GV)(S.D6),u=(0,x.GV)(S.hB),h=(0,x.GV)((0,S.JH)(t)),[m,p]=(0,d.useState)("thumbnails");(0,d.useEffect)(()=>{"reviewStep"===u&&p("editor")},[u]),(0,d.useEffect)(()=>()=>{i((0,S.QJ)())},[i]);let g=!h.name,v=(0,d.useCallback)(async()=>{s(h)},[s,h]),y=(0,d.useCallback)(async()=>{let e=await s(h);e&&(0,el.vd)({theme:e})},[s,h]),C=(0,d.useCallback)(()=>{p("thumbnails"),i((0,S.QJ)())},[i]);return(0,n.jsxs)(et,{children:[(0,n.jsx)(F,{children:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(W,{children:["initialStep"===u&&(0,n.jsx)(V,{leftIcon:_.CeG,onClick:()=>{w.R.emit("setThemeConfigurationView",{view:"splash"})},children:(0,n.jsx)(b.x6,{id:"ydzS9x"})}),(0,n.jsx)(L,{children:(0,n.jsx)(b.x6,{id:"l3s5ri"})})]}),(0,n.jsxs)(B,{children:["initialStep"===u&&(0,n.jsx)(ek,{}),"uploadStep"===u&&(0,n.jsx)(tp,{}),"reviewStep"===u&&(0,n.jsx)(tr,{})]}),"reviewStep"===u&&(0,n.jsx)(G,{children:(0,n.jsxs)(I.s,{w:"100%",children:[(0,n.jsx)(f.$,{variant:"plain",onClick:C,leftIcon:(0,n.jsx)(D.g,{icon:_.U23}),children:(0,n.jsx)(b.x6,{id:"i88wdJ"})}),(0,n.jsx)(T.h,{}),(0,n.jsxs)(j.e,{children:[(0,n.jsx)(a.Tz,{label:(0,n.jsx)(b.x6,{id:"INxusr"}),isDisabled:!g,shouldWrapChildren:!0,children:(0,n.jsx)(f.$,{isLoading:r,variant:"plain",onClick:y,isDisabled:g||c,children:(0,n.jsx)(b.x6,{id:"ZSZK3s"})})}),(0,n.jsx)(a.Tz,{label:(0,n.jsx)(b.x6,{id:"INxusr"}),isDisabled:!g,shouldWrapChildren:!0,children:(0,n.jsx)(f.$,{isLoading:r,variant:"solid",onClick:v,rightIcon:(0,n.jsx)(D.g,{icon:_.e68}),isDisabled:g||c,children:(0,n.jsx)(b.x6,{id:"ul+W4g"})})})]})]})})]})}),(0,n.jsxs)(U,{children:["reviewStep"===u&&(0,n.jsx)(tg,{onTabChange:p,currentTab:m}),"initialStep"===u?(0,n.jsx)(I.s,{h:"100%",w:"100%"}):"thumbnails"===m&&l.length>0?(0,n.jsx)(A.B,{w:"100%",overflow:"auto",h:"100%",align:"center",children:l.map(e=>(0,n.jsx)(R.a,{children:(0,n.jsx)(O._,{src:e.url})},e.index))}):"editor"===m?(0,n.jsx)(Z,{theme:o}):null]})]})};var tf=i(23293);let tb=(0,d.memo)(e=>{let{onTabChange:t,currentTab:i}=e;return(0,n.jsxs)(j.e,{p:2,position:"absolute",top:"3",left:"50%",transform:"translateX(-50%)",zIndex:"sticky",bg:"white",size:"sm",variant:"ghost",borderRadius:"md",shadow:"md",children:[(0,n.jsx)(f.$,{borderRadius:"md",bg:"testerDoc"===i?"trueblue.50":"transparent",color:"testerDoc"===i?"trueblue.500":"gray.600",onClick:()=>{t("testerDoc")},"data-testid":"preview-tab-tester-doc",children:(0,n.jsx)(b.x6,{id:"ypSaiK"})}),(0,n.jsx)(f.$,{borderRadius:"md",bg:"currentDoc"===i?"trueblue.50":"transparent",color:"currentDoc"===i?"trueblue.500":"gray.600",onClick:()=>{t("currentDoc")},"data-testid":"preview-tab-current-doc",children:(0,n.jsx)(b.x6,{id:"VJUm9p"})})]})});tb.displayName="PreviewTabSwitcher";let tv=()=>{let e=(0,x.GV)(C.eo),t=(0,x.GV)(C.Sb),i=(0,d.useRef)(),[s,r]=(0,d.useState)("testerDoc"),o=(0,d.useCallback)(e=>{var n,s;r(e),"currentDoc"===e?t&&(null==(n=i.current)||n.commands.setContent(t)):null==(s=i.current)||s.commands.setContent((0,Y.t)())},[t]),l=(0,d.useCallback)(e=>{i.current=e},[]);return e?(0,n.jsxs)(n.Fragment,{children:[t&&(0,n.jsx)(tb,{onTabChange:o,currentTab:s}),(0,n.jsx)(Z,{theme:e,setEditor:l})]}):(0,n.jsx)(n.Fragment,{})},ty={colors:{name:(0,n.jsx)(b.x6,{id:"1HfW/F"}),description:(0,n.jsx)(b.x6,{id:"lsknHp"}),icon:_.fyG},fonts:{name:(0,n.jsx)(b.x6,{id:"I0oBSl"}),description:(0,n.jsx)(b.x6,{id:"0kBA53"}),icon:_.tiU},design:{name:(0,n.jsx)(b.x6,{id:"f8fH8W"}),description:(0,n.jsx)(b.x6,{id:"7dxcBr"}),icon:_.ffg},logo:{name:(0,n.jsx)(b.x6,{id:"iG7KNr"}),description:(0,n.jsx)(b.x6,{id:"pSG+r5"}),icon:_.Cyq},themeName:{name:(0,n.jsx)(b.x6,{id:"HZ7fEu"}),description:(0,n.jsx)(b.x6,{id:"JMXrv3"}),icon:_.SGM}},tw={base:"repeat(1, 1fr)",md:"repeat(2, 1fr)",lg:"repeat(2, 1fr)",xl:"repeat(3, 1fr)"};var tC=i(40162),tk=i(4192),tE=i(56570),tS=i(43724),tI=i.n(tS),tT=i(30361),tA=i.n(tT),tR=i(88839),tO=i(52762),t_=i(30892),tD=i(26194),tP=i.n(tD),tz=i(831),tM=i.n(tz),tN=i(33612),tF=i.n(tN);let tL=e=>{let{theme:t,onSelect:i,onShuffle:s,isSelected:r=!1}=e,o=(0,e3.Ik)((0,e3.H7)(t)),l=(0,e3.Tn)(t).color,a=(0,e3.Sf)((0,e3.Lz)(t)),c=(0,e3.fQ)(t).color,u=(0,e3.Sf)((0,e3.jO)(t)),x=(0,e3.ND)(t,!1,!0),h=(0,d.useMemo)(()=>tP()(tM()(x,e3.$j),e=>-tF()((0,e3.Ik)(e)).getLuminance()),[x]);return(0,n.jsxs)(I.s,{position:"relative",align:"center",justify:"center",role:"group",children:[(0,n.jsx)(f.$,{variant:"ghost",h:"auto",p:2,flex:1,w:"100%",textAlign:"left",whiteSpace:"wrap",fontWeight:"500",onClick:i,borderWidth:"2px",borderColor:r?"trueblue.300":"transparent",bg:r?"trueblue.50":void 0,children:(0,n.jsx)(I.s,{bg:o,borderRadius:"md",boxShadow:"md",overflow:"hidden",flex:1,direction:"column",borderWidth:"1px",position:"relative",children:(0,n.jsxs)(I.s,{p:4,flex:1,children:[(0,n.jsx)(I.s,{p:4,bg:l,borderRadius:"md",boxShadow:"sm",flex:1,children:(0,n.jsxs)(A.B,{flex:1,spacing:1,children:[(0,n.jsx)(z.z,{opacity:.8,children:(0,n.jsx)(I.s,{w:"70%",h:1.5,css:a,borderRadius:"sm"})}),(0,n.jsx)(I.s,{h:1,opacity:.6,bg:c,borderRadius:"sm"}),(0,n.jsx)(I.s,{h:1,opacity:.6,bg:c,borderRadius:"sm"}),(0,n.jsx)(I.s,{h:2.5,opacity:.9,borderRadius:"full",w:"40px",align:"center",justify:"center",css:u,mt:1})]})}),(0,n.jsx)(z.z,{spacing:0,flex:1,w:"100%",position:"absolute",bottom:"-2",left:"0",opacity:0,transitionProperty:"opacity, bottom",transitionDuration:"normal",_groupHover:{opacity:1,bottom:0},children:h.map((e,t)=>(0,n.jsx)(I.s,{css:(0,e3.Sf)(e),flex:1,h:2},t))})]})})}),r&&(0,n.jsx)(f.$,{size:"xs",variant:"solid",position:"absolute",bottom:"5",right:"5",leftIcon:(0,n.jsx)(D.g,{icon:_.tW}),opacity:0,_groupHover:{opacity:1},onClick:s,children:(0,n.jsx)(b.x6,{id:"gH5Gbn"})})]})},tV=()=>({all:{label:(0,n.jsx)(b.x6,{id:"Zvbsrl"})},light:{label:(0,n.jsx)(b.x6,{id:"4kr8nm"})},dark:{label:(0,n.jsx)(b.x6,{id:"P9X6Mu"})},red:{label:(0,n.jsx)(b.x6,{id:"Ppz2lw"}),colors:["red.400","#DC143C","#B22222","#8B0000"]},orange:{label:(0,n.jsx)(b.x6,{id:"Td1Axu"}),colors:["orange.400","#FF8C00","#FF7F50","#FF6347"]},yellow:{label:(0,n.jsx)(b.x6,{id:"UHB0wN"}),colors:["yellow.400","#FFD700","#FFA500","#FF8C00"]},green:{label:(0,n.jsx)(b.x6,{id:"fyzS0F"}),colors:["green.400","#32CD32","#00FF00","#ADFF2F"]},blue:{label:(0,n.jsx)(b.x6,{id:"m1hucM"}),colors:["blue.400","#1E90FF","#00BFFF","#ADD8E6"]},purple:{label:(0,n.jsx)(b.x6,{id:"AI9Iqf"}),colors:["purple.400","#8A2BE2","#9370DB","#BA55D3"]},pink:{label:(0,n.jsx)(b.x6,{id:"aj7xux"}),colors:["pink.400","#FFB6C1","#FF69B4","#FF1493"]},neutral:{label:(0,n.jsx)(b.x6,{id:"z9uvvN"}),colors:["#D2BEA1","#808080","#C0C0C0","#D3D3D3"]},gray:{label:(0,n.jsx)(b.x6,{id:"HA64AU"}),colors:["gray.400","#A9A9A9","#C0C0C0","#D3D3D3"]},professional:{label:(0,n.jsx)(b.x6,{id:"wXRbPe"})},colorful:{label:(0,n.jsx)(b.x6,{id:"Drp0HH"})},futuristic:{label:(0,n.jsx)(b.x6,{id:"Uk8MFz"})},modern:{label:(0,n.jsx)(b.x6,{id:"kJB3k/"})}}),tW=()=>{var e;let t=(0,x.GV)(C.eo),i=(0,x.jL)(),[s,r]=(0,d.useState)("all"),{data:o}=(0,en.Snx)({variables:{workspaceId:null,archived:!1},fetchPolicy:"cache-first",nextFetchPolicy:"cache-only"}),l=null==o?void 0:o.themes,[a,c]=(0,d.useState)(t&&(null==(e=tI()(l,e=>tG(t,e)))?void 0:e.id)||null),u=(0,d.useMemo)(()=>Object.entries(tV()),[]),h=(0,d.useMemo)(()=>(null==l?void 0:l.filter(e=>{if(e.config.disableReadabilityAdjustment)return!1;if("all"===s)return!0;let{keywords:t}=e.config;return!!t&&(t.color.includes(s)||t.tone.includes(s))}))||[],[s,l]),m=(0,d.useCallback)(e=>{c(e.id);let t=(0,e3.j8)((0,e3.H7)(e))||{type:tO.h.NONE},n=(0,tR.M)(e),s={primaryColor:(0,e3.VH)(e),secondaryColors:(0,e3.gx)(e),cardColor:(0,e3.Tn)(e),headingColor:(0,e3.Lz)(e),bodyColor:(0,e3.fQ)(e),accentBackgrounds:e.config.accentBackgrounds,stylePrompt:e.config.stylePrompt,background:t,shapeColorScheme:"custom"===n.shapeColorScheme?"accent":n.shapeColorScheme};i((0,C._R)({config:s}))},[i]),g=(0,d.useCallback)(e=>{i((0,C._R)({config:tB(e)}))},[i]);if(!t)throw Error("Theme is undefined");return(0,n.jsxs)(A.B,{spacing:6,children:[(0,n.jsx)(tC.B,{children:u.map(e=>{let[t,{label:i,colors:o}]=e;return(0,n.jsx)(tk.vw,{onClick:()=>{r(t)},colorScheme:s===t?"trueblue":"gray",cursor:"pointer",children:(0,n.jsxs)(z.z,{spacing:2,children:[o?(0,n.jsx)(I.s,{boxSize:3,bg:o[0],borderRadius:"sm"}):null,(0,n.jsx)(p.E,{children:i})]})},t)})}),(0,n.jsx)(A.B,{children:(0,n.jsx)(tE.x,{templateColumns:tw,gap:3,children:h.map(e=>(0,n.jsx)(tL,{theme:e,onSelect:()=>{m(e)},onShuffle:()=>g(e),isSelected:a===e.id},e.id))})})]})},tG=(e,t)=>JSON.stringify((0,e3.ND)(e))===JSON.stringify((0,e3.ND)(t)),tB=e=>{let t=(0,e3.ND)(e),i=(0,e3.Tn)(e),n=t.map(e3.Ik).filter(e=>{let t=(0,t_.VU)(e);return t>.8||t<.2}).map(e3.Ik),s=tA()(n)||(0,e3.Ik)(i),r=(0,t_.$p)(s),o=(0,t_.VU)(s),l={type:"solid",color:s},a=t.filter(e=>(0,e3.$j)(e)!==(0,e3.$j)(l)),d=tA()(a),c=[d,{type:"solid",color:r?e3.kF:e3.Hs}],u=tA()(c),x={type:"solid",color:r?e3.Cs:e3.nI},h=[(0,e3.Ik)(d),(0,t_.Zt)(s,o>.1?-12:12)],m=tA()(h);return{headingColor:u,bodyColor:x,cardColor:l,primaryColor:d,background:(0,e3.j8)({type:"solid",color:m}),shapeColorScheme:tA()(["default","accent"])}};var tU=i(49146),tH=i(23908),tK=i(36693),tJ=i(20061),tq=i(3448);let tY=e=>{let{defaultTab:t,customTab:i}=e;return(0,n.jsxs)(tU.t,{isFitted:!0,isLazy:!0,variant:"soft-rounded",size:"sm",children:[(0,n.jsxs)(tH.w,{children:[(0,n.jsx)(tK.o,{children:(0,n.jsxs)(z.z,{children:[(0,n.jsx)(D.g,{icon:_.qcK}),(0,n.jsx)(p.E,{children:(0,n.jsx)(b.x6,{id:"M0Q+0g"})})]})}),(0,n.jsx)(tK.o,{children:(0,n.jsxs)(z.z,{children:[(0,n.jsx)(D.g,{icon:_.MT7}),(0,n.jsx)(p.E,{children:(0,n.jsx)(b.x6,{id:"srRMnJ"})})]})})]}),(0,n.jsxs)(tJ.T,{children:[(0,n.jsx)(tq.K,{px:0,children:t}),(0,n.jsx)(tq.K,{px:0,children:i})]})]})};var t$=i(61491),tX=i(51504),tQ=i(1057),tZ=i(66079),t0=i(62961),t1=i(59858);let t6=e=>(0,t1.S0)(e)&&(0,t1.R4)(e),t2=e=>{let{setBackground:t,background:i,defaultMessage:s,isDark:r,isValidSource:o,contextualTheme:l}=e,[a,c]=(0,d.useState)("default"),u=tZ.Fn[a],x=(0,d.useCallback)(e=>o?o(e)&&t6(e):t6(e),[o]),h=(0,d.useCallback)(e=>{t({...i,...e})},[i,t]);return(0,n.jsx)(t0.v,{isDark:r,isValidSource:x,defaultMessage:s,currentBackground:i,currentSource:u,updateCurrentBackground:h,setCurrentSourceKey:c,currentSourceKey:a,editType:"themeBackground",contextualTheme:l})},t5=()=>{let e=(0,x.GV)(C.eo),t=(0,x.jL)();if(!e)throw Error("Theme is undefined");let i=(0,e3.fQ)(e);return(0,n.jsx)(e4.a9,{dataTestId:"custom-theme-body-color-picker",theme:e,color:i||void 0,defaultColor:i,updateColor:e=>{t((0,C.jY)({color:e}))},palette:"accent"})},t4=()=>{let e=(0,x.GV)(C.eo),t=(0,x.jL)();if(!e)throw Error("Theme is undefined");let i=(0,e3.Lz)(e);return(0,n.jsx)(e4.tN,{dataTestId:"custom-theme-heading-color-picker",theme:e,color:i||void 0,defaultColor:i,updateColor:e=>{t((0,C.do)({color:e}))},palette:"accent"})},t3=(0,d.memo)(()=>{var e;let t=(0,x.jL)(),i=(0,x.GV)(C.eo),s="builder"===(0,x.GV)(C.yV),r=(0,d.useCallback)(e=>{var i,n;(null==e?void 0:e.type)===tO.h.IMAGE&&(null==(i=e.image)?void 0:i.uploadStatus)===eZ.A.Uploading?t((0,C.VT)({background:e})):(null==e?void 0:e.type)===tO.h.IMAGE&&(null==(n=e.image)?void 0:n.uploadStatus)===eZ.A.Error?t((0,C.Px)()):t((0,C.Co)({background:e}))},[t]),o={size:"md",fontWeight:"600"};if(!i)throw Error("Theme is undefined");let[l,...c]=(0,e3.CD)(i),u=(0,e3.Tn)(i),h=(0,tQ.Ee)(i),m=(0,e3.Mw)(i);return(0,n.jsxs)(A.B,{spacing:7,children:[(0,n.jsxs)(A.B,{spacing:"3",children:[(0,n.jsxs)(tf.D,{...o,children:[(0,n.jsx)(b.x6,{id:"DNUgpN"})," ",(0,n.jsx)(a.qT,{label:(0,n.jsx)(b.x6,{id:"+GFtYe"})})]}),(0,n.jsxs)(eI.MJ,{children:[(0,n.jsx)(eT.l,{children:(0,n.jsx)(b.x6,{id:"Udsgl4"})}),(0,n.jsx)(e4.Wv,{dataTestId:"custom-theme-primary-color-picker",theme:i,color:l,updateColor:e=>{s?t((0,C.uL)({color:e})):t((0,C.ds)({color:e}))},palette:"none"})]}),(0,n.jsxs)(eI.MJ,{children:[(0,n.jsx)(eT.l,{children:(0,n.jsx)(b.x6,{id:"k7VWXk"})}),(0,n.jsx)(e4.oB,{theme:i,colors:c,updateColors:e=>{t((0,C.Kf)({colors:e}))},minColors:0,maxColors:8,palette:"none"})]})]}),(0,n.jsxs)(A.B,{spacing:"3",children:[(0,n.jsx)(tf.D,{...o,children:(0,n.jsx)(b.x6,{id:"xeiujy"})}),(0,n.jsxs)(eI.MJ,{children:[(0,n.jsx)(eT.l,{children:(0,n.jsx)(b.x6,{id:"v9mrgh"})}),(0,n.jsx)(t4,{})]}),(0,n.jsxs)(eI.MJ,{children:[(0,n.jsx)(eT.l,{children:(0,n.jsx)(b.x6,{id:"jx8uni"})}),(0,n.jsx)(t5,{})]})]}),(0,n.jsxs)(A.B,{spacing:3,children:[(0,n.jsx)(tf.D,{...o,children:"Accessibility"}),(0,n.jsx)(eI.MJ,{children:(0,n.jsx)(eS.F,{colorScheme:"gray",children:(0,n.jsx)(t$.S,{isChecked:!(null==(e=i.config)?void 0:e.disableReadabilityAdjustment),onChange:()=>t((0,C._w)()),children:(0,n.jsxs)(p.E,{fontSize:"sm",children:[(0,n.jsx)(b.x6,{id:"KmUJ3J"})," ",(0,n.jsx)(a.qT,{label:(0,n.jsx)(b.x6,{id:"J9NJr0",values:{GAMMA_PROPER_NOUN:ea.On}})})]})})})})]}),(0,n.jsxs)(A.B,{spacing:"3",children:[(0,n.jsx)(tf.D,{...o,children:"Background"}),(0,n.jsxs)(eI.MJ,{children:[(0,n.jsx)(eT.l,{children:(0,n.jsx)(b.x6,{id:"ihFuMH"})}),(0,n.jsx)(e4.a9,{dataTestId:"custom-theme-card-color-picker",theme:i,color:u,updateColor:e=>{t((0,C.hi)({color:e}))},defaultColor:{type:"solid",color:"#FFFFFF"},palette:"accent"})]}),(0,n.jsxs)(eI.MJ,{children:[(0,n.jsx)(eT.l,{children:(0,n.jsx)(b.x6,{id:"8rfGAV"})}),(0,n.jsx)(t2,{setBackground:r,background:h,defaultMessage:(0,n.jsxs)(eS.F,{fontSize:"xs",children:[(0,n.jsx)(tX._,{}),(0,n.jsx)(p.E,{children:(0,n.jsx)(b.x6,{id:"j+PsQe"})})]}),isDark:m,contextualTheme:i})]})]})]})});t3.displayName="CustomColorSettings";let t8=(0,d.memo)(()=>(0,n.jsx)(A.B,{spacing:6,children:(0,n.jsx)(tY,{defaultTab:(0,n.jsx)(tW,{}),customTab:(0,n.jsx)(t3,{})})}));t8.displayName="ColorStep";var t7=i(95571);let t9={...q.AG,cardBorderColor:void 0},ie=e=>{let{isSelected:t=!1,onClick:i,theme:s,pack:r}=e,{title:o,description:l,knobs:a}=r,c=(0,e3.Ik)((0,e3.H7)(s))||"white",u=(0,d.useMemo)(()=>{let e={...t9,...a(s)};return(0,t7.tL)({cardColor:(0,e3.Tn)(s),config:e,theme:{...s,config:{...s.config,...e}}})},[s,a]);return(0,n.jsx)(f.$,{variant:"ghost",onClick:i,bg:t?"trueblue.50":"white",borderColor:t?"trueblue.400":"transparent",borderWidth:"2px",minH:"auto",h:"auto",minW:"auto",w:"100%",p:2,flex:1,color:"gray.800",textAlign:"left",whiteSpace:"normal",alignItems:"flex-start",css:u,children:(0,n.jsxs)(A.B,{flex:1,spacing:4,children:[(0,n.jsx)(I.s,{h:24,bg:c,borderRadius:"md",borderWidth:"1px",shadow:"inner",align:"center",justify:"center",p:5,children:(0,n.jsx)(I.s,{w:"100%",h:"100%",sx:{boxShadow:"var(--card-shadow)",backdropFilter:"var(--card-backdrop-filter)",backgroundColor:"var(--card-background-color)",borderRadius:"var(--card-border-radius)"}})}),(0,n.jsxs)(A.B,{spacing:1,children:[(0,n.jsx)(p.E,{fontSize:"md",children:o}),(0,n.jsx)(p.E,{fontWeight:"500",color:"gray.500",fontSize:"xs",children:l})]})]})})};var it=i(8099),ii=i(51684);let is=e=>{let{label:t,isSelected:i=!1,type:s="card",onClick:r=()=>{},sx:o={},children:l}=e;return(0,n.jsx)(a.Tz,{label:t?t():"",placement:"top",children:(0,n.jsx)(f.$,{h:"auto",p:0,variant:"ghost",onClick:r,children:(0,n.jsxs)(I.s,{h:"14",minH:"14",minW:"88px",position:"relative",overflow:"hidden",alignItems:"center",justifyContent:"center",borderRadius:"md",bg:i?"trueblue.200":"gray.200",border:"2px solid",borderColor:i?"trueblue.400":"gray.200",transitionProperty:"background-color, border-color",transitionDuration:"normal",_hover:{bg:i?void 0:"trueblue.100",borderColor:i?void 0:"trueblue.300"},children:["layout"===s&&(0,n.jsx)(A.B,{bg:"white",h:"100%",w:"100%",p:"2",children:(0,n.jsx)(z.z,{h:"100%",w:"100%",borderRadius:"md",alignItems:"stretch",spacing:"1",filter:"grayscale(1)",children:[void 0,void 0,void 0].map((e,t)=>(0,n.jsx)(I.s,{flex:"1",sx:o},t))})}),"card"===s&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(R.a,{zIndex:"0",position:"relative",fontSize:"2xl",color:i?"trueblue.600":"gray.600",children:(0,n.jsx)(D.g,{icon:ii.Cyq})}),(0,n.jsx)(R.a,{zIndex:"10",bg:"white",position:"absolute",left:"-4",borderRadius:"md",bottom:"-4",h:"14",w:"100%",sx:o})]}),"button"===s&&(0,n.jsx)(f.$,{sx:o,p:4,size:"sm",variant:"plain",pointerEvents:"none",boxShadow:"none",border:"none",maxW:"100%",transform:"scale(0.8)",children:(0,n.jsx)(b.x6,{id:"hxBFty"})}),l]})})})},ir=e=>{let{label:t,isSelected:i=!1,type:s="radius",onClick:r=()=>{},sx:o={}}=e;return(0,n.jsx)(a.Tz,{label:t?t():"",placement:"top",children:(0,n.jsxs)(f.$,{p:"0",variant:"ghost",bg:i?"trueblue.100":"gray.200",border:"2px solid",borderColor:i?"trueblue.400":"gray.200",w:"12",h:"12",alignItems:"flex-start",overflow:"hidden",textAlign:"left",onClick:r,position:"relative",children:["radius"===s&&(0,n.jsx)(R.a,{zIndex:"10",bg:"white",h:"16",w:"16",position:"absolute",top:"3",right:"3",sx:o}),"shadow"===s&&(0,n.jsx)(R.a,{zIndex:"10",bg:"white",h:"16",w:"16",position:"absolute",bottom:"3",left:"3",borderRadius:"sm",sx:o}),"block-shadow"===s&&(0,n.jsx)(R.a,{w:"100%",h:"100%",bg:"white",children:(0,n.jsx)(R.a,{zIndex:"10",bg:"gray.50",h:"16",w:"16",position:"absolute",bottom:"3",left:"3",borderRadius:"sm",sx:o})}),"card"===s&&(0,n.jsxs)(I.s,{color:"gray.400",alignItems:"center",h:"100%",w:"100%",justifyContent:"center",position:"relative",children:[(0,n.jsx)(D.g,{icon:ii.Cyq}),(0,n.jsx)(R.a,{position:"absolute",bg:"white",zIndex:"10",top:"0",left:"0",bottom:"0",right:"0",sx:o})]})]})})},io=e=>{let{label:t,tooltip:i,isSelected:s,onClick:r}=e;return(0,n.jsx)(it.m,{label:i?i():"",placement:"top",children:(0,n.jsx)(f.$,{h:"auto",p:"3",variant:"ghost",bg:s?"trueblue.50":"gray.50",textAlign:"left",minW:"14",onClick:r,children:t&&(0,n.jsx)(p.E,{maxW:"100%",noOfLines:1,color:s?"trueblue.600":"gray.600",children:t})})})};var il=i(68093);let ia=()=>{let e=(0,x.jL)(),t=(0,x.GV)(C.eo);if(!t)throw Error("Theme is undefined");let i=(0,tR.M)(t),s="hard"===i.cardShadow;if(!("none"!==i.cardBorder||s))return null;let r=(0,e3.J1)(t),{config:o}=t;return(0,n.jsxs)(eI.MJ,{children:[(0,n.jsx)(eT.l,{children:s?(0,n.jsx)(b.x6,{id:"Nz77Ud"}):(0,n.jsx)(b.x6,{id:"ITgjHB"})}),(0,n.jsx)(e4.a9,{theme:t,color:o.cardBorderColor,defaultColor:r,updateColor:t=>{e((0,C.rg)({color:t}))},palette:"accent"})]})};var id=i(13366),ic=i(98164);let iu=()=>{let e=(0,x.jL)(),t=(0,x.GV)(C.eo);if(!t)throw Error("Theme is undefined");let i=(0,e3.bh)(t),s=(0,tR.M)(t);return(0,n.jsxs)(eI.MJ,{children:[(0,n.jsx)(eT.l,{children:(0,n.jsx)(b.x6,{id:"QMdgje"})}),(0,n.jsxs)(e$.T,{spacing:2,align:"start",children:[";",(0,n.jsx)(id.z,{children:(0,n.jsx)(A.B,{children:Object.entries(q.Xt).map(i=>{let[r,o]=i,l=(0,e3.QD)(t,r);return(0,n.jsx)(ic.s,{isChecked:r===s.shapeColorScheme,onChange:()=>{e((0,C.BH)({shapeColorScheme:r}))},children:(0,n.jsxs)(z.z,{children:["custom"!==r&&(0,n.jsx)(eE.j,{size:"5",bg:(0,e3.Ik)(l)}),(0,n.jsx)(p.E,{fontSize:"sm",children:o.name()})]})},r)})})}),"custom"===s.shapeColorScheme&&(0,n.jsxs)(A.B,{w:"100%",children:[(0,n.jsx)(p.E,{fontSize:"sm",color:"gray.600",children:(0,n.jsx)(b.x6,{id:"U+j5it"})}),(0,n.jsx)(e4.oB,{theme:t,colors:i,updateColors:t=>{e((0,C.h)({colors:t}))},minColors:1,maxColors:10,solidOnly:!0,palette:"accent"})]})]})]})},ix=(0,d.memo)(()=>{let e=[{label:()=>eX.Ru._({id:"Ccpbzh"}),Component:(0,n.jsx)(ih,{})},{label:()=>eX.Ru._({id:"Uw3jqG"}),Component:(0,n.jsx)(im,{})},{label:()=>eX.Ru._({id:"0ZDH3e"}),Component:(0,n.jsx)(ip,{})}];return(0,n.jsxs)(tU.t,{variant:"soft-rounded",isFitted:!0,size:"sm",children:[(0,n.jsx)(tH.w,{children:e.map((e,t)=>(0,n.jsx)(tK.o,{"data-testid":"theme-config-tab-".concat(t),children:e.label()},t))}),(0,n.jsx)(tJ.T,{children:e.map((e,t)=>(0,n.jsx)(tq.K,{px:"0","data-testid":"theme-config-tab-panel-".concat(t),children:(0,n.jsx)(A.B,{spacing:4,children:e.Component})},t))})]})});ix.displayName="DesignSettings";let ih=(0,d.memo)(()=>{let e=(0,x.jL)(),t=(0,x.GV)(C.eo);if(!t)throw Error("Theme is undefined");let i=(0,tR.M)(t);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(eI.MJ,{children:[(0,n.jsxs)(eT.l,{children:[(0,n.jsx)(b.x6,{id:"aBxw8F"}),(0,n.jsx)(a.qT,{ml:1.5,label:(0,n.jsx)(b.x6,{id:"IUHTyS"})})]}),(0,n.jsx)(j.e,{p:.5,children:Object.entries(q.T5).map(t=>{let[s,r]=t;return(0,n.jsx)(ir,{label:r.name,type:"radius",isSelected:s===i.roundness,sx:r.previewSx,onClick:()=>{e((0,C.n4)({roundness:s}))}},s)})})]}),(0,n.jsxs)(eI.MJ,{children:[(0,n.jsxs)(eT.l,{children:[(0,n.jsx)(b.x6,{id:"n0Xbfn"}),(0,n.jsx)(a.qT,{ml:1.5,label:(0,n.jsx)(b.x6,{id:"bsqZlK"})})]}),(0,n.jsx)(j.e,{p:.5,children:Object.entries(q.Jm).map(t=>{let[s,r]=t;return r.deprecated&&s!==i.cardShadow?null:(0,n.jsx)(ir,{label:r.name,type:"shadow",isSelected:s===i.cardShadow||!i.cardShadow&&"default"===s,sx:r.previewSx,onClick:()=>{e((0,C.E0)({cardShadow:s}))}},s)})})]}),(0,n.jsxs)(eI.MJ,{children:[(0,n.jsx)(eT.l,{children:(0,n.jsx)(b.x6,{id:"XDmFR6"})}),(0,n.jsx)(j.e,{p:.5,isAttached:!0,children:Object.entries(q.ws).map(t=>{let[s,r]=t;return(0,n.jsx)(io,{tooltip:r.name,isSelected:s===i.cardBorder,label:r.icon,onClick:()=>{e((0,C.Cg)({cardBorder:s}))}},s)})})]}),(0,n.jsx)(ia,{}),(0,n.jsxs)(eI.MJ,{children:[(0,n.jsx)(eT.l,{children:(0,n.jsx)(b.x6,{id:"yu3Nvs"})}),(0,n.jsx)(j.e,{p:.5,children:Object.entries(q.Xg).map(t=>{let[s,r]=t;return(0,n.jsx)(is,{label:r.name,type:"card",isSelected:s===i.cardTransparency,sx:r.previewSx,onClick:()=>{e((0,C.SM)({cardTransparency:s}))}},s)})})]}),(0,n.jsxs)(eI.MJ,{children:[(0,n.jsx)(eT.l,{children:(0,n.jsx)(b.x6,{id:"ae2ouI"})}),(0,n.jsx)(j.e,{p:.5,flexWrap:"wrap",isAttached:!0,gap:2,children:Object.entries(il.e).map(t=>{let[s,r]=t;return(0,n.jsx)(is,{label:r.name,type:"layout-cut",isSelected:s===i.accentCut,onClick:()=>{e((0,C.m7)({accentCut:s}))},children:(0,n.jsxs)(z.z,{h:"100%",w:"100%",spacing:"0",bg:"white",children:[(0,n.jsx)(I.s,{flex:"2",h:"100%"}),(0,n.jsx)(I.s,{flex:"1",h:"100%",bg:"gray.200",color:"gray.500",alignItems:"center",justifyContent:"end",sx:r.maskStyles.right,p:2,children:(0,n.jsx)(D.g,{icon:eU.Cyq})})]})},s)})})]})]})});ih.displayName="CardsTab";let im=(0,d.memo)(()=>{let e=(0,x.jL)(),t=(0,x.GV)(C.eo);if(!t)throw Error("Theme is undefined");let i=(0,tR.M)(t);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(iu,{}),(0,n.jsxs)(eI.MJ,{children:[(0,n.jsx)(eT.l,{children:(0,n.jsx)(b.x6,{id:"xQJpEa"})}),(0,n.jsx)(j.e,{p:.5,isAttached:!0,children:Object.entries(q.z0).map(t=>{let[s,r]=t;return(0,n.jsx)(io,{tooltip:r.name,isSelected:s===i.shapeFill,label:r.icon,onClick:()=>{e((0,C.Ow)({shapeFill:s})),"none"===s&&"none"===i.shapeBorder&&e((0,C.HC)({shapeBorder:"md"}))}},s)})})]}),(0,n.jsxs)(eI.MJ,{children:[(0,n.jsx)(eT.l,{children:"Block border"}),(0,n.jsx)(j.e,{isAttached:!0,children:Object.entries(q.ws).map(t=>{let[s,r]=t;return(0,n.jsx)(io,{tooltip:r.name,isSelected:s===i.shapeBorder,label:r.icon,onClick:()=>{e((0,C.HC)({shapeBorder:s}))}},s)})})]}),(0,n.jsxs)(eI.MJ,{children:[(0,n.jsx)(eT.l,{children:"Block shadow"}),(0,n.jsx)(j.e,{as:tC.B,children:Object.entries(q.kI).map(t=>{let[s,r]=t;return r.deprecated&&s!==i.shapeShadow?null:(0,n.jsx)(ir,{type:"block-shadow",label:r.name,isSelected:s===i.shapeShadow,sx:{border:"1px solid",borderColor:"gray.200",backgroundColor:"gray.50",...r.previewSx},onClick:()=>{e((0,C.pe)({shapeShadow:s}))}},s)})})]})]})});im.displayName="BlocksTab";let ip=(0,d.memo)(()=>{let e=(0,x.GV)(C.eo),t=(0,x.jL)();if(!e)throw Error("Theme is undefined");let i=(0,tR.M)(e),{config:s}=e,r=(0,e3.Jh)(e),o=(0,e3.jO)(e);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(eI.MJ,{children:[(0,n.jsxs)(eT.l,{children:[(0,n.jsx)(b.x6,{id:"Ptp9MF"})," ",(0,n.jsx)(a.qT,{label:(0,n.jsx)(b.x6,{id:"W3CvLD"})})]}),(0,n.jsx)(e4.tN,{theme:e,color:s.buttonColor,defaultColor:o,updateColor:e=>{t((0,C.$W)({color:e}))},palette:"accent"})]}),(0,n.jsxs)(eI.MJ,{children:[(0,n.jsx)(eT.l,{children:"Button shape"}),(0,n.jsx)(j.e,{as:tC.B,children:Object.entries(q.OE).map(e=>{let[s,r]=e;return(0,n.jsx)(is,{type:"button",label:r.name,isSelected:s===i.buttonRoundness,sx:r.previewSx,onClick:()=>{t((0,C.L_)({roundness:s}))}},s)})})]}),(0,n.jsxs)(eI.MJ,{children:[(0,n.jsxs)(eT.l,{children:[(0,n.jsx)(b.x6,{id:"QfrKvi"})," ",(0,n.jsx)(a.qT,{label:(0,n.jsx)(b.x6,{id:"W3CvLD"})})]}),(0,n.jsx)(e4.a9,{theme:e,color:s.linkColor,defaultColor:r,updateColor:e=>{t((0,C.NN)({color:e}))},palette:"accent"})]})]})});ip.displayName="ButtonsLinksTab";let ig=()=>[{id:"default",title:(0,n.jsx)(b.x6,{id:"TJBHlP"}),description:(0,n.jsx)(b.x6,{id:"1GpX8B"}),knobs:()=>({})},{id:"flat",title:(0,n.jsx)(b.x6,{id:"F7cy8b"}),description:(0,n.jsx)(b.x6,{id:"SkGUtG"}),knobs:()=>({roundness:"sm",buttonRoundness:"sm",cardBorder:"none",cardShadow:"none",shapeFill:"solid",shapeBorder:"none",shapeShadow:"none"})},{id:"outline",title:(0,n.jsx)(b.x6,{id:"dD7NPy"}),description:(0,n.jsx)(b.x6,{id:"GYrLbt"}),knobs:e=>({shapeFill:"none",shapeBorder:"md",cardBorder:"md",roundness:"sm",buttonRoundness:"sm",cardBorderColor:(0,e3.HW)((0,e3.VH)(e))})},{id:"sharp",title:(0,n.jsx)(b.x6,{id:"MnUrtL"}),description:(0,n.jsx)(b.x6,{id:"Zcn2iz"}),knobs:()=>({shapeFill:"solid",shapeBorder:"sm",cardBorder:"sm",cardShadow:"none",roundness:"sm",buttonRoundness:"sm",accentCut:"diagonal"})},{id:"comic",title:(0,n.jsx)(b.x6,{id:"83V/SJ"}),description:(0,n.jsx)(b.x6,{id:"tW4rXv"}),knobs:e=>({roundness:"sm",buttonRoundness:"sm",cardBorder:"md",cardShadow:"hard",shapeFill:"solid",shapeBorder:"md",shapeShadow:"none",cardBorderColor:(0,e3.HW)((0,e3.VH)(e))})},{id:"glass",title:(0,n.jsx)(b.x6,{id:"f0936e"}),description:(0,n.jsx)(b.x6,{id:"yeVgz2"}),knobs:()=>({cardTransparency:"frosted",cardBorder:"none",cardShadow:"default",roundness:"sm",shapeFill:"solid",shapeShadow:"none",shapeBorder:"sm"})},{id:"rounded",title:(0,n.jsx)(b.x6,{id:"ieQgZ8"}),description:(0,n.jsx)(b.x6,{id:"ulXymN"}),knobs:()=>({roundness:"xl",buttonRoundness:"xl",shapeFill:"none",shapeBorder:"lg",cardBorder:"lg",cardShadow:"none",accentCut:"round"})},{id:"soft",title:(0,n.jsx)(b.x6,{id:"DT6auk"}),description:(0,n.jsx)(b.x6,{id:"UtUWAG"}),knobs:()=>({cardTransparency:"frosted",cardShadow:"default",roundness:"lg",cardBorder:"none",shapeShadow:"soft",shapeBorder:"none",shapeFill:"none",buttonRoundness:"xl",accentCut:"fade"})},{id:"capsule",title:(0,n.jsx)(b.x6,{id:"Q4Of8O"}),description:(0,n.jsx)(b.x6,{id:"vc8Frf"}),knobs:e=>({roundness:"xl",buttonRoundness:"xl",cardBorder:"md",cardShadow:"hard",shapeFill:"solid",shapeBorder:"sm",shapeShadow:"hard",cardBorderColor:(0,e3.HW)((0,e3.VH)(e)),accentCut:"wiggle"})}],ij=(0,d.memo)(()=>{let e=(0,x.GV)(C.eo),t=(0,x.jL)(),[i,s]=(0,d.useState)(null),r=(0,d.useCallback)(i=>{if(!e)throw Error("theme is undefined");s(i.id);let n=i.knobs(e);t((0,C._R)({config:{...t9,...n}}))},[t,e]);if(!e)throw Error("Theme is undefined");let o=ig();return(0,n.jsx)(A.B,{spacing:6,children:(0,n.jsx)(tY,{defaultTab:(0,n.jsx)(A.B,{children:(0,n.jsx)(tE.x,{templateColumns:tw,gap:3,children:o.map(t=>(0,n.jsx)(ie,{theme:e,pack:t,isSelected:i===t.id,onClick:()=>r(t)},t.id))})}),customTab:(0,n.jsx)(ix,{})})})});ij.displayName="DesignStep";var ib=i(41781);let iv=e=>{let{isSelected:t=!1,onClick:i,heading:s,headingWeight:r,body:o,bodyWeight:l,theme:a}=e,d=(0,e3.Ik)((0,e3.Tn)(a)),c=(0,e3.VL)((0,e3.Lz)(a)),u=(0,e3.VL)((0,e3.fQ)(a));return(0,n.jsx)(f.$,{variant:"ghost",onClick:i,minH:"auto",h:"auto",minW:"auto",w:"100%",p:2,flex:1,color:"gray.800",textAlign:"left",whiteSpace:"normal",bg:t?"trueblue.50":"white",borderColor:t?"trueblue.400":"transparent",borderWidth:"2px",alignItems:"flex-start",children:(0,n.jsxs)(A.B,{flex:1,bg:d,borderRadius:"md",spacing:1,p:3,py:4,shadow:"sm",borderWidth:"1px",children:[(0,n.jsx)(p.E,{fontSize:"xl",fontWeight:r,fontFamily:s.id,css:c,noOfLines:1,children:s.name}),(0,n.jsx)(p.E,{fontWeight:l,fontFamily:o.id,css:u,fontSize:"md",children:o.name})]})})};var iy=i(32844),iw=i(59554),iC=i(6743),ik=i(30928),iE=i(62117),iS=i(72470),iI=i(77979),iT=i(84718),iA=i(16936),iR=i(50933),iO=i(33750),i_=i.n(iO),iD=i(17006),iP=i(11403);let iz=(0,d.memo)(()=>{let e=(0,x.jL)(),t=(0,x.GV)(C.eo),{fontsMap:i,globalFonts:s,workspaceFonts:r}=(0,y.II)(),o={globalFonts:s,workspaceFonts:r};if(!t)throw Error("Theme is undefined");let l=(0,d.useCallback)(n=>{let s=i[n],r=(0,eG.yi)(s),o=(0,eF.g9)(r,t.headingFontWeight||q.mI.heading)||q.mI.heading;e((0,C.CS)({font:n,weight:o,fontsMap:i}))},[e,i,t.headingFontWeight]),a=(0,d.useCallback)(n=>{let s=i[n],r=(0,eG.yi)(s),o=(0,eF.g9)(r,t.bodyFontWeight||q.mI.body)||q.mI.body;e((0,C.g6)({font:n,weight:o,fontsMap:i}))},[e,i,t.bodyFontWeight]),c=(0,d.useCallback)(t=>e((0,C.zs)({weight:t})),[e]),u=(0,d.useCallback)(t=>e((0,C.lm)({weight:t})),[e]),h=(0,d.useCallback)(()=>{let e=(0,E.Zi)();window.open(e,"_blank")},[]),m=i[t.headingFont||q.z8.headingFont]||i[q.z8.headingFont],g=i[t.bodyFont||q.z8.bodyFont]||i[q.z8.bodyFont],j=t.headingFontWeight||q.mI.heading,f=t.bodyFontWeight||q.mI.body;return(0,n.jsxs)(A.B,{children:[(0,n.jsxs)(eI.MJ,{children:[(0,n.jsx)(eT.l,{children:(0,n.jsx)(p.E,{children:(0,n.jsx)(b.x6,{id:"PKjGhT"})})}),(0,n.jsxs)(e$.T,{spacing:2,align:"stretch",children:[(0,n.jsx)(eK,{fonts:o,value:t.headingFont,updateValue:l,onFontUploadClick:h,weight:"bold",defaultFont:q.z8.headingFont,"data-testid":"custom-theme-heading-font-picker",my:0}),(0,n.jsx)(eY,{font:m,value:j,defaultWeight:700,updateValue:c,my:0}),(0,n.jsx)(t4,{}),(0,n.jsx)(iN,{children:(0,n.jsx)(iF,{variant:"heading"})})]})]}),(0,n.jsxs)(eI.MJ,{children:[(0,n.jsx)(eT.l,{children:(0,n.jsx)(p.E,{children:(0,n.jsx)(b.x6,{id:"bGQplw"})})}),(0,n.jsxs)(e$.T,{spacing:2,align:"stretch",children:[(0,n.jsx)(eK,{fonts:o,value:t.bodyFont,updateValue:a,onFontUploadClick:h,weight:"normal",defaultFont:q.z8.bodyFont,"data-testid":"custom-theme-body-font-picker",my:0}),(0,n.jsx)(eY,{font:g,value:f,defaultWeight:400,updateValue:u,my:0}),(0,n.jsx)(t5,{}),(0,n.jsx)(iN,{children:(0,n.jsx)(iF,{variant:"body"})})]})]}),(0,n.jsx)(eS.F,{mt:"4",colorScheme:"gray",children:(0,n.jsx)(p.E,{fontSize:"sm",children:(0,n.jsx)(b.x6,{id:"gXllrZ"})})})]})});iz.displayName="TypographySettings";let iM=[{name:()=>eX.Ru._({id:"EdQY6l"}),icon:_.tiU,key:"none"},{name:()=>eX.Ru._({id:"fVR7qN"}),icon:_.Jn3,key:"uppercase"}],iN=e=>{let{children:t}=e;return(0,n.jsx)(iy.n,{allowMultiple:!0,mt:0,mb:6,children:(0,n.jsxs)(iw.A,{border:"none",bg:"gray.50",borderRadius:"md",children:[(0,n.jsxs)(iC.J,{fontWeight:"500",ps:3,borderRadius:"md",children:[(0,n.jsx)(R.a,{as:"span",flex:"1",textAlign:"start",children:(0,n.jsx)(b.x6,{id:"sxkWRg"})}),(0,n.jsx)(ik.Q,{})]}),(0,n.jsx)(iE.v,{px:4,pb:2,children:t})]})})},iF=e=>{let{variant:t}=e,i=(0,x.GV)(C.eo),s=(0,x.jL)();if(!i)throw Error("Theme is undefined");let{letterSpacingHeading:r,letterSpacingBody:o,lineHeightHeading:l,lineHeightBody:c,fontSize:u,headingFontSize:h,headingTransform:m="none"}=i.config,p="heading"===t?r:o,g="heading"===t?l:c,f="heading"===t?iD.eL:iD.Uw,v="heading"===t?h:u,y=(0,d.useCallback)(e=>{"heading"===t?s((0,C.pG)({letterSpacing:e})):s((0,C.NS)({letterSpacing:e}))},[s,t]),w=(0,d.useCallback)(e=>{"heading"===t?s((0,C.h4)({lineHeight:e})):s((0,C.L7)({lineHeight:e}))},[s,t]),k=(0,d.useCallback)(e=>{"heading"===t?s((0,C.IA)({fontSize:e})):s((0,C.Gs)({fontSize:e}))},[s,t]),E=(0,d.useCallback)(e=>{s((0,C.Em)({transform:e}))},[s]);return(0,n.jsxs)(A.B,{py:2,minH:"100px",spacing:4,children:[(0,n.jsxs)(z.z,{children:[(0,n.jsxs)(R.a,{children:[(0,n.jsxs)(eT.l,{children:[(0,n.jsx)(b.x6,{id:"Wqh8xb"}),(0,n.jsx)(a.qT,{label:(0,n.jsx)(b.x6,{id:"d4Sact"}),ms:1.5})]}),(0,n.jsxs)(iS.M,{children:[(0,n.jsx)(iI.W,{pointerEvents:"none",color:"gray.600",children:(0,n.jsx)(D.g,{icon:_.$LH})}),(0,n.jsx)(iT.Q7,{min:1,max:2,step:.05,defaultValue:null!=g?g:"",onChange:(e,t)=>{""===e||isNaN(t)?w(void 0):w(i_()(t,1,2))},children:(0,n.jsx)(iT.OO,{bg:"white",ps:"var(--input-height)",pe:"var(--input-padding)",placeholder:f.toString(),textAlign:"end"})})]})]}),(0,n.jsxs)(R.a,{children:[(0,n.jsxs)(eT.l,{children:[(0,n.jsx)(b.x6,{id:"vhRvfF"}),(0,n.jsx)(a.qT,{label:(0,n.jsx)(b.x6,{id:"ov2xUH"}),ms:1.5})]}),(0,n.jsxs)(iS.M,{children:[(0,n.jsx)(iI.W,{pointerEvents:"none",color:"gray.600",children:(0,n.jsx)(D.g,{icon:_.myY})}),(0,n.jsx)(iT.Q7,{min:-10,max:10,step:1,defaultValue:p?100*p:"",onChange:(e,t)=>{""===e||isNaN(t)?y(void 0):y(i_()(t/100,-.1,.1))},children:(0,n.jsx)(iT.OO,{bg:"white",ps:"var(--input-height)",placeholder:"0",textAlign:"end"})}),(0,n.jsx)(iI.t,{pointerEvents:"none",color:"gray.600",children:"%"})]})]})]}),"body"!==t&&(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(R.a,{children:[(0,n.jsx)(eT.l,{children:(0,n.jsx)(b.x6,{id:"A/6zEn"})}),(0,n.jsx)(j.e,{isAttached:!0,children:iM.map(e=>(0,n.jsx)(a.Tz,{label:e.name(),children:(0,n.jsx)(iA.K,{"aria-label":e.name(),icon:(0,n.jsx)(D.g,{icon:e.icon,fixedWidth:!0}),variant:m===e.key?"plainSelected":"plain",boxShadow:"none",onClick:()=>E(e.key)})},e.key))})]})}),(0,n.jsx)(iL,{value:v,setValue:k})]})},iL=e=>{let{value:t,setValue:i}=e,[s,r]=(0,d.useState)(!1),[o,l]=(0,d.useState)(t||1),c=(0,iP.lW)(i,300);return(0,n.jsxs)(R.a,{pb:"2",children:[(0,n.jsxs)(eT.l,{mb:"3",children:[(0,n.jsx)(b.x6,{id:"jIL7bk"})," ",(0,n.jsx)(a.qT,{label:(0,n.jsx)(b.x6,{id:"/qH3CQ"})})]}),(0,n.jsxs)(iR.Ap,{defaultValue:t,min:.75,max:1.25,step:.05,colorScheme:"trueblue",onChange:e=>{l(e),c(e)},onMouseEnter:()=>r(!0),onMouseLeave:()=>r(!1),children:[(0,n.jsx)(iR.hB,{children:(0,n.jsx)(iR.hJ,{})}),(0,n.jsx)(iR.d6,{value:1,h:"20px",w:"2px",bg:"gray.300",transform:"translateY(-50%) translateX(-50%)"}),(0,n.jsx)(a.Tz,{placement:"top",isOpen:s,label:"".concat(o.toFixed(2),"x"),shortcut:1===o?eX.Ru._({id:"ovBPCi"}):void 0,children:(0,n.jsx)(iR.OQ,{})})]})]})},iV=[{heading:{font:"Inter",weight:700,keywords:["sans-serif","bold"]},body:{font:"Inter",weight:400,keywords:["sans-serif","normal"]}},{heading:{font:"DM Sans",weight:600,keywords:["semi-bold","sans-serif"]},body:{font:"DM Sans",weight:400,keywords:["normal","sans-serif"]}},{heading:{font:"Overpass",weight:700,keywords:["sans-serif","bold"]},body:{font:"Overpass",weight:400,keywords:["sans-serif","normal"]}},{heading:{font:"Barlow",weight:600,keywords:["narrow","semi-bold","sans-serif"]},body:{font:"Barlow",weight:400,keywords:["sans-serif","normal","narrow"]}},{heading:{font:"Nunito",weight:600,keywords:["semi-bold","fun","sans-serif","rounded"]},body:{font:"PT Sans",weight:400,keywords:["normal","sans-serif"]}},{heading:{font:"Lora",weight:400,keywords:["normal","serif"]},body:{font:"Source Sans 3",weight:400,keywords:["sans-serif","normal"]}},{heading:{font:"Instrument Sans",weight:600,keywords:["semi-bold","sans-serif"]},body:{font:"Instrument Sans",weight:400,keywords:["normal","sans-serif"]}},{heading:{font:"Roboto Slab",weight:400,keywords:["serif","slab-serif","normal"]},body:{font:"Roboto",weight:400,keywords:["sans-serif","normal"]}},{heading:{font:"Barlow",weight:700,keywords:["narrow","bold","sans-serif"]},body:{font:"Montserrat",weight:400,keywords:["sans-serif","normal"]}},{heading:{font:"Libre Baskerville",weight:400,keywords:["serif","normal"]},body:{font:"DM Sans",weight:400,keywords:["sans-serif","normal"]}},{heading:{font:"Montserrat",weight:400,keywords:["normal","sans-serif"]},body:{font:"Heebo",weight:300,keywords:["light","sans-serif"]}},{heading:{font:"Prompt",weight:500,keywords:["sans-serif","bold"]},body:{font:"Mukta",weight:300,keywords:["sans-serif","light"]}},{heading:{font:"Inconsolata",weight:700,keywords:["monospace","serif","bold"]},body:{font:"Fira Sans",weight:400,keywords:["sans-serif","normal"]}},{heading:{font:"Fraunces",weight:500,keywords:["serif","fun","bold"]},body:{font:"Epilogue",weight:400,keywords:["sans-serif","normal"]}},{heading:{font:"Gelasio",weight:400,keywords:["serif","normal"]},body:{font:"Lato",weight:400,keywords:["sans-serif","normal"]}},{heading:{font:"Raleway",weight:400,keywords:["sans-serif","thin","normal"]},body:{font:"Roboto",weight:400,keywords:["sans-serif","normal"]}},{heading:{font:"Kanit",weight:300,keywords:["sans-serif","thin","normal"]},body:{font:"Martel Sans",weight:400,keywords:["sans-serif","normal"]}},{heading:{font:"Corben",weight:400,keywords:["normal","serif","wide","fun"]},body:{font:"Nobile",weight:400,keywords:["sans-serif","normal","narrow"]}},{heading:{font:"Crimson Pro",weight:700,keywords:["serif","bold"]},body:{font:"Open Sans",weight:400,keywords:["sans-serif","normal"]}},{heading:{font:"Poppins",weight:300,keywords:["sans-serif","thin","normal"]},body:{font:"Roboto",weight:300,keywords:["thin","sans-serif","normal"]}},{heading:{font:"Red Hat Text",weight:400,keywords:["normal","sans-serif"]},body:{font:"Roboto",weight:300,keywords:["thin","sans-serif"]}},{heading:{font:"Gelasio",weight:400,keywords:["serif","normal"]},body:{font:"Gelasio",weight:400,keywords:["normal","serif"]}},{heading:{font:"Bitter",weight:500,keywords:["slab-serif","serif","normal"]},body:{font:"Open Sans",weight:400,keywords:["sans-serif","normal"]}},{heading:{font:"Syne",weight:700,keywords:["wide","sans-serif","fun","bold"]},body:{font:"Arimo",weight:400,keywords:["normal","sans-serif"]}},{heading:{font:"Roboto",weight:500,keywords:["sans-serif","narrow","semi-bold"]},body:{font:"Roboto",weight:400,keywords:["sans-serif","normal"]}},{heading:{font:"Playfair Display",weight:700,keywords:["serif","bold"]},body:{font:"Open Sans",weight:400,keywords:["sans-serif","normal"]}},{heading:{font:"Quattrocento",weight:400,keywords:["thin","serif","normal"]},body:{font:"Quattrocento",weight:400,keywords:["serif","normal"]}},{heading:{font:"Montserrat",weight:700,keywords:["wide","bold","sans-serif"]},body:{font:"Source Sans 3",weight:400,keywords:["sans-serif","normal"]}},{heading:{font:"Kanit",weight:400,keywords:["sans-serif","semi-bold","normal"]},body:{font:"Martel Sans",weight:300,keywords:["sans-serif","normal"]}},{heading:{font:"Lato",weight:700,keywords:["sans-serif","semi-bold","normal"]},body:{font:"Lato",weight:400,keywords:["sans-serif","normal"]}},{heading:{font:"Fira Mono",weight:500,keywords:["narrow","monospace","semi-bold","normal"]},body:{font:"Fira Sans",weight:400,keywords:["sans-serif","narrow","normal"]}},{heading:{font:"Alexandria",weight:400,keywords:["wide","sans-serif","normal"]},body:{font:"Nobile",weight:400,keywords:["sans-serif","normal"]}},{heading:{font:"Dela Gothic One",weight:400,keywords:["wide","bold","extrabold","sans-serif","fun"]},body:{font:"DM Sans",weight:400,keywords:["sans-serif","wide","normal"]}},{heading:{font:"Unbounded",weight:400,keywords:["normal","wide","sans-serif","fun"]},body:{font:"Cabin",weight:400,keywords:["wide","sans-serif"]}},{heading:{font:"Tomorrow",weight:600,keywords:["fun","bold","sans-serif"]},body:{font:"Tomorrow",weight:400,keywords:["fun","normal","sans-serif"]}},{heading:{font:"Roboto Mono",weight:500,keywords:["monospace","sans-serif","semi-bold"]},body:{font:"Roboto",weight:400,keywords:["sans-serif","normal"]}},{heading:{font:"Syne",weight:700,keywords:["fun","semi-bold","bold","wide","fun"]},body:{font:"Overpass",weight:300,keywords:["normal","thin","sans-serif"]}},{heading:{font:"Syne",weight:800,keywords:["fun","wide","extrabold","bold","sans-serif"]},body:{font:"Syne",weight:400,keywords:["sans-serif","normal","wide"]}},{heading:{font:"Spline Sans",weight:700,keywords:["narrow","sans-serif","semi-bold"]},body:{font:"Barlow",weight:400,keywords:["narrow","sans-serif","normal"]}},{heading:{font:"Anton",weight:400,keywords:["narrow","sans-serif","bold","fun"]},body:{font:"Fira Sans",weight:400,keywords:["narrow","sans-serif","normal"]}},{heading:{font:"Unbounded",weight:700,keywords:["fun","bold","extrabold","wide","sans-serif"]},body:{font:"Open Sans",weight:400,keywords:["sans-serif","normal"]}},{heading:{font:"Sora",weight:500,keywords:["serif","semi-bold"]},body:{font:"Noto Sans TC",weight:400,keywords:["sans-serif","normal"]}},{heading:{font:"Libre Baskerville",weight:400,keywords:["serif","thin","normal"]},body:{font:"Open Sans",weight:400,keywords:["sans-serif","normal"]}},{heading:{font:"MuseoModerno",weight:500,keywords:["fun","sans-serif","semi-bold","bold"]},body:{font:"Source Sans 3",weight:400,keywords:["normal","sans-serif"]}},{heading:{font:"Merriweather",weight:700,keywords:["bold","serif"]},body:{font:"Open Sans",weight:400,keywords:["sans-serif","normal"]}},{heading:{font:"Alexandria",weight:600,keywords:["bold","wide","sans-serif"]},body:{font:"Sora",weight:300,keywords:["sans-serif","normal"]}},{heading:{font:"Patrick Hand",weight:400,keywords:["fun","handwriting","normal"]},body:{font:"Patrick Hand",weight:400,keywords:["fun","handwriting","normal"]}},{heading:{font:"Prata",weight:400,keywords:["serif","normal"]},body:{font:"Raleway",weight:400,keywords:["sans-serif","normal","fun"]}}],iW=()=>[{key:"all",label:(0,n.jsx)(b.x6,{id:"N40H+G"})},{key:"sans-serif",label:(0,n.jsx)(b.x6,{id:"cW+T4V"})},{key:"serif",label:(0,n.jsx)(b.x6,{id:"e5bnvv"})},{key:"monospace",label:(0,n.jsx)(b.x6,{id:"qJC2VT"})},{key:"fun",label:(0,n.jsx)(b.x6,{id:"rmN315"})},{key:"bold",label:(0,n.jsx)(b.x6,{id:"KmydK6"})},{key:"thin",label:(0,n.jsx)(b.x6,{id:"RGjFMI"})},{key:"wide",label:(0,n.jsx)(b.x6,{id:"I5S9ZE"})}],iG=(0,d.memo)(()=>{let{globalFonts:e}=(0,y.II)();return e.length?(0,n.jsx)(tY,{defaultTab:(0,n.jsx)(iU,{}),customTab:(0,n.jsx)(iz,{})}):(0,n.jsx)(iB,{})});iG.displayName="FontsStep";let iB=(0,d.memo)(()=>(0,n.jsxs)(A.B,{spacing:4,children:[(0,n.jsxs)(z.z,{children:[(0,n.jsx)(ib.E,{height:7,flex:1}),(0,n.jsx)(ib.E,{height:7,flex:1})]}),(0,n.jsxs)(z.z,{children:[(0,n.jsx)(ib.E,{height:6,w:12}),(0,n.jsx)(ib.E,{height:6,w:12}),(0,n.jsx)(ib.E,{height:6,w:12})]}),(0,n.jsx)(tE.x,{mt:2,templateColumns:tw,gap:3,children:Array.from({length:4}).map((e,t)=>(0,n.jsx)(I.s,{px:2,children:(0,n.jsx)(ib.E,{mt:3,flex:1,height:20})},t))})]}));iB.displayName="FontsConfigSkeleton";let iU=(0,d.memo)(()=>{let{themeFontsMap:e,fontsMap:t}=(0,y.II)(),i=(0,x.jL)(),s=(0,x.GV)(C.eo),[r,o]=(0,d.useState)("all"),l=(0,d.useMemo)(()=>iV.filter(e=>"all"===r||null===r||e.heading.keywords.includes(r)),[r]),a=(0,d.useMemo)(()=>l.flatMap(t=>[e[t.heading.font],e[t.body.font]]).filter(Boolean),[l,e]),c=(0,d.useCallback)(e=>{i((0,C.BA)({fontPair:e,fontsMap:t}))},[i,t]),u=(0,d.useMemo)(()=>iW(),[]);if(!s)throw Error("Theme is undefined");return(0,n.jsxs)(A.B,{spacing:6,children:[(0,n.jsx)(tC.B,{children:u.map(e=>{let{key:t,label:i}=e;return(0,n.jsx)(tk.vw,{onClick:()=>{o(t)},colorScheme:r===t?"trueblue":"gray",cursor:"pointer",children:(0,n.jsx)(p.E,{children:i})},t)})}),(0,n.jsx)(tE.x,{templateColumns:tw,gap:3,children:l.map((t,i)=>{let r=s.headingFont===t.heading.font&&s.headingFontWeight===t.heading.weight&&s.bodyFont===t.body.font&&s.bodyFontWeight===t.body.weight,o=e[t.heading.font],l=e[t.body.font];return o&&l?(0,n.jsx)(iv,{isSelected:r,onClick:()=>c(t),heading:o,headingWeight:t.heading.weight,body:l,bodyWeight:t.body.weight,theme:s},i):null})}),(0,n.jsx)(eB.J,{fonts:a})]})});iU.displayName="FontsBuilderPicker";let iH=(0,d.memo)(()=>{let e=(0,x.jL)(),t=(0,x.GV)(C.$9);return(0,n.jsxs)(eI.MJ,{children:[(0,n.jsx)(eT.l,{children:(0,n.jsx)(b.x6,{id:"qy77B2"})}),(0,n.jsx)(R.a,{maxW:"min(100%, 300px)",children:(0,n.jsx)(e5,{value:t,onLogoUploadStart:()=>{e((0,C.QZ)())},updateValue:t=>{if(!t)return void e((0,C.Zw)());e((0,C.$k)({logoImage:(0,e8.yK)({result:t,isError:!1})}))},onLogoUploadFail:()=>{e((0,C.UY)())}})})]})});iH.displayName="LogoSettings";let iK=(0,d.memo)(()=>(0,n.jsx)(A.B,{spacing:6,alignItems:"center",children:(0,n.jsx)(R.a,{mx:"auto",maxW:"300px",children:(0,n.jsx)(iH,{})})}));iK.displayName="LogoStep";var iJ=i(73689),iq=i(73867),iY=i(27250),i$=i(59557);let iX={position:"absolute",width:"104%",height:"104%",top:"-2%",left:"-2%",backgroundRepeat:"no-repeat",backgroundPosition:"center",backgroundColor:"transparent",backgroundSize:"cover",transition:"all 0.1s ease-out"},iQ=e=>{let{children:t}=e,i=(0,d.useRef)(null),s=(0,d.useRef)(null),r=(0,d.useRef)(null);return(0,d.useEffect)(()=>{let e=i.current,t=s.current,n=r.current;if(!e||!t||!n)return;let o=Array.from(n.children),l=o.length,a=i=>{let n=i.pageX,s=i.pageY,r=e.getBoundingClientRect(),a=e.clientWidth||e.offsetWidth||e.scrollWidth,d=e.clientHeight||e.offsetHeight||e.scrollHeight,c=.52-(n-r.left)/a,u=.52-(s-r.top)/d,x=s-r.top-d/2,h=n-r.left-a/2,m="rotateX(".concat((x-u)*.1,"deg) rotateY(").concat((c-h)*.07,"deg)"),p=180*Math.atan2(x,h)/Math.PI-90;p<0&&(p+=360),e.className.includes("over")&&(m+=" scale3d(1.07,1.07,1.07)"),e.style.transform=m,t.style.background="linear-gradient(".concat(p,"deg, rgba(255,255,255,").concat((s-r.top)/d*.4,") 0%,rgba(255,255,255,0) 80%)"),t.style.transform="translateX(".concat(c*l-.1,"px) translateY(").concat(u*l-.1,"px)"),o.forEach((e,t)=>{let i=l-t;e.style.transform="translateX(".concat(-(c*i*15),"px) translateY(").concat(-(u*i*15),"px)")})},d=()=>{e.className+=" over"},c=()=>{e.className=e.className.replace(" over",""),e.style.transform="",t.style.cssText="",o.forEach(e=>e.style.transform="")};return e.addEventListener("mousemove",a),e.addEventListener("mouseenter",d),e.addEventListener("mouseleave",c),()=>{e.removeEventListener("mousemove",a),e.removeEventListener("mouseenter",d),e.removeEventListener("mouseleave",c)}}),(0,n.jsx)(i$.A,{children:e=>{let{width:o,height:l}=e;return(0,n.jsxs)(I.s,{ref:i,style:{perspective:"1600px",height:l,width:o,margin:"0 auto"},borderRadius:"md",transitionProperty:"all",transitionDuration:"normal",transitionTimingFunction:"ease-out",sx:{"&:hover .threeDImage-shadow":{shadow:"0 45px 100px rgba(14, 21, 47, 0.4), 0 16px 40px rgba(14, 21, 47, 0.4)"}},children:[(0,n.jsx)(I.s,{ref:r,bg:"white",sx:{position:"relative",width:"100%",height:"100%",borderRadius:"5px",overflow:"hidden",transformStyle:"preserve-3d"},children:Array.isArray(t)?t.map((e,t)=>(0,n.jsx)(R.a,{sx:iX,"data-layer":t,pointerEvents:"none",children:e},t)):(0,n.jsx)(R.a,{sx:iX,"data-layer":0,pointerEvents:"none",children:t})}),(0,n.jsx)(R.a,{sx:{position:"absolute",top:0,left:0,right:0,bottom:0,borderRadius:"5px",background:"linear-gradient(135deg, rgba(255, 255, 255, 0.25) 0%, rgba(255, 255, 255, 0) 60%)",pointerEvents:"none"},ref:s}),(0,n.jsx)(R.a,{sx:{position:"absolute",top:"5%",left:"5%",width:"90%",height:"90%",transition:"all 0.2s ease-out",boxShadow:"0 8px 30px rgba(14, 21, 47, 0.6)",zIndex:-1},className:"threeDImage-shadow"})]})}})};var iZ=i(9236);let i0=e=>{let{title:t,description:i,children:s}=e;return(0,n.jsxs)(A.B,{w:"100%",alignItems:"flex-start",children:[(0,n.jsxs)(A.B,{spacing:1,w:"100%",children:[(0,n.jsx)(p.E,{fontSize:"lg",fontWeight:"semibold",children:t}),(0,n.jsx)(p.E,{fontSize:"xs",color:"gray.600",children:i})]}),s]})},i1=(0,d.memo)(()=>{let{user:e}=(0,P.ur)(),t=(0,x.GV)(C.eo)||iZ.S,i=(0,e3.Ik)((0,e3.H7)(t)),s=(0,x.GV)(C.sv),r=(0,x.jL)(),o=(0,d.useRef)(null),l=(0,d.useCallback)(e=>{r((0,C.qv)({name:e.target.value}))},[r]);(0,d.useEffect)(()=>{o.current&&(o.current.focus(),o.current.select())},[]);let[a,c]=(0,d.useState)(!1),{reward:u}=(0,iJ.bS)("rewardId","confetti",{lifetime:200,angle:90,decay:.91,spread:90,startVelocity:45,elementCount:50,elementSize:10,colors:(0,e3.ND)(t).map(e3.Ik)});(0,d.useEffect)(()=>{let e=setTimeout(()=>{c(!0)},400),t=setTimeout(()=>{u()},550);return()=>{clearTimeout(t),clearTimeout(e)}},[]);let h="260px";return(0,n.jsxs)(A.B,{spacing:10,alignItems:"center",children:[(0,n.jsxs)(I.s,{pos:"relative",flex:1,direction:"column",w:"100%",children:[(0,n.jsx)(I.s,{h:h,align:"center",justify:"center",pos:"absolute",zIndex:0,w:"100%",children:(0,n.jsx)(I.s,{w:2,h:2,id:"rewardId"})}),(0,n.jsx)(R.a,{w:h,h:h,mx:"auto",bg:i,borderRadius:"md",borderWidth:"1px",opacity:+!!a,transform:"scale(".concat(a?1:.9,")"),transitionProperty:"common",transitionDuration:"slow",transitionTimingFunction:"cubic-bezier(0.68,-0.55,0.27,1.55)",children:(0,n.jsx)(iQ,{children:(0,n.jsxs)(R.a,{bg:i,w:"100%",pos:"relative",p:12,pb:24,h:"100%",children:[(0,n.jsx)(iY.q,{theme:t,transform:"scale(1.2)",position:"relative",bottom:"7",left:"-3.5",w:"200px",boxShadow:"none"}),(0,n.jsxs)(A.B,{pos:"absolute",bottom:0,left:5,bg:"white",w:"108%",mx:"-8%",p:"8%",borderTopWidth:"1px",color:"gray.800",children:[(0,n.jsx)(p.E,{noOfLines:1,children:s||(0,n.jsx)(b.x6,{id:"rzKWuu"})}),(0,n.jsx)(iq.S,{createdByYou:!0,createdByName:null==e?void 0:e.displayName,createdByProfileImageUrl:null==e?void 0:e.profileImageUrl,timestampDescription:"Just now"})]})]})})})]}),(0,n.jsx)(R.a,{maxW:"100%",mx:"0 auto",w:"500px",children:(0,n.jsx)(i0,{title:(0,n.jsx)(b.x6,{id:"HZ7fEu"}),children:(0,n.jsx)(eA.p,{mx:"auto",size:"lg",ref:o,value:s,onChange:l,placeholder:eX.Ru._({id:"HZ7fEu"})})})}),(0,n.jsx)(R.a,{maxW:"100%",mx:"0 auto",w:"500px",children:(0,n.jsx)(i6,{})})]})});i1.displayName="ThemeNameStep";let i6=()=>{let e=(0,es.st)(),t=(0,d.useCallback)(t=>{null==e||e.track(es.VV.THEME_RATED,{rating:t,method:"builder"})},[e]),i=(0,d.useCallback)((t,i,n)=>{null==e||e.track(es.VV.THEME_FEEDBACK,{feedback:i,tags:n,rating:t,method:"builder"})},[e]);return(0,n.jsx)(e7.No,{feedbackTags:i2,trackRating:t,trackFeedback:i})},i2=[{key:"wrong-colors",label:(0,n.jsx)(b.x6,{id:"6dn0qr"})},{key:"wrong-fonts",label:(0,n.jsx)(b.x6,{id:"fe43sX"})},{key:"wrong-design",label:(0,n.jsx)(b.x6,{id:"z3jUzS"})},{key:"missing-logo",label:(0,n.jsx)(b.x6,{id:"4Z/w7+"})},{key:"other",label:(0,n.jsx)(b.x6,{id:"aQyGJc"})}],i5={colors:t8,fonts:iG,design:ij,logo:iK,themeName:i1},i4=e=>{let{onContinueClick:t}=e;return(0,n.jsxs)(A.B,{spacing:"6",children:[(0,n.jsx)(O._,{src:"https://cdn.gamma.app/zc87vhr30n8uf3n/39bd9e9e4ae347a39de0f1d27da20a52/original/Frame-1-32.png"}),(0,n.jsx)(p.E,{fontSize:"lg",children:(0,n.jsx)(b.x6,{id:"oXq4Vi"})}),(0,n.jsx)(j.e,{justifyContent:"center",children:(0,n.jsx)(f.$,{minW:"250px",variant:"solid",onClick:t,rightIcon:(0,n.jsx)(D.g,{icon:_.dmS}),children:(0,n.jsx)(b.x6,{id:"EsKTam"})})})]})},i3=e=>{let{step:t,setStep:i}=e,s=(0,ei.d)();if("intro"===t)return(0,n.jsx)(i4,{onContinueClick:()=>{i("colors"),s({title:(0,n.jsx)(b.x6,{id:"okvzsv"}),position:"top",status:"success",duration:2e3,isClosable:!0})}});let r=ty[t],o=i5[t];return(0,n.jsxs)(A.B,{spacing:5,children:[(0,n.jsx)(p.E,{textAlign:"center",size:"md",color:"gray.600",children:r.description}),(0,n.jsx)(R.a,{children:(0,n.jsx)(o,{})})]})};var i8=i(1139);let i7=e=>{let{step:t,setStep:i}=e,s=Object.keys(ty).indexOf(t);return(0,n.jsx)(to.C,{index:s,w:"260px",minW:"0",gap:"0",size:"md",children:Object.entries(ty).map((e,t)=>{let[s,{name:r,icon:o}]=e;return(0,n.jsx)(a.Tz,{label:r,children:(0,n.jsxs)(tl.p,{gap:"0",children:[(0,n.jsx)(ta.S,{as:f.$,variant:"ghost",shadow:"none",size:"sm",onClick:()=>i(s),cursor:"pointer",borderWidth:"0px",bg:"white",sx:{"[data-status=incomplete] &":{color:"gray.600"}},children:(0,n.jsx)(td.x,{complete:(0,n.jsx)(D.g,{icon:o}),incomplete:(0,n.jsx)(D.g,{icon:o}),active:(0,n.jsx)(D.g,{icon:o})})}),(0,n.jsx)(th.m,{mx:"0 !important"})]},t)},t)})})},i9=e=>{let{step:t,setStep:i,onFinishClick:s,errorMessage:r,isThemeSaving:o}=e,l=(0,d.useCallback)(()=>{let e=Object.keys(ty).indexOf(t)-1;i(Object.keys(ty)[e])},[t,i]),c=(0,d.useCallback)(()=>{let e=Object.keys(ty).indexOf(t)+1;i(Object.keys(ty)[e])},[t,i]),u="colors"===t,x="themeName"===t,h="colors"!==t,m={base:void 0,lg:"130px"};return(0,n.jsxs)(A.B,{direction:"row",justifyContent:u?"flex-end":"space-between",alignItems:"center",position:"relative",w:"100%",children:[(0,n.jsx)(i8.z,{in:h,children:(0,n.jsx)(iA.K,{variant:"outline","aria-label":eX.Ru._({id:"CKyk7Q"}),icon:(0,n.jsx)(D.g,{icon:_.Wzs}),onClick:l,pointerEvents:h?"auto":"none"})}),(0,n.jsx)(T.h,{}),(0,n.jsx)(i7,{step:t,setStep:i}),(0,n.jsx)(T.h,{}),x?(0,n.jsx)(a.Tz,{isDisabled:!r,label:r,shouldWrapChildren:!0,children:(0,n.jsx)(f.$,{onClick:s,variant:"solid",isLoading:o,isDisabled:!!r,rightIcon:(0,n.jsx)(D.g,{icon:_.e68}),minW:m,children:(0,n.jsx)(b.x6,{id:"JmZ/+d"})})}):(0,n.jsx)(f.$,{onClick:c,variant:"solid",rightIcon:(0,n.jsx)(D.g,{icon:_.XkK}),minW:m,children:(0,n.jsx)(b.x6,{id:"xGVfLh"})})]})},ne=e=>{let{onComplete:t,onExitClick:i}=e,[s,r]=(0,d.useState)("colors"),o=(0,x.GV)(C.sv),l=(0,x.GV)(C.D6);eo("builder");let{persistTheme:a,isThemeSaving:c}=er({onComplete:t,flow:"builder"}),u=(0,d.useMemo)(()=>o?l?(0,n.jsx)(b.x6,{id:"0y5u1g"}):void 0:(0,n.jsx)(b.x6,{id:"OL7UgX"}),[o,l]),h=(0,d.useCallback)(()=>{o&&a()},[o,a]),m=ty[s];return(0,n.jsxs)(et,{children:[(0,n.jsx)(F,{children:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(W,{children:[(0,n.jsx)(L,{children:"intro"===s?(0,n.jsx)(b.x6,{id:"pxh+PI"}):(0,n.jsxs)(z.z,{justifyContent:"center",color:"deepocean.950",children:[(0,n.jsx)(D.g,{icon:m.icon}),(0,n.jsx)(tf.D,{size:"md",fontWeight:"600",children:m.name})]})}),"colors"===s&&(0,n.jsx)(V,{onClick:()=>{i&&i()},leftIcon:_.CeG,children:(0,n.jsx)(b.x6,{id:"ydzS9x"})})]}),(0,n.jsx)(B,{children:(0,n.jsx)(i3,{step:s,setStep:r})}),"intro"!==s&&(0,n.jsx)(G,{children:(0,n.jsx)(i9,{step:s,setStep:r,errorMessage:u,isThemeSaving:c,onFinishClick:h})})]})}),(0,n.jsx)(U,{children:(0,n.jsx)(tv,{})})]})};var nt=i(94497),ni=i(68301);let nn=e=>({build:{label:(0,n.jsx)(b.x6,{id:"abydST"}),description:(0,n.jsx)(b.x6,{id:"n1Ux1f"}),imageComponent:(0,n.jsx)(I.s,{h:"100%",bg:"purple.200",w:"100%",align:"center",justify:"center",color:"purple.600",transitionProperty:"filter",transitionDuration:"normal",_groupHover:{filter:"brightness(1.1)"},children:(0,n.jsx)(D.g,{icon:eU.l8N,size:"5x"})})},import:{label:(0,n.jsx)(b.x6,{id:"F6aY4g"}),description:(0,n.jsx)(b.x6,{id:"G++9tI"}),imageComponent:(0,n.jsx)(I.s,{h:"100%",bg:e?"teal.200":"gray.200",w:"100%",align:"center",justify:"center",color:e?"teal.600":"gray.600",transitionProperty:"filter",transitionDuration:"normal",_groupHover:{filter:"brightness(1.1)"},children:(0,n.jsx)(D.g,{icon:eU.$MS,size:"5x"})}),isComingSoon:!e,isBeta:!0}}),ns=()=>{let e=nn((0,ni.u)("themeImportAi"));return(0,n.jsx)(R.a,{pt:"5vh",minH:"100vh",bg:"titanium.50",children:(0,n.jsx)(M.m,{maxW:"3xl",children:(0,n.jsxs)(A.B,{spacing:"8",children:[(0,n.jsx)(tf.D,{as:"h1",variant:"brand",fontWeight:"600",size:"2xl",textAlign:"center",letterSpacing:"tight",children:(0,n.jsx)(b.x6,{id:"FiwgR9"})}),(0,n.jsx)(A.B,{direction:"row",justify:"center",align:"center",alignItems:"stretch",spacing:"4",children:Object.entries(e).map(e=>{let[t,i]=e;return(0,n.jsx)(nt.V,{"data-testid":"splash-go-to-".concat(t),label:i.label,description:i.description,imageUrl:i.thumbnail,imageComponent:i.imageComponent,isComingSoon:i.isComingSoon,isBeta:i.isBeta,onClick:()=>{i.isComingSoon||w.R.emit("setThemeConfigurationView",{view:t})},ctaIcon:(0,n.jsx)(D.g,{icon:_.dmS}),ctaLabel:(0,n.jsx)(b.x6,{id:"xGVfLh"})},t)})}),(0,n.jsx)(p.E,{textAlign:"center",color:"gray.600",children:(0,n.jsx)(b.x6,{id:"ekvthG",components:{0:(0,n.jsx)(f.$,{"data-testid":"splash-go-to-editor",fontWeight:"600",variant:"link",color:"gray.900",textDecoration:"underline",onClick:()=>{w.R.emit("setThemeConfigurationView",{view:"editor"})}})}})})]})})})};var nr=i(74676),no=i(36218),nl=i(2241),na=i(83817),nd=i.n(na),nc=i(58495),nu=i(8266),nx=i(53587),nh=i(83743),nm=i(68364),np=i(45574);i(7929),i(1136);let ng=e=>{let{uploadedImages:t,setUploadedImages:i,setIsLoading:s}=e,r=(0,x.GV)(e1.aQ),{currentWorkspace:o}=(0,P.ur)(),{orgId:l,templateId:c}=(0,y.PJ)(r||(null==o?void 0:o.id),"themeBackground"),u=(0,ei.d)(),[h,m]=(0,d.useState)(0),[g,j]=(0,d.useState)(!1),f=(0,d.useCallback)(e=>{let{file:t,tempUrl:n}=e;s(!0);let r=n;t.type&&(0,e2.aI)(t.type)&&(r="HEIC_tempId_".concat((0,nc.Ak)())),i(e=>[...e,{tempUrl:r,name:t.name,src:null,showPlaceholder:!0,uploadStatus:eZ.A.Uploading}])},[s,i]),v=(0,d.useCallback)(e=>{i(t=>t.map(t=>t.name===e.name?{...t,tempUrl:null,...(0,np.yK)({result:e,isError:!1})}:t)),m(e=>e+1)},[i]);(0,d.useEffect)(()=>{s(!t.every(e=>"optimized"===e.uploadResultStep))},[s,t]);let w=(0,d.useCallback)(()=>{u({title:"Error uploading images, please try again",status:"error",duration:3e3,isClosable:!0}),m(e=>e+1)},[u]),C=(0,d.useMemo)(()=>{if(!l)throw Error("Tried uploading an image with no orgId");return eQ.Fk.createUppyInstance(l,{onUploadStart:f,onUploadComplete:v,onUploadFailed:w},"themeBackground",50,"image",c)},[h,l,f,v,w,c]),k=()=>(0,n.jsxs)(R.a,{pos:"relative",w:"100%",h:"100%",children:[(0,n.jsx)(I.s,{pos:"absolute",inset:0,justify:"center",align:"center",zIndex:1,pointerEvents:"none",mt:-14,color:"gray.600",children:(0,n.jsx)(D.g,{icon:ii.vMo,size:"3x"})}),l&&(0,n.jsx)(nm.OX,{width:"100%",note:eX.Ru._({id:"7TtsoC"}),uppy:C,locale:{strings:{browse:eX.Ru._({id:"wZ9s+A"})}}})]});return t.length>0?(0,n.jsxs)(e$.T,{align:"flex-start",spacing:4,onDragEnter:e=>{e.preventDefault(),e.stopPropagation(),j(!0)},children:[g&&(0,n.jsx)(k,{}),(0,n.jsx)(nh.r,{gap:2,columns:{base:2,"2xl":3},children:t.map(e=>{let{src:t,meta:s,name:r,tempUrl:o}=e||{},l=t?(0,e2.bI)(t,{width:500}):void 0;return(0,n.jsxs)(A.B,{spacing:1,position:"relative",role:"group",children:[(0,n.jsx)(O._,{src:l||o||"",alt:"",ignoreFallback:!0,borderRadius:"md"}),(0,n.jsx)(a.Tz,{label:(0,n.jsx)(b.x6,{id:"ZTnXof"}),placement:"top",children:(0,n.jsx)(iA.K,{"aria-label":eX.Ru._({id:"Rz0Yis"}),icon:(0,n.jsx)(D.g,{icon:_.yLS}),onClick:()=>{i(t=>t.filter(t=>t.name!==e.name))},isRound:!0,position:"absolute",top:1,right:1,size:"sm",color:"red.600",opacity:0,_hover:{color:"red.600"},_groupHover:{opacity:1}})}),s&&s.width&&s.height&&(0,n.jsxs)(p.E,{fontSize:"xs",children:[s.width,"\xd7",s.height,"px"]}),r&&(0,n.jsx)(p.E,{fontSize:"xs",lineHeight:4,children:r})]},e.tempUrl)})})]}):(0,n.jsx)(k,{})};var nj=i(49172);let nf=e=>e.backgroundType===tO.h.IMAGE,nb={...nu.cJ,accentId:void 0},nv=e=>{let{theme:t,accentImages:i,updateAccentImages:s}=e,[r,o]=(0,d.useState)(!1),[l,a]=(0,d.useState)(null),[c,u]=(0,d.useState)(null),x=l&&!!l.accentId,h=(0,ni.u)("bulkUploadAccentImages"),m=(0,d.useCallback)(()=>{u(nb),a(nb)},[]),p=(0,d.useCallback)(()=>{a(null),u(null)},[]),g=(0,d.useCallback)(e=>{let t=e||l;if(!t)return;let n={...t,source:nx.j,originalSource:t.source,accentId:(0,nc.Ak)()},r=i||[];if(x){let e=r.findIndex(e=>e.accentId===l.accentId);if(-1===e)return void console.warn("[AccentImagePicker] Could not find accent image to edit");s({accentBackgrounds:[...r.slice(0,e),n,...r.slice(e+1)]})}else s({accentBackgrounds:[...r,n]});p()},[i,l,x,p,s]),v=(0,d.useCallback)(e=>{s({accentBackgrounds:(i||[]).filter(t=>t.accentId!==e.accentId)})},[i,s]),y=(0,d.useCallback)(e=>{u({...e,source:e.originalSource}),a({...e,source:e.originalSource})},[]),w=(0,d.useCallback)(e=>{if(e.source===eQ.ae.key||e.source===eQ.Pl.key)return void g(e);if(e.source===eQ.mx.key){var t,i,n,s;(null==(t=e.image)?void 0:t.uploadStatus)===eZ.A.Uploading?o(!0):(null==(i=e.image)?void 0:i.uploadStatus)===eZ.A.Done&&(null==(n=e.image)?void 0:n.uploadResultStep)==="optimized"?o(!1):(null==(s=e.image)?void 0:s.uploadStatus)===eZ.A.Error&&o(!1)}a(e)},[g]),C=(0,d.useMemo)(()=>!nd()(l,c),[l,c]),k=(0,e3.Mw)(t),[E,S]=(0,d.useState)([]),[I,T]=(0,d.useState)(!1),R=(0,d.useCallback)(()=>{S([]),T(!1)},[]),O=(0,d.useCallback)(()=>{s({accentBackgrounds:[...E.map(e=>({type:tO.h.IMAGE,source:nx.j,originalSource:"image.custom",image:e,accentId:(0,nc.Ak)()})),...i||[]]}),R()},[E,i,s,R]);return l?(0,n.jsxs)(A.B,{p:6,children:[(0,n.jsx)(t2,{setBackground:w,background:l,isValidSource:nf,defaultMessage:(0,n.jsxs)(eS.F,{children:[(0,n.jsx)(tX._,{}),(0,n.jsx)(b.x6,{id:"VPwqDS"})]}),isDark:k}),(0,n.jsxs)(j.e,{pt:6,display:"flex",children:[(0,n.jsx)(f.$,{variant:"ghost",onClick:p,children:(0,n.jsx)(b.x6,{id:"dEgA5A"})}),(0,n.jsx)(f.$,{variant:"solid",onClick:()=>g(),isLoading:r,isDisabled:!C,flex:1,children:x?(0,n.jsx)(b.x6,{id:"tfDRzk"}):(0,n.jsx)(b.x6,{id:"B6vyEa"})})]})]}):(0,n.jsxs)(A.B,{spacing:6,children:[(0,n.jsxs)(A.B,{spacing:3,children:[(0,n.jsx)(f.$,{leftIcon:(0,n.jsx)(D.g,{icon:_.QLR}),alignSelf:"flex-start",onClick:m,children:(0,n.jsx)(b.x6,{id:"5phU36"})}),h&&(0,n.jsx)(ng,{uploadedImages:E,setUploadedImages:S,setIsLoading:T}),i&&0!=i.length&&(0,n.jsx)(nj.A,{accentImages:i,isDark:k,handleDelete:v,handleItemClick:y,editType:"themeBackground"})]}),E.length>0&&(0,n.jsxs)(j.e,{display:"flex",w:"100%",bottom:0,left:0,bg:"white",py:3,px:6,borderTop:"1px",borderColor:"gray.300",children:[(0,n.jsx)(f.$,{variant:"ghost",onClick:R,children:(0,n.jsx)(b.x6,{id:"dEgA5A"})}),(0,n.jsx)(f.$,{variant:"solid",onClick:O,isLoading:I,flex:1,children:(0,n.jsx)(b.x6,{id:"elVIdl",values:{0:E.length}})})]})]})},ny=(0,d.memo)(()=>{let e=(0,x.jL)(),t=(0,x.GV)(C.eo);if(!t)throw Error("Theme is undefined");return(0,n.jsxs)(tU.t,{variant:"soft-rounded",isFitted:!0,size:"sm",children:[(0,n.jsxs)(tH.w,{children:[(0,n.jsx)(tK.o,{children:(0,n.jsx)(b.x6,{id:"O+LXs1"})}),(0,n.jsx)(tK.o,{children:(0,n.jsx)(b.x6,{id:"COXEr5"})})]}),(0,n.jsxs)(tJ.T,{children:[(0,n.jsx)(tq.K,{px:"0",children:(0,n.jsxs)(A.B,{children:[(0,n.jsxs)(eI.MJ,{children:[(0,n.jsx)(eT.l,{children:(0,n.jsx)(b.x6,{id:"Jvf2ff"})}),(0,n.jsx)(eI.eK,{mb:"4",children:(0,n.jsx)(b.x6,{id:"nM7mjF"})}),(0,n.jsx)(no.T,{defaultValue:t.config.stylePrompt,onChange:t=>{e((0,C.jI)({stylePrompt:t.target.value}))}})]}),(0,n.jsxs)(A.B,{children:[(0,n.jsx)(p.E,{children:(0,n.jsx)(b.x6,{id:"voRH7M"})}),(0,n.jsx)(z.z,{alignItems:"flex-start",spacing:4,children:nw.map((e,t)=>(0,n.jsxs)(A.B,{flex:"1",children:[(0,n.jsx)(O._,{src:e.url,borderRadius:"md"}),(0,n.jsxs)(p.E,{fontSize:"xs",fontFamily:"monospace",children:[(0,n.jsxs)(nl.B.span,{color:"gray.500",children:[e.prompt(),","]})," ",(0,n.jsx)(nl.B.span,{fontWeight:"600",children:e.stylePrompt()})]})]},t))})]})]})}),(0,n.jsxs)(tq.K,{px:"0",children:[(0,n.jsx)(eI.MJ,{children:(0,n.jsx)(eI.eK,{mb:"4",children:(0,n.jsx)(b.x6,{id:"0imEek"})})}),(0,n.jsx)(nv,{accentImages:t.config.accentBackgrounds,updateAccentImages:t=>{let{accentBackgrounds:i}=t;return e((0,C.r4)({accentBackgrounds:i}))},theme:t})]})]})]})});ny.displayName="AccentImagesSettings";let nw=[{url:"/_next/static/media/golden-gate-bridge-photography.86a71fac.png",prompt:()=>eX.Ru._({id:"0dIaoJ"}),stylePrompt:()=>eX.Ru._({id:"A6PocU"})},{url:"/_next/static/media/golden-gate-bridge-illustration.c25343ad.png",prompt:()=>eX.Ru._({id:"0dIaoJ"}),stylePrompt:()=>eX.Ru._({id:"dannsm"})},{url:"/_next/static/media/golden-gate-bridge-claymation.0c82160a.png",prompt:()=>eX.Ru._({id:"0dIaoJ"}),stylePrompt:()=>eX.Ru._({id:"E72rOz"})}];var nC=i(5091),nk=i(91140);let nE=async(e,t,n)=>{try{let n=(await Promise.all([i.e(4266),i.e(451)]).then(i.bind(i,41729))).default,s=(await Promise.all([i.e(4266),i.e(5276)]).then(i.bind(i,13606))).default,r=n.parse(e),o=s.objectify(r);t(o)}catch(e){n(e.message)}},nS=async(e,t,n)=>{try{let n=(await Promise.all([i.e(4266),i.e(451)]).then(i.bind(i,41729))).default,s=(await Promise.all([i.e(4266),i.e(5276)]).then(i.bind(i,13606))).default;n().process(e,{parser:s}).then(e=>{let{css:i}=e;t(i)})}catch(e){n(e.message)}},nI=e=>{let{label:t,initialValue:s,updateValue:r,helperText:o}=e,[l,a]=(0,d.useState)(""),[c,u]=(0,d.useState)(null),[x,h]=(0,d.useState)(),m=(0,iP.lW)(nE,100);return((0,d.useEffect)(()=>{Promise.all([i.e(6171),i.e(6374),i.e(960)]).then(i.bind(i,30960)).then(e=>{h(e.css())})},[]),(0,iP.Vg)(()=>{u(null),s&&nS(s,a,u)},[s],[]),(0,iP.Vg)(()=>{u(null),m(l,r,u)},[l,r,m],[l]),x)?(0,n.jsxs)(eI.MJ,{isInvalid:!!c,children:[(0,n.jsx)(eT.l,{children:t}),c&&(0,n.jsx)(nC.Wt,{children:c}),o&&(0,n.jsx)(eI.eK,{children:o}),(0,n.jsx)(R.a,{border:"1px solid",borderColor:"gray.200",fontSize:"md",children:(0,n.jsx)(d.Suspense,{fallback:(0,n.jsx)("span",{}),children:(0,n.jsx)(nk.j,{value:l,height:"300px",extensions:[x],onChange:a})})})]}):null},nT=(0,d.memo)(()=>{var e,t,i,s,r;let o=(0,x.jL)(),l=(0,x.GV)(C.eo);if(!l)throw Error("Theme is undefined");return(0,n.jsxs)(A.B,{spacing:4,children:[(0,n.jsxs)(eI.MJ,{children:[(0,n.jsx)(eT.l,{children:(0,n.jsx)(b.x6,{id:"S0kLOH"})}),(0,n.jsx)(eA.p,{defaultValue:l.id,readOnly:!0})]}),(0,n.jsxs)(eI.MJ,{children:[(0,n.jsx)(eT.l,{children:(0,n.jsx)(b.x6,{id:"PPYsiY"})}),(0,n.jsx)(no.T,{defaultValue:null==(t=l.config.keywords)||null==(e=t.color)?void 0:e.join(", "),onChange:e=>{o((0,C.RR)({colorKeywords:e.target.value.split(",").map(e=>e.trim()).filter(Boolean)}))}}),(0,n.jsx)(eI.eK,{children:(0,n.jsx)(b.x6,{id:"j3OJ2O"})})]}),(0,n.jsxs)(eI.MJ,{children:[(0,n.jsx)(eT.l,{children:(0,n.jsx)(b.x6,{id:"valYIJ"})}),(0,n.jsx)(no.T,{defaultValue:null==(s=l.config.keywords)||null==(i=s.tone)?void 0:i.join(", "),onChange:e=>{o((0,C.oL)({toneKeywords:e.target.value.split(",").map(e=>e.trim()).filter(Boolean)}))}}),(0,n.jsx)(eI.eK,{children:(0,n.jsx)(b.x6,{id:"j3OJ2O"})})]}),(0,n.jsxs)(eI.MJ,{children:[(0,n.jsx)(eT.l,{children:(0,n.jsx)(b.x6,{id:"1hKEom"})}),(0,n.jsx)(iT.Q7,{defaultValue:l.priority,onChange:(e,t)=>{o((0,C.xu)({priority:Number.isNaN(t)?void 0:t}))},children:(0,n.jsx)(iT.OO,{})}),(0,n.jsx)(eI.eK,{children:(0,n.jsx)(b.x6,{id:"RyAyyY"})})]}),(0,n.jsx)(nI,{label:(0,n.jsx)(b.x6,{id:"3loch2"}),initialValue:null==(r=l.config)?void 0:r.contentStyles,updateValue:e=>o((0,C.gt)({contentStyles:e}))})]})});nT.displayName="AdvancedConfig";let nA={colors:t3,fonts:iz,logo:iH,design:ix,images:ny,advanced:nT},nR=[{id:"colors",testId:"colors",label:()=>eX.Ru._({id:"1HfW/F"}),icon:ii.l8N},{id:"fonts",testId:"fonts",label:()=>eX.Ru._({id:"I0oBSl"}),icon:ii.tiU},{id:"logo",testId:"logo",label:()=>eX.Ru._({id:"iG7KNr"}),icon:ii.r5G,description:()=>eX.Ru._({id:"lm6ARH"})},{id:"design",testId:"design",label:()=>eX.Ru._({id:"f8fH8W"}),description:()=>eX.Ru._({id:"7FMNYC"}),icon:ii.ffg},{id:"images",testId:"images",label:()=>eX.Ru._({id:"an5hVd"}),icon:ii.yvG},{id:"advanced",testId:"advanced",label:()=>eX.Ru._({id:"sxkWRg"}),description:()=>"Advanced settings that currently only ".concat(ea.On," employees can see."),icon:ii.BH7,isForGammaOnly:!0}],nO=(e,t)=>!!e.isForGammaOnly&&!t,n_=()=>{let{isGammaOrgUser:e}=(0,P.ur)(),[t,i]=(0,d.useState)(0),s=(0,N.h5)({base:!0,lg:!1,default:!1}),r=(0,d.useMemo)(()=>nR.filter(t=>!nO(t,e)),[e]),o=(0,d.useCallback)(e=>{i(e)},[]),l=nA[r[t].id];return(0,n.jsxs)(tU.t,{display:"flex",alignItems:"flex-start",flexDirection:s?"column":"row",variant:"soft-rounded",defaultIndex:0,w:"100%",flex:"1",isLazy:!0,index:t,onChange:o,children:[(0,n.jsx)(tH.w,{display:"flex",flexDirection:s?"row":"column",overflowX:"auto",position:"sticky",top:"0",p:"2",bg:"white",zIndex:"1",minW:s?"100%":"190px",alignItems:s?"flex-start":"stretch",gap:s?void 0:"1",w:s?"100%":void 0,children:r.map((e,t)=>(0,n.jsx)(tK.o,{"data-testid":"theme-config-tab-".concat(e.testId),justifyContent:"flex-start",whiteSpace:s?"nowrap":void 0,borderRadius:"md",_hover:{bg:"trueblue.50"},children:(0,n.jsxs)(z.z,{spacing:"2.5",fontSize:"sm",children:[(0,n.jsx)(R.a,{color:"trueblue.400",children:(0,n.jsx)(D.g,{icon:e.icon,fixedWidth:!0})}),(0,n.jsx)(p.E,{textAlign:"start",noOfLines:{base:void 0,md:1},whiteSpace:"no-wrap",children:e.label()}),e.isForGammaOnly&&(0,n.jsx)(nr.E,{colorScheme:"deepocean",fontSize:"xxs",children:"Employee Only"})]})},t))}),(0,n.jsx)(ed.c,{orientation:s?"horizontal":"vertical"}),(0,n.jsx)(tJ.T,{flex:1,minH:0,h:"100%",children:r.map((e,t)=>(0,n.jsxs)(tq.K,{bg:"white",p:{base:3,md:5},pb:{base:5,md:12},overflowY:"auto",h:"100%",maxH:"100%",as:A.B,w:"100%",spacing:{base:"4",md:"6"},children:[(0,n.jsxs)(A.B,{spacing:"1",children:[(0,n.jsx)(tf.D,{size:"md",color:"gray.700",fontWeight:"500",children:e.label()}),e.description&&(0,n.jsx)(p.E,{fontSize:"sm",color:"gray.600",children:e.description()})]}),(0,n.jsx)(l,{})]},t))})]})};var nD=i(56151),nP=i(30709),nz=i(85813),nM=i(99733),nN=i(898),nF=i(58809),nL=i(79958);let nV=e=>{let{value:t,onSave:i}=e;return(0,n.jsxs)(eI.MJ,{isInvalid:0===t.length,children:[(0,n.jsx)(nD.F,{defaultValue:t,placeholder:(0,k.Y)(),onSubmit:i,submitOnBlur:!0,color:"gray.700",isPreviewFocusable:!0,fontSize:"2xl",fontWeight:"500",children:(0,n.jsxs)(z.z,{spacing:"2",minHeight:10,minW:"10",children:[(0,n.jsx)(nP.l,{px:"1",bg:"gray.50",w:"100%","data-testid":"custom-theme-name-preview",_hover:{bg:"gray.200"}}),(0,n.jsx)(nz.j,{px:"1","data-testid":"custom-theme-name-input"}),(0,n.jsx)(nW,{})]})}),(0,n.jsx)(nC.Wt,{fontWeight:"500",pb:2,children:(0,n.jsx)(b.x6,{id:"iwj88Q"})})]})},nW=()=>{let{isEditing:e,getSubmitButtonProps:t,getCancelButtonProps:i,getEditButtonProps:s}=(0,nM._)();return e?(0,n.jsxs)(j.e,{justifyContent:"center",size:"sm",spacing:0,children:[(0,n.jsx)(a.Tz,{label:(0,n.jsx)(b.x6,{id:"dEgA5A"}),placement:"top",children:(0,n.jsx)(iA.K,{size:"md",colorScheme:"red",variant:"ghost","aria-label":eX.Ru._({id:"dEgA5A"}),icon:(0,n.jsx)(D.g,{icon:eU.yYc}),...i()})}),(0,n.jsx)(a.Tz,{label:(0,n.jsx)(b.x6,{id:"fNzdjk"}),placement:"top",children:(0,n.jsx)(iA.K,{size:"md",colorScheme:"green",variant:"ghost","aria-label":eX.Ru._({id:"fNzdjk"}),icon:(0,n.jsx)(D.g,{icon:eU.e68}),...t(),"data-testid":"save-theme-name-button"})})]}):(0,n.jsx)(I.s,{justifyContent:"center",children:(0,n.jsx)(a.Tz,{label:(0,n.jsx)(b.x6,{id:"+MxT3Q"}),placement:"top",children:(0,n.jsx)(R.a,{children:(0,n.jsx)(iA.K,{size:"md",variant:"ghost",colorScheme:"gray",color:"gray.400","aria-label":eX.Ru._({id:"+MxT3Q"}),icon:(0,n.jsx)(D.g,{icon:eU.hpd}),...s(),ref:null})})})})},nG=()=>{var e;let t=(0,x.GV)(C.TJ),[i,s]=(0,d.useState)(),r=(0,x.jL)(),o=(0,x.GV)(C.sv),l=(0,x.GV)(nF.Jo),{data:a,loading:c}=(0,en.eKT)({variables:{id:t},skip:!t||"new"===t}),u=(0,nL.B)(null==l?void 0:l.title);(0,d.useEffect)(()=>{!c&&a&&a.theme&&s(a.theme)},[c,a,s]);let h=(0,d.useCallback)(e=>{let t=e||(0,k.Y)();r((0,C.qv)({name:t}))},[r]);return(0,n.jsxs)(A.B,{spacing:"1.5",children:[(0,n.jsx)(nV,{value:o||(0,k.Y)(),onSave:h}),c?(0,n.jsx)(nN.r,{noOfLines:1,fontSize:"sm",maxW:"300px"}):(0,n.jsxs)(p.E,{color:"gray.600",fontSize:"sm",fontWeight:"normal",letterSpacing:"normal",children:[(null==i?void 0:i.createdBy)&&(0,n.jsx)(b.x6,{id:"qeNU2j",values:{0:i.createdBy.displayName}})," ",(null==i?void 0:i.docCount)&&(null==i?void 0:i.docCount)===1&&(null==i?void 0:i.id)===(null==l||null==(e=l.theme)?void 0:e.id)?(0,n.jsx)(b.x6,{id:"On+kRG",values:{docTitle:u,GAMMA_ARTIFACT_PROPER_NOUN:ea.TP},components:{0:(0,n.jsx)("strong",{})}}):(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(b.x6,{id:"eVRfvp",values:{GAMMA_ARTIFACT_PROPER_NOUN:ea.TP,GAMMA_ARTIFACT_PROPER_NOUN_PLURAL:ea.Ix,0:(null==i?void 0:i.docCount)||0},components:{0:(0,n.jsx)("strong",{}),1:(0,n.jsx)("strong",{})}})})]})]})},nB=()=>(0,n.jsx)(I.s,{direction:"row",h:"100%",maxH:"100%",overflow:"auto",w:"100%",children:(0,n.jsx)(I.s,{direction:"column",w:"100%",borderLeft:"1px solid",borderColor:"gray.200",position:"relative",children:(0,n.jsxs)(I.s,{flex:"1",position:"relative",h:"100%",flexDirection:"column",children:[(0,n.jsx)(I.s,{p:{base:3,md:5},alignItems:"stretch",flexDirection:"column",children:(0,n.jsx)(nG,{})}),(0,n.jsx)(ed.c,{}),(0,n.jsx)(I.s,{w:"100%",overflowY:"hidden",children:(0,n.jsx)(n_,{})})]})})});(0,d.memo)(e=>{let{onTabChange:t,currentTab:i}=e;return(0,n.jsxs)(j.e,{p:2,position:"absolute",top:"3",insetInlineStart:"50%",transform:"translateX(-50%)",zIndex:"sticky",bg:"white",size:"sm",variant:"ghost",borderRadius:"md",boxShadow:"md",children:[(0,n.jsx)(f.$,{borderRadius:"md",bg:"testerDoc"===i?"trueblue.50":"transparent",color:"testerDoc"===i?"trueblue.500":"gray.600",onClick:()=>{t("testerDoc")},"data-testid":"preview-tab-tester-doc",children:(0,n.jsx)(b.x6,{id:"ypSaiK"})}),(0,n.jsx)(f.$,{borderRadius:"md",bg:"currentDoc"===i?"trueblue.50":"transparent",color:"currentDoc"===i?"trueblue.500":"gray.600",onClick:()=>{t("currentDoc")},"data-testid":"preview-tab-current-doc",children:(0,n.jsx)(b.x6,{id:"VJUm9p"})})]})}).displayName="PreviewTabSwitcher";let nU=e=>{let{onCancelClick:t,onComplete:i}=e,s=(0,x.GV)(C.eo),r=(0,x.GV)(C.D6);eo("editor");let{persistTheme:o,isThemeSaving:l}=er({onComplete:i,flow:"editor"}),c=(0,x.GV)(C.jE),u=(0,d.useCallback)(()=>{o()},[o]),h=(0,N.h5)({base:"md","2xl":"lg"});return s?(0,n.jsxs)(et,{children:[(0,n.jsx)(F,{children:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(nB,{}),(0,n.jsx)(G,{children:(0,n.jsx)(I.s,{justifyContent:"flex-end",w:"100%","data-theme-editor-footer":!0,children:(0,n.jsxs)(j.e,{size:h,children:[(0,n.jsx)(f.$,{variant:"plain",onClick:t,children:(0,n.jsx)(b.x6,{id:"dEgA5A"})}),(0,n.jsx)(a.Tz,{isDisabled:!r,label:(0,n.jsx)(b.x6,{id:"yz1qqg"}),children:(0,n.jsx)(R.a,{display:"inline-flex",children:(0,n.jsx)(f.$,{variant:"solid",isLoading:l,isDisabled:!c,onClick:u,"data-testid":"custom-theme-save",children:(0,n.jsx)(b.x6,{id:"EsJdRp"})})})})]})})})]})}),(0,n.jsx)(U,{children:(0,n.jsx)(tv,{})})]}):(0,n.jsx)(n.Fragment,{})},nH=e=>{let{onThemeCreated:t,getCollaborativeEditorInstance:i}=e,h=(0,x.jL)(),{isOpen:m,onOpen:p,onClose:g}=(0,u.E)({id:"unsaved-changes"}),j=(0,d.useRef)(null);(0,y.II)();let[f,b]=(0,d.useState)(!1),[I,T]=(0,d.useState)("splash"),A=(0,d.useCallback)(()=>{T("splash"),h((0,C.y0)()),b(!1),g()},[h,g]),R=(0,d.useCallback)(()=>{g(),"themeBuilderExit"===j.current?(h((0,C.y0)()),w.R.emit("setThemeConfigurationView",{view:"splash"})):A()},[A,g,h]),O=(0,d.useCallback)(e=>{let{exitType:t}=e;j.current=t;let i=(0,x.KA)().getState();return"splash"===I?void A():"import"===I?void((0,S.dZ)(i)?p():A()):void((0,C.jE)(i)?p():A())},[A,p,I]),_=(0,d.useCallback)(e=>{if(b(!0),h((0,C.aG)()),e.baseTheme){let t=e.baseTheme;e.isNewFork&&(t={...e.baseTheme,id:"new",name:(0,k.Y)()}),h((0,C.Dm)({baseTheme:t})),h((0,C.p0)({originalTheme:t}))}if(null==i?void 0:i()){var t;h((0,C.eE)({json:null==(t=i())?void 0:t.getJSON()}))}T(e.view||"splash")},[h,i]);return((0,d.useEffect)(()=>{w.R.on("openThemeConfiguration",e=>{_(e)}),w.R.on("closeThemeConfiguration",()=>{b(!1),h((0,C.y0)())}),w.R.on("setThemeConfigurationView",e=>{let{view:t}=e;if(null==i?void 0:i()){var n;h((0,C.eE)({json:null==(n=i())?void 0:n.getJSON()}))}"splash"===t&&h((0,C.aG)()),T(t)})},[h,_,i]),(0,d.useEffect)(()=>{"true"===(0,E.sF)().openThemeEditor&&(_({view:"editor"}),(0,c.g5)({query:{...(0,E.sF)(),openThemeEditor:void 0},emitChange:!1}))},[_]),f)?(0,n.jsxs)(a.L8,{isDark:!1,children:[(0,n.jsxs)(s.aF,{returnFocusOnClose:!1,isOpen:f,trapFocus:!1,size:"full",onClose:()=>O({exitType:"genericExit"}),motionPreset:"slideInBottom",children:[(0,n.jsx)(r.m,{}),(0,n.jsxs)(o.$,{h:"calc(100% - 24px)",minH:"calc(100% - 24px)",flex:1,overflow:"hidden",mt:"24px",children:[(0,n.jsx)(l.s,{top:"3",insetEnd:"3",position:"absolute",zIndex:"100",bg:"gray.50"}),"splash"===I&&(0,n.jsx)(ns,{}),"import"===I&&(0,n.jsx)(tj,{}),"build"===I&&(0,n.jsx)(ne,{onComplete:t,onExitClick:()=>O({exitType:"themeBuilderExit"})}),"editor"===I&&(0,n.jsx)(nU,{onCancelClick:A,onComplete:t})]})]}),(0,n.jsx)(v,{isOpen:m,onClose:g,onConfirm:R})]}):(0,n.jsx)(n.Fragment,{})}},41876:(e,t,i)=>{"use strict";i.d(t,{JW:()=>E,Lh:()=>R,SQ:()=>S});var n=i(6029),s=i(48810),r=i(12514),o=i(26420),l=i(56570),a=i(69388),d=i(8099),c=i(16936),u=i(55597),x=i(48621),h=i(19564),m=i(77650),p=i(70315),g=i(55729),j=i(3247),f=i(4007),b=i(15342),v=i(39162),y=i(10995),w=i(4837),C=i(32412);let k=(0,p.Ay)("mod+Escape"),E=new Set(["h","j","k","l","s","PageUp","PageDown","ArrowRight","ArrowLeft","ArrowDown","ArrowUp","Enter","Escape"]),S=e=>{let{enabled:t,setActiveKey:i}=e,{editor:n}=(0,v.m)(),{editCardInPresentMode:s}=(0,w.V)({editor:n}),r=(0,b.GV)(f.AO),o=(0,y.x)(),{handlePresentNavigationEvent:l,spotlightingByBlock:a}=(0,C.e)();return(0,g.useEffect)(function(){if(t)return j.WC.on("keydown","NAVIGATION_CONTROLS",e=>{if((null==e?void 0:e.metaKey)||o(e))return!1;let t=e.key;if(E.has(t)&&("s"!==t&&(i(e.key),setTimeout(()=>{i(null)},100)),e.preventDefault())," "===t&&e.shiftKey)return l({eventType:"arrowLeft",eventKey:t});switch(e.key){case"e":return s(),!0;case"s":return l({eventType:"toggleSpotlight",eventKey:t});case" ":case"l":case"ArrowRight":return l({eventType:"arrowRight",eventKey:t});case"h":case"ArrowLeft":return l({eventType:"arrowLeft",eventKey:t});case"j":case"ArrowDown":case"PageDown":return l({eventType:"arrowDown",eventKey:t});case"k":case"ArrowUp":case"PageUp":return l({eventType:"arrowUp",eventKey:t});case"r":return l({eventType:"restart",eventKey:t});case"Escape":if(k(e))return!1;return l({eventType:"cancelCurrentAction",eventKey:t});case"Enter":return l({eventType:"toggleExpanded",eventKey:t});default:return!1}})},[s,t,l,r,o,i]),a},I=e=>{let t=new KeyboardEvent("keydown",{key:e});i.g.dispatchEvent(t)},T={ArrowUp:{icon:u.INu,label:(0,n.jsx)(h.x6,{id:"VbggDE"}),ariaLabel:()=>m.Ru._({id:"VbggDE"}),shortcuts:["↑","K"],key:"ArrowUp",onClick:()=>{I("ArrowUp")},gridPos:[1,2]},ArrowLeft:{icon:u.CeG,label:(0,n.jsx)(h.x6,{id:"4jciC3"}),ariaLabel:()=>m.Ru._({id:"4jciC3"}),shortcuts:["←","H"],key:"ArrowLeft",onClick:()=>{I("ArrowLeft")},gridPos:[2,1]},ArrowDown:{icon:u.B0C,label:(0,n.jsx)(h.x6,{id:"e3GOIZ"}),ariaLabel:()=>m.Ru._({id:"e3GOIZ"}),shortcuts:["↓","J"],key:"ArrowDown",onClick:()=>{I("ArrowDown")},gridPos:[2,2]},ArrowRight:{icon:u.dmS,label:(0,n.jsx)(h.x6,{id:"ZjQRVw"}),ariaLabel:()=>m.Ru._({id:"ZjQRVw"}),shortcuts:["→","L"],key:"ArrowRight",onClick:()=>{I("ArrowRight")},gridPos:[2,3]},Spotlight:{icon:u.Jq7,label:(0,n.jsx)(h.x6,{id:"Xon9jp"}),ariaLabel:()=>m.Ru._({id:"Xon9jp"}),shortcuts:["S"],key:"S",onClick:()=>{I("s")},gridPos:[1,3]}},A=e=>{let{shortcuts:t}=e;return(0,n.jsx)(s.E,{as:"span",color:"gray.400",ml:2,children:t.map((e,i)=>(0,n.jsxs)(g.Fragment,{children:[e,i===t.length-1?null:(0,n.jsx)(s.E,{fontSize:"11px",as:"span",color:"gray.500",mx:1,children:"or"})]},e))})},R=e=>{let{activeKey:t,spotlightingByBlock:i}=e;return(0,n.jsx)(r.Z,{children:(0,n.jsx)(o.a,{position:"absolute",bottom:4,insetEnd:6,zIndex:"sticky",children:(0,n.jsx)(l.x,{gridTemplateColumns:"repeat(3, 1fr)",gridTemplateRows:"repeat(2, 1fr)",children:Object.values(T).map(e=>{let{gridPos:r,icon:o,label:l,ariaLabel:u,shortcuts:h,key:m,onClick:p}=e;return(0,n.jsx)(a.E,{gridColumn:r[1],gridRow:r[0],children:(0,n.jsx)(d.m,{hasArrow:!0,placement:"top",label:(0,n.jsxs)(s.E,{whiteSpace:"nowrap",children:[l,(0,n.jsx)(A,{shortcuts:h})]}),children:(0,n.jsx)(c.K,{m:1,shadow:"base",size:"md",variant:"S"==m&&i?"solid":"plain",isActive:t===m||"S"===m&&i,onClick:p,onMouseDown:e=>e.preventDefault(),"aria-label":u(),icon:(0,n.jsx)(x.g,{icon:o})})})},m)})})})})}},42550:(e,t,i)=>{"use strict";i.d(t,{L:()=>l});var n=i(6029),s=i(40452),r=i(83004),o=i(91106);let l=e=>{let{children:t,...i}=e;return(0,n.jsxs)(s.s,{w:"100%",h:"100%",overflow:"hidden",display:"flex",justifyContent:"center",alignItems:"center",position:"relative",bg:"gradient.secondary-dark",...i,children:[(0,n.jsx)(o.lD,{height:"100%",sx:{maxHeight:"100vh",pointerEvents:"none"}}),(0,n.jsx)(r.mL,{styles:{"html, body":{height:"100%"}}}),t]})}},51407:()=>{},53984:(e,t,i)=>{"use strict";i.d(t,{d:()=>et});var n=i(6029),s=i(26385),r=i(41781),o=i(36693),l=i(40452),a=i(48810),d=i(74676),c=i(26420),u=i(23908),x=i(49611),h=i(23293),m=i(46898),p=i(34807),g=i(68068),j=i(36071),f=i(60628),b=i(3674),v=i(17920),y=i(40691),w=i(49146),C=i(16426),k=i(61204),E=i(91106),S=i(19564),I=i(77650),T=i(21157),A=i.n(T),R=i(55729),O=i(96441),_=i(88586),D=i(99038),P=i(88608),z=i(20845),M=i(95889),N=i(95695),F=i(32263),L=i(30034),V=i(85607),W=i(23201),G=i(11403),B=i(85448),U=i(79958);let H=()=>({today:I.Ru._({id:"ecUA8p"}),thisWeek:I.Ru._({id:"yByRxz"}),earlier:I.Ru._({id:"HGg4T/"})}),K=()=>(0,n.jsxs)(s.B,{children:[(0,n.jsx)(r.E,{w:"max(350px, 30%)",h:10}),(0,n.jsx)(r.E,{w:"max(320px, 22%)",h:5})]}),J=e=>{let{createdTime:t,editors:i,isLatest:s,onClick:r,showPaywall:u,paywallCount:x}=e;if(!i||!i.length)return(0,n.jsx)(n.Fragment,{});let h=u?"linear-gradient(rgb(0, 0, 0) 15%, transparent 100%)":"",m=(0,n.jsxs)(o.o,{flexDirection:"row",borderRadius:"base",style:{WebkitMaskImage:h,maskImage:h},border:"none",isDisabled:u,opacity:"1 !important",onClick:r,alignItems:"flex-start",width:"100%",textAlign:"left",children:[(0,n.jsxs)(l.s,{w:"100%",direction:"column",children:[(0,n.jsx)(a.E,{fontSize:"sm",children:A()((0,W.OG)(t))}),(0,n.jsx)(a.E,{fontSize:"xs",flex:1,children:i[0].displayName})]}),s&&(0,n.jsx)(d.E,{colorScheme:"green",fontSize:"0.65em",children:(0,n.jsx)(S.x6,{id:"wL3cK8"})})]});return u?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(E.Tz,{placement:"top",isDisabled:!u,label:u?(0,n.jsx)(S.x6,{id:"PYTBm5",values:{paywallCount:x}}):void 0,children:(0,n.jsx)(c.a,{mb:4,children:m})}),(0,n.jsx)(z.c,{isNarrow:!0,segmentEvent:M.VV.GAMMA_PRO_UPSELL_CALLOUT_CHANGE_HISTORY,description:(0,n.jsx)(S.x6,{id:"mVKYtH"}),targetFeature:"change_history_unlimited"})]}):m},q=e=>{var t;let i=[];return{groupedSnapshots:(0,R.useMemo)(()=>(0,W.WP)({items:e,sortBy:"createdTime"}),[e]),paywalledSnapshotId:null==(t=i[0])?void 0:t.id,paywallCount:i.length}},Y=e=>{let{groupedSnapshots:t,paywalledSnapshotId:i,paywallCount:s,onClick:r,showFetchMore:o,onFetchMoreClick:l,isFetchingMore:a}=e;return(0,n.jsxs)(u.w,{w:"100%",children:[Object.entries(t).filter(e=>{let[,t]=e;return t.length}).map((e,t)=>{let[o,l]=e;return(0,n.jsxs)(R.Fragment,{children:[(0,n.jsx)(E._x,{px:4,py:2,mx:0,mt:2,children:H()[o]}),l.map((e,o)=>{let{createdTime:l,editors:a,id:d}=e;return(0,n.jsx)(J,{onClick:()=>r(d),isLatest:0===t&&0===o,createdTime:l,editors:a,showPaywall:i===d,paywallCount:s},d)})]},o)}),o&&(0,n.jsx)(x.$,{isLoading:a,onClick:l,children:(0,n.jsx)(S.x6,{id:"yQ2kGp"})})]})},$=()=>(0,n.jsxs)(u.w,{w:"100%",children:[(0,n.jsx)(r.E,{h:16}),(0,n.jsx)(r.E,{h:16,mt:2}),(0,n.jsx)(r.E,{h:16,mt:2}),(0,n.jsx)(r.E,{h:16,mt:2}),(0,n.jsx)(r.E,{h:16,mt:2}),(0,n.jsx)(r.E,{h:16,mt:2}),(0,n.jsx)(r.E,{h:16,mt:2}),(0,n.jsx)(r.E,{h:16,mt:2})]}),X=e=>{let{title:t,createdBy:i,createdTime:s,numSnapshots:r}=e;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(h.D,{size:"md",children:(0,n.jsx)(S.x6,{id:"yf//Op",values:{numSnapshots:r,0:(0,P.Bo)(s),1:(0,P.Bo)(s)}})}),(0,n.jsx)(a.E,{color:"gray.500",fontSize:"sm",fontWeight:"normal",letterSpacing:"normal",children:(0,n.jsx)(S.x6,{id:"JVHTIo",values:{title:t,0:(null==i?void 0:i.displayName)?null==i?void 0:i.displayName:"Unknown",1:(0,P.Yq)(s,"PPp")}})})]})},Q="snapshot-editor-root",Z=e=>{let{id:t,doc:i,content:s}=e;return(0,n.jsx)(F.u5,{reduxData:{doc:i},initialContent:s,doc:i,docId:i.id,scrollingParentSelector:".".concat(Q),isInsideDrawer:!0},t)},ee=e=>{let{content:t}=e;if(!t)return null;let i=(0,B.Rb)(t);return(0,n.jsxs)(c.a,{p:6,h:"100%",overflowY:"auto",bg:"white",children:[(0,n.jsx)(a.E,{as:"h2",fontSize:"md",fontWeight:"bold",mb:2,children:"Text-only preview (safe mode)"}),(0,n.jsx)(a.E,{fontSize:"md",lineHeight:"1.6",whiteSpace:"pre-wrap",children:i||"(empty)"})]})},et=e=>{var t;let{isOpen:i,onClose:s,doc:r,safeMode:o=!1}=e,a=(0,m.d)(),{getCollaborativeEditorInstance:d}=(0,V.mi)(),[u,h]=(0,R.useState)(!1),[I,{data:T}]=(0,_.qob)();(0,G.Vg)(()=>{I({variables:{id:r.id}})},[r.id,I,i],[i]);let A=null==T||null==(t=T.doc)?void 0:t.currentSnapshotId,{loading:z,data:M,called:F,fetchMore:W}=(0,_.XSN)({variables:{docId:r.id,first:25},skip:!r||!i,fetchPolicy:"network-only",nextFetchPolicy:"network-only"}),[B,{loading:H,data:J}]=(0,_.Wzf)({nextFetchPolicy:"cache-only"}),et=(null==M?void 0:M.snapshots.edges.map(e=>e.node))||[],{groupedSnapshots:ei,paywalledSnapshotId:en,paywallCount:es}=q(et),er=null==M?void 0:M.snapshots.pageInfo,eo=!!(!en&&F&&(null==er?void 0:er.hasNextPage)&&(null==er?void 0:er.endCursor)),el=(0,R.useCallback)(()=>{(null==er?void 0:er.hasNextPage)&&(null==er?void 0:er.endCursor)&&(h(!0),W({variables:{after:er.endCursor}}).finally(()=>{h(!1)}))},[W,null==er?void 0:er.endCursor,null==er?void 0:er.hasNextPage]),ea=et[0];(0,R.useEffect)(()=>{(null==ea?void 0:ea.id)&&B({variables:{snapshotId:ea.id,docId:r.id}})},[r.id,B,null==ea?void 0:ea.id]);let ed=(0,U.B)(null==r?void 0:r.title),ec="createdBy"in r?r.createdBy:void 0,eu=null==r?void 0:r.createdTime,ex=null==J?void 0:J.snapshot,eh=ex&&ex.id===A,em=(0,p.A)(N.H4);return(0,n.jsx)(E.L8,{isDark:!1,children:(0,n.jsxs)(g._s,{placement:"bottom",onClose:s,isOpen:i,trapFocus:!0,isFullHeight:!0,blockScrollOnMount:!1,children:[(0,n.jsx)(j.m,{}),(0,n.jsxs)(f.z,{borderTopRadius:"xl",h:"calc(var(--100vh) - 24px)",transform:"none !important",children:[(0,n.jsx)(b.s,{}),(0,n.jsxs)(v.r,{borderBottom:"1px solid #000",borderColor:"gray.200",children:[z&&(0,n.jsx)(K,{}),!z&&r&&et&&(0,n.jsx)(X,{numSnapshots:(null==et?void 0:et.length)||0,createdBy:ec,createdTime:eu,title:ed})]}),(0,n.jsx)(y.c,{p:0,h:"100%",children:(0,n.jsxs)(l.s,{direction:"row",h:"100%",children:[(0,n.jsx)(c.a,{p:2,w:"17rem",overflowY:"auto",bg:"gray.50",children:(0,n.jsxs)(w.t,{variant:"soft-rounded",orientation:"vertical",size:"md",children:[z&&(0,n.jsx)($,{}),!z&&et&&(0,n.jsx)(Y,{onClick:e=>{B({variables:{snapshotId:e,docId:r.id}})},groupedSnapshots:ei,paywalledSnapshotId:en,paywallCount:es,showFetchMore:eo,onFetchMoreClick:el,isFetchingMore:u})]})}),(0,n.jsx)(l.s,{flex:1,bg:"gray.50",overflowY:"scroll",justifyContent:"center",alignContent:"center",alignItems:"flex-start",width:"100%",height:"100%",className:Q,css:{"--editor-width":"100%","--editor-font-size":em},children:(0,n.jsxs)(l.s,{direction:"column",position:"relative",width:"100%",height:"100%",children:[(0,n.jsx)(L.s,{}),(!ex||H)&&(0,n.jsx)(O.Y,{}),ex&&!H&&(o?(0,n.jsx)(ee,{content:null==ex?void 0:ex.content.default}):(0,n.jsx)(Z,{id:ex.id,doc:r,content:null==ex?void 0:ex.content.default}))]})})]})}),(0,n.jsx)(C.j,{borderTop:"1px solid #000",borderColor:"gray.200",bg:"var(--drawer-bg)",zIndex:1,children:(0,n.jsxs)(k.e,{spacing:4,children:[(0,n.jsx)(x.$,{variant:"ghost",onClick:s,children:(0,n.jsx)(S.x6,{id:"dEgA5A"})}),(0,n.jsx)(E.Tz,{label:eh?(0,n.jsx)(S.x6,{id:"HJo72u"}):(0,n.jsx)(S.x6,{id:"sonTm1"}),shouldWrapChildren:!0,children:(0,n.jsx)(x.$,{variant:"solid",isDisabled:!ex||eh,onClick:()=>{var e;if(!ex)return;let t=null==et||null==(e=et.find(e=>e.id===ex.id))?void 0:e.createdTime,i=d();if(!i)return;i.commands.setContent(ex.content.default,!0);let{annotationsAbsolute:r}=ex.content;r?i.commands.restoreAnnotations(r):i.commands.clearAnnotations(),s(),a({title:(0,n.jsx)(S.x6,{id:"7ovf4C"}),description:(0,n.jsx)(S.x6,{id:"DTim6X",values:{GAMMA_ARTIFACT_PROPER_NOUN:D.TP,0:t?(0,P.Yq)(t,"PPp"):"selected snapshot"}}),status:"success",duration:5e3,isClosable:!0})},children:(0,n.jsx)(S.x6,{id:"yKu/3Y"})})})]})})]})]})})}},57690:()=>{},62706:()=>{},64206:(e,t,i)=>{"use strict";i.d(t,{b:()=>U});var n=i(6029),s=i(56570),r=i(69388),o=i(57405),l=i(23293),a=i(53996),d=i(26420),c=i(49611),u=i(48810),x=i(80314),h=i(99492),m=i(48621),p=i(91106),g=i(19564),j=i(77650),f=i(55729),b=i(87461),v=i(70027),y=i(33619),w=i(88586),C=i(5061),k=i(15342),E=i(82927),S=i(61216),I=i(70557),T=i(88490),A=i(83370),R=i(81807),O=i(75610),_=i(39049),D=i(19513),P=i(37471),z=i(31090),M=i(67446);let N=(0,f.memo)(()=>{let e=(0,n.jsx)(g.x6,{id:"WRqpdB"}),t=(0,n.jsx)(g.x6,{id:"CQqaDT"}),i=(0,n.jsx)(g.x6,{id:"BFXmWv"});return(0,n.jsx)(M.$,{title:(0,n.jsx)(g.x6,{id:"Z+WuT1"}),icon:h.i7d,children:(0,n.jsxs)(o.T,{alignItems:"flex-start",spacing:3,children:[(0,n.jsx)(u.E,{color:"gray.600",children:(0,n.jsx)(g.x6,{id:"DdJx17",components:{0:(0,n.jsx)(d.a,{as:"span",fontWeight:"bold",mx:"1"})}})}),(0,n.jsx)(u.E,{color:"gray.600",children:(0,n.jsx)(g.x6,{id:"frYjym"})}),(0,n.jsxs)(d.a,{bg:"white",p:3,borderRadius:"md",borderWidth:"1px",borderColor:"gray.200",w:"100%",fontSize:"xs",color:"gray.600",children:[(0,n.jsx)(u.E,{fontWeight:"medium",mb:1,children:(0,n.jsx)(g.x6,{id:"tbbSnu"})}),(0,n.jsxs)(z.B8,{styleType:"disc",ps:5,mb:2,children:[(0,n.jsx)(z.ck,{children:e}),(0,n.jsx)(z.ck,{children:t}),(0,n.jsx)(z.ck,{children:i})]}),(0,n.jsx)(u.E,{color:"gray.400",fontWeight:"bold",children:"---"}),(0,n.jsx)(u.E,{fontWeight:"medium",mt:2,mb:1,children:(0,n.jsx)(g.x6,{id:"Dqr964"})}),(0,n.jsxs)(z.B8,{styleType:"disc",ps:5,mb:2,children:[(0,n.jsx)(z.ck,{children:e}),(0,n.jsx)(z.ck,{children:t}),(0,n.jsx)(z.ck,{children:i})]}),(0,n.jsx)(u.E,{color:"gray.400",fontWeight:"bold",children:"---"}),(0,n.jsx)(u.E,{fontWeight:"medium",mt:2,mb:1,children:(0,n.jsx)(g.x6,{id:"4V7Mjx"})}),(0,n.jsxs)(z.B8,{styleType:"disc",ps:5,children:[(0,n.jsx)(z.ck,{children:e}),(0,n.jsx)(z.ck,{children:"..."})]})]})]})})});N.displayName="SectionDividerTip";var F=i(13366),L=i(98164),V=i(40452);let W=(0,f.memo)(e=>{let{value:t,icon:i,title:s,description:r,isSelected:l,onClick:a}=e;return(0,n.jsx)(d.a,{p:{base:2.5,sm:3},borderWidth:"1px",borderRadius:"lg",cursor:"pointer",onClick:a,borderColor:l?"trueblue.500":"gray.200",bg:l?"trueblue.50":"white",transition:"all 0.2s",_hover:{borderColor:l?"trueblue.500":"gray.300",bg:l?"trueblue.50":"gray.50"},children:(0,n.jsx)(L.s,{value:t,pointerEvents:"none",children:(0,n.jsxs)(V.s,{align:"center",gap:{base:2,sm:3},children:[(0,n.jsx)(d.a,{color:l?"trueblue.600":"gray.400",flexShrink:0,w:{base:4,sm:5},display:"flex",alignItems:"center",justifyContent:"center",children:(0,n.jsx)(m.g,{icon:i,fixedWidth:!0})}),(0,n.jsxs)(o.T,{align:"start",spacing:.5,flex:1,children:[(0,n.jsx)(u.E,{fontWeight:"medium",color:"gray.800",lineHeight:"short",fontSize:{base:"xs",sm:"sm"},children:s}),(0,n.jsx)(u.E,{fontSize:{base:"2xs",sm:"xs"},color:"gray.600",lineHeight:"short",display:{base:"none",sm:"block"},children:r})]})]})})})});W.displayName="TextModeRadioButton";let G=(0,f.memo)(e=>{let{textMode:t,onTextModeChange:i}=e;return(0,n.jsx)(F.z,{onChange:e=>i(e),value:t||"",w:"100%",children:(0,n.jsxs)(o.T,{spacing:{base:1.5,sm:2},align:"stretch",children:[(0,n.jsx)(W,{value:"generate",icon:h.ITF,title:(0,n.jsx)(g.x6,{id:"4B9QIY"}),description:(0,n.jsx)(g.x6,{id:"AYV6LC"}),isSelected:"generate"===t,onClick:()=>i("generate")}),(0,n.jsx)(W,{value:"condense",icon:h.bLf,title:(0,n.jsx)(g.x6,{id:"XWlhPt"}),description:(0,n.jsx)(g.x6,{id:"/SXv2t"}),isSelected:"condense"===t,onClick:()=>i("condense")}),(0,n.jsx)(W,{value:"preserve",icon:h.DW4,title:(0,n.jsx)(g.x6,{id:"p9MF67"}),description:(0,n.jsx)(g.x6,{id:"R3L5wN"}),isSelected:"preserve"===t,onClick:()=>i("preserve")})]})})});G.displayName="TextModeSelector";var B=i(26662);let U=(0,f.memo)(()=>{let{guessSettings:e,isLoading:t}=(0,T.D)({ref:"createPaste"}),i=(0,k.GV)(A.qT),{format:z,setFormat:M}=(0,I.pm)(),{styleTemplate:F,setStyleTemplate:L}=(0,I.pm)(),[V,W]=(0,f.useState)(null),[U]=(0,y.L)(),H=(0,k.jL)(),K=(0,f.useRef)(!0),{user:J}=(0,E.ur)();(0,f.useEffect)(()=>{if(J&&K.current){var e;K.current=!1,(null==J||null==(e=J.settings)?void 0:e.generationPreferredFormat)&&M(J.settings.generationPreferredFormat)}},[J,M]);let{goToScreen:q}=(0,P._2)(),Y=(0,f.useCallback)(async()=>{let t=(0,R.QA)(i),n=(0,R.M$)(i)-1;if(!V)return void console.warn("Attempted to navigate without selecting a text processing option.");"preserve"===V&&H((0,A.gy)(!0)),await e(w.xbH.PasteText,{format:z,content:i,settings:{locale:U.key,textMode:V,editorMode:n>0&&t>5?"structured":"freeform",styleTemplate:F}})},[i,F,e,z,V,U.key,H]),$=(0,C.fW)()?h.CeG:h.dmS,X={fontWeight:"500",color:"blackAlpha.700",size:{base:"sm",sm:"md"},px:{base:2,sm:4},my:1,w:"100%",textAlign:"center"};return(0,n.jsx)(v.pY,{children:(0,n.jsxs)(b.d,{children:[(0,n.jsx)(B.V,{}),(0,n.jsx)(D.I,{title:(0,n.jsx)(g.x6,{id:"Q4xH1Z"}),icon:(0,n.jsx)(m.g,{icon:h.vZS}),iconBoxProps:{color:"deepocean.300"},children:(0,n.jsxs)(s.x,{templateColumns:{base:"1fr",xl:"1fr 2.5fr 1fr"},templateRows:"auto 1fr",templateAreas:{base:'\n                "format"\n                "content-and-ctas"\n              ',xl:'\n                ". format ."\n                ". content-and-ctas tips"\n              '},gap:4,px:{base:4,sm:4},w:"100%",maxW:"90rem",mx:"auto",children:[(0,n.jsx)(r.E,{area:"format",children:(0,n.jsxs)(o.T,{spacing:{base:2,sm:5},children:[(0,n.jsx)(l.D,{...X,children:(0,n.jsx)(g.x6,{id:"6h4zVU"})}),(0,n.jsxs)(o.T,{spacing:0,alignItems:{base:"stretch",md:"center"},w:{base:"100%",md:"auto"},children:[(0,n.jsx)(a.o,{children:(0,n.jsx)(_.Qz,{})}),F&&(0,n.jsx)(d.a,{w:"100%",children:(0,n.jsx)(O.k,{docFormatType:z,onSelectStyleTemplate:L,selectedStyleTemplate:F})})]}),(0,n.jsx)(l.D,{...X,children:(0,n.jsx)(g.x6,{id:"FFcD8+"})})]})}),(0,n.jsx)(r.E,{area:"content-and-ctas",children:(0,n.jsxs)(o.T,{spacing:{base:2,sm:5},align:"stretch",children:[(0,n.jsx)(S.N,{containerProps:{minH:{base:"300px",sm:"350px",md:"400px"},maxH:{base:"50vh",sm:"55vh",md:"60vh"},overflow:"auto",fontSize:{base:"14px",sm:"16px"},w:"100%"},hideFooter:!0}),(0,n.jsx)(l.D,{...X,children:(0,n.jsx)(g.x6,{id:"hvwlrC"})}),(0,n.jsx)(G,{textMode:V,onTextModeChange:W}),(0,n.jsx)(p.Tz,{label:i?V?"":(0,n.jsx)(g.x6,{id:"59szYn"}):(0,n.jsx)(g.x6,{id:"9IxKHJ"}),isDisabled:!!i&&!!V,placement:"top",children:(0,n.jsx)(c.$,{size:{base:"md",sm:"lg"},width:"100%",onClick:Y,variant:"solid",rightIcon:(0,n.jsx)(m.g,{icon:$}),isLoading:t,isDisabled:!i||!V,loadingText:j.Ru._({id:"qgUvjm"}),children:(0,n.jsx)(g.x6,{id:"eMrl1e"})})}),(0,n.jsx)(u.E,{textAlign:"center",color:"blackAlpha.800",fontSize:{base:"sm",sm:"md"},children:(0,n.jsx)(g.x6,{id:"LVQnRo",components:{0:(0,n.jsx)(x.N,{onClick:e=>{e.preventDefault(),q("createImport",{ref:"createPaste"})},textDecoration:"underline",fontWeight:"600"})}})})]})}),(0,n.jsx)(r.E,{area:"tips",display:{base:"none",xl:"block"},children:(0,n.jsx)(N,{})})]})})]})})});U.displayName="CreatePastePage"},65613:()=>{},69413:(e,t,i)=>{"use strict";i.d(t,{Cr:()=>c,Eu:()=>b,G0:()=>f,H9:()=>g,J3:()=>u,L_:()=>j,M$:()=>m,Q3:()=>y,g9:()=>v,jI:()=>p,yA:()=>h});var n=i(83817),s=i.n(n),r=i(79784),o=i(88586);let l=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=["italic","oblique"];for(let i of e)for(let e of t)if(-1!==i.toLowerCase().indexOf(e))return!0;return!1},a=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];for(let t of e){if(d(t,["thin"]))return 100;if(d(t,["light","lite"],["extra","ultra","x"]))return 200;if(d(t,["light"]))return 300;if(d(t,["medium"]))return 500;if(d(t,["bold"],["demi","semi"]))return 600;if(d(t,["bold"],["extra","x"]))return 800;if(d(t,["bold"]))return 700;if(d(t,["black","heavy","ultra"]))return 900}return 400},d=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];for(let n of t)if(0===i.length){if(-1!==e.toLowerCase().indexOf(n.toLowerCase()))return!0}else for(let t of i)if(-1!==e.toLowerCase().indexOf(n.toLowerCase())&&-1!==e.toLowerCase().indexOf(t.toLowerCase()))return!0;return!1};class c extends Error{}let u=async e=>new Promise((t,i)=>{let n=new FileReader;n.onload=e=>{var n,s,o,d,u,x,h,m,p,g,j,f,b,v,y,w,C,k,E;let S=null==(n=e.target)?void 0:n.result;try{let e=(0,r.qg)(S),i=null!=(w=null==(s=Object.values(null!=(y=null==(d=e.tables)||null==(o=d.name)?void 0:o.preferredSubfamily)?y:null==(x=e.tables)||null==(u=x.name)?void 0:u.fontSubfamily))?void 0:s[0])?w:"",n=null!=(C=null==(h=Object.values(null==(p=e.tables)||null==(m=p.name)?void 0:m.fullName))?void 0:h[0])?C:"",I=null!=(E=null==(g=Object.values(null!=(k=null==(f=e.tables)||null==(j=f.name)?void 0:j.preferredFamily)?k:null==(v=e.tables)||null==(b=v.name)?void 0:b.fontFamily))?void 0:g[0])?E:"";if(e.tables.fvar)throw new c;t({familyName:I,isItalic:l([i,n]),weight:a([i,n])})}catch(e){i(e)}},n.onerror=e=>{console.error("[parseFontFile] unable to read the font file, providing defaults",e),t({familyName:"",isItalic:!1,weight:400})},n.readAsArrayBuffer(e)}),x=e=>{let t=e.lastIndexOf(".");return -1===t||t===e.length-1?{name:e,extension:void 0}:{name:e.slice(0,t),extension:e.slice(t+1)}},h=e=>{let{extension:t}=x(e);return t===o.AKY.Otf||t===o.AKY.Ttf?t:o.AKY.Ttf},m=e=>{let{existingFont:t}=e;if(!t)return!0;let i={fontName:t.name,fontId:t.id,fontFiles:t.fontFiles.map(e=>({id:e.id,name:e.name,weight:e.weight,isItalic:e.isItalic,fileType:e.fileType,sourceUrl:e.sourceUrl}))},n={fontName:e.fontName,fontId:e.fontId,fontFiles:e.uploadFontFiles.map(e=>({id:e.fontFile.id,name:e.fontFile.name,weight:e.fontFile.weight,isItalic:e.fontFile.isItalic,fileType:e.fontFile.fileType,sourceUrl:e.fontFile.sourceUrl}))};return!s()(i,n)},p=e=>Object.keys(e.reduce((e,t)=>{let i=[t.weight,t.isItalic].join("__");return{...e,[i]:!0}},{})).length,g=e=>Object.values(e.reduce((e,t)=>{let i=t.fontFile,n=[i.weight,i.isItalic,i.fileType].join("__");return e[n]=e[n]||[],e[n].push(t),e},{})).reduce((e,t)=>{if(t.length>1)for(let i of t)e[i.uploadId]=!0;return e},{}),j=e=>e.reduce((e,t)=>{let i=t.fontFile.weight;return{...e,[i]:[...e[i]||[],t]}},{}),f=function(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1];return e.sort((e,i)=>t?Number(e)-Number(i):Number(i)-Number(e))},b=e=>f(Array.from(new Set(e.map(e=>e.weight)))),v=(e,t)=>{if(void 0===t)return;if(t>e[e.length-1])return e[e.length-1];let i=1/0,n=-1;for(let s=0;s<e.length;s++){let r=Math.abs(t-e[s]);if(r<i)i=r,n=s;else break}return e[n]},y=e=>!!e&&0!==e.length&&-1===e.findIndex(e=>!e.isItalic)},70583:()=>{},74907:(e,t,i)=>{"use strict";i.d(t,{w:()=>r});var n=i(6029),s=i(19564);let r=()=>({100:(0,n.jsx)(s.x6,{id:"xKi1hd"}),200:(0,n.jsx)(s.x6,{id:"c7s0mT"}),300:(0,n.jsx)(s.x6,{id:"4domrp"}),400:(0,n.jsx)(s.x6,{id:"3CTvmZ"}),500:(0,n.jsx)(s.x6,{id:"uDtGuX"}),600:(0,n.jsx)(s.x6,{id:"U9FxnD"}),700:(0,n.jsx)(s.x6,{id:"gw5LiU"}),800:(0,n.jsx)(s.x6,{id:"4eWNFN"}),900:(0,n.jsx)(s.x6,{id:"Y4B02e"})})},76596:(e,t,i)=>{"use strict";i.d(t,{k:()=>a});var n=i(6029),s=i(95669),r=i.n(s),o=i(91938),l=i(52193);let a=e=>{let{title:t,description:i=l.h,imageUrl:s,canonicalUrl:a,noindex:d=!1,nofollow:c=!1}=e,u=t||"Gamma",x=s||o.$.OG_IMAGE_URL_REBRAND,h=i.slice(0,l.F),m=o.$.APPLICATION_ENVIRONMENT,p="production"===m||"dev"===m?[d?"noindex":"index",c?"nofollow":"follow"].join(", "):"noindex, nofollow";return(0,n.jsxs)(r(),{children:[(0,n.jsx)("title",{children:u}),(0,n.jsx)("meta",{name:"robots",content:p}),(0,n.jsx)("meta",{content:h,name:"description"},"description"),(0,n.jsx)("meta",{content:u,property:"og:title"},"og:title"),(0,n.jsx)("meta",{content:h,property:"og:description"},"og:description"),(0,n.jsx)("meta",{content:x,property:"og:image"},"og:image"),(0,n.jsx)("meta",{content:u,property:"twitter:title"},"twitter:title"),(0,n.jsx)("meta",{content:h,property:"twitter:description"},"twitter:description"),(0,n.jsx)("meta",{content:x,property:"twitter:image"},"twitter:image"),(0,n.jsx)("meta",{property:"og:type",content:"website"},"og:type"),(0,n.jsx)("meta",{content:"summary_large_image",name:"twitter:card"},"twitter:card"),a&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("link",{rel:"canonical",href:a},"canonical"),(0,n.jsx)("meta",{property:"og:url",content:a},"og:url")]})]})}},77741:()=>{},87213:()=>{},87495:(e,t,i)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/docs/[docId]",function(){return i(95565)}])},88240:(e,t,i)=>{"use strict";i.d(t,{w:()=>n});var n=function(e){return e.PresentationsFromScratch="presentationsFromScratch",e.PresentationsFromNotes="presentationsFromNotes",e.EnhancePptOrPdf="enhancePptOrPdf",e.Websites="websites",e.SocialMedia="socialMedia",e.AiImages="aiImages",e.NotSure="notSure",e}({})},91140:(e,t,i)=>{"use strict";i.d(t,{j:()=>n});let n=i(55729).lazy(()=>Promise.all([i.e(6171),i.e(6374),i.e(5516),i.e(1707)]).then(i.bind(i,1707)).then(e=>({default:e.default})))},95565:(e,t,i)=>{"use strict";i.r(t),i.d(t,{EditorPage:()=>h,default:()=>m});var n=i(6029),s=i(6731),r=i(80264),o=i(9052),l=i(76596),a=i(31226),d=i(39358),c=i(14509),u=i(29608),x=i(11403);let h=()=>{let e=(0,x.En)(),t=(0,c.l)(),i=(0,o.hh)();return e&&i?(0,n.jsxs)(d.S,{children:[(0,n.jsx)(l.k,{noindex:!0,nofollow:!0}),(0,u.Xb)()?(0,n.jsx)(a.vn,{docEditorType:t}):(0,n.jsx)(a.UN,{docEditorType:t})]}):null},m=(0,s.h)((0,r.kU)(h))}},e=>{var t=t=>e(e.s=t);e.O(0,[2359,9235,883,521,8635,6953,1293,8213,7508,4909,7963,394,5088,4624,8375,3868,4003,5095,9462,5484,7652,4261,6500,2442,5129,9715,8066,557,8658,7424,4395,8286,3109,9811,2726,1979,6899,8209,7791,636,6593,8792],()=>t(87495)),_N_E=e.O()}]);
//# sourceMappingURL=[docId]-12a9b9535526bd53.js.map